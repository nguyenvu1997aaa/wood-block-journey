(function(){var e={468:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,l=0;c<s;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var h=3&a;h--;)r[l]=i.charCodeAt(l++);e(new Blob([r],{type:t||"image/png"}))}})},616:function(e,t,n){"use strict";n.d(t,{J:function(){return m},Z:function(){return v}});var i=n(95),a=n(82),s=n.n(a),r=n(61),o=n.n(r),c=n(123),l=n(38),h=n.n(l),u=function(){function e(){}return e.GetLangCode=function(e){return h()(e).call(e,0,2)},e}(),d=n(441),p=n(443),g=GameCore.Configs.Notification,f=g.GameTitle,m=(g.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),E=function(){function e(e){var t=this;this.facebook=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.requestTournamentAsync=function(){var e=(0,i.Z)(o().mark((function e(n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new d.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,s,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,c={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.attemptToAddShortcut=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!(i=n.lastCallCreateShortcut)||!(0,p.Gm)(+i)){e.next=12;break}return e.abrupt("return",!1);case 12:if(a=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:a}),s()(t=GameSDK.getSupportedAPIs()).call(t,"canCreateShortcutAsync")){e.next=17;break}return e.abrupt("return",!1);case 17:return e.next=19,GameSDK.canCreateShortcutAsync();case 19:if(!e.sent){e.next=37;break}return r=c._.SHORTCUT_CREATE,l=c._.SHORTCUT_CREATE_POPUP,this.isCalledCreateShortcut=!0,window.game.analytics.event(l),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.createShortcutAsync();case 29:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.attemptToSubscribeBot=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,s()(t=GameSDK.getSupportedAPIs()).call(t,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(n=e.t0,!(i=n.lastCallSubscribeBot)||!(0,p.Gm)(+i)){e.next=19;break}return e.abrupt("return",!1);case 19:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=c._.BOT_SUBSCRIBE,l=c._.BOT_SUBSCRIBE_POPUP,this.isCalledSubscribeBot=!0,window.game.analytics.event(l),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,this,[[2,40],[24,33]])})));return function(){return e.apply(this,arguments)}}(),t.matchPlayerAsync=function(){var e=(0,i.Z)(o().mark((function e(t,n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s()(a=GameSDK.getSupportedAPIs()).call(a,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return u.GetLangCode(GameSDK.getLocale()||"en")},t.injectTournament=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=8;break}return e.next=4,n.e(543).then(n.bind(n,635));case 4:t=e.sent.default,this.facebook.tournament=new t,e.next=9;break;case 8:this.facebook.tournament=new m;case 9:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.message,i=t.delayTime,e.next=5,FBInstant.scheduleNotificationAsync({title:f,minDelayInSeconds:i,description:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),v=E},433:function(e,t,n){"use strict";n.d(t,{Z:function(){return Je}});var i=n(127),a=n.n(i),s=n(38),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(80),l=n.n(c),h=n(82),u=n.n(h),d=function(e,t){return l()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},g=n(63),f=n.n(g),m=function(e,t,n){return f()(n).call(n,e)===t&&null!==e&&void 0!==e},E=function(e){return l()(e).call(e,m)},v={chunk:o,difference:d,shuffle:p,unique:E},S=n(100),A=n.n(S),T=n(261),y=n.n(T),I=y()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),C=y()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),O=y()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),l=a[o-1],h=A()(s=new Array(+c)).call(s,l);n.push.apply(n,h)}else n.push(a)}return n})),b=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return C(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),O(e).forEach((function(e){s++,a[r][s]=I(e,i)}))})),a},P=y()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),R=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var h=P(l,n);h===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+h,s=h}}return a=a.replace(/1([A-Z])/g,"$1")},w=function(e){try{return atob(e)}catch(t){return""}},x={decodeMap:b,encodeMap:R,hashToString:w,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},_=function(e){try{return JSON.parse(e)}catch(t){return null}},k=n(81),L=n.n(k),M=function(e){try{return L()(e,null,0)}catch(t){return""}},D=function(e){return _(M(e))},N={clone:D,decode:_,encode:M},B=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!B(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];B(i)&&(t[n]=e(i))}return t},U=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},H=n(79),Z=n.n(H),Y=function(e){var t={};return Z()(e).forEach((function(n){if(U(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},V=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(U(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},W={clear:F,hasOwn:U,invert:Y,keyBy:V},z=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(83),X=n.n(j),J=function(e){var t;return X()(t=Z()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(62),te=n.n(ee),ne=n(264),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(269),re=n.n(se),oe={capitalize:z,hashCode:K,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q,removeDiacritics:$,getShortName:ae,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},le=function(){return false},he=function(e){return"function"===typeof e},ue=function(e){return"number"===typeof e},de=function(e){var t;return f()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},ge=n(99),fe=n.n(ge),me=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(fe())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},Ee={isBoolean:ce,isDebugger:le,isFunction:he,isNumber:ue,isObject:B,isPropertyKey:de,isString:pe,isValueChangeAsync:me},ve=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},Se=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),l=c.context,h=Math.min(s,r)/100*a/2;return l.beginPath(),l.moveTo(0+h,0),l.lineTo(0+s-h,0),l.quadraticCurveTo(0+s,0,0+s,0+h),l.lineTo(0+s,0+r-h),l.quadraticCurveTo(0+s,0+r,0+s-h,0+r),l.lineTo(0+h,0+r),l.quadraticCurveTo(0,0+r,0,0+r-h),l.lineTo(0,0+h),l.quadraticCurveTo(0,0,0+h,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},Ae=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Te=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],s=atob(n[n.length-1]),r=s.length,o=new Uint8Array(r);r--;)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},ye=n(131),Ie=n.n(ye),Ce=new Image,Oe=function(e,t){return void 0===t&&(t=!0),new(fe())((function(n){t&&(Ce=new Image),Ce.onload=function(){n(Ce)},Ce.onerror=function(){n(null)},Ce.src=Ie().createObjectURL(e)}))},be=n(95),Pe=n(61),Re=n.n(Pe),we=function(){var e=(0,be.Z)(Re().mark((function e(t,n){var i;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(e){if(f()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},_e=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,h=void 0===l?-1:l,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,g=void 0===p?["","k","m","b","t","q"]:p,f=-1===h?99999999:h;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),E=Math.floor((m.toString().length-1)/c)+1,v=(e/Math.pow(Math.pow(10,c),E)).toFixed(a),S=f-g[E].length,A=v.substring(0,S);return(d?xe(A):A)+g[E]}var T=e.toFixed(a),y=f-g[0].length,I=T.substring(0,y);return d?xe(I):I+g[0]},ke={Array:v,Hash:x,Json:N,Object:W,String:oe,Valid:Ee,Image:{drawCircle:ve,drawBorder:Se,getImageScale:Ae,base64ToFile:Te,blobToHtmlImage:Oe,blobUrlToFile:we},Number:{toAbbreviatedString:_e,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(fe())((function(t){return setTimeout(t,e)}))}}},Le=n(94),Me=n(122),De={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1}},Ne={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1}},Be={ENV:"development",AppId:"405221927720733",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,PlayerDataStoreUsingApi:!1,Notification:{Enable:!1,DisableSendNotification:!0,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:500,EnableVibrate:!0,VibrateValue:[0,0,119,199,279,359,439],Progress:{BonusScore:1e3,Milestone:3},MaxGemInPiece:2,RatePieceContainGem:10},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"YANDEX-PlayerData.WoodBlockJourney",Game:{AutoResize:!0,PortraitRatio:450/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,AutoDropFps:!1,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!0,ShowMonitoring:!0,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:10,DelayNoThank:1e3,ContinueSingleMatchEnabled:!1,SingleMatchStore:"YANDEX-SingleMatch.WoodBlockJourney",JourneyMatchStore:"YANDEX-JourneyMatch.WoodBlockJourney",LivesStore:"lives",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}},Levels:[200,500,1e3,1500,2e3,2500,3e3,3600,4200,4800,5400,6e3,6700,7400,8100,8800,9500,10300,11100,11900,12700,13500,14400,15300,16200,17100,18e3],PieceRandoms:{maxPiece:200,measureError:.5}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[]},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"61811128f28777ad0ed05787",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:5,secondsBetweenAds:5},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},MagnetItem:{key:"magnet-item",scoreForOnePercent:4,maxMagnetPerMatch:5},Board:{cols:9,rows:9},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},DailyChallenge:{Prefix:"leaderboards",LeaderBoardId:"61e00146f28777ad0e328f2c"},Lives:{bonusDurationMins:5,bonusLife:1,livesCapacity:10},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Be=(0,Me.TS)((0,Le.Z)({},Be),Ne);var Ge=Be=(0,Me.TS)((0,Le.Z)({},Be),De),Fe=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},Ue=n(552),He=n.n(Ue),Ze=n(554),Ye=n.n(Ze),Ve=n(556),We=n.n(Ve),ze=n(198),Ke=!1,je=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name)){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return}var o=He()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],h=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(f()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ye()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ye()(a,e))))}));h.length<1||h.forEach((function(e){if(a){var t=Ye()(n,e);Ye()(a,e),We()(a,e,t)}}))}}}))},Xe={Configs:Ge,Utils:ke,LiveUpdate:{Scene:Fe,SceneObjects:function(e,t){return void 0===t&&(t=Ke),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Ke=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,ze.D)((function(){var e=c.children.getAll();je(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(l){}}}}};window.GameCore=Xe;var Je=Xe},625:function(e,t,n){"use strict";var i=n(95),a=n(18),s=n(61),r=n.n(s),o=n(450),c=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.INTERSTITIAL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.PRE_ROLL&&self.game.analytics.showPreRollAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=22;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 22:return e.prev=22,window.focus(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,16,22,25]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.REWARDED?4:e.t0===GameCore.Ads.Types.INTERSTITIAL||e.t0===GameCore.Ads.Types.PRE_ROLL?7:10;break;case 4:return e.next=6,n.getRewardedVideoAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getInterstitialAdAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},444:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return a},kL:function(){return i},qj:function(){return r},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},44:function(e,t,n){"use strict";var i=n(122),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},622:function(e,t,n){"use strict";var i=n(49),a=n(18),s=n(44),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},452:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},456:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:400,ease:n(124).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},624:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:400,ease:n(124).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},124:function(e,t,n){"use strict";var i=n(190),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},459:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},457:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},453:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:300,ease:n(124).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},458:function(e,t,n){"use strict";var i=n(18),a=n(44),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},455:function(e,t,n){"use strict";var i=n(96),a=n(49),s=n(18),r=n(123),o=n(456),c=n(98),l=n(201),h=n(199),u=function(e){function t(t,n,i,s,r,h){var u;return void 0===h&&(h=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e;u.isClicked||null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(n=u.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=h,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,h.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},451:function(e,t,n){"use strict";var i=n(49),a=n(18),s=n(97),r=n(452),o=s.Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,l.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(80,80),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=h},454:function(e,t,n){"use strict";var i=n(96),a=n(49),s=n(18),r=n(98),o=n(97).Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n,i,s,o,c){var l;return(l=e.call(this,t,n,i)||this).top=void 0,l.mid=void 0,l.bottom=void 0,l.payload=void 0,l.payload=c,l.setSize(s,o),l.setDepth(r.Z.POPUP),l.createPopup(),l.scene.add.existing((0,a.Z)(l)),l}(0,s.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.top=this.scene.add.image(0,0,c,l.POPUP_TOP),this.mid=this.scene.add.image(0,0,c,l.POPUP_MID),this.bottom=this.scene.add.image(0,0,c,l.POPUP_BOTTOM),this.add([this.top,this.mid,this.bottom])},n.updatePopupSize=function(){var e,t=(null==(e=this.payload)?void 0:e.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setWorldSize(this.width,t),this.bottom.setWorldSize(this.width,this.width*this.bottom.height/this.bottom.width),this.mid.setWorldSize(this.width,this.height-this.top.displayHeight-this.bottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.top,this,0,-this.mid.displayHeight/2-this.top.displayHeight/2),Phaser.Display.Align.In.Center(this.mid,this),Phaser.Display.Align.In.Center(this.bottom,this,0,this.mid.displayHeight/2+this.bottom.displayHeight/2)},n.setFrameTop=function(e,t,n){t||(t=this.top.displayWidth),n||(n=this.top.displayHeight),this.top.setFrame(e),this.top.setWorldSize(t,n)},(0,i.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container);t.Z=h},621:function(e,t,n){"use strict";var i=n(94),a=n(96),s=n(49),r=n(18),o=n(125),c=n.n(o),l=n(83),h=n.n(l),u=n(100),d=n.n(u),p=n(80),g=n.n(p),f=n(38),m=n.n(f),E=n(127),v=n.n(E),S=n(101),A=n.n(S),T=n(203),y=n.n(T),I=n(98),C=n(198);function O(e,t){var n="undefined"!==typeof A()&&y()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return b(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return v()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,C.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var l=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,l)}var h=a*o,u=r.maxScrollOver*r.height;r.value+h>r.marginTop+u?r.value=r.marginTop+u:r.value+h<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=h,r.callOnScrollEvents(r.value,h)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var n=h()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5,useMask:!0},n);var o=n.width,l=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){this.drawDebugBox(16711680,.8)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return g()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),i&&(this.boundTop.setTint(i),this.boundBottom.setTint(i)),this.boundTop.setAlpha(0,0,0,0),this.boundBottom.setAlpha(0,0,0,0),this.boundTop.setDepth(I.Z.PRIORITY),this.boundBottom.setDepth(I.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.config.useMask&&this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=O(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},98:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:999,PRIORITY:80,DEBUG:90,DICE:99,PIECE:99,ON_TOP:1e4}},461:function(e,t){"use strict";t.Z={min:18,max:60}},449:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"font-main",TEXTURE:"./assets/fonts/primary.png",DATA:"./assets/fonts/primary.xml"},PRIMARY_LIGHT:{KEY:"font-main-light",TEXTURE:"./assets/fonts/primary-light.png",DATA:"./assets/fonts/primary-light.xml"},NUMBER_LIGHT:{KEY:"number-light",TEXTURE:"./assets/fonts/number-light.png",DATA:"./assets/fonts/number-light.xml"},NUMBER_DARK:{KEY:"number-dark",TEXTURE:"./assets/fonts/number-dark.png",DATA:"./assets/fonts/number-dark.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',FONT_FAMILY_ARIAL:"Arial"}},442:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE_LANDSCAPE:"./assets/images/"+n+"x/background-landscape.jpg",FILE_PORTRAIT:"./assets/images/"+n+"x/background-portrait.jpg",CONFIG:{}}};t.Z=i},97:function(e,t,n){"use strict";var i=n(94),a=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",BUTTON_BROWN:"brown"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/default-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/default-resources.json",URL:"./assets/textures/"+a+"x{langcode}/",FRAME:{BLANK:"blank",LOGO:"logo",TEXT_LOADING:"loading",BORDER_BOTTOM_PANEL:"border-bottom-panel",BOTTOM_PANEL:"bottom-panel",BOTTOM_LINE:"bottom-line",GLARE:"glare",TITLE_YOUR_SCORE:"title-your-score",BG_YOUR_SCORE:"bg-your-score",LEAF:"leaf",BEST_SCORE_FRAME:"best-score-frame",BEST_SCORE_FRAME_LONG:"best-score-frame-long",FOOTER:"footer",SCORE_PANEL:"score-panel",SCORE_PANEL_DARK:"score-panel-dark",BG_PROGRESS_CIRCLE:"bg-progress-circle",BG_TEXT_TARGET_PANEL:"text-target-panel",WOOD_PANEL:"wood-panel",BORDER_DAILY:"border-daily",BG_STREAK:"bg-streak",BG_COMBO:"bg-combo",LEVEL_PLAYED:"bg/level-played",LEVEL_PLAYING:"bg/level-playing",LEVEL_LOCKED:"bg/level-locked",BG_DARK:"bg/bg-dark",BG_TOP:"bg/bg-top",BG_MIDDLE:"bg/bg-middle",BG_BOTTOM:"bg/bg-bottom",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_TOP:"leaderboards/bg-top",LEADERBOARD_BG_MIDDLE:"leaderboards/bg-middle",LEADERBOARD_BG_BOTTOM:"leaderboards/bg-bottom",LEADERBOARD_BG_ITEM:"leaderboards/bg-item",LEADERBOARD_BORDER_LEFT:"leaderboards/border-left",LEADERBOARD_BORDER_RIGHT:"leaderboards/border-right",PREFIX_LEADERBOARD_BG_ITEM:"leaderboards/bg-item-",PREFIX_LEADERBOARD_BG_ITEM_0:"leaderboards/bg-item-0",AVATAR_BORDER:"avatar/border",AVATAR_BORDER_BIG:"avatar/border-big",AVATAR_BORDER_CHALLENGE:"avatar/border-challenge",AVATAR_BACKGROUND:"avatar/background",POPUP_TOP:"popup/top",POPUP_TOP_DARK:"popup/top-dark",POPUP_MID:"popup/middle",POPUP_BOTTOM:"popup/bottom",POPUP_CONTENT_BACKGROUND:"popup/background",POPUP_SCORE_PANEL:"popup/score-panel",ICON_ADS:"icons/flat-ad",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_RANK:"icons/rank",ICON_PLAY:"icons/play",ICON_I_PLAY:"icons/i-play",ICON_PLAY_GREEN:"icons/play-green",ICON_SHARE:"icons/share",ICON_INVITE:"icons/invite",ICON_FLAG:"icons/milestone",ICON_BROWN_JOURNEY:"icons/brown-journey",ICON_WHITE_JOURNEY:"icons/white-journey",ICON_SWORD:"icons/sword",ICON_SWORD_BLUE:"icons/sword-blue",ICON_SETTING:"icons/setting",ICON_REPLAY:"icons/replay",ICON_RETRY:"icons/retry",ICON_HOME:"icons/home",ICON_BACK:"icons/back",ICON_BATTLE:"icons/battle",ICON_CUP:"icons/cup",ICON_SHARE_BLUE:"icons/share-blue",ICON_CROWN:"icons/crown",ICON_CROWN_BIG:"icons/crown-big",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/icon-daily",ICON_JOURNEY:"icons/icon-journey",ICON_JOURNEY_2:"icon-journey",ICON_DOT_RED:"icons/dot",ICON_STAR:"icons/star",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",BUTTON_CLOSE:"buttons/close",BUTTON_RED:"buttons/red",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SMALL:"buttons/blue-small",BUTTON_BLUE_MEDIUM:"buttons/blue-medium",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_BIG:"buttons/green-big",BUTTON_DARK_BLUE:"buttons/dark-blue",BUTTON_DARK_BLUE_BIG:"buttons/dark-blue-big",BUTTON_BROWN:"buttons/brown",BUTTON_GREEN_LARGE:"buttons/green-large",BUTTON_PLAY:"buttons/play",BUTTON_RANDOM:"buttons/random",BUTTON_CHALLENGE_LIGHT:"buttons/challenge_light",BUTTON_SHARE_DARK:"buttons/share",BUTTON_MINOR:"buttons/minor",BUTTON_CIRCLE:"buttons/circle-button",BUTTON_TOGGLE_OFF:"buttons/toggle-off",BUTTON_TOGGLE_ON:"buttons/toggle-on",BUTTON_DARK_BLUE_SMALL:"buttons/dark-blue-small",BUTTON_DOT_BLUE:"buttons/dot-blue",BUTTON_DOT_GREEN:"buttons/dot-green",BUTTON_SKIP:"buttons/skip",DAILY_BORDER:"daily-challenge/border",DAILY_BACKGROUND:"daily-challenge/bg",DAILY_TITLE_PANEL:"daily-challenge/title-panel",DAILY_BORDER_TOP:"daily-challenge/top-panel",DAILY_BORDER_MIDDLE:"daily-challenge/middle-panel",DAILY_BORDER_BOTTOM:"daily-challenge/bottom-panel",DAILY_BG_ITEM_LIGHT:"daily-challenge/bg-item-light",DAILY_BG_ITEM_DARK:"daily-challenge/bg-item-dark",DAILY_BG_TIME:"daily-challenge/time-panel",NO_THANK_TEXT:"texts/no-thank",TEXT_SECOND_CHANGE:"texts/second-chance",TEXT_VS:"texts/vs",TEXT_LOSE:"texts/lose",TEXT_WIN:"texts/win",TEXT_DRAW:"texts/draw",TEXT_CONTINUE:"texts/continue",TEXT_LEADER_BOARD:"texts/leader-board",TEXT_WORLD:"texts/world",TEXT_WORLD_DISABLE:"texts/world-disable",TEXT_FRIENDS:"texts/friends",TEXT_FRIENDS_DISABLE:"texts/friends-disable",TEXT_PLAY_WITH:"texts/play-with",TEXT_PLAY_WITH_BLUE:"texts/play-with-blue",TEXT_JOURNEY:"texts/text-journey",TEXT_SETTING:"texts/setting",TEXT_OFF:"texts/off",TEXT_ON:"texts/on",TEXT_REPLAY:"texts/replay",TEXT_YOUR_SCORE:"texts/your-score",TEXT_WAITING_OPPONENT:"texts/waiting-for-opponent",TEXT_SINGLE:"texts/play-single",TEXT_RETRY:"texts/text-retry",TEXT_LEVEL_FAIL:"texts/level-failed",TEXT_CONGRATULATION:"texts/congratulations",TEXT_NEXT_LEVEL:"texts/text-next-level",TEXT_START_OVER:"texts/start-over",TEXT_SHARE_BLUE:"texts/text-share",TEXT_PLAY:"texts/play",TEXT_MISSION:"texts/mission",TEXT_NEXT_MILESTONE:"texts/next-milestone",TEXT_FIRST_MILESTONE:"texts/first-milestone",TEXT_COLLECT:"texts/collect",TEXT_TARGET_SCORE:"texts/target-score",TEXT_YES:"texts/yes",TEXT_NO:"texts/no",TEXT_TUTORIAL:"texts/text-tutorial",TEXT_DAILY_CHALLENGE:"texts/daily-challenge",TEXT_START:"texts/start",TEXT_RESULT:"texts/result",TEXT_RANKING:"texts/text-ranking",TEXT_NEW_BEST:"texts/new-best",TEXT_INVITE_FRIENDS:"texts/invite-friends",TEXT_KEEP_PLAYING:"texts/keep-playing",TEXT_OUT_OF_LIVE:"texts/out-of-live",TEXT_REFILL_LIVES:"texts/refill-lives",LIVES_HEART:"lives/heart",LIVES_TIME_BLOCK:"lives/time-block",LIVES_TIME_BLOCK_2:"lives/time-block-2",PANEL_BEST_SCORE:"ui-ngang/khung-best-score",PANEL_MISSION:"ui-ngang/khung-mission",PANEL_NEXT_BLOCK:"ui-ngang/khung-next-block",PANEL_SCORE:"ui-ngang/khung-score",TEXT_NEXT_BLOCK:"ui-ngang/text-next-block",TEXT_SCORE:"ui-ngang/text-score",TEXT_MISSION_LANDSCAPE:"ui-ngang/text-mission"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x{langcode}/effects-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/effects-resources.json",FRAME:{BLANK:"blank",GLOW_CIRCLE:"glow-circle",GLARE_CROSS:"glare-cross",DUST:"dust",DUST_YELLOW:"dust-yellow",FX_STAR:"star",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_CONFETTI_RIBBON:"ribbon",TEXT_COOL:"text/text_cool",TEXT_EXCELLENT:"text/text_excellent",TEXT_GOOD:"text/text_good",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BG_SCORE:"bg-score",BG_MAIN_SCORE:"bg-main-score",BOARD:"board",VIOLET_GLOW:"violet-glow",MASK:"mask",FLAG:"flag",DUST:"dust",CUP_GLARE:"cup-glare",HAND:"hand",AVATAR_BORDER:"avatars/border",AVATAR_BACKGROUND:"avatars/background",ICON_SETTING:"icons/setting",ICON_CUP:"icons/cup",ICON_CHECK:"icons/check",ICON_STAR:"icons/star",ICON_STAR_1:"icons/star-1",ICON_HOME:"icons/home",ICON_ADD_FRIEND:"icons/add-friends",ICON_BATTLE:"icons/battle",TEXT_NEXT_LEVEL:"text/next-level",BUTTON_WOOD_SMALL:"buttons/wood-small",BUTTON_SKIP:"buttons/button-skip",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",PROGRESS_BAR_RIGHT_WHITE:"progress/bar-right-white"}},GAMEPLAY_32:{KEY:"gameplay-32-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-32-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-32-resources.json",FRAME:{GEM:"gem/gem",GEM_LIGHT:"gem/gem_light",GEM_SILVER:"gem/gem_silver",GEM_TRANSPARENT:"gem/gem_transparent",GEM_WHITE:"gem/gem_white",GEM_GLARE:"gem/gem_glare",GEM_HIGHT_LIGHT:"gem/gem_highlight",GEM_DIAMOND_10:"gem/diamond/diamond-10",GEM_DIAMOND_11:"gem/diamond/diamond-11",GEM_DIAMOND_12:"gem/diamond/diamond-12",GEM_DIAMOND_13:"gem/diamond/diamond-13",GEM_DIAMOND_14:"gem/diamond/diamond-14",GEM_DIAMOND_15:"gem/diamond/diamond-15",GEM_DIAMOND_10_LIGHT:"gem/diamond/diamond-10_light",GEM_DIAMOND_11_LIGHT:"gem/diamond/diamond-11_light",GEM_DIAMOND_12_LIGHT:"gem/diamond/diamond-12_light",GEM_DIAMOND_13_LIGHT:"gem/diamond/diamond-13_light",GEM_DIAMOND_14_LIGHT:"gem/diamond/diamond-14_light",GEM_DIAMOND_15_LIGHT:"gem/diamond/diamond-15_light",GEM_RUBY_20:"gem/ruby/ruby-20",GEM_SAPPHIRE_30:"gem/sapphire/sapphire-30",BLOCK_GRADIENT_PREFIX:"gem/block_gradient/block_color"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},200:function(e,t,n){"use strict";n.d(t,{Co:function(){return s},K5:function(){return r}});var i=n(101),a=n.n(i),s={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",LEVEL_SCENE:"LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:a()("SWITCH"),LAUNCH:a()("LAUNCH"),RUN:a()("RUN")};!function(e){e[e.SCENE=0]="SCENE",e[e.POPUP=1]="POPUP"}({})},448:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={ALERT_SCREEN:"ALERT_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",TUTORIAL_PLAY_SCREEN:"TUTORIAL_PLAY_SCREEN",LEADER_BOARD_SCREEN:"LEADER_BOARD_SCREEN",MINI_JOURNEY_SCREEN:"MINI_JOURNEY_SCREEN",DAILY_CHALLENGE_SCREEN:"DAILY_CHALLENGE_SCREEN",YOUR_SCORE_SCREEN:"YOUR_SCORE_SCREEN",LEVEL_SCREEN:"LEVEL_SCREEN",MISSION_SCORE_COMPLETE_SCREEN:"MISSION_SCORE_COMPLETE_SCREEN",MISSION_COLLECTION_COMPLETE_SCREEN:"MISSION_COLLECTION_COMPLETE_SCREEN",MISSION_FAIL_SCREEN:"MISSION_FAIL_SCREEN",COLLISION_COMPLETED_SCREEN:"COLLISION_COMPLETED_SCREEN",NO_SPACE_LEFT_SCREEN:"NO_SPACE_LEFT_SCREEN",SCORE_REACHED_SCREEN:"SCORE_REACHED_SCREEN",NEXT_TARGET_SCORE_SCREEN:"NEXT_TARGET_SCORE_SCREEN",COLLECTION_ITEMS_SCREEN:"COLLECTION_ITEMS_SCREEN",TARGET_SCORE_SCREEN:"TARGET_SCORE_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",CLAIM_HEART_SCREEN:"CLAIM_HEART_SCREEN",START_OVER_SCREEN:"START_OVER_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},201:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",GAME_OVER_SCENE:"game_over_scene",GAME_OVER:"game_over",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNT:"score_count",PIECE_PICK:"piece_pick",PIECE_DROP:"piece_drop",PIECE_INVALID_MOVE:"piece_invalid_move",BOARD_GAME_OVER:"board_end",RESCUE_TIME:"rescue_timer",EAT_BLOCK:"eat_block",GOOD:"good",COOL:"cool",EXCELLENT:"excellent",SCORE_REACHED:"reach_score",TARGET_REACHED:"reach_goal",WAIT_OPPONENT:"wait_opponent",WIN:"win",LOSE:"lose",DRAW:"draw",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small"}},623:function(e,t,n){"use strict";var i=n(49),a=n(18),s=n(97),r=n(122),o=s.Z.EFFECTS,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=h},460:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(18),a=n(80),s=n.n(a),r=n(123),o=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),c=n(446),l=n(461),h=n(200),u=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen(),t.scaleGame()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getWorldSize(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){var e=this;this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(c.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone();var t=GameCore.Configs.Game;this.events.on(Phaser.Scenes.Events.UPDATE,(function(){t.AutoDropFps&&e.autoUpdateFPS()}))},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new o(this,t,n)},n.autoUpdateFPS=function(){this.allowUpdateFPS()&&(this.tweenPlaying()||this.particlePlaying()?this.game.updateFps(l.Z.max):this.game.updateFps(l.Z.min))},n.allowUpdateFPS=function(){return this.scene.key===h.Co.GAME_SCENE||this.scene.key===h.Co.JOURNEY_SCENE},n.tweenPlaying=function(){for(var e=this.tweens.getAllTweens(),t=0;t<e.length;t++)if(e[t].isPlaying())return!0;return!1},n.particlePlaying=function(){var e=this.getAllParticles();if(!e)return!0;var t=!1;return e.forEach((function(e){e.emitters.list.forEach((function(e){e.alive&&e.alive.length>0&&(t=!0)}))})),t},n.getAllParticles=function(){if(this.input.enabled&&this.scene.isActive()&&!this.scene.isPaused()){var e=this.children.list;return!e||e.length<=0?[]:s()(e).call(e,(function(e){return"ParticleEmitterManager"===e.type}))}},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return e/2.4},n.createBackground=function(e,t,n,i){try{this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)}catch(o){}},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},450:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(96),a=n(18),s=n(62),r=n.n(s),o=(n(459),n(457)),c=n(97),l=n(200),h=n(448),u=n(447),d=(0,n(445).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(199),g=n(460),f=n(49),m=n(449),E=n(98),v=c.Z.DEFAULT,S=v.KEY,A=v.FRAME,T=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(E.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:S,frame:A.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),y=T,I=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(E.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:m.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=I,O=n(453),b=n(458),P=n(455),R=n(454),w=n(201),x=c.Z.DEFAULT,_=x.KEY,k=x.FRAME,L=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.buttonNo=void 0,s.buttonYes=void 0,s.messageText=void 0,s.messageText2=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onHandleYes=void 0,s.open=function(t){e.prototype.open.call((0,f.Z)(s),t),s.setVisible(!0);var n=s.getData(["message","onHandleYes"]),i=n[0],a=void 0===i?"":i,r=n[1];s.setTextMessage(a),s.onHandleYes=r,s.runOpenAnimation()},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleNo=function(){s.close()},s.handleYes=function(){s.onHandleYes&&s.onHandleYes(),s.close()},s.setVisible(!1),s.setDepth(h.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,a.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new R.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMessage(),this.createMessage2(),this.createButtonNo(),this.createButtonYes(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.messageText2,this.buttonNo,this.buttonYes])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:_,frame:k.TEXT_TUTORIAL}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=new P.Z(this.scene,_,k.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.Center(a,this.title,155,-19),Phaser.Display.Align.In.Center(t,this.title,0,10),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createButtonNo=function(){this.buttonNo=new P.Z(this.scene,_,k.BUTTON_DARK_BLUE,120,40),this.buttonNo.setName("No");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:_,frame:k.TEXT_NO}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonNo.add(t),Phaser.Display.Align.In.Center(t,this.buttonNo),this.popup.add(this.buttonNo),Phaser.Display.Align.In.Center(this.buttonNo,this.popup,80,60),this.buttonNo.onClick=this.handleNo},n.createButtonYes=function(){this.buttonYes=new P.Z(this.scene,_,k.BUTTON_GREEN_LARGE,120,40),this.buttonYes.setName("Yes");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:_,frame:k.TEXT_YES}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonYes.add(t),Phaser.Display.Align.In.Center(t,this.buttonYes),this.popup.add(this.buttonYes),Phaser.Display.Align.In.Center(this.buttonYes,this.popup,-80,60),this.buttonYes.onClick=this.handleYes},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:m.Z.PRIMARY.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5}}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-40),this.messageText.setScale(0).setAlpha(0)},n.createMessage2=function(){this.messageText2=this.scene.make.text({style:{fontFamily:m.Z.FONT_FAMILY,fontSize:this.scene.fontSize(45)+"px"},origin:{x:.5,y:.5}}),this.messageText2.setTint(7551258),this.messageText2.setVisible(!1),this.popup.add(this.messageText2),Phaser.Display.Align.In.Center(this.messageText2,this.popup,0,-40),this.messageText2.setScale(0).setAlpha(0)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new o.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setTextMessage=function(e){this.messageText.setText(""+e),"ar"==this.scene.facebook.getLocale()&&(this.messageText2.setText(""+e),this.messageText2.setVisible(!0),this.messageText.setVisible(!1))},n.runOpenAnimation=function(){this.scene.audio.playSound(w.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new b.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new O.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),M=L,D=n(83),N=n.n(D),B=n(451),G=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.countDownTween=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(h.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i,a=this;e.prototype.open.call(this,t);var s=this.getData(["message","duration","loading","countDown"]),r=s[0],o=void 0===r?"":r,c=s[1],l=void 0===c?0:c,h=s[2],u=void 0!==h&&h,d=s[3],p=void 0!==d&&d;null==(n=this.countDownTween)||n.remove(),p?(this.setMessage(o,[Math.round(l/1e3)]),this.countDownTween=this.scene.tweens.addCounter({from:l,to:0,duration:l,onUpdate:function(e){var t=e.getValue();a.setMessage(o,[Math.round(t/1e3)])}})):this.setMessage(o),this.showLoading(u),null==(i=this.closeTimerEvent)||i.remove(),l>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:l,callback:function(){a.visible&&a.scene.screen.close(a.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new B.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(40),font:m.Z.PRIMARY_LIGHT.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e,t){this.messageText.setText(this.printf(e,t))},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new O.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},n.printf=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 0===n.length?e:N()(n).call(n,(function(e,t){return e.replace(/%s|%v|%d|%f|%d/,t)}),e)},t}(GameCore.Screen),F=G,U=c.Z.DEFAULT,H=U.KEY,Z=U.FRAME,Y=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.switch(e)},n.runScene=function(e){n.currentScene.run(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;t!==l.Co.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;t!==l.Co.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addAlertScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,F);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addAlertScreen=function(){var e=this.screen.add(h.o4.ALERT_SCREEN,M);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:H,frame:Z.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new y(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){},n.runMaskFadeOutAnimation=function(){},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K5.SWITCH,this.switchScene),this.events.on(l.K5.RUN,this.runScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.Co.GLOBAL_SCENE&&this.storage.dispatch((0,u.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=d(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),V=Y},575:function(e,t,n){"use strict";var i=n(199),a=n(440),s=n(94),r=n(95),o=n(18),c=n(99),l=n.n(c),h=n(61),u=n.n(h),d=n(616),p=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,s,e,t);l.setName("Debug Box"),l.setDepth(r);var h=GameCore.Utils.Valid.isNumber;return h(o)&&h(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),g=p,f=n(62),m=n.n(f),E=n(82),v=n.n(E),S=GameCore.Configs.Ads.Mockup.GiphyApiKey,A=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(n=document.getElementById("mock-banner-ads"))){e.next=11;break}if((i=n.getElementsByTagName("img"))&&!(i.length<=0)){e.next=8;break}return e.abrupt("return");case 8:i[0].src=t,e.next=27;break;case 11:(a=document.createElement("div")).id="mock-banner-ads",a.style.width="100%",a.style.height="50px",a.style.bottom="var(--sab)",a.style.position="fixed",a.style.background="#fff url("+t+") center center/auto no-repeat",a.style.outline="2px solid #ffffff40",a.style.outlineOffset="-2px",s=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(s),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",s.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),a.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(a);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+S+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(i=e.sent,GameCore.Utils.Valid.isObject(i)){e.next=9;break}return e.abrupt("return","");case 9:return a=i.data,s=Math.floor(Math.random()*a.length),e.abrupt("return",a[s].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),T={LOADED:"loaded",DISPLAYED:"displayed"},y=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(y||{}),I=y,C=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e}(C||{}),O=C,b=n(620),P=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),R=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=I.IDLE};GameCore.Ads={Types:O,Status:I,Events:T,AdError:P,AdInstance:R};var w=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(O.INTERSTITIAL,i.pID),this.rewardedVideo=new e(O.REWARDED,n.pID),this.preRoll=new e(O.PRE_ROLL,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(O.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new P("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(O.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(O.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(O.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(O.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new P("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(O.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(T.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==O.INTERSTITIAL&&t!==O.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===O.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.prev=7,e.next=10,n.showAsync();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7);case 15:this.events.emit(T.DISPLAYED,t);case 16:case"end":return e.stop()}}),e,this,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case O.INTERSTITIAL:return this.interstitial;case O.REWARDED:return this.rewardedVideo;case O.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.showBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n,this.bannerAdConfig),this.reloadBannerAdIntervals[n]=setInterval((function(){a.loadBannerAdAsync(n,a.bannerAdConfig)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n,this.bannerAdConfig),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,A.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t,n);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,A.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){var e;if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;if(!v()(e=this.bannerAdConfig.position).call(e,"bottom"))return 0;var t=(this.bannerAdConfig||{}).bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},t}(Phaser.Plugins.BasePlugin),x=w,_=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowPreRollAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:_};var k=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),L=k,M=n(463),D=n.n(M),N=n(79),B=n.n(N),G=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(D()),this.soundKeys=new(D())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;B()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,s.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(o)try{this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),F=G,U=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,s.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){}},e}(),H=U,Z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new H(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new F(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,s.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),Y=Z,V=n(96),W="AUTH_TOKEN_REQUEST",z="AUTH_TOKEN_RECEIVED",K=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),j=n(445),X="auth",J=(0,j.P1)([function(e){return e[X].token}],(function(e){return e})),q=(0,j.P1)([function(e){return e[X].isRequesting}],(function(e){return e})),Q=function(e){return{type:z,payload:{token:e}}},$=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,s=n(),r=J(s),!q(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:W,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(Q(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(Q("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new K);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return J(this.state)},(0,V.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ee=$,te=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var e,n;e=this.width*t,n=this.height*t,Math.floor(n/2),Math.floor(e/2)},n.src=e},ne=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=B()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.prev=5,e.next=8,this.loadImages();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(l())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],s=a.name,r=a.image;if(r)e.scene.textures.get(s).key!==s&&e.scene.load.image(s,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(a),h=l.getSourceImage(s);"__MISSING"===l.key&&c&&(h=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(h,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&te(e),e},t}(Phaser.Plugins.ScenePlugin),ie=ne,ae={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},se=n(80),re=n.n(se),oe=n(125),ce=n.n(oe),le=ae.sound,he=ae.music,ue=ae.vibrate,de=ae.language,pe=ae.theme,ge=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:le,this.music=GameCore.Utils.Valid.isBoolean(i)?i:he,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:ue,this.language=GameCore.Utils.Valid.isString(s)?s:de,this.theme=GameCore.Utils.Valid.isString(r)?r:pe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),fe=ge,me=GameCore.Utils,Ee=me.Valid,ve=me.Object,Se=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,s.Z)({},ae),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==Ee.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==Ee.isObject(t)){var n=new fe(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==Ee.isObject(t)){if(ve.hasOwn(t,"coins")&&Ee.isNumber(t.coins)&&(this.gameData.coins=t.coins),ve.hasOwn(t,"diamond")&&Ee.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),ve.hasOwn(t,"lastReceiveGift")&&Ee.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),ve.hasOwn(t,"dailyRewarded")&&Ee.isObject(t.dailyRewarded)){var n=t.dailyRewarded;ve.hasOwn(n,"lastRewarded")&&Ee.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),ve.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(ve.hasOwn(t,"dailyTasks")&&Ee.isObject(t.dailyTasks)){var i=t.dailyTasks;ve.hasOwn(i,"startedTime")&&Ee.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),ve.hasOwn(i,"logTasks")&&Ee.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==Ee.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),Ae=Se,Te=n(81),ye=n.n(Te),Ie=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Ce=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Oe=n(443),be=GameCore.Configs,Pe=be.AppId,Re=be.Network,we=function(e){if(!e.ok)throw new Ie(null,{response:e})},xe=function(){var e=window.game.auth.getToken();return{token:e,timeout:Re.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},_e=function(e,t,n,i){return(0,r.Z)(u().mark((function a(){var s,r,o,c,l;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+Pe+"/"+t,r=new AbortController,n.signal=r.signal,o=setTimeout((function(){r.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=ye()(i)),a.next=8,fetch(s,n);case 8:return c=a.sent,clearTimeout(o),we(c),a.next=13,c.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return l=a.t0,a.abrupt("return",l);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof Ie)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new Ce(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},ke=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof Ce&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,Oe.qZ)(600);case 10:return e.next=12,ke(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof Ce)){e.next=20;break}return e.abrupt("return",{});case 20:return e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(){var e=(0,r.Z)(u().mark((function e(t,n,i,a){var r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===a&&(a=Re.Retries),e.prev=2,r=(0,s.Z)({},xe(),n,{method:"GET"}),o=_e(i,t,r),e.next=7,ke(o,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Me=function(){var e=(0,r.Z)(u().mark((function e(t,n,i,a,r){var o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===i&&(i={}),void 0===r&&(r=Re.Retries),e.prev=2,o=(0,s.Z)({},xe(),i,{method:"POST"}),c=_e(a,t,o,n),e.next=7,ke(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}(),De=GameCore.Configs.ApiHost,Ne=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me("players?platform=ms-games",t,{},De,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me("players/"+t+"/user-guide-displays/inc",{},{},De);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge="PLAYER_RECEIVED",Fe="PLAYER_DATA_UPDATE",Ue="PLAYER_SCORE_UPDATE",He="PLAYER_PROFILE_UPDATE",Ze="PLAYER_SETTING_UPDATE",Ye="PLAYER_CONNECTED_PLAYERS_UPDATE",Ve=n(441),We=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),ze=n(38),Ke=n.n(ze),je="player",Xe=(0,j.P1)([function(e){return e[je]}],(function(e){return e})),Je=(0,j.P1)([Xe],(function(e){return e.playerId})),qe=(0,j.P1)([Xe],(function(e){return e.ASID})),Qe=(0,j.P1)([function(e){return e[je].data}],(function(e){return e})),$e=((0,j.P1)([Qe],(function(e){return e.settings})),(0,j.P1)([function(e){return e[je].connectedPlayers}],(function(e){return e}))),et=(0,j.P1)([$e,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=B()(e);return Ke()(i).call(i,n,t+n)||[]})),tt=(0,j.P1)([Qe],(function(e){return e.score})),nt=(0,j.P1)([Qe],(function(e){return e.customFields})),it=GameCore.Configs,at=it.AppId,st=it.Tutorial,rt=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:Ge,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},ot=function(e){return{type:Ye,payload:{connectedPlayers:e}}},ct=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:Ze,payload:{name:e,value:t}});case 3:r=s(),o=Qe(r),c=new Ae({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},lt=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,a(ut(o));case 4:c=s(),l=Qe(c),h=new Ae({}).convertToFacebookData(l),FBInstant.player.setDataAsync(h),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof We)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},ht=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(ut(s));case 4:r=a(),o=Qe(r),c=new Ae({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof We)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},ut=function(e){return{type:Fe,payload:{data:e}}},dt=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Ue,payload:{score:e}});case 3:Ne({score:e}),s=a(),r=Qe(s),o=new Ae({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},pt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!st.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(ut({userGuideDisplays:1}));case 5:a=n(),s=Je(a),r=Qe(a),o=new Ae({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),Be(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(rt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),s=Xe(a),r=s.playerId,o=s.name,c=s.photo,l=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return h=e.sent,d={appId:at,playerId:r,name:o,photo:c,locale:l,ASID:h},e.next=10,t({type:He,payload:{profile:d}});case 10:return e.next=12,Ne(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(ct(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(lt(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ht(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game.facebook,e.next=4,new(l())((function(e,t){a.once("players",(function(t){e(t)})),a.once("playersfail",(function(){return t([])})),a.getPlayers()}));case 4:if(s=e.sent,r=function(e){return!!e},o=re()(n=ce()(s).call(s,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Ve.Z(t,n,i).toObject():null}))).call(n,r),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(ot(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,i.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ot(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Xe(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return qe(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ae,e)?ae[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return tt(this.state)},n.getCustomData=function(e){var t=nt(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return $e(this.state)},n.getConnectedPlayerIds=function(e,t){return et(this.state,{limit:e,offset:t})},(0,V.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),gt=pt,ft=GameCore.Configs.ApiHost,mt=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,Le("players?"+n,{},ft);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Et="PROFILES_DATA_UPDATE",vt="profile",St=(0,j.P1)([function(e){return e[vt].data}],(function(e){return e})),At=(0,j.P1)([function(e){return e[vt].profileIds}],(function(e){return e})),Tt=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a(),r=At(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,mt({playerIds:o});case 8:c=t.sent,n({type:Et,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},yt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Tt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return St(this.state)},(0,V.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),It=yt,Ct=n(63),Ot=n.n(Ct),bt=n(207),Pt=n.n(bt),Rt=["player","match"],wt="null",xt=GameCore.Configs.Rollbar,_t=xt.UseMockup,kt=xt.FilterError,Lt=xt.ListPlayerDevIds,Mt=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){_t&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;s&&n.events.push(s);var r=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,r);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+ye()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=kt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(Ot()(i).call(i,t)>=0)return!1;if(Ot()(a).call(a,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var s=e.name,r=kt.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(Ot()(o).call(o,s)>=0)return!1;if(Ot()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=kt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(Ot()(i).call(i,t)>=0)return!1;if(Ot()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,s=(0,a.Z)(e,Rt);n.rollbar.configure({payload:{player:t,match:i,other:s}})}catch(r){}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(Pt())({accessToken:wt,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();v()(Lt).call(Lt,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&this.enable&&this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t))},t}(Phaser.Plugins.BasePlugin),Dt=Mt,Nt=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Bt=Nt,Gt=n(123),Ft=n(446),Ut=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),s.registerEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Gt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Ht=Ut,Zt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=Ht,GameCore.Screens={Events:Zt};var Yt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Bt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Vt=Yt,Wt=n(388),zt=n.n(Wt),Kt=n(617),jt=n(618),Xt=n(444),Jt=n(619),qt={currentSceneKey:"",prevSceneKey:""};(0,Jt.pV)();var Qt,$t,en,tn,nn,an,sn,rn,on,cn,ln,hn={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},un=hn,dn={data:{}},pn={token:"",isRequesting:!1},gn=(Qt={},Qt[X]=function(e,t){return void 0===e&&(e=pn),(0,Jt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case W:e.isRequesting=!0;break;case z:e.token=i,e.isRequesting=!1}}}))},Qt),fn=n(122),mn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:ae,userGuideDisplays:0,customFields:{}},isUserNew:!0},En=($t={},$t[je]=function(e,t){return void 0===e&&(e=mn),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,l=i.connectedPlayers,h=void 0===l?[]:l,u=i.profile;switch(t.type){case Ge:var d=i.playerId,p=i.name,g=i.photo,f=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=g,n.locale=f,GameCore.Utils.Valid.isObject(m)){var E=m;n.data=(0,fn.TS)(e.data,E)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case He:var v=u.playerId,S=u.name,A=u.photo,T=u.locale,y=u.ASID;n.ASID=y,n.playerId=v,n.name=S,n.photo=A,n.locale=T;break;case Ue:n.data.score=c;break;case Ze:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Fe:n.data=(0,fn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case Ye:if(h.length<=0)break;var I=GameCore.Utils.Object.keyBy(h,"playerId");n.connectedPlayers=(0,fn.TS)(e.connectedPlayers,I)}}}))},$t),vn=n(576),Sn=n.n(vn),An={data:{},profileIds:[]},Tn=(en={},en[vt]=function(e,t){return void 0===e&&(e=An),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===Et){var o,c,l=GameCore.Utils.Object.keyBy(r,"playerId"),h=B()(l);n.data=(0,fn.TS)((0,s.Z)({},e.data),l),n.profileIds=m()(o=[]).call(o,new(Sn())(m()(c=[]).call(c,e.profileIds,h)))}}}))},en),yn="match",In="MATCH_GAMEPLAY_INITIALIZE",Cn="MATCH_GAMEPLAY_START",On="MATCH_GAMEPLAY_FINISH",bn="MATCH_GAMEPLAY_UPDATE",Pn="MATCH_GAMEPLAY_RESCUE",Rn="MATCH_GAMEPLAY_RESET_RESCUE",wn="MATCH_GAMEPLAY_SHOW_MINI_JOURNEY",xn="MATCH_STATS_DATA_CLEAR",_n="MATCH_STATS_DATA_UPDATE",kn="MATCH_STATS_CURRENT_UPDATE",Ln="MATCH_SINGLE_CREATE_REQUEST",Mn="MATCH_SINGLE_DETAIL_REQUEST",Dn="MATCH_SINGLE_MOVE_UPDATED",Nn="MATCH_SINGLE_DATA_RECEIVED",Bn="MATCH_SINGLE_DATA_CLEAR",Gn="MATCH_JOURNEY_CREATE_REQUEST",Fn="MATCH_JOURNEY_MOVE_UPDATED",Un="MATCH_JOURNEY_DATA_RECEIVED",Hn="MATCH_JOURNEY_DAILY_CHALLENGE_START",Zn="MATCH_JOURNEY_DAILY_CHALLENGE_COMPLETED",Yn="MATCH_JOURNEY_SCORE_RECEIVED",Vn="MATCH_JOURNEY_LEVEL_RECEIVED",Wn="MATCH_CHALLENGE_JOIN_REQUEST",zn="MATCH_CHALLENGE_CREATE_REQUEST",Kn="MATCH_CHALLENGE_FINISH_REQUEST",jn="MATCH_CHALLENGE_CONTINUE_REQUEST",Xn="MATCH_CHALLENGE_DATA_RECEIVED",Jn="MATCH_CHALLENGE_DATA_CLEAR",qn="MATCH_GROUP_CREATE_REQUEST",Qn="MATCH_GROUP_FINISH_REQUEST",$n="MATCH_ONLINE_CREATE_REQUEST",ei="MATCH_ONLINE_DATA_RECEIVED",ti="open",ni="active",ii="finished",ai={mode:"",status:ti,rescued:0,startAt:0,finishAt:0,showMiniJourney:null},si={single:{_id:"",data:{fen:""},playerId:"",status:ti},group:{status:ti,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:ti,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:ti,players:{}},journey:{_id:"",data:{fen:""},playerId:"",status:ti,challengeMode:!1},updateAt:0,isRequesting:!1},ri={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},oi=(tn={},tn[yn]=(0,Kt.UY)({gameplay:function(e,t){return void 0===e&&(e=ai),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status,r=i.stateShowMiniJourney,o=i.rescued;switch(t.type){case In:n.status=ti,n.mode=ai.mode,n.rescued=ai.rescued,n.startAt=ai.startAt,n.finishAt=ai.finishAt,n.opponentInfo=ai.opponentInfo;break;case Cn:n.mode=a,n.status=ni,n.rescued=o,n.startAt=Date.now();break;case bn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case On:n.status=ii,n.finishAt=Date.now();break;case Pn:n.rescued+=1;break;case wn:n.showMiniJourney=r;break;case Rn:n.rescued=0}}}))},match:function(e,t){return void 0===e&&(e=si),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,o=i.players,c=i.score,l=i.level;switch(t.type){case Ln:case Mn:case Wn:case Kn:case $n:case Gn:n.isRequesting=!0;break;case Dn:n.single=(0,s.Z)({},e.single,a),n.updateAt=Date.now();break;case Fn:n.journey=(0,s.Z)({},e.journey,a),n.updateAt=Date.now();break;case Hn:n.journey.challengeMode=!0;break;case Zn:n.journey.challengeMode=!1;break;case Nn:n.isRequesting=!1,n.single=a||si.single;break;case Un:n.isRequesting=!1,n.journey=a||si.journey;break;case Yn:n.journey.score=c;break;case Vn:n.journey.level=l;break;case Bn:n.isRequesting=!1,n.single=si.single;break;case"MATCH_JOURNEY_DATA_CLEAR":n.isRequesting=!1,n.journey=si.journey;break;case zn:case jn:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case Xn:n.isRequesting=!1,n.challenge=(0,s.Z)({},a||si.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Jn:n.isRequesting=!1,n.challenge=si.challenge;break;case qn:n.group.status=ni,r&&(n.group.opponentInfo=r);break;case Qn:n.group.status=ii;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=si.online.status,n.online.players=si.online.players;break;case ei:n.online.status=ni,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=ii}}}))},stats:function(e,t){return void 0===e&&(e=ri),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,o=i.match,c=i.current,l=i.players,h=i.leaders;switch(t.type){case xn:delete n.data[a],n.current=ri.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=ri.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case _n:n.data[a]=r;break;case kn:n.current=(0,fn.TS)((0,s.Z)({},e.current),r);break;case ei:B()(l).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":h.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Xn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,g=u.whitePlayerId,f=u.whitePlayerScore,m=u.whitePlayerLevel,E=u.blackPlayerLevel;if(!d||!g)break;c&&(n.current=c),n.data[d]={score:p,level:E},n.data[g]={score:f,level:m}}}}))}}),tn),ci="TOURNAMENT_ACTIVE",li="TOURNAMENT_REQUEST",hi="TOURNAMENT_RECEIVED",ui={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},di=(nn={},nn.tournament=function(e,t){return void 0===e&&(e=ui),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case ci:n.active=!0,n.tournamentId=r;break;case li:n.isRequesting=!0;break;case hi:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},nn),pi="leaderboards",gi=n(465),fi=n.n(gi),mi=n(129),Ei=n.n(mi),vi="LEADERBOARD_DATA_REQUEST",Si="LEADERBOARD_DATA_UPDATE",Ai="LEADERBOARD_DATA_CLEAR",Ti={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},yi=(an={},an[pi]=function(e,t){return void 0===e&&(e=Ti),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case vi:e.type!==r&&0===c&&(n.leaders=Ti.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=o,n.offset=c;break;case Si:if(n.isRequesting=!1,e.type!==r)break;var h=GameCore.Utils.Json.clone((0,s.Z)({},e.leaders,l)),u=fi()(h),d=ce()(u).call(u,(function(e){return e.name&&e.photo||(e.name="Unknown",e.photo=""),e}));Ei()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case Ai:n.isRequesting=!1,n.type=Ti.type,n.limit=Ti.limit,n.offset=Ti.offset,n.leaders=Ti.leaders,n.leaderboardId=Ti.leaderboardId}}}))},an),Ii="missions",Ci="MISSIONS_DATA_REQUEST",Oi="MISSIONS_DATA_RECEIVE",bi="MISSION_UPDATE",Pi="MISSION_COMPLETED",Ri={mission:null,missions:null,isRequesting:!1},wi=(sn={},sn[Ii]=function(e,t){return void 0===e&&(e=Ri),(0,Jt.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,l=s.missions;switch(t.type){case Ci:n.isRequesting=!0;break;case Oi:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var h=e.missions[r];n.mission={name:r,process:{},require:h.require,reward:h.reward},B()(h.require).forEach((function(e){n.mission.process[e]=0}));break;case bi:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case Pi:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},sn),xi="dailyTasks",_i="DAILY_TASKS_DATA_REQUEST",ki="DAILY_TASKS_DATA_RECEIVE",Li="DAILY_TASKS_PROCESS_UPDATE",Mi="DAILY_TASK_VALUE_ADD",Di="DAILY_TASK_FINISHED",Ni={tasks:[],process:[],isRequesting:!1,isNotice:!1},Bi=(rn={},rn[xi]=function(e,t){return void 0===e&&(e=Ni),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case _i:n.isRequesting=!0;break;case ki:n.isRequesting=!1,n.tasks=o;break;case Li:n.process=c;break;case Mi:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Di:n.isNotice=!0}}}))},rn),Gi={rewards:[],isRequesting:!1},Fi=(on={},on.dailyRewards=function(e,t){return void 0===e&&(e=Gi),(0,Jt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},on),Ui="dailyChallenge",Hi="DAILY_CHALLENGE_REQUEST",Zi="DAILY_CHALLENGE_UPDATE",Yi="DAILY_CHALLENGE_TIME_PLAY_UPDATE",Vi={leaders:{},isRequesting:!1,time:0},Wi=(cn={},cn[Ui]=function(e,t){return void 0===e&&(e=Vi),(0,Jt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.leaders,a=n.time;switch(t.type){case Hi:e.isRequesting=!0;break;case Zi:e.isRequesting=!1,e.leaders=i;break;case Yi:(e.time>a||0==e.time)&&(e.time=a)}}}))},cn),zi="lives",Ki="LIVES_REQUEST",ji="LIVES_UPDATED",Xi="LIVES_RESET",Ji="LIVES_COUNT_DOWN_START",qi={isRequesting:!1,lives:0,lastBonusLifeTime:0,countDownStartAt:0},Qi=(ln={},ln[zi]=function(e,t){return void 0===e&&(e=qi),(0,Jt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.data;switch(t.type){case Ki:e.isRequesting=!0;break;case ji:e.isRequesting=!1,e.lives=i.lives,e.lastBonusLifeTime=i.lastBonusLifeTime;break;case Xi:e.isRequesting=!1,e.lives=qi.lives,e.lastBonusLifeTime=qi.lastBonusLifeTime,e.countDownStartAt=0;break;case Ji:e.countDownStartAt=(new Date).getTime()}}}))},ln),$i=(0,Kt.UY)((0,s.Z)({scene:function(e,t){return void 0===e&&(e=qt),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Xt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=hn),(0,Jt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case Xt.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case Xt.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case Xt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=dn),(0,Jt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Xt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Xt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},gn,En,Tn,oi,di,yi,wi,Bi,Fi,Wi,Qi)),ea=$i,ta=window,na=ta.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,ia=Kt.qC,aa=function(e){na&&(ia=na({trace:!0,traceLimit:25})||Kt.qC);var t=ia((0,Kt.md)(jt.Z));return(0,Kt.MT)(ea,e,t)},sa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=zt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=aa({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),ra=sa,oa=n(604),ca=n.n(oa),la=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}ca().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';s.insertRule(r,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),ha=la,ua=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new ha(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),da=ua,pa=n(198),ga=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),fa=ga,ma=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,pa.D)((function(){n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new fa;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}})),this.events.emit(Ft.Z.RESIZE,{width:i,height:a}),this.isLandscape()&&"landscape"!==this.currentLayout?this.events.emit(Ft.Z.CHANGE_LAYOUT,{layout:"landscape"}):"portrait"!==this.currentLayout&&this.events.emit(Ft.Z.CHANGE_LAYOUT,{layout:"portrait"})},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),Ea=ma,va=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||un.contextId,this.contextType=t||un.contextType,this.entryPointData=n||un.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),Sa=va,Aa=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Ta=Aa,ya="share_invite",Ia="journey_invite",Ca="challenge_friend_match",Oa="matching_group_match",ba=n(442),Pa=new Ve.Z("10","Your Friend",ba.Z.AVATAR.FILE).toObject(),Ra="single",wa="challenge-friends",xa="matching-group",_a="tournaments",ka="journey",La=(0,j.P1)([function(e){return e.context}],(function(e){return e})),Ma=(0,j.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Da=function(e,t){return{type:Xt.fJ,payload:{contextId:e,contextType:t}}},Na=function(e){return function(t){t({type:Xt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Ba={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Ga=GameCore.Configs.SyncProfileFromAPI,Fa=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new Sa(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Xt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,r.Z)(u().mark((function e(){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=fi()(Ba),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,r=new Ae(s),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,r.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ga){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,r=new Ae({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,s.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new Ae(r));case 23:return e.prev=23,e.t1=e.catch(0),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new Ta(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Ve.Z(e,t,n,i).toObject()}catch(a){return new Ve.Z("123","You").toObject()}},this.game=e},Ua=n(200),Ha=[Gt._.SCREEN_OPEN],Za=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,s.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(Ot()(Ha).call(Ha,e)>=0)){var i=this.formatEventName(e),a=t?(0,s.Z)({},t):{};a=n?(0,s.Z)({},a,{value:n}):a,a=(0,s.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Gt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Gt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Gt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Gt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowPreRollAd=function(e){this.processEvent(Gt._.AD_SHOW,{ad_type:"pre_roll",screen_name:""+e}),this.processEvent(Gt._.AD_IMPRESSION,{ad_format:"pre_roll"})},n.processShowInterstitialAd=function(e){this.processEvent(Gt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(Gt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(Gt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(Gt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Gt._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Ma(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).startGame=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(Gt._.LOAD_START),n.scene.launch(Ua.Co.GLOBAL_SCENE),n.scene.start(Ua.Co.LOAD_SCENE),n.analytics.pageview(Ua.Co.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(Ua.Co.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l,h,d,p,g,f,m,E,S,A,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=La(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,l=s.entryPointData,d=(h=l||{}).type,p=h.matchId,g=h.playerId,f=h.opponentId,m=void 0===f?Pa.playerId:f,E=o===g,S=m===Pa.playerId,A=S||v()(i=[m,g]).call(i,o),T=Ra,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:T=_a,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===ya&&!E&&(T=wa),p&&c&&A&&d===Ca&&(T=wa),c&&d===Oa&&(T=xa),t(Na(T));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),Ya=Za,Va=n(49),Wa=n(128),za=n.n(Wa),Ka=n(100),ja=n.n(Ka),Xa=n(462),Ja=n.n(Xa),qa=n(98),Qa=n(97),$a=n(448),es=n(201),ts=n(455),ns=n(449),is={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},as={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},ss=as.STATUS,rs=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(ss.READY)},t.start=function(){this.isRunning()||this.setState(ss.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(ss.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===ss.READY},t.isRunning=function(){return this.state===ss.RUNNING},t.isStopped=function(){return this.state===ss.STOPPED},e}(),os=rs,cs=n(457),ls=n(453),hs=n(458),us=n(454),ds=Qa.Z.DEFAULT,ps=ds.KEY,gs=ds.FRAME,fs=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.contents=void 0,s.buttonPlay=void 0,s.messageText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onPlay=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.setVisible(!0);var n=s.getData(["onPlay"])[0];s.onPlay=n,s.runOpenAnimation()},s.handlePlay=function(){s.onPlay&&s.onPlay(),s.close()},s.setVisible(!1),s.setDepth($a.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createMessage(),this.createButtonPlay(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.buttonPlay])},n.createButtonPlay=function(){this.buttonPlay=new ts.Z(this.scene,ps,gs.BUTTON_GREEN_LARGE,170,55),this.buttonPlay.setName("Play");var e=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.PLAY,origin:{x:.5,y:.5}});this.buttonPlay.add(e),Phaser.Display.Align.In.Center(e,this.buttonPlay),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,50),this.buttonPlay.onClick=this.handlePlay},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5},text:"The game will end when there s no\nmore space for your given blocks."}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-45),this.messageText.setScale(0).setAlpha(0)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),ms=fs,Es=[{minCol:0,minRow:0,cols:4,rows:4},{minCol:4,minRow:0,cols:4,rows:4},{minCol:0,minRow:4,cols:4,rows:4},{minCol:4,minRow:4,cols:4,rows:4}],vs=[{minCol:0,minRow:0,cols:5,rows:5},{minCol:3,minRow:0,cols:5,rows:5},{minCol:0,minRow:3,cols:5,rows:5},{minCol:3,minRow:3,cols:5,rows:5}],Ss=[{minCol:0,minRow:0,cols:6,rows:6},{minCol:3,minRow:0,cols:6,rows:6},{minCol:0,minRow:3,cols:6,rows:6},{minCol:3,minRow:3,cols:6,rows:6}],As="vertical",Ts="horizontal",ys="left",Is="right",Cs="top",Os="bottom",bs="vertical_left",Ps="vertical_right",Rs="horizontal_left",ws="horizontal_right",xs="gem/gem",_s="gem/gem",ks="gem/gem",Ls="gem/gem",Ms="gem/gem",Ds="gem/gem",Ns="gem/gem",Bs="gem/gem",Gs="gem/gem",Fs=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Qa.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Qa.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],Us=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],Hs="l",Zs="l_1",Ys="l_3",Vs="line_2",Ws="line_3",zs="line_4",Ks="line_5",js="square_1",Xs="square_2",Js="square_3",qs="trapezoid",Qs="triangle",$s="t_piece",er="plus_piece",tr="cross_piece_2",nr="cross_piece_3",ir="cross_piece_4",ar="cross_piece_5",sr="u_piece",rr=[Hs,Zs,Ys,Vs,Ws,zs,Ks,js,Xs,Js,Qs,qs,$s,er,tr,nr,ir,sr],or=[{type:Hs,rate:2},{type:Zs,rate:8},{type:Ys,rate:6},{type:Vs,rate:9},{type:Ws,rate:9},{type:zs,rate:8},{type:Ks,rate:8},{type:js,rate:9},{type:Xs,rate:8},{type:Qs,rate:2},{type:qs,rate:2},{type:$s,rate:1},{type:er,rate:1},{type:tr,rate:2},{type:nr,rate:1},{type:ir,rate:1},{type:sr,rate:1}],cr=[[1,0],[1,0],[1,1]],lr=[[0,1],[0,1],[1,1]],hr=[[1,0],[1,1]],ur=[[1,0,0],[1,0,0],[1,1,1]],dr=[[1,1,1],[1,0,0]],pr=[[1,1,1],[0,0,1]],gr=[[1,1],[1,0]],fr=[[1,1,1],[1,0,0],[1,0,0]],mr=[[1,1],[0,1],[0,1]],Er=[[1,1],[1,0],[1,0]],vr=[[1,1],[0,1]],Sr=[[1,1,1],[0,0,1],[0,0,1]],Ar=[[0,0,1],[1,1,1]],Tr=[[1,0,0],[1,1,1]],yr=[[0,1],[1,1]],Ir=[[0,0,1],[0,0,1],[1,1,1]],Cr=[[1],[1]],Or=[[1,1]],br=[[1],[1],[1]],Pr=[[1,1,1]],Rr=[[1],[1],[1],[1]],wr=[[1,1,1,1]],xr=[[1],[1],[1],[1],[1]],_r=[[1,1,1,1,1]],kr=[[1]],Lr=[[1,1],[1,1]],Mr=[[1,1,1],[1,1,1],[1,1,1]],Dr=[[1,0],[1,1],[0,1]],Nr=[[0,1],[1,1],[1,0]],Br=[[1,1,0],[0,1,1]],Gr=[[0,1,1],[1,1,0]],Fr=[[0,1],[1,1],[0,1]],Ur=[[1,0],[1,1],[1,0]],Hr=[[0,1,0],[1,1,1]],Zr=[[1,1,1],[0,1,0]],Yr=[[0,0,1],[1,1,1],[0,0,1]],Vr=[[1,0,0],[1,1,1],[1,0,0]],Wr=[[0,1,0],[0,1,0],[1,1,1]],zr=[[1,1,1],[0,1,0],[0,1,0]],Kr=[[0,1,0],[1,1,1],[0,1,0]],jr=[[1,0],[0,1]],Xr=[[0,1],[1,0]],Jr=[[1,0,0],[0,1,0],[0,0,1]],qr=[[0,0,1],[0,1,0],[1,0,0]],Qr=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],$r=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],eo=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],to=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],no=[[1,1],[0,1],[1,1]],io=[[1,0],[1,1],[1,0]],ao=[[1,0,1],[1,1,1]],so=[[1,1,1],[1,0,1]],ro=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"4bb3/4bb3/4bb3/3bb4/bbbb2bbb/bbbb1bbbb/4bb3/4bb3/4bb3 l tz-vr,b",piece:js,position:{x:4,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=[{x:5,y:3},{x:5,y:4},{x:4,y:4},{x:4,y:5}],t=this.scene.layoutManager.objects.main,n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;t.board.dataBoard[s][a].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),t.board.dataBoard[s][a].cell.stopAnimShaking()}},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),oo=ro,co=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/x/bbbb1ryry/x/x/x/x l s1,b",piece:js,position:{x:4,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i/2,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<1;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),lo=co,ho=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/4bb3/4bb3/5b3/x/x/x l l-dt,b",piece:js,position:{x:3,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][3].cell.getWorldPosition().x+i/2,h=n[4][3].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking();i.board.dataBoard[5][4].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[5][4].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),uo=ho,po=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"2r/2r/2r/2r/x/x/x/2r/2r l e3-v,r",piece:Ws,position:{x:2,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[5][2].cell.getWorldPosition().x+i/2,h=n[5][2].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),go=po,fo=is.STATUS,mo=Qa.Z.DEFAULT,Eo=mo.KEY,vo=mo.FRAME,So=Qa.Z.GAMEPLAY,Ao=So.KEY,To=So.FRAME,yo=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentLevel=1,n.tutorialId=void 0,n.inputType=void 0,n.handFrame=void 0,n.background=void 0,n.headerContainer=void 0,n.maskGraphics=void 0,n.textTutorial=void 0,n.skipButton=void 0,n.stepOne=void 0,n.stepTwo=void 0,n.stepThree=void 0,n.stepFour=void 0,n.showTutorialWhenStart=function(){var e=n.scene.lang;switch(n.scene.analytics.event(Gt._.TUTORIAL_STEP,{tutorial_step:n.currentLevel}),n.currentLevel){case 1:n.stepOne.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_1);break;case 2:n.stepTwo.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_2);break;case 3:n.stepThree.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_3);break;case 4:n.stepFour.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_4);break;default:n.handleCompleteTutorial()}},n.nextTutorial=function(){switch(n.currentLevel){case 1:n.stepOne.nextLevel();break;case 2:n.stepTwo.nextLevel();break;case 3:n.stepThree.nextLevel();break;case 4:n.stepFour.nextLevel()}n.currentLevel++,n.showTutorialWhenStart()},n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.currentLevel){case 1:t=n.stepOne.dataInit.position;break;case 2:t=n.stepTwo.dataInit.position;break;case 3:t=n.stepThree.dataInit.position;break;case 4:t=n.stepFour.dataInit.position}return t.x===e.x&&t.y===e.y},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createHand(),this.createTutorialPlayScreen(),this.createHeader(),this.createSkipButton(),this.initTutorialStep(),this.registerEvents()},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){if(this.isRunning())switch(Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10),this.currentLevel){case 1:this.stepOne.createTweenHand();break;case 2:this.stepTwo.createTweenHand();break;case 3:this.stepThree.createTweenHand();break;case 4:this.stepFour.createTweenHand()}},n.createTutorialPlayScreen=function(){this.scene.screen.add($a.o4.TUTORIAL_PLAY_SCREEN,ms)},n.createHeader=function(){this.headerContainer=this.scene.add.container(),this.headerContainer.setVisible(!1),this.headerContainer.setSize(355,100);var e=this.scene.add.graphics();e.fillRoundedRect(-177.5,-50,355,100,12),e.fillStyle(0,.5),e.lineStyle(2,0,.55),e.strokeRoundedRect(-177.5,-50,355,100,12),this.headerContainer.add(e),this.textTutorial=this.scene.make.text({style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700",align:"center"}}),this.textTutorial.setHighQuality(),this.textTutorial.setTint(16442297),this.headerContainer.add(this.textTutorial),Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10)},n.createSkipButton=function(){var e=50,t=30;"ru"===this.scene.facebook.getLocale()&&(e=100,t=30),this.skipButton=new ts.Z(this.scene,Eo,vo.BUTTON_SKIP,e,t),this.headerContainer.add(this.skipButton),this.skipButton.onClick=this.handleSkip.bind(this),Phaser.Display.Align.In.BottomRight(this.skipButton,this.headerContainer,-this.scene.gameZone.width/2-5,-60)},n.handleSkip=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.ALERT_SCREEN,{message:n.Text.MESS_SKIP_TUTORIAL,onHandleYes:this.handleCompleteTutorial.bind(this)})},n.initTutorialStep=function(){this.stepOne=new lo(this),this.stepTwo=new go(this),this.stepThree=new uo(this),this.stepFour=new oo(this)},n.start=function(){this.isRunning()||(this.scene.analytics.pageview("tutorial-screen"),this.setState(fo.RUNNING),this.headerContainer.setVisible(!0),this.showTutorialWhenStart())},n.setTextTutorial=function(e){var t=this,n=e.split(""),i="";this.scene.time.addEvent({repeat:n.length,delay:10,callback:function(){var e=n.shift()||"";i+=e,t.textTutorial.setText(i),Phaser.Display.Align.In.Center(t.textTutorial,t.headerContainer,-t.scene.gameZone.width/2,-60)}})},n.stop=function(){this.isRunning()&&(this.scene.tweens.killTweensOf([this.background]),this.background.setVisible(!1),this.maskGraphics.setVisible(!1),this.setState(fo.STOPPED))},n.handleCompleteTutorial=function(){this.scene.analytics.pageview("game-scene"),this.scene.analytics.event(Gt._.TUTORIAL_COMPLETE);var e=this.scene.layoutManager.objects.main;this.setState(fo.STOPPED),e.praise.tweenShowScoreText.stop().remove(),this.scene.startGame(),this.handFrame.setVisible(!1),this.headerContainer.setVisible(!1)},n.createHand=function(){this.handFrame=this.scene.make.image({key:Ao,frame:To.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(qa.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayerIsNew()},n.dragStart=function(){switch(this.currentLevel){case 1:this.stepOne.dragStart();break;case 2:this.stepTwo.dragStart();break;case 3:this.stepThree.dragStart();break;case 4:this.stepFour.dragStart()}},n.skipTutorial=function(){this.isRunning()&&(this.handFrame.setVisible(!1),this.setState(fo.STOPPED))},n.invalidMove=function(){switch(this.currentLevel){case 1:this.stepOne.invalidMove();break;case 2:this.stepTwo.invalidMove();break;case 3:this.stepThree.invalidMove();break;case 4:this.stepFour.invalidMove()}},n.handleGuidePlayStep=function(e){try{var t=this.scene.layoutManager.objects,n=t.main,i=t.footer;n.board.clearBoard(),i.pieces.clearPieces();var a=null,s=null;if(e){var r=n.board.getBoardByFen(e);a=this.scene.handleDynamicFenSize(r),s=i.pieces.getPiecesByFen(e)}n.board.startGame(a),i.pieces.showAvailablePieces(s)}catch(o){}},t}(os),Io=yo,Co={START_GAME:"start-game",REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-diamonds",GAME_OVER:"game-over"},Oo=n(459),bo=n(127),Po=n.n(bo),Ro=n(101),wo=n.n(Ro),xo=n(203),_o=n.n(xo),ko="global",Lo="friend",Mo=GameCore.Configs,Do=Mo.ApiHost,No=Mo.OtherHost,Bo=Mo.LeadersBoard,Go=Bo.Prefix,Fo=Bo.LeaderboardId,Uo=Bo.Name,Ho=Go+"/"+Fo+"/leaders",Zo=Go+"/"+Fo+"/players",Yo=function(e){var t="";return Fo?(e===ko?t=Ho:e===Lo&&(t=Zo),t):t},Vo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=5,Le("players?"+r,{},Do);case 5:return o=e.sent,c=ce()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,s.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wo=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Fo){e.next=3;break}return e.abrupt("return",zo(t));case 3:return e.abrupt("return",Ko(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Yo(ko)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Le(i+"?"+a,{},No);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Vo(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ko=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Uo);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jo=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==Fo){e.next=3;break}return e.abrupt("return",Xo(t));case 3:return e.abrupt("return",Jo(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Yo(Lo)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,Le(i+"?"+a,{},No);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Vo(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(Uo);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qo=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Fo){e.next=2;break}return e.abrupt("return",Qo(t));case 2:return e.abrupt("return",$o());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Yo(Lo)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,Le(i+"?"+a,{},No);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,Vo(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$o=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Uo);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ec=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n),null==Fo){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",tc(t,n));case 5:return e.abrupt("return",nc(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tc=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me("leaderboards/"+Fo+"/players/"+t,{score:n},{},No);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nc=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(Uo);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ic(e,t){var n="undefined"!==typeof wo()&&_o()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ac(e,t);var i=Ke()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Po()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ac(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var sc=GameCore.Configs.LeadersBoard,rc=sc.UseMock,oc=sc.Limit,cc=function(e,t,n,a){return void 0===n&&(n=oc),void 0===a&&(a=0),function(){var s=(0,r.Z)(u().mark((function s(r){var o,c,l,h,d,p,g,f,m,E,v,S,A,T,y,I,C,O;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r(hc()),r({type:vi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!rc){s.next=12;break}return s.next=8,(0,Oe.qZ)(1e3);case 8:return 145,d=ce()(l=ja()(h=new Array(n)).call(h,null)).call(l,(function(e,t){var n=(t+1)*(a+1);return{playerId:145===t?c:"0"+n,name:145===t?"Current Player":"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)}})),r(lc(d,t)),s.abrupt("return");case 12:if(p=[],t!==ko){s.next=19;break}return s.next=16,Wo({limit:n,offset:a});case 16:p=s.sent,s.next=27;break;case 19:if(t!==Lo){s.next=27;break}return(g=o.getConnectedPlayerIds(n,a)).push(c),f=GameCore.Utils.Array.unique(g),s.next=25,jo({playerIds:f,limit:f.length});case 25:p=s.sent,f.forEach((function(e){var t=re()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 27:for(m={},E=ic(p);!(v=E()).done;)S=v.value,A=S.playerId,T=S.score,y=S.rank,I=S.getPlayer(),C=I.getPhoto(),O=I.getName(),m[A]={playerId:A,name:O,photo:C,score:T,rank:y};r(lc(m,t)),s.next=37;break;case 33:s.prev=33,s.t0=s.catch(0),r(lc([],t)),(0,i.tO)(s.t0);case 37:case"end":return s.stop()}}),s,null,[[0,33]])})));return function(e){return s.apply(this,arguments)}}()},lc=function(e,t){return{type:Si,payload:{leaders:e,type:t}}},hc=function(){return{type:Ai,payload:{}}},uc=function(e){return e[pi]},dc=((0,j.P1)([function(e){return uc(e).leaderboardId}],(function(e){return e})),(0,j.P1)([function(e){return uc(e).leaders}],(function(e){return e}))),pc=(0,j.P1)([function(e){return uc(e).isRequesting}],(function(e){return e})),gc=n(44),fc={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},mc=function(e){function t(t){return e.call(this,fc,t)||this}return(0,o.Z)(t,e),t}(gc.Z),Ec=mc,vc={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},Sc=function(e){function t(t){return e.call(this,vc,t)||this}return(0,o.Z)(t,e),t}(gc.Z),Ac=Sc,Tc=n(451),yc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,Va.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(ba.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,ba.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background,i=e.borderWidth,a=void 0===i?0:i;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width-a,this.height-a),this.add(this.background)},n.createLoading=function(){this.loading=new Tc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-(this.payload.borderWidth||8);this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),Ic=yc,Cc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Oc=Cc,bc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Pc=bc,Rc=function(e){return e[yn]},wc=(0,j.P1)([function(e){return Rc(e).gameplay.mode}],(function(e){return e})),xc=((0,j.P1)([function(e){return Rc(e).gameplay.status}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).gameplay.rescued}],(function(e){return e}))),_c=(0,j.P1)([function(e){return Rc(e).gameplay.startAt}],(function(e){return e})),kc=(0,j.P1)([function(e){return Rc(e).gameplay.finishAt}],(function(e){return e})),Lc=(0,j.P1)([function(e){return Rc(e).gameplay.showMiniJourney}],(function(e){return e})),Mc=GameCore.Configs,Dc=Mc.AppId,Nc=Mc.OtherHost,Bc=Mc.LeadersBoard,Gc=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:Dc,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!Bc.UseMock){e.next=5;break}return e.next=4,(0,Oe.qZ)(1e3);case 4:return e.abrupt("return",(0,s.Z)({},n,t,{_id:Bc.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,Me("leaderboards",(0,s.Z)({},n,t),{},Nc);case 8:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fc=(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l,h,d,p,g,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!Bc.UseMock){e.next=7;break}return e.next=5,(0,Oe.qZ)(1e3);case 5:return o=(r=n).limit,c=void 0===o?10:o,l=r.offset,h=void 0===l?0:l,e.abrupt("return",ce()(a=ja()(s=new Array(c)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(h+1);return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())}})));case 7:return d=GameCore.Utils.String.params(n),p="leaderboards/"+t+"/leaders",e.next=11,Le(p+"?"+d,{},Nc);case 11:if((g=e.sent)&&(null==g||!g.error)){e.next=14;break}throw new Error((null==g?void 0:g.error)||"Leaderboard not found");case 14:if(!((f=(null==g?void 0:g.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=f,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t,n,i){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me("leaderboards/"+t+"/players/"+n,{score:i},{},Nc);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}()),Uc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),Hc=Uc,Zc=GameCore.Configs.Tournament.UseLeaderboard,Yc=function(e){return{type:ci,payload:{tournamentId:e}}},Vc=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,s=e.playerId,r=e.playerName,o=e.score,c=e.autoStartGame,l=r+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:s,playerName:r,leaderboardId:h}});case 7:return d=t.sent,p=d.getID(),c&&(n(Yc(p)),n(jh())),t.next=12,Gc({_id:h,createdBy:s,name:p,description:l,expireTime:6048e5});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,Fc(h,s,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},Wc=function(e){return(0,r.Z)(u().mark((function t(){var n,i,a,s,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.leaderboardId,r=e.score,s&&Fc(s,i,r),t.next=5,n.tournament.shareAsync({score:r,data:{type:"tournament",playerId:i,playerName:a}});case 5:Fc(s,i,r);case 6:case"end":return t.stop()}}),t)})))},zc=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Kc=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),jc=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,i){var a,s,r,o,c,l,h,d,p,g,f,m,E,S;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,s=window.game,r=s.player,o=s.facebook,c=s.analytics,t.prev=2,h=i(),d=wc(h),v()(l=[Ra,_a]).call(l,d)){t.next=7;break}return t.abrupt("return");case 7:return n({type:li,payload:{}}),p=r.getPlayer(),g=p.playerId,f=p.name,t.next=11,Kc();case 11:if(!t.sent){t.next=23;break}if(a=Gt._.TOURNAMENT_SHARE,!Zc){t.next=21;break}return t.next=17,zc();case 17:return m=t.sent,E={playerId:g,playerName:f,score:e,leaderboardId:m},t.next=21,n(Wc(E));case 21:t.next=28;break;case 23:if(a=Gt._.TOURNAMENT_CREATE,!Zc){t.next=28;break}return S={playerId:g,playerName:f,score:e,autoStartGame:!1},t.next=28,n(Vc(S));case 28:if(c.event(a,{success:!0}),!1!==Zc){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(Xc(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof Hc)){t.next=39;break}return t.abrupt("return");case 39:a&&c.event(a,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},Xc=function(e){return{type:hi,payload:{score:e}}},Jc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),qc=Jc,Qc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),$c=Qc,el={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},tl=function(e,t){return t.playerId},nl=((0,j.P1)([function(e){return Rc(e).match.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).match.single}],(function(e){return e}))),il=(0,j.P1)([function(e){return Rc(e).match.single._id}],(function(e){return e})),al=(0,j.P1)([function(e){return Rc(e).match.single.score}],(function(e){return e||0})),sl=((0,j.P1)([function(e){return Rc(e).match.single.level}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=Rc(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=Rc(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,j.P1)([function(e){return Rc(e).match.single.status}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).match.single.playerId}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).match.challenge}],(function(e){return e}))),rl=(0,j.P1)([function(e){return Rc(e).match.challenge._id}],(function(e){return e})),ol=(0,j.P1)([function(e){return Rc(e).match.challenge.status}],(function(e){return e})),cl=(0,j.P1)([function(e){return Rc(e).match.challenge.opponentInfo}],(function(e){return e})),ll=((0,j.P1)([function(e){return Rc(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,j.P1)([sl,tl],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,j.P1)([sl,tl],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:Pa.playerId}))),hl=(0,j.P1)([sl,tl],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),ul=(0,j.P1)([sl,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),dl=(0,j.P1)([function(e){return Rc(e).match.group.opponentInfo}],(function(e){return e})),pl=((0,j.P1)([function(e){return Rc(e).match.online.players}],(function(e){return e})),(0,j.P1)([function(e){return Rc(e).match.journey}],(function(e){return e}))),gl=(0,j.P1)([function(e){return Rc(e).match.journey._id}],(function(e){return e})),fl=(0,j.P1)([function(e){return Rc(e).match.journey.level}],(function(e){return e})),ml=(0,j.P1)([function(e){return Rc(e).match.journey.challengeMode}],(function(e){return e})),El=(0,j.P1)([function(e){return Rc(e).match.journey.score}],(function(e){return e})),vl=(0,j.P1)([function(e){return Rc(e).stats.data}],(function(e){return e})),Sl=(0,j.P1)([function(e){return Rc(e).stats.current}],(function(e){return e})),Al=((0,j.P1)([function(e){return Rc(e).stats.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return e.messages.data}],(function(e){return e}))),Tl=(0,j.P1)([Al,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),yl=n(409),Il=new(n.n(yl)()),Cl=n(347),Ol=n.n(Cl),bl=function(e){if("string"!==typeof e||!e)throw new $c(null,{imageShare:e})},Pl=function(){return(0,r.Z)(u().mark((function e(){var t,n,a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,Rl();case 5:return c=e.sent,bl(c),l=n.getPlayer(),h=l.playerId,d=l.name,p=l.photo,e.next=10,s.shareAsync({text:o.Text.SHARE_BEST_SCORE,intent:"SHARE",image:c||"",data:{playerId:h,playerName:d,playerPhoto:p,type:ya}});case 10:a.event(Gt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Gt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close($a.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},Rl=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,l=xl({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return e.abrupt("return");case 7:return h={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=Sl(t),r=vl(t),o=i.getPlayer(),c=o.playerId,l=o.photo,h=r[c]||{},d=h.score,s.bestScore>d&&(d=s.bestScore),p=xl({playerId:c,playerPhoto:l,playerScore:d})){e.next=10;break}return e.abrupt("return");case 10:return g={name:"share-current-score",width:952,height:492,renderOptions:p},e.next=13,a.frameCapture.capture(g);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:ba.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},_l=(function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l,h,d,p,g,f,m,E,v,S,A,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(l=n.getConnectedPlayerIds(99,0)).push(r),h=[],e.next=7,jo({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),g={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(g=p[r]),h.push(g),e.t0=Ol()(u()).call(u(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(f=e.t1.value,!GameCore.Utils.Object.hasOwn(p,f)){e.next=25;break}if(m=p[f],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(g.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(m);case 25:e.next=14;break;case 27:return E=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(E);case 30:if(v=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(v,n)){var i=v[n],a=i.name,s=i.photo;h[t].name=a,h[t].photo=s}})),h.length<3)for(S=0;S<=3-h.length;)h.push({playerId:"bot"+S,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),S++;if(A=_l({playerId:r,playerName:o,playerPhoto:c,listLeaders:h})){e.next=37;break}return e.abrupt("return");case 37:return T={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(T);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:250,image:a,width:525,height:525,fallbackWithImage:ba.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:475,y:1215+385*t,image:i,width:150,height:150,fallbackWithImage:ba.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:690,y:1312+193*t,font:"600 60px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1070,y:1312+193*t,font:"600 55px",text:a,fillStyle:"#b18151"}})),o}),kl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g,f,m,E,v,S,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=vl(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=cl(t),h=l.playerId,d=l.photo,p=hl(t,{playerId:c}),g=ul(t,{opponentId:h}),f=s[c]||{},m=f.score,E=s[h]||{},v=E.score,S=Ml({playerId:c,playerPhoto:o,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:v,isPlayerFinished:p,isOpponentFinished:g})){e.next=12;break}return e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ll=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g,f,m,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=vl(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=dl(t),h=l.playerId,d=l.photo,p=l.score,g=s[c]||{},f=g.score,m=Ml({playerId:c,playerPhoto:o,playerScore:f,opponentId:h,opponentPhoto:d,opponentScore:p})){e.next=9;break}return e.abrupt("return");case 9:return E={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(E);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ml=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,h=void 0===l?"":l,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,g=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof h)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof g)return null;var f=r===d,m=r>d,E=p||g,v=p&&g,S={leftPhoto:{name:""+n,type:"image",x:55,y:162,image:a,width:200,height:200,fallbackWithImage:ba.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:702,y:162,image:h,width:200,height:200,fallbackWithImage:ba.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return E&&(S.leftScoreShadow={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#c4683f",text:g?""+d:"???",textAlign:"center"},S.rightScore={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#f2a62e",text:g?""+d:"???",textAlign:"center"}),!f&&v&&(m?S.leftCrown={name:"crown-icon",type:"image",x:12,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}:S.rightCrown={name:"crown-icon",type:"image",x:665,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S},Dl=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,s=n.analytics,r=n.facebook,o=n.globalScene,c=n.lang,e.prev=1,o.screen.open($a.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),e.next=5,Nl();case 5:return l=e.sent,bl(l),h=a.getPlayer(),d=h.playerId,p=h.name,g=h.photo,e.next=10,r.shareAsync({text:"Great! I have a score!",intent:"SHARE",image:l||"",data:{playerId:d,playerName:p,playerPhoto:g,type:ya}});case 10:s.event(Gt._.SHARE,{share_content_type:"Score",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s.event(Gt._.SHARE,{share_content_type:"Score",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,o.screen.close($a.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(t){return e.apply(this,arguments)}}()},Nl=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=n.getBestScore(),c=Bl({playerId:s,playerPhoto:r,playerScore:o})){e.next=7;break}return e.abrupt("return");case 7:return l={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:ba.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},Gl=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Oc(null,{contextId:t})},Fl=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new qc(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new Oc(null,{contextId:n})},Ul=function(e){if(null===e.imageShare)throw new $c},Hl=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=Al(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Zl(e))}null!=(a=r[e])&&a.sent&&n(Yl(e))}},Zl=function(e){return{type:Xt.qj,payload:{opponentId:e}}},Yl=function(e){return{type:Xt.rh,payload:{opponentId:e}}},Vl=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,Fl({opponentId:t,contextId:n}),(s=window.game.facebook.getContextID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",window.game.facebook.getContextID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Wl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,E,v,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,Vl(e,d);case 5:return p=n.sent,Gl({contextId:p}),g=s(),n.next=10,kl(g);case 10:return f=n.sent,Ul({imageShare:f}),m=o.getPlayer(),E=m.name,v=m.playerId,S=window.game.lang.getText({key:"MESSAGE_INVITE",variables:[E]}),n.next=16,l.sendMessage({cta:"Play",text:S,image:f||"",template:"challenge",data:{type:Ca,matchId:h,playerId:v,opponentId:e,status:ni}});case 16:a(Hl(e)),c.event(Gt._.MESSAGE,{message_content_type:"Invite",success:!0}),Il.emit(el.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Gt._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},zl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,E,v,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,Vl(e,d);case 5:return p=n.sent,Gl({contextId:p}),g=s(),n.next=10,kl(g);case 10:return f=n.sent,Ul({imageShare:f}),m=o.getPlayer(),E=m.name,v=m.playerId,S=window.game.lang.getText({key:"MESSAGE_FINISH_MATCH",variables:[E]}),n.next=16,l.sendMessage({cta:"See result",text:S,image:f||"",template:"finished",data:{type:Ca,matchId:h,playerId:v,opponentId:e,status:ii}});case 16:a(Hl(e)),c.event(Gt._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),c.event(Gt._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,i.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Kl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,E,v,S,A,T,y,I;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,Vl(e,d);case 5:return p=n.sent,Gl({contextId:p}),g=s(),n.next=10,kl(g);case 10:return f=n.sent,Ul({imageShare:f}),m=o.getPlayer(),E=m.name,v=m.playerId,S=vl(g),A=S[v]||{},T=A.score,y=void 0===T?0:T,I=window.game.lang.getText({key:"MESSAGE_BEST_SCORE",variables:[E,y]}),n.next=18,l.sendMessage({cta:"See result",text:I,image:f||"",template:"pass_score",data:{type:Ca,matchId:h,playerId:v,opponentId:e,status:ii}});case 18:a(Hl(e)),c.event(Gt._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(1),c.event(Gt._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,22]])})));return function(e,t){return n.apply(this,arguments)}}()},jl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,E,v,S,A;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,p=t.score,n.next=5,Vl(e,d);case 5:return g=n.sent,Gl({contextId:g}),f=s(),n.next=10,kl(f);case 10:return m=n.sent,Ul({imageShare:m}),E=o.getPlayer(),v=E.name,S=E.playerId,A=window.game.lang.getText({key:"MESSAGE_FINISH_TURN",variables:[v,p]}),n.next=16,l.sendMessage({cta:"Play",text:A,image:m||"",template:"play_turn",data:{type:Ca,matchId:h,playerId:S,opponentId:e,status:ni}});case 16:a(Hl(e)),c.event(Gt._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=26;break;case 20:if(n.prev=20,n.t0=n.catch(1),c.event(Gt._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof Oc)){n.next=25;break}return n.abrupt("return");case 25:(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Xl=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.player,r=a.facebook,o=s.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=Sl(n),p=d.score,g={type:Oa,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:l+" beats your high score. Their score: "+p+".",localizations:{en_US:l+" beats your high score. Their score: "+p+".",vi_VN:l+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:g});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Jl=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=Sl(n),p=d.score,g={type:Oa,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:l+" got "+p+" scores. So easy! Can you?",localizations:{en_US:l+" got "+p+" scores. So easy! Can you?",vi_VN:l+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:g});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),ql=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Ql=function(e,t){try{var n=ql(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,fn.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},$l=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),eh=GameCore.Configs.ApiHost,th=(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,Me("single-matches",t,{},eh);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,Le("single-matches/active",{},eh);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,Me(i,n,{},eh);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,Me(n,{},{},eh);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,Me("matches",{opponentPlayerId:t},{},eh);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),nh=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,Me(n,{},{},eh);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ih=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,Le(n,{},eh);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ah=function(){var e=(0,r.Z)(u().mark((function e(t,n,i,a){var s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,Me(s,{matchId:t,score:n,level:i,extraData:a},{},eh);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),sh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),rh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),oh=rh,ch=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),lh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),hh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),uh=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),dh=function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new $l(null,{matchId:t});if("number"!==typeof n)throw new hh(null,{score:n})},ph=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new $l(null,{matchId:t});if(""===n||"string"!==typeof n)throw new $l(null,{currentMatchId:n});if(t!==n)throw new lh(null,{matchId:t,currentMatchId:n})},gh=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new $l(null,{matchId:t});if(""===n||"string"!==typeof n)throw new $l(null,{currentMatchId:n});if(t!==n)throw new lh(null,{matchId:t,currentMatchId:n})},fh=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new $l(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new sh("This match is finished",{status:s});if(a!==t)throw new Ta(null,{playerId:a,currentPlayerId:t})},mh=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new oh(null,{opponentId:t})},Eh=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new $l(null,{matchId:t})},vh=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new $l(null,{matchId:n});if(""===i||"string"!==typeof i)throw new uh(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new ch(null,{blackPlayerId:a})},Sh=GameCore.Configs.Match,Ah=function(e){try{return GameCore.Utils.Hash.stringToHash(ye()(e))}catch(t){return""}},Th=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},yh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,r=n.globalScene,o=n.lang,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),t({type:Ln,payload:{}}),c=a.getPlayerId(),l=(0,s.Z)({},Sh.LocalSingleMatchDefault,{status:"active",playerId:c,startedAt:Date.now(),rescued:0}),fh({playerId:c,match:l}),t(Oh(l)),Ql(Sh.SingleMatchStore,l),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(Oh(null)),!(e.t0 instanceof $l)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof sh)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Ih=function(e,t){return function(n,a){try{dh((0,s.Z)({matchId:e},t));var r=a(),o=gl(r);ph({matchId:e,currentMatchId:o}),n({type:Fn,payload:{match:t}});var c=t.data;t.data=Ah(c),t.challengeMode=!1;var l=window.game.player;Ql(Sh.JourneyMatchStore+"-"+l.getPlayerId(),t)}catch(h){if(h instanceof $l)return;(0,i.tO)(h)}}},Ch=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var r,o,c,l,h,d,p,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,Eh({matchId:e}),o=a(),c=il(o),l=r.getPlayerId(),gh({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),h=nl(o),fh({playerId:l,match:h}),d=(0,s.Z)({},Sh.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(Oh(d)),p=d.data,(g=(0,s.Z)({},d)).data=Ah(p),Ql(Sh.SingleMatchStore,g),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(Oh(null)),!(t.t0 instanceof $l)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof sh)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},Oh=function(e){return{type:Nn,payload:{match:e}}},bh=function(e){return{type:Un,payload:{match:e}}},Ph=function(){return{type:Bn,payload:{}}},Rh=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.profile,r=a.globalScene,o=a.lang,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=e.playerId,mh({opponentId:c}),n({type:zn,payload:{opponentInfo:e}}),t.next=8,th(c);case 8:return l=t.sent,vh({match:l}),t.next=12,s.requestProfiles([c]);case 12:n(kh(l)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(kh(null)),!(t.t0 instanceof $l)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof oh)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},wh=function(e,t){return void 0===t&&(t=!0),function(){var n=(0,r.Z)(u().mark((function n(a){var s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.profile,c=s.globalScene,l=s.lang,t&&c.screen.open($a.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),Eh({matchId:e}),a({type:Wn,payload:{matchId:e}}),n.next=7,nh(e);case 7:if(h=n.sent,vh({match:h}),d=h.status,p=h.whitePlayerId,g=h.blackPlayerId,d!==ni){n.next=16;break}return f=r.getPlayerId(),m=f===p?g:p,n.next=16,o.requestProfiles([m]);case 16:a(kh(h)),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(0),a(kh(null)),!(n.t0 instanceof $l)){n.next=24;break}return n.abrupt("return");case 24:(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}()},xh=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a){var s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.globalScene,c=s.lang,o.screen.open($a.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),Eh({matchId:e}),a({type:jn,payload:{matchId:e,opponentInfo:t}}),n.next=7,ih(e);case 7:l=n.sent,vh({match:l}),h=l.whitePlayerId,d=l.whitePlayerScore,p=l.blackPlayerScore,g=r.getPlayerId(),f=r.getPlayerData(),m=f.score,a(kh(l,{score:g===h?d:p,bestScore:m})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(kh(null)),!(n.t0 instanceof $l)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},_h=function(e,t,n){return function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,l,h;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=window.game,o=r.globalScene,c=r.lang,o.screen.open($a.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),Eh({matchId:e}),s({type:Kn,payload:{matchId:e,score:t,extraData:n}}),l=n.level,a.next=8,ah(e,t,l,n);case 8:return h=a.sent,vh({match:h}),a.next=12,s(kh(h));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),s(kh(null)),!(a.t0 instanceof $l)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},kh=function(e,t,n){return void 0===n&&(n=null),{type:Xn,payload:{match:e,opponentInfo:t,current:n}}},Lh=function(e){return{type:qn,payload:{opponentInfo:e}}},Mh=function(e,t){return{type:ei,payload:{matchId:e,players:t}}},Dh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:Mn,payload:{}}),e.next=6,window.FBInstant.player.getDataAsync(["level"]);case 6:r=e.sent,o=r.level,c=ql(Sh.JourneyMatchStore+"-"+a)||{},l=c.data,h=c.level,c.data=Th(l),o!==h&&(c.data={}),d=o||1,p=(0,s.Z)({},c,{level:d,playerId:a}),t({type:Fn,payload:{match:p}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},Nh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Zn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Bh=function(e){return{type:Vn,payload:{level:e}}},Gh=function(e){return{type:xn,payload:{playerId:e}}},Fh=function(e,t){return{type:_n,payload:{playerId:e,stats:t}}},Uh=function(e){return{type:kn,payload:{stats:e}}},Hh=GameCore.Configs.Match,Zh=[],Yh=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new Oc(null,{contextId:t})},Vh=null,Wh=function(e){clearTimeout(Vh),Vh=setTimeout((function(){window.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)}),e)},zh=function(){return{type:In,payload:{}}},Kh=function(e){return{type:wn,payload:{stateShowMiniJourney:e}}},jh=function(){return function(e){try{e(Ph()),e(iu(_a))}catch(t){(0,i.tO)(t)}}},Xh=function(){return function(e){try{e(Ph()),e(iu(Ra))}catch(t){(0,i.tO)(t)}}},Jh=function(){return function(e){try{e(au())}catch(t){(0,i.tO)(t)}}},qh=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(Qh("reset",e,t))}catch(a){(0,i.tO)(a)}}},Qh=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,l,h,d,p,g,f,m,E,v,S,A,T,y,I,C;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game,o=r.player,c=r.facebook,l=r.globalScene,h=r.lang,l.screen.open($a.o4.NOTIFY_SCREEN,{message:h.Text.LOADING,loading:!0}),d=e,p=c.contextType,t||(g=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===g?f:g),e){a.next=15;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(d=a.sent)){a.next=13;break}return n&&l.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE),a.abrupt("return");case 13:a.next=25;break;case 15:if(!t||t===Pa.playerId){a.next=23;break}return a.next=18,c.createAsync(t);case 18:if(!1!==(d=a.sent)){a.next=22;break}return n&&l.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE),a.abrupt("return");case 22:d||"reset"===e||(d=e);case 23:p=c.contextType,s(Da(d,p));case 25:return Yh({contextId:d}),m=o.getPlayerId(),E=o.getConnectedPlayers(),a.next=30,c.getContextPlayers(m);case 30:return v=a.sent,t!==(S=Pa).playerId&&E[t]?S=E[t]:1===v.length&&(S=v[0]),s(Gh()),T=(A=S).playerId,y=A.name,I=A.photo,C={playerId:T,name:y,photo:I},a.next=38,s(iu(wa,C));case 38:s(Da(d,p)),Il.emit(Co.START_GAME),a.next=51;break;case 42:if(a.prev=42,a.t0=a.catch(0),!(a.t0 instanceof Oc)){a.next=46;break}return a.abrupt("return");case 46:if("USER_INPUT"!==(null==a.t0?void 0:a.t0.code)){a.next=48;break}return a.abrupt("return");case 48:if("INVALID_OPERATION"!==(null==a.t0?void 0:a.t0.code)){a.next=50;break}return a.abrupt("return");case 50:(0,i.tO)(a.t0);case 51:return a.prev=51,Wh(1e3),a.finish(51);case 54:case"end":return a.stop()}}),a,null,[[0,42,51,54]])})));return function(e){return a.apply(this,arguments)}}()},$h=function(e){var t=window.game.player.getConnectedPlayerIds(20,0);if(!e||0===e.length)return t;for(var n=[],i=0;i<t.length;i++)v()(e).call(e,t[i])||n.push(t[i]);return n},eu=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o,c,l,h,d,p,g,f,m,E,v,S,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,a=n.player,s=n.facebook,r=n.globalScene,o=n.lang,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=$h(Zh),l="",h="",d=s.contextType,c.length>0&&(p=Phaser.Math.RND.between(0,c.length-1),l=c[p],Zh.push(l)),!l||"string"!==typeof l){e.next=13;break}return e.next=12,s.createAsync(l);case 12:h=e.sent;case 13:return Yh({contextId:h}),g=a.getPlayerId(),e.next=17,s.getContextPlayers(g);case 17:return f=e.sent,m=Pa,l||1!==f.length||(m=f[0]||Pa),t(Gh()),v=(E=m).name,S=E.photo,A={playerId:l,name:v,photo:S},e.next=25,t(iu(wa,A));case 25:t(Da(h,d)),e.next=35;break;case 28:if(e.prev=28,e.t0=e.catch(0),!(e.t0 instanceof Oc)){e.next=34;break}return t(ru({mode:Ra,status:ti})),t(Xh()),e.abrupt("return");case 34:(0,i.tO)(e.t0);case 35:return e.prev=35,Wh(1e3),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,28,35,38]])})));return function(t){return e.apply(this,arguments)}}()},tu=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,E,v,S,A,T,y;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.profile,l=r.facebook,h=r.globalScene,d=r.lang,h.screen.open($a.o4.NOTIFY_SCREEN,{message:d.Text.LOADING,loading:!0}),p=s(),g=o.getPlayerId(p),!((f=o.getConnectedPlayers(p)).length>0)||f[t]){n.next=9;break}return h.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE),n.abrupt("return");case 9:return m=Pa,n.next=12,l.getContextPlayers(g);case 12:if(E=n.sent,t===g||t===m.playerId||!f[t]){n.next=17;break}m=f[t],n.next=25;break;case 17:if(1!==E.length){n.next=21;break}m=E[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(v=c.getProfiles())[t]&&(m=v[t]);case 25:return n.next=27,a(xh(e,m));case 27:if(p=s(),ll(p,{playerId:g})!==Pa.playerId){n.next=32;break}return n.next=32,a(wh(e));case 32:if(p=s(),ll(p,{playerId:g})===g||!f[t]){n.next=37;break}return a(qh(t,!0)),n.abrupt("return");case 37:if(rl(p)===e){n.next=41;break}return h.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE),n.abrupt("return");case 41:if(S=ol(p),A=hl(p,{playerId:g}),a(ru({mode:wa,status:S})),T=l.getContextID(),y=l.contextType,a(Da(T,y)),!A){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return h.events.emit(Ua.K5.SWITCH,Ua.Co.GAME_SCENE),n.abrupt("return");case 52:h.events.emit(Ua.K5.SWITCH,Ua.Co.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,Wh(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},nu=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();ec(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(Fh(a,l)),t(Uh(l))}catch(h){if(h instanceof Pc)return;(0,i.tO)(h)}}},iu=function(e,t){return void 0===t&&(t=null),function(){var n=(0,r.Z)(u().mark((function n(a,s){var o,c,l,h,d,p,g,f,m,E,S,A,T,y,I,C,O,b,P,R,w,x;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,h=c.analytics,d=c.facebook,p=c.globalScene,g=d.getContextID(),f=0,m=s(),h.event(Gt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a(zh()),!v()(o=[Ra,_a]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:Mn,payload:{}});var n=t.getPlayerId(),a=ql(Sh.SingleMatchStore)||{},s=a.data;a.data=Th(s),fh({playerId:n,match:a}),e(Oh(a))}catch(r){if(e(Oh(null)),r instanceof $l)return;if(r instanceof Ta)return;if(r instanceof sh)return;(0,i.tO)(r)}}));case 10:if(m=s(),il(m)){n.next=15;break}return n.next=15,a(yh());case 15:f=al(m);case 16:if(e===xa&&a(Lh(t)),e!==wa){n.next=26;break}return n.next=20,a(Rh(t));case 20:m=s(),E=rl(m),S=cl(m),A=S.playerId,g||(g=window.game.facebook.getContextID()),T=Tl(m,{opponentId:A}),g&&A&&!T&&a(Wl(A,{contextId:g,matchId:E}));case 26:"online"===e&&a(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:$n,payload:{playerId:r}}),l={},ce()(n=ja()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[r]={playerId:r,name:o,photo:c},t(Mh("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=s(),y=l.getPlayerData(m),I=y.score,C=void 0===I?0:I,O=nl(m),b=O.rescued,P=void 0===b?0:b,a(Uh({score:f,bestScore:C})),a({type:Cn,payload:{mode:e,contextId:g,rescued:P}}),a(Na(e)),p.events.emit(Ua.K5.SWITCH,Ua.Co.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof $l)){n.next=43;break}return R=window.game,w=R.globalScene,x=R.lang,w.screen.open($a.o4.NOTIFY_SCREEN,{message:x.Text.NO_REWARDS+"\n"+x.Text.CANCELLED_AD,duration:2500,loading:!1}),n.abrupt("return");case 43:(0,i.tO)(n.t0);case 44:return n.prev=44,Wh(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},au=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game,o=a.analytics,c=a.facebook,l=a.globalScene,h=c.getContextID(),d=n(),p=fl(d)||1,o.event(Gt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(ka),level:p}),t(zh()),d=n(),gl(d)){e.next=12;break}return e.next=12,t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=window.game,r=a.player,o=a.globalScene,c=a.lang,o.screen.open($a.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),t({type:Gn,payload:{}}),l=n(),h=fl(l)||1,d=ml(l),p=r.getPlayerId(),g=(0,s.Z)({},Sh.LocalSingleMatchDefault,{level:h,status:"active",playerId:p,challengeMode:d,startedAt:Date.now(),updateAt:Date.now()}),fh({playerId:p,match:g}),t(bh(g)),Ql(Sh.JourneyMatchStore+"-"+p,g),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(0),t(bh(null)),!(e.t0 instanceof $l)){e.next=19;break}return e.abrupt("return");case 19:if(!(e.t0 instanceof sh)){e.next=21;break}return e.abrupt("return");case 21:(0,i.tO)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:t({type:Cn,payload:{mode:ka,contextId:h}}),l.events.emit(Ua.K5.SWITCH,Ua.Co.JOURNEY_SCENE),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(0),!(e.t0 instanceof $l)){e.next=22;break}return window.game.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),e.abrupt("return");case 22:(0,i.tO)(e.t0);case 23:return e.prev=23,Wh(0),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,16,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},su=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(i,a){var s,r,o,c,l,h,d,p,g,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game.player,o=t.score,c=void 0===o?0:o,l=t.level,h=void 0===l?0:l,d=a(),!v()(s=[Ra,_a]).call(s,e)){n.next=7;break}return p=il(d),n.next=7,i(Ch(p));case 7:if(e===xa&&(i({type:Qn,payload:{}}),g=r.getPlayerId(),i(Fh(g,t))),e!==wa){n.next=12;break}return f=rl(d),n.next=12,i(_h(f,c,{level:h}));case 12:i({type:On,payload:{mode:e}}),Il.emit(Co.GAME_OVER);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},ru=function(e){return function(t){var n=e.mode,a=e.status;t({type:bn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},ou=function(){return function(e,t){var n=t(),i=Sl(n).level,a=void 0===i?0:i,s=wc(n);window.game.analytics.event(Gt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a}),e({type:Pn,payload:{}})}},cu=Qa.Z.DEFAULT,lu=cu.KEY,hu=cu.FRAME,uu=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(qh(e))},i.handleShare=function(){i.scene.storage.dispatch(Dl())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:"",rank:-1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton()},n.createBackground=function(){this.background=this.scene.make.image({key:lu,frame:hu.LEADERBOARD_BG_ITEM}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||hu.LEADERBOARD_BG_ITEM),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new Ic(this.scene,{key:lu,frame:hu.AVATAR_BORDER,background:hu.AVATAR_BACKGROUND,width:40,height:40,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-40)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=hu.ICON_CUP_GOLD;switch(e){case 1:t=hu.ICON_CUP_GOLD;break;case 2:t=hu.ICON_CUP_SILVER;break;case 3:t=hu.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:lu,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(28,24),this.rankIcon.setFrame(t)}},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(ns.Z.NUMBER_DARK.KEY))},n.updateRankUndefined=function(){this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),this.rankText.setText("?"),this.payload.isHighlight?this.rankText.setFont(ns.Z.NUMBER_LIGHT.KEY):this.rankText.setFont(ns.Z.NUMBER_DARK.KEY)},n.getShortName=function(e){return e.length>15?e.substring(0,12)+"...":e},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"}}),this.username.setTint(7485207),this.username.setHighQuality(),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,10,0),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name,t=this.scene.game.lang,n="Anonymous"!=e?e:t.Text.Anonymous;this.username.setText(this.getShortName(n)),this.username.setTint(7551258)},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.text({text:"132500",style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(36)+"px",fontStyle:"500"}}),this.scoreText.setOrigin(.5),this.score.add([this.scoreText]),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this.avatar,160,0)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e),this.scoreText.setTint(7551258)},n.createButtonPlay=function(){this.buttonPlay=new ts.Z(this.scene,lu,hu.BUTTON_CHALLENGE_LIGHT,54,36),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-18,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new ts.Z(this.scene,lu,hu.BUTTON_SHARE_DARK,54,36),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-18,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.score,this.avatar,150,0):Phaser.Display.Align.In.Center(this.score,this.avatar,200,0)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new Ac({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new Ec({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},n.setUserNameLight=function(){this.username.setTint(16640200)},n.setRankLight=function(){this.rankText.setFont(ns.Z.NUMBER_LIGHT.KEY)},n.setScoreLight=function(){this.scoreText.setTint(16640200)},t}(Phaser.GameObjects.Container),du=uu,pu=Qa.Z.DEFAULT.FRAME,gu=function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new du(this.scene),this.myScoreBlock.setFrameBackground(pu.LEADERBOARD_BG_ITEM),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.setRankLight(),this.myScoreBlock.setScoreLight(),this.myScoreBlock.setUserNameLight(),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container),fu=gu,mu=n(622),Eu=n(621),vu=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return re()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=ja()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&(ce()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)})),this.objects.getChildren().forEach((function(e){return t.objects.killAndHide(e)})))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,V.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(Eu.Z));function Su(e,t){var n="undefined"!==typeof wo()&&_o()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Au(e,t);var i=Ke()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Po()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Au(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var Tu=Qa.Z.DEFAULT.FRAME,yu=function(e){function t(t){var n;(n=e.call(this,t)||this).currentPlayerId=void 0,n.scroller=void 0;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){var e=335,t=0;this.scene.world.isLandscape()&&(e=290,t=-20),this.scroller=new vu(this.scene,{classType:du,listConfigs:[],width:310,height:e,padding:0,marginTop:t,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Qa.Z.DEFAULT.KEY,Qa.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(e,t){var n=fi()(e)||[];if(!(n.length<1)){for(var i,a=Ei()(n).call(n,(function(e,t){return+t.score-+e.score})),s=[],r=0,o=(this.scene.game.lang,Su(a));!(i=o()).done;){var c=i.value,l=c.playerId,h=c.photo,u=c.score,d=c.name,p=c.rank;if(l){this.currentPlayerId;var g={playerId:l,photo:h,name:d,rank:p,score:u,scoreRight:t===ko,useChallenge:t===Lo,isHighlight:!1,backgroundFrame:""+Tu.PREFIX_LEADERBOARD_BG_ITEM+r};s.push(g),++r>=2&&(r=0)}}this.scroller.updateConfig(s),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),Iu=yu,Cu=Qa.Z.DEFAULT,Ou=Cu.KEY,bu=Cu.FRAME,Pu=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.loading=void 0,n.message=void 0,n.textMessage=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createText(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.textMessage.setText(t),this.messageAnimation.play()),"ar"==this.scene.facebook.getLocale()&&(this.textMessage.setVisible(!0),this.message.setVisible(!1))},n.createLoading=function(){this.loading=new Tc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createText=function(){this.textMessage=this.scene.make.text({style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textMessage.setTint(7551258),this.textMessage.setVisible(!1),this.add(this.textMessage),Phaser.Display.Align.In.Center(this.textMessage,this)},n.createContents=function(){this.createLeaders(),this.createContentBackground()},n.createLeaders=function(){this.leaders=new Iu(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-11)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:Ou,frame:bu.LEADERBOARD_BG_BOTTOM});t.setFlipY(!0),t.setWorldSize(315,22);var n=this.scene.make.image({key:Ou,frame:bu.LEADERBOARD_BG_MIDDLE});n.setWorldSize(315,300);var i=this.scene.make.image({key:Ou,frame:bu.LEADERBOARD_BG_BOTTOM});i.setWorldSize(315,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-10)},n.createAnimation=function(){this.messageAnimation=new mu.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),Ru=Pu,wu=GameCore.Configs.LeadersBoard,xu=Qa.Z.DEFAULT,_u=xu.KEY,ku=xu.FRAME,Lu=function(e){function t(t,n,a,s){var r;return(r=e.call(this,t,n,a,s)||this).popup=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.popupFadeInMaskAnimation=void 0,r.popupFadeOutMaskAnimation=void 0,r.board=void 0,r.footerBar=void 0,r.isRequesting=void 0,r.isSwitchable=void 0,r.tabId=void 0,r.offset=void 0,r.isStateChanged=void 0,r.open=function(t){e.prototype.open.call((0,Va.Z)(r),t),r.setVisible(!0),r.selectWorldTab(),r.runOpenAnimation(),r.board.showLoading(!0);var n=[{selector:pc,callback:function(e){if(r.isRequesting=e,r.board.showLoading(e),!1===e){if(!r.scene)return;if(!r.visible||!r.scene.scene.isActive)return;var t=r.scene.game.storage.getState(),n=dc(t);r.isSwitchable=!0,n&&0!==B()(n).length?r.board.leaders.updateData(n,r.tabId):r.board.showMessage(!0,r.scene.lang.Text.LEADERBOARD_EMPTY),r.updatePlayerEntryAsync().catch(i.tO)}}}];r.handleStateChange(n)},r.handleSelectFriendTab=function(){r.isRequesting||r.isSwitchable&&r.selectFriendTab()},r.handleSelectWorldTab=function(){r.isRequesting||r.isSwitchable&&r.selectWorldTab()},r.clickClose=function(){r.runCloseAnimation()},r.setVisible(!1),r.createPopup(),r.createTitle(),r.createBoard(),r.createFooterBar(),r.setDepth($a.Ks.POPUP),r.background.setAlpha(.5),r.scene.world.isLandscape()&&r.popup.setScale(r.popup.scale-.15),r}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-5,340,510,{forceHeightTop:60}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-2)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:_u,frame:ku.TEXT_LEADER_BOARD}),i=n.width,a=n.height;n.setWorldSize(i/t,a/t);var s=new ts.Z(this.scene,_u,ku.BUTTON_CLOSE,35,35);s.setName("Close"),s.onClick=this.clickClose,e.add([n,s]),Phaser.Display.Align.In.Center(n,e,0,9),Phaser.Display.Align.In.Center(s,e,160,-15),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createBoard=function(){this.board=new Ru(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new fu(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,178)},n.selectFriendTab=function(){this.tabId=Lo,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(hc()),this.scene.storage.dispatch(cc(wu.LeaderboardId,Lo,wu.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=ko,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.footerBar.myScoreBlock.setVisible(!1),this.scene.storage.dispatch(hc()),this.scene.storage.dispatch(cc(wu.LeaderboardId,ko,wu.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.updatePlayerEntryAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.player.getPlayerId(),n=this.scene.player.getPlayer(),i=null,e.prev=3,e.next=6,qo(t);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i=null;case 12:a={playerId:t,name:n.name,photo:n.photo,score:""+(n.data.score||0),rank:-1},i&&(a={playerId:t,name:n.name,photo:n.photo,score:""+i.getScore(),rank:i.getRank()}),this.footerBar.updateMyScoreBlock({playerId:a.playerId,rank:a.rank,photo:a.photo,name:a.name,score:a.score,backgroundFrame:ku.LEADERBOARD_BG_ITEM,isHighlight:!0});case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Mu=Lu,Du=n(460),Nu={LOGO:{KEY:"spine-logo",JSON:"./assets/spine/logo/logo.json",ATLAS:"./assets/spine/logo/logo.atlas",ANIMATIONS:{START_GROW:"start_grow",IDLE_GROW:"idle_grow"}},BEST_SCORE:{KEY:"best-score",JSON:"./assets/spine/best-score{langcode}/newbest-trim.json",ATLAS:"./assets/spine/best-score{langcode}/newbest-trim.atlas",ANIMATIONS:{ANIM:"anim5"}}},Bu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreSpine=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSpineEffect=function(){var e=this,t=this.scene.world.getPixelRatio();this.bestScoreSpine=this.scene.add.spine(0,630,Nu.BEST_SCORE.KEY,Nu.BEST_SCORE.ANIMATIONS.ANIM),this.bestScoreSpine.preMultipliedAlpha=!0,this.bestScoreSpine.scale=1/t,this.add(this.bestScoreSpine),this.bestScoreSpine.on("complete",(function(){e.bestScoreSpine.setVisible(!1)}))},n.playEffect=function(){this.bestScoreSpine?(this.bestScoreSpine.setVisible(!0),this.bestScoreSpine.play(Nu.BEST_SCORE.ANIMATIONS.ANIM)):this.createSpineEffect()},t}(Phaser.GameObjects.Container),Gu=n(606),Fu=n.n(Gu),Uu=GameCore.Configs,Hu=Uu.Gameplay,Zu=Uu.Match.Levels,Yu=function(){function e(){this.levelIndex=0,this.levels=Zu,this.recentLevel=void 0}var t=e.prototype;return t.increaseLevel=function(){this.levelIndex++},t.getCurrentTargetScore=function(){return this.levels[this.levelIndex]},t.getNextTargetScoreLevel=function(){return this.levels[this.levelIndex+1]},t.getCurrentIndex=function(){return this.levelIndex},t.updateCurrentLevelByScore=function(e){var t,n=Fu()(t=this.levels).call(t,(function(t){return t>e}));if(-1===n)return this.handleAutoGrantNewLevel(e);this.levelIndex=n;var i=this.levels[n-1];return i&&(this.recentLevel=i),this.levels[n]},t.restart=function(){this.levelIndex=0,this.recentLevel=0},t.handleAutoGrantNewLevel=function(e){var t=Hu.Progress.BonusScore,n=this.levels[this.levels.length-1]+t;return this.levels.push(n),n<=e?this.handleAutoGrantNewLevel(e):(this.levelIndex=this.levels.length-1,this.recentLevel=this.levels[this.levelIndex],n)},e}(),Vu=n(461),Wu=function(){var e,t=window.game.facebook;return t?(null==(e=t.platform)?void 0:e.toLowerCase())||"":null},zu=function(){return"web"==Wu()},Ku=Math.sin,ju=Math.cos,Xu=function(e,t,n){return e*ju(t)*n},Ju=function(e,t,n,i){return void 0===i&&(i=10),e*Ku(t)*n-.5*i*Math.pow(n,2)},qu=Qa.Z.GAMEPLAY_32,Qu=qu.KEY,$u=qu.FRAME,ed=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:Qu,frame:$u.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.scale0=this.imageCell.scale,this.add(this.imageCell)},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:Qu,frame:$u.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:Qu,frame:$u.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:Qu,frame:$u.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:Qu,frame:$u.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Xu(this.v0,this.alpha0,t),i=Ju(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),td=ed,nd=n(126),id=n.n(nd),ad=GameCore.Configs.Board,sd=(ad.cols,ad.rows),rd=void 0===sd?8:sd,od=0,cd=function(){return od},ld=function(e,t){od=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(e){n.some((function(n){return n.x===e&&n.y===t}))||n.push({x:e,y:t})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(e){n.some((function(n){return n.x===t&&n.y===e}))||n.push({x:t,y:e})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=dd(e,t);if(u&&u.length>0)for(var d=function(){var e=u[p],t=e.x,i=e.y;n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i})},p=0;p<u.length;p++)d();return od+=s.length,od+=r.length,od+=Math.floor(u.length/9),n},hd=function(e,t){if(0===e.length)return!1;var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},ud=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},dd=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});hd(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=ud(e,s);n.push.apply(n,r)}return n},pd=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},gd=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},fd=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(md(e,s,a,t[r]))return!1;return!0},md=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},Ed=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(md(e,s,a,t))return!0;return!1},vd=0,Sd=function(){return vd++,18+10*(Ad()-1)},Ad=function(){return vd+1},Td=function(e){var t=e;switch(e){case xs:t="b";break;case _s:t="c";break;case ks:t="d";break;case Ls:t="g";break;case Ms:t="o";break;case Ds:t="p";break;case Ns:t="q";break;case Bs:t="r";break;case Gs:t="y";break;case Hs:t="l";break;case Zs:t="l1";break;case Ys:t="l3";break;case Vs:t="e2";break;case Ws:t="e3";break;case zs:t="e4";break;case Ks:t="e5";break;case js:t="s1";break;case Xs:t="s2";break;case Js:t="s3";break;case qs:t="tz";break;case Qs:t="ta";break;case Cs:t="dt";break;case ys:t="dl";break;case Is:t="dr";break;case Os:t="db";break;case As:t="v";break;case Ts:t="h";break;case bs:t="vl";break;case Ps:t="vr";break;case Rs:t="hl";break;case ws:t="hr"}return t},yd=function(e){var t=e;switch(e){case"b":t=xs;break;case"c":t=_s;break;case"d":t=ks;break;case"g":t=Ls;break;case"o":t=Ms;break;case"p":t=Ds;break;case"q":t=Ns;break;case"r":t=Bs;break;case"y":t=Gs;break;case"l":t=Hs;break;case"l1":t=Zs;break;case"l3":t=Ys;break;case"e2":t=Vs;break;case"e3":t=Ws;break;case"e4":t=zs;break;case"e5":t=Ks;break;case"s1":t=js;break;case"s2":t=Xs;break;case"s3":t=Js;break;case"tz":t=qs;break;case"ta":t=Qs;break;case"dt":t=Cs;break;case"dl":t=ys;break;case"dr":t=Is;break;case"db":t=Os;break;case"v":t=As;break;case"h":t=Ts;break;case"vl":t=bs;break;case"vr":t=Ps;break;case"hl":t=Rs;break;case"hr":t=ws}return t},Id=function(e){for(var t=[],n="12345678x",i=e.split(""),a=0;a<i.length;a++)if(Ot()(n).call(n,i[a])>=0)for(var s="x"===i[a]?rd:Number(i[a]),r=0;r<s;r++)t.push({value:0,frame:"gem/gem_transparent"});else t.push({value:1,frame:yd(i[a])});return t},Cd=function(e){var t=e.split(","),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:yd(n[0]),direction:yd(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,frame:yd(t[1])}},Od=Qa.Z.GAMEPLAY_32,bd=Od.KEY,Pd=Od.FRAME,Rd=GameCore.Configs.Board,wd=Rd.cols,xd=Rd.rows,_d=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.wrapPiece=void 0,s.type=void 0,s.frame=void 0,s.direction=void 0,s.data=[],s.isReverse=!1,s.matrixData=void 0,s.cellItems=[],s.cells=[],s.isSetDrag=!1,s.isCreateCell=!1,s.isDragEnd=!1,s.isCanMove=void 0,s.index=void 0,s.distancePY=void 0,s.backupPx=void 0,s.backupPy=void 0,s.moveTopNumber=30,s.correctAlpha=1,s.props=void 0,s.parent=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,Va.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:bd,frame:Pd.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive().input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(qa.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.dragStart(),this.scene.audio.playSound(es.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(zu()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(Vu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=wd,r=xd,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=re()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return"continue";for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=re()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return"continue";for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[E],t=re()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return"continue";var s=t[0];a.checkItemInArray(o,s)||o.push(s)},E=0;E<n.length;E++)m();for(var v=function(){var e,t=o[S],n=t.x,i=t.y,c=re()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return"continue";c[0].cell.setFrameImageCell(Pd.GEM_LIGHT)},S=0;S<o.length;S++)v()},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++)this.cellItems[e].cell.setFrameImageCell(Pd.GEM)},n.checkItemInArray=function(e,t){var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(qa.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(es.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(qa.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.scene.layoutManager.objects.main,n=this.getPositionTopLeftInBoard();if(n){var i=this.calcScore()||0;this.scene.tutorialManager.isRunning()||(this.scene.handleUpdateScore(i),this.scene.handleAddScoreAnim(i));var a=n.x,s=n.y,r=t.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,E=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),t.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),t.board.handleMove(E,e.onBoardHandleMoveCompleted.bind(e))}})}else t.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.scene.tutorialManager.isRunning()||(this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces())},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(md(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this,t=this.scene.layoutManager.objects.main;this.scene.audio.playSound(es.Z.PIECE_INVALID_MOVE),t.board.handleRemoveHighlight(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.invalidMove(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}})},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()&&!this.scene.tutorialManager.validTargetPosition(n))return t;for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=xd||s>=wd||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<xd;p++)for(var g=0;g<wd;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,E=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&E-h/2<=l&&E+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>wd-1||d<0||d>xd-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?Pd.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell||this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Sine.Out})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new td(this.scene,r);o.setFrameImageCell(Pd.GEM),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive()},t}(Phaser.GameObjects.Container),kd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case ys:n?i=Tr:(i=Ar,e===Zs&&(i=yr),e===Ys&&(i=Ir));break;case Is:n?i=pr:(i=dr,e===Zs&&(i=gr),e===Ys&&(i=fr));break;case Cs:if(n){i=lr;break}i=cr,e===Zs&&(i=hr),e===Ys&&(i=ur);break;case Os:n?i=Er:(i=mr,e===Zs&&(i=vr),e===Ys&&(i=Sr))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(_d),Ld=kd,Md=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case Ks:n=t===As?xr:_r;break;case zs:n=t===As?Rr:wr;break;case Vs:n=t===As?Cr:Or;break;case Ws:n=t===As?br:Pr}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(_d),Dd=Md,Nd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case js:t=kr;break;case Xs:t=Lr;break;case Js:t=Mr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(_d),Bd=Nd,Gd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Fr;break;case"right":t=Ur;break;case"top":t=Hr;break;case"bottom":t=Zr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(_d),Fd=Gd,Ud=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case"left":default:t=jr;break;case"right":t=Xr}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case"left":default:t=Jr;break;case"right":t=qr}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case"left":default:t=Qr;break;case"right":t=$r}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case"left":default:t=eo;break;case"right":t=to}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case tr:i=t.getDataByDirectionCross2(n);break;case nr:i=t.getDataByDirectionCross3(n);break;case ir:i=t.getDataByDirectionCross4(n);break;case ar:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(_d),Hd=Ud,Zd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"vertical_left":default:t=Dr;break;case"vertical_right":t=Nr;break;case"horizontal_right":t=Gr;break;case"horizontal_left":t=Br}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(_d),Yd=Zd,Vd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return Kr},t.getData=function(){return t.buildData(t.getMatrixData())},t}(_d),Wd=Vd,zd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Yr;break;case"right":t=Vr;break;case"top":t=Wr;break;case"bottom":t=zr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(_d),Kd=zd,jd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=no;break;case"right":t=io;break;case"top":t=ao;break;case"bottom":t=so}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(_d),Xd=jd,Jd=Qa.Z.DEFAULT,qd=Jd.KEY,Qd=Jd.FRAME,$d=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:qd,frame:Qd.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),ep=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new $d(this.scene)},e}(),tp=Qa.Z.DEFAULT,np=tp.KEY,ip=tp.FRAME,ap=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.iconCrown=void 0,n.bestScoreText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createIconCrown(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:np,frame:ip.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(26),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,25)},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:np,frame:ip.ICON_CROWN}),this.iconCrown.setWorldSize(20,18),this.add(this.iconCrown),Phaser.Display.Align.In.Center(this.iconCrown,this.background,0,5)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.updateBestScoreText=function(e){var t=this.scene.storage.getState();e>Sl(t).bestScore&&this.setScoreText(e)},t}(Phaser.GameObjects.Container),sp=ap,rp=Qa.Z.DEFAULT,op=rp.KEY,cp=rp.FRAME,lp=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,op,cp.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),hp=lp,up=Qa.Z.GAMEPLAY,dp=up.KEY,pp=up.FRAME,gp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=void 0,n.currentScore=0,n.scene=t,n.scene.add.existing((0,Va.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:dp,frame:pp.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background,0,3)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScoreText(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.scene.tutorialManager.isRunning()?t.scene.tutorialManager.nextTutorial():(t.scene.handleNextTargetScore(),t.scene.bestScoreReached())}})},t}(Phaser.GameObjects.Container),fp=gp,mp=Qa.Z.GAMEPLAY,Ep=mp.KEY,vp=mp.FRAME,Sp=function(e){function t(t){var n;return(n=e.call(this,t)||this).titleSprite=void 0,n.background=void 0,n.textScore=void 0,n.avatar=void 0,n.score=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.initScoreBlockAvatar=function(){this.createAvatar(),this.createBackgroundScore(),this.createScoreText(),this.setScore(0),this.setScoreText(0)},n.createAvatar=function(){this.avatar=new Ic(this.scene,{key:Ep,frame:vp.AVATAR_BORDER,background:vp.AVATAR_BACKGROUND,width:32,height:32,radius:32,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this,0,-10)},n.createBackgroundScore=function(){this.background=this.scene.make.image({key:Ep,frame:vp.BG_SCORE}),this.background.setWorldSize(92,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,25)},n.createScoreText=function(){this.textScore=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(35),text:"0",origin:{x:.5,y:.5}}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),Ap=Sp,Tp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.addScore=void 0,n.currentScore=0,n.scene=t,n.initScoreBlockAvatar(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;if(this.avatar.loadPhoto(t,n),this.scene.gamePlayMode===wa){var i=this.scene.storage.getState(),a=(Sl(i)[t]||{}).score,s=void 0===a?0:a;this.textScore.setText(String(s))}},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScore(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.setScoreText(i),t.scene.handleNextTargetScore(),t.scene.bestScoreReached()}})},t}(Ap),yp=Tp,Ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).initScoreBlockAvatar(),n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.updateInfo=function(){var e=this.scene.storage.getState(),t=vl(e),n=cl(e),i=n.playerId,a=n.photo,s=(t[i]||{}).score,r=void 0===s?0:s;this.textScore.setText(String(r)),this.avatar.loadPhoto(i,a)},t}(Ap),Cp=Ip,Op=n(452),bp=Qa.Z.EFFECTS,Pp=bp.KEY,Rp=bp.FRAME,wp=function(e){function t(t){var n;return(n=e.call(this,t,Pp,Rp.FX_STAR_WHITE)||this).emitZone=void 0,n.emitter=void 0,n._isPlaying=!1,n.frequency=void 0,n.count=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({frame:Rp.DUST_YELLOW,tint:16710522,emitZone:{source:this.emitZone,type:"random"},frequency:16,speedX:{min:-25,max:-10},speedY:{min:-7,max:7},lifespan:{min:500,max:1500},alpha:{start:.7,end:.3},scale:{min:1*e,max:1.5*e},delay:300})},n.run=function(e,t,n,i,a,s){this.emitZone.setSize(a,s),this.emitZone.setPosition(n-a/2,i-s/2),t!=this.frequency&&(this.emitter.setFrequency(t),this.frequency=t),e!=this.count&&(this.emitter.setQuantity(e),this.count=e),this._isPlaying||(this.emitter.start(),this._isPlaying=!0)},n.stop=function(){var e;null==(e=this.emitter)||e.stop(),this._isPlaying=!1},n.isPlaying=function(){return this._isPlaying},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),xp=wp,_p=Qa.Z.GAMEPLAY,kp=_p.KEY,Lp=_p.FRAME,Mp=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.rightWhiteProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.sparkling=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup(),this.createSparkling()},n.initBg=function(){this.leftBg=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BAR_RIGHT}),this.rightWhiteProgress=this.scene.make.image({key:kp,frame:Lp.PROGRESS_BAR_RIGHT_WHITE});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.rightWhiteProgress,l=c.width,h=c.height,u=l*this.height/h;this.rightWhiteProgress.setWorldSize(u,this.height);var d=this.width-(i+o)+2;this.midProgress.setWorldSize(d,this.height),this.add(this.rightWhiteProgress),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0),Phaser.Display.Align.In.Center(this.rightWhiteProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:kp,frame:Lp.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:kp,frame:Lp.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new Op.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(kp),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:Lp.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createSparkling=function(){this.sparkling=new xp(this.scene),this.add(this.sparkling)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:kp,frame:Lp.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=re()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth,s=this.leftBg.width+this.midBg.width+this.rightBg.width;if(this.sparkling.setPosition(),0===e)return this.rightWhiteProgress.setVisible(!1),this.sparkling.stop(),this.stopAnimGlare(),void this.stopEmitter();var r=s*(e>1?1:e),o=this.leftBg.x+r-this.leftBg.width/2+this.rightWhiteProgress.width/2-1;if(this.scene.isNextTarget?(this.runSparklingEmitZone(o-2),this.scene.isNextTarget=!1):this.sparkling.run(2,50,o,this.leftBg.y-.5,4,4),this.rightWhiteProgress.setVisible(!0),this.rightWhiteProgress.x=t-s/2+this.rightWhiteProgress.width/2-3,e>=1){this.rightWhiteProgress.x=s-this.rightProgress.x-a;var c=s-this.rightProgress.x-a;if(this.sparkling.run(2,50,c,this.leftBg.y-.5,4,4),this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}if(this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n)return this.leftProgress.setVisible(!0),e<=.01?(this.leftProgress.setCrop(0,0,5,2*this.height),void(this.rightWhiteProgress.x+=2)):void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height);if(t>n+i){this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height),this.rightWhiteProgress.x=this.rightProgress.x-2;var l=this.rightProgress.x-2;this.sparkling.run(2,50,l,this.leftBg.y-.5,4,4)}else this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height)},n.runSparklingEmitZone=function(e){this.scene.tweens.add({targets:this.sparkling.emitZone,x:e,duration:400})},t}(Phaser.GameObjects.Container),Dp=Qa.Z.GAMEPLAY,Np=Dp.KEY,Bp=Dp.FRAME,Gp=function(e){function t(t){var n;return(n=e.call(this,t,Np,Bp.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Np,frame:Bp.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ts.Z),Fp=Gp,Up=Qa.Z.GAMEPLAY,Hp=Up.KEY,Zp=Up.FRAME,Yp=Qa.Z.DEFAULT,Vp=Yp.KEY,Wp=Yp.FRAME,zp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.myScoreBlock=void 0,n.opponentScoreBlock=void 0,n.iconBattle=void 0,n.progressBar=void 0,n.textScore=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),t.add.existing((0,Va.Z)(n)),n.createIconBattle(),n.createBestScoreBlock(),n.createSettingButton(),n.createMainScoreBlock(),n.createMyScoreBlock(),n.createOpponentScoreBlock(),n.createProgressBar(),n.addTextScore(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLeaf=function(){var e=new hp(this.scene);this.add(e),Phaser.Display.Align.In.Center(e,this,0,e.displayHeight/2)},n.createBestScoreBlock=function(){this.bestScoreBlock=new sp(this.scene),this.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this,-132,-12.5)},n.createMainScoreBlock=function(){this.mainScoreBlock=new fp(this.scene),this.add(this.mainScoreBlock),Phaser.Display.Align.In.Center(this.mainScoreBlock,this,0,52)},n.createMyScoreBlock=function(){this.myScoreBlock=new yp(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this,-52,35)},n.createOpponentScoreBlock=function(){this.opponentScoreBlock=new Cp(this.scene),this.opponentScoreBlock.setVisible(!1),this.add(this.opponentScoreBlock),Phaser.Display.Align.In.Center(this.opponentScoreBlock,this,52,35)},n.createSettingButton=function(){this.buttonSetting=new Fp(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new Mp(this.scene,315,13),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,-19,92)},n.createIconBattle=function(){this.iconBattle=this.scene.make.image({key:Hp,frame:Zp.ICON_BATTLE}),this.iconBattle.setWorldSize(30,27),this.iconBattle.setVisible(!1),this.add(this.iconBattle),Phaser.Display.Align.In.Center(this.iconBattle,this,0,24)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!1),this.iconBattle.setVisible(!1),this.bestScoreBlock.setVisible(!0),this.textScore.setVisible(!1),this.scene.world.isLandscape()&&(this.textScore.setVisible(!0),this.progressBar.setPosition(0,0))},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!0),this.iconBattle.setVisible(!0),this.scene.world.isLandscape()&&(this.bestScoreBlock.setVisible(!1),this.textScore.setVisible(!1),this.progressBar.setPosition(0,-33))},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textScore=this.scene.make.image({key:Vp,frame:Wp.TEXT_SCORE});var t=this.textScore,n=t.width,i=t.height;this.textScore.setVisible(!1),this.textScore.setWorldSize(n/e,i/e),this.add(this.textScore)},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textScore.setVisible(!0),this.textScore.setPosition(-this.width/2,8),this.opponentScoreBlock.setPosition(100,0).setScale(.8),this.myScoreBlock.setPosition(-100,0).setScale(.8),this.iconBattle.setPosition(0,0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIBestScore()},n.calcSize=function(){this.setSize(575,110)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(Vp),this.mainScoreBlock.background.setFrame(Wp.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.mainScoreBlock.setPosition(-this.width/2,56)},n.updateUIProgress=function(){this.progressBar.setPosition(0,0),this.opponentScoreBlock.visible&&this.progressBar.setPosition(0,-33)},n.updateUIBestScore=function(){this.bestScoreBlock.setPosition(-this.width/2,63)},t}(Phaser.GameObjects.Container),Kp=zp,jp=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case Hs:case Zs:case Ys:i=new Ld(e,t,n);break;case Vs:case Ws:case zs:case Ks:i=new Dd(e,t,n);break;case js:case Xs:case Js:i=new Bd(e,t,n);break;case Qs:i=new Fd(e,t,n);break;case $s:i=new Kd(e,t,n);break;case sr:i=new Xd(e,t,n);break;case er:i=new Wd(e,t,n);break;case tr:case nr:case ir:case ar:i=new Hd(e,t,n);break;case qs:i=new Yd(e,t,n);break;default:i=new Bd(e,t,n)}return i},e}(),Xp=jp,Jp=Qa.Z.GAMEPLAY_32,qp=Jp.KEY,Qp=Jp.FRAME,$p=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.scene=t,n.scene.world.isLandscape()?n.setSize(101,300):n.setSize(375,140),t.add.existing((0,Va.Z)(n));var i=n.scene.gameZone,a=i.width,s=(i.height/2-176-27+100)/-2;return n.positionPiece=[{x:-a/3,y:s},{x:0,y:s},{x:a/3,y:s}],n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps(),this.registerEvents()},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([js,Xs,Js].some((function(t){return t===e})))return[];var t=[];switch(e){case Hs:case Zs:case Ys:t=[Cs,ys,Is,Os];break;case Vs:case Ws:case zs:case Ks:t=[As,Ts];break;case Qs:t=[Cs,ys,Is,Os];break;case qs:t=[bs,Ps,Rs,ws];break;case $s:case sr:t=[Cs,ys,Is,Os];break;case er:t=[];break;case tr:case nr:case ir:case ar:t=[ys,Is]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<rr.length;n++){var i=this.getDirectionsByType(rr[n]);if(i.length<=0)t.push({type:rr[n]});else{for(var a=0;a<i.length;a++)t.push({type:rr[n],direction:i[a]});if(Hs===rr[n])for(var r=0;r<i.length;r++)t.push({type:rr[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:qp,frame:Qp.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=Xp.create(this.scene,this,c);l.hide(),this.add(l),this.allPieces.push(l)}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e];this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(Vu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return"continue";var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[zs,Ks].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c];if(e.allPieces[l]&&e.allPieces[l].direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r];a.push({position:r,texture:qp,frame:Qp.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=this.scene.layoutManager.objects.main,n=[],i=0;i<or.length;i++)n.push((0,s.Z)({},or[i]));if(e){var a=t.board.dataBoard,r=5;if(this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<n.length;o++)n[o].type===Ks&&(n[o].rate=8);else if(r=4,this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<n.length;c++)n[c].type===zs&&(n[c].rate=8)}for(var l=[],h=0;h<n.length;h++)for(var u=n[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition(),t.setIndex(e),t.drawPiece(),this.allPieces[this.piecesActive[e].position]=t}},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=re()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].reset();this.randomPieces(),this.setActivePieces(),this.drawPieces()},n.calculatePieceInfo=function(){for(var e=0,t=0,n=this.cellSize,i=0;i<this.piecesActive.length;i++){var a=this.allPieces[this.piecesActive[i].position].data;e+=a[0].length,a.length>t&&(t=a.length)}return{cellLength:n/2,cols:e}},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=Ed(e,this.allPieces[n]);this.allPieces[n].setCanMove(i)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=za()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==id()(s=i[a]).call(s)){var o=Cd(id()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.frame;if(!n.used){var o=Td(i);a&&""!==a&&(o+="-"+Td(a)),s&&(o+="-r"),e+=" "+o+","+Td(r)}}return e},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].hide()}this.piecesActive=[]},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=0;c<this.allPieces.length;c++){var l=this.allPieces[c];if(a===l.type&&s===l.direction&&r===l.isReverse){t.push({position:c,texture:qp,frame:o,type:l.type,direction:l.direction,isReverse:l.isReverse});break}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].wrapPiece.setVisible(!1);this.showNewPieces()},t}(Phaser.GameObjects.Container),eg=Qa.Z.GAMEPLAY,tg=eg.KEY,ng=eg.FRAME,ig=function(e){function t(t){var n;return(n=e.call(this,t,tg,ng.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:tg,frame:ng.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ts.Z),ag=ig,sg=Qa.Z.DEFAULT,rg=sg.KEY,og=sg.FRAME,cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,76),t.add.existing((0,Va.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:rg,frame:og.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new $p(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new ts.Z(this.scene,rg,og.BUTTON_DARK_BLUE,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUILandscape=function(){var e,t;this.initPosition(),this.scene.tutorialManager.isStopped()&&this.buttonSetting.setVisible(!0),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5)},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:rg,frame:og.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:rg,frame:og.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new ag(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(qa.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),lg=cg,hg=Qa.Z.GAMEPLAY_32.FRAME,ug=[""+hg.BLOCK_GRADIENT_PREFIX+10,""+hg.BLOCK_GRADIENT_PREFIX+9],dg=[],pg=1;pg<=10;pg++)dg.push(""+hg.BLOCK_GRADIENT_PREFIX+pg);for(var gg=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t||e.isIOS()},fg=(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),o=(0,Oe.qZ)(80),i+=1,e.next=9,l().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})))}(),function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)}),mg=function(e){try{if(!gg())return!1;var t=GameCore.Utils.Device;(t.isAndroid()||t.isMobileWeb())&&fg(e)}catch(n){}},Eg=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){var e=this.scene.layoutManager.objects.main;if(this.captureCells&&e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setFrame(Qa.Z.GAMEPLAY_32.FRAME.GEM),c.imageBreak.setVisible(!0),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Xu(o.v0,o.alpha0,u),p=Ju(o.v0,o.alpha0,u);c.setVisible(!0),c.x=d,c.y=-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),vg=Eg,Sg=Qa.Z.GAMEPLAY,Ag=Sg.KEY,Tg=Sg.FRAME,yg=Qa.Z.GAMEPLAY_32,Ig=yg.KEY,Cg=yg.FRAME,Og=Qa.Z.DEFAULT.FRAME,bg=GameCore.Configs.Board,Pg=bg.cols,Rg=bg.rows,wg=GameCore.Configs.Gameplay.VibrateValue,xg=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,E={x:-1,y:-1},v=0;v<a.length;v++)if(0!==v){if(a[v].x===E.x+1&&a[v].y===E.y?(E.x=a[v].x,E.y=a[v].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else E.x=a[v].x,E.y=a[v].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new vg(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:Ag,frame:Tg.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*(Pg+1))/Pg},n.initDataBoard=function(){for(var e=this.boardFrame.x-this.boardFrame.displayWidth/2+this.cellSize/2+this.borderLeftSize,t=this.boardFrame.y-this.boardFrame.displayHeight/2+this.cellSize/2+this.borderTopSize,n=0;n<Rg;n++){this.dataBoard[n]=[];for(var i=0;i<Pg;i++){var a=e+i*this.cellSize+this.cellPadding*i,s=t+n*this.cellSize+this.cellPadding*n,r={x:a,y:s,width:this.cellSize,height:this.cellSize,texture:Ig,frame:Cg.GEM_TRANSPARENT,depth:qa.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},o=new td(this.scene,r);this.add(o),this.dataBoard[n][i]={x:a,y:s,width:this.cellSize,height:this.cellSize,frame:Cg.GEM_TRANSPARENT,value:0,cell:o}}}},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<Rg;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<Pg;a++)i()},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var r=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=Cg.GEM,r.setFrameImageCell(Cg.GEM),r.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw vd=0,new Error("Invalid Capture");for(var n=300,i=0,a=pd(this.dataBoard),s=gd(this.dataBoard),r=cd(),o=function(){var o=e[c],l=o.x,h=o.y,u=t.dataBoard[h][l].cell,d=0,p=0,g=0;if(a.length>0&&s.length>0){var f=0,m=0;i=n/Pg,-1!==Ot()(a).call(a,h)&&-1===Ot()(s).call(s,l)&&(f=i*l,m=0,p=Ot()(a).call(a,h)),-1===Ot()(a).call(a,h)&&-1!==Ot()(s).call(s,l)&&(f=0,m=i*h,p=Ot()(s).call(s,l)),-1!==Ot()(a).call(a,h)&&-1!==Ot()(s).call(s,l)&&(f=i*l,m=i*h,p=Math.max(Ot()(s).call(s,l),Ot()(a).call(a,h),0)),-1===Ot()(a).call(a,h)&&-1===Ot()(s).call(s,l)&&(f=i*l,m=i*h),d=Math.max(f,m,0)}else if(s.length>0)d=(i=n/Pg)*h,p=Ot()(s).call(s,l),g=h;else if(a.length>0)d=(i=n/Rg)*l,p=Ot()(a).call(a,h),g=l;else{i=100;var E=e[0].x;d=i*(l-E),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){var e="";r>2&&(s.length>=3||a.length>=3)?(e=dg[g]||dg[0],u.imageBreak.setFrame(e)):(e=ug[p]||ug[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown(),0==t.dataBoard[h][l].value&&u.setFrameImageCell(Cg.GEM_TRANSPARENT)})),t.dataBoard[h][l].frame=Cg.GEM_TRANSPARENT,t.dataBoard[h][l].value=0},c=0;c<e.length;c++)o()}catch(l){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=re()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){if(t&&0!==t.length){var n=Sd(),i=cd();i>1&&(n=18*od+10*(Ad()-1));for(var a=[],s=0;s<e.length;s++){var r=e[s];this.checkPositionCellOnCaptureCell(r,t)&&a.push(this.dataBoard[r.y][r.x])}if(0!==a.length){for(var o=a[0].cell.getWorldPosition(),c=o.x,l=0,h=o.y,u=0,d=0;d<a.length;d++){var p=a[d].cell.getWorldPosition();p.x<c&&(c=p.x),p.x>l&&(l=p.x),p.y<h&&(h=p.y),p.y>u&&(u=p.y)}var g=c+(l-c)/2,f=h+(u-h)/2;this.scene.layoutManager.objects.main.praise.handlePraise(g,f,n,i),this.handleStreakBreak(g,f),this.playEatSound(i)}}},n.handleStreakBreak=function(e,t){if(!this.scene.tutorialManager.isRunning()){var n=cd(),i=Ad()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&mg(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(Og.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}}},n.getVibrateByLevel=function(e){return wg[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(es.Z.EAT_BLOCK,{volume:1}),e){case 1:default:break;case 2:this.scene.audio.playSound(es.Z.GOOD);break;case 3:this.scene.audio.playSound(es.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(es.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=Cg.GEM_TRANSPARENT,a.setFrameImageCell(Cg.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=ld(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,E=f.y,v=this.dataBoard[E][m].cell;v.isHighlight()||v.showImageHighlight()}t(pd(a),gd(a),dd(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=pd(e),a=gd(e),s=dd(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==Ot()(i).call(i,r)||-1!==Ot()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return"continue";c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(Cg.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(Cg.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=Cg.GEM,this.dataBoard[s][a].value=1;var r=this.dataBoard[s][a].cell;r.setFrameImageCell(Cg.GEM),r.setAlphaImageCell(1)}}var o=ld(this.dataBoard,e);this.handleCapturePiece(o),this.checkIsGameOver()&&this.scene.setIsGameOver(!0),this.handlePraise(e,o),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(c){}},n.handleResetFrameBoard=function(){for(var e=0;e<Rg;e++)for(var t=0;t<Pg;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setFrameImageCell(a)}},n.checkIsGameOver=function(){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r];t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}return!!fd(this.dataBoard,t)},n.handleGameOver=function(){this.checkIsGameOver()&&(this.scene.disableInput(),this.runAnimationGameOver())},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(es.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<Pg;a++)i(a)},i=0;i<Rg;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){}},n.rescue=function(){for(var e=0;e<this.dataBoard.length;e++)for(var t=0;t<this.dataBoard[e].length;t++)if(this.dataBoard[e]){var n=this.dataBoard[e][t];n&&1===n.value&&(this.dataBoard[e][t].cell.setFrameImageCell(Cg.GEM),this.dataBoard[e][t].cell.resetImageGameOver())}this.handleUseBomb()},n.hasPieceL5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return re()(e).call(e,(function(e){return e.type===Ks})).length>0},n.hasPieceCross5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return re()(e).call(e,(function(e){return e.type===ar})).length>0},n.handleUseBomb=function(){try{var e=this.hasPieceL5(),t=this.hasPieceCross5(),n=Math.floor(Math.random()*Es.length),i=Es[n];e&&(i=vs[n]),t&&(i=Ss[n]);for(var a=[],s=i.minRow;s<i.minRow+i.rows;s++)for(var r=i.minCol;r<i.minCol+i.cols;r++)this.dataBoard[s][r].frame!==Cg.GEM_TRANSPARENT&&a.push({x:r,y:s});for(var o=0;o<a.length;o++){var c=a[o],l=c.x,h=c.y,u=this.dataBoard[h][l];u.frame=Cg.GEM_TRANSPARENT,u.value=0,u.cell.setFrameImageCell(Cg.GEM_TRANSPARENT)}this.woodenEffect.handleShowEffect(a),this.scene.layoutManager.objects.footer.pieces.setActivePieces(),this.scene.updateMatchData()}catch(d){}},n.getBoardByFen=function(e){try{var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=Id(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t}catch(c){return this.clearBoard(),this.dataBoard}},n.getFenByBoard=function(){for(var e="",t=0;t<Rg;t++){for(var n=0,i="",a=0;a<Pg;a++){if(0===this.dataBoard[t][a].value&&n++,1===this.dataBoard[t][a].value)n>0&&(i+=n>=Rg?"x":""+n,n=0),i+=""+Td(this.dataBoard[t][a].frame);a===this.dataBoard[t].length-1&&n>0&&(i+=n>=Rg?"x":""+n)}e+=t===this.dataBoard.length-1?""+i:i+"/"}return e},n.startGame=function(e){if(e)for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var i=e[t][n],a=i.value,s=i.frame,r=this.dataBoard[t][n];1===a&&(r.value=1,r.frame=s,r.cell.setFrameImageCell(Cg.GEM))}},n.clearBoard=function(){for(var e=0;e<Rg;e++)for(var t=0;t<Pg;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=Cg.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(Cg.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=re()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},t}(Phaser.GameObjects.Container),_g=GameCore.Configs.Gameplay.VibrateValue,kg=Qa.Z.EFFECTS,Lg=kg.KEY,Mg=kg.FRAME,Dg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(Lg),this.particle.setDepth(qa.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:Mg.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(qa.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e,t=this,n=this.scene.storage.getState(),i=wc(n),a=this.scene.layoutManager.objects.header.mainScoreBlock.scoreText.getWorldPosition(),s=a.x,r=a.y;if(Ot()(e=[xa,wa,_a]).call(e,i)>=0){var o=this.scene.layoutManager.objects.header.myScoreBlock.textScore.getWorldPosition(),c=o.x,l=o.y;s=c,r=l}this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){t.tweenHideScoreText=t.scene.tweens.add({targets:t.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:s,y:r,delay:600,duration:210,onComplete:function(){t.scoreText.setVisible(!1),t.scoreText.setAlpha(0),t.scoreText.setScale(0),t.scene.handleAddScoreAnim(t.score||0)}})}})},n.playAnimShowScoreText=function(){var e=this.scene.layoutManager.objects.header;if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){var t;this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var n=this.scene.storage.getState(),i=wc(n),a=0;i===Ra?(a=e.mainScoreBlock.score,e.mainScoreBlock.setScore(a+(this.score||0)),e.mainScoreBlock.setScoreText(a+(this.score||0))):Ot()(t=[xa,wa,_a]).call(t,i)>=0&&(a=e.myScoreBlock.score,e.myScoreBlock.setScore(a+(this.score||0)),e.myScoreBlock.setScoreText(a+(this.score||0)))}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:Lg}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(qa.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(qa.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i);var s=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&mg(s),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return _g[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){switch(a){case Mg.TEXT_COOL:case Mg.TEXT_GOOD:case Mg.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var s=this.praiseFrame,r=s.width/i,o=s.height/i;this.praiseFrame.setWorldSize(r,o);var c=this.praiseFrame.displayWidth,l=e,h=this.scene.gameZone.width;l=e-c/2<0?c/2+5:e+c/2>h?h-c/2-5:e,this.praiseFrame.setPosition(l,t-40),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return Us[e-1]||Us[0]||null},n.getMainFrameByLevel=function(e){if(e>6)return Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT;var t=Fs[e-1]||Fs[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),Ng=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new xg(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new Dg(this.scene)},n.updateUILandscape=function(){},t}(Phaser.GameObjects.Container),Bg=Ng,Gg=function(){function e(e){this.scene=void 0,this.header=void 0,this.main=void 0,this.footer=void 0,this.group=void 0,this.scene=e,this.createGroup(),this.createObjects()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},t.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},t.createHeader=function(){this.header=new Kp(this.scene),this.group.add(this.header)},t.createMain=function(){this.main=new Bg(this.scene),this.group.add(this.main)},t.createFooter=function(){this.footer=new lg(this.scene),this.group.add(this.footer)},e}(),Fg=Gg,Ug=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Hg=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,-27),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e),this.scene.world.getScreenRatio()>.6&&(Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,40))}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ug),Zg=Hg,Yg=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone;this.objects.header.updateUILandscape(),this.objects.main.updateUILandscape(),this.objects.footer.updateUILandscape(),Phaser.Display.Align.In.Center(this.objects.header,t,0,-195),Phaser.Display.Align.In.Center(this.objects.main,t,0,20),Phaser.Display.Align.In.Center(this.objects.footer,t,300,0)}},t}(Zg),Vg=Yg,Wg=is.STATUS,zg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Fg(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Vg(this.scene):this.layout=new Zg(this.scene),this.layout.setUIObjects(this.objects)},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.layout.alignUI,this)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init(),this.setState(Wg.READY)},n.start=function(){this.isRunning()||this.setState(Wg.RUNNING)},n.stop=function(){this.isRunning()&&this.setState(Wg.STOPPED)},n.initUILogic=function(){GameCore.Utils.Valid.isDebugger()},t}(os),Kg=zg,jg=n(623),Xg=Qa.Z.DEFAULT,Jg=Xg.KEY,qg=Xg.FRAME,Qg=function(e){function t(t){var n;return(n=e.call(this,t,Jg,qg.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Jg,frame:qg.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ts.Z),$g=Qg,ef=Qa.Z.DEFAULT,tf=ef.KEY,nf=ef.FRAME,af=function(e){function t(t){var n;return(n=e.call(this,t,tf,nf.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:tf,frame:nf.ICON_SHARE});e.setWorldSize(24,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ts.Z),sf=af,rf=Qa.Z.DEFAULT,of=rf.KEY,cf=rf.FRAME,lf=function(e){function t(t){var n;return(n=e.call(this,t,of,cf.BUTTON_DARK_BLUE_BIG)||this).button.setWorldSize(120,55),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:of,frame:cf.ICON_SWORD_BLUE});e.setWorldSize(22,20),this.add(e),Phaser.Display.Align.In.Center(e,this,-40)},n.createText=function(){var e=this.scene.make.image({key:of,frame:cf.TEXT_PLAY_WITH_BLUE});e.setWorldSize(159.5,15.5),this.add(e),Phaser.Display.Align.In.Center(e,this,12)},t}(ts.Z),hf=lf,uf=Qa.Z.DEFAULT,df=uf.KEY,pf=uf.FRAME,gf=function(e){function t(t){var n;return(n=e.call(this,t,df,pf.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(120,55),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:df,frame:pf.ICON_I_PLAY}),this.icon.setWorldSize(22,27),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-35,-2)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:df,frame:pf.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,15,-2)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),ff=gf,mf=Qa.Z.DEFAULT,Ef=mf.KEY,vf=mf.FRAME,Sf=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.avatarMe=void 0,n.textScoreMe=void 0,n.avatarOpponent=void 0,n.textScoreOpponent=void 0,n.title=void 0,n.titleFrame=void 0,n.contents=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.myInfoBlock=void 0,n.tweenMyInfoBlock=void 0,n.opponentInfoBlock=void 0,n.tweenOpponentInfoBlock=void 0,n.icon=void 0,n.tweenIcon=void 0,n.iconCrown=void 0,n.tweenIconCrown=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.shareButton=void 0,n.buttonClose=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(eu());case 2:Il.emit(Co.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Xh());case 2:Il.emit(Co.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickShare=function(){var e=n.scene.storage.getState();wc(e)!==_a?n.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.analytics,o=a.facebook,c=a.globalScene,l=a.lang,e.prev=1,c.screen.open($a.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),h=n(),e.next=6,kl(h);case 6:return d=e.sent,bl(d),p=s.getPlayer(),g=p.playerId,f=p.name,m=p.photo,e.next=12,o.shareAsync({text:l.Text.SHARE_GAME_RESULTS,intent:"SHARE",image:d||"",data:{playerId:g,playerName:f,playerPhoto:m,type:ya}});case 12:r.event(Gt._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),r.event(Gt._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 19:return e.prev=19,c.screen.close($a.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()):n.scene.storage.dispatch(Dl())},n.handleShareBestScore=function(){n.scene.storage.dispatch(Pl())},n.createPopup(),n.createPopupContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createContentBackground(),this.createMyInfoBlock(),this.createOpponentInfoBlock(),this.createIcon(),this.createIconCrown(),this.createButtons(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.shareButton])},n.updateButtons=function(){try{this.checkExistConnectedPlayerId()?(this.playWithFriendsButton.setVisible(!0),this.playButton.setVisible(!1)):(this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0))}catch(e){}},n.createTitle=function(){this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:Ef,frame:vf.TEXT_WAITING_OPPONENT}),this.titleFrame.setWorldSize(238,25),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,10),this.buttonClose=new ts.Z(this.scene,Ef,vf.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([this.titleFrame,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createContentBackground=function(){var e=this.scene.make.image({key:Ef,frame:vf.POPUP_CONTENT_BACKGROUND});e.setWorldSize(263,140),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-30)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new $g(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.popup,-100,80)},n.clickHome=function(){this.scene.scene.switch(Ua.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new hf(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.popup,0,80)},n.createButtonPlay=function(){this.playButton=new ff(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.popup,0,80)},n.createButtonShare=function(){this.shareButton=new sf(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.popup,100,80)},n.createMyInfoBlock=function(){this.myInfoBlock=this.scene.add.container(),this.avatarMe=new Ic(this.scene,{key:Ef,frame:vf.AVATAR_BORDER_BIG,background:vf.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.myInfoBlock.add(this.avatarMe),Phaser.Display.Align.In.Center(this.avatarMe,this.myInfoBlock,0,0);var e=this.scene.make.image({key:Ef,frame:vf.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.myInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarMe,0,10),this.textScoreMe=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.myInfoBlock.add(this.textScoreMe),Phaser.Display.Align.In.Center(this.textScoreMe,e),this.popup.add(this.myInfoBlock),Phaser.Display.Align.In.Center(this.myInfoBlock,this.popup,-72,-38),this.myInfoBlock.setAlpha(0),this.tweenMyInfoBlock=this.scene.tweens.add({targets:this.myInfoBlock,paused:!0,duration:200,delay:400,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createOpponentInfoBlock=function(){this.opponentInfoBlock=this.scene.add.container(),this.avatarOpponent=new Ic(this.scene,{key:Ef,frame:vf.AVATAR_BORDER_BIG,background:vf.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.opponentInfoBlock.add(this.avatarOpponent),Phaser.Display.Align.In.Center(this.avatarOpponent,this.opponentInfoBlock,0,0);var e=this.scene.make.image({key:Ef,frame:vf.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.opponentInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarOpponent,0,10),this.textScoreOpponent=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.opponentInfoBlock.add(this.textScoreOpponent),Phaser.Display.Align.In.Center(this.textScoreOpponent,e),this.popup.add(this.opponentInfoBlock),Phaser.Display.Align.In.Center(this.opponentInfoBlock,this.popup,72,-38),this.opponentInfoBlock.setAlpha(0),this.tweenOpponentInfoBlock=this.scene.tweens.add({targets:this.opponentInfoBlock,paused:!0,duration:200,delay:500,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createIcon=function(){this.icon=this.scene.make.image({key:Ef,frame:vf.TEXT_VS}),this.icon.setWorldSize(86,16.5);var e=this.icon.scale;this.popup.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.popup,0,-30),this.icon.setAlpha(0),this.tweenIcon=this.scene.tweens.add({targets:this.icon,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:Ef,frame:vf.ICON_CROWN_BIG}),this.iconCrown.setWorldSize(50,46),this.iconCrown.setVisible(!1);var e=this.iconCrown.scale;this.popup.add(this.iconCrown),this.iconCrown.setScale(0),this.tweenIconCrown=this.scene.tweens.add({targets:this.iconCrown,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.updateInfo=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.storage.getState(),n=vl(t),i=this.scene.player.getPlayer().playerId,a=cl(t).playerId,s=hl(t,{playerId:i}),r=ul(t,{opponentId:a}),o=(n[i]||{}).score,c=void 0===o?0:o,l=(n[a]||{}).score,h=void 0===l?0:l;return this.textScoreMe.setText(String(c)),this.textScoreOpponent.setText(String(h)),s&&r?c===h?(this.titleFrame.setFrame(vf.TEXT_DRAW),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(es.Z.DRAW)):c>h?(this.titleFrame.setFrame(vf.TEXT_WIN),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarMe,-110,-80),void this.scene.audio.playSound(es.Z.WIN)):c<h?(this.titleFrame.setFrame(vf.TEXT_LOSE),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarOpponent,35,-80),void this.scene.audio.playSound(es.Z.LOSE)):void 0:(this.titleFrame.setFrame(vf.TEXT_WAITING_OPPONENT),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(es.Z.WAIT_OPPONENT))},n.loadAvatars=function(){var e=this.scene.storage.getState(),t=this.scene.player.getPlayer(),n=t.photo,i=t.playerId,a=cl(e),s=a.playerId,r=a.photo;this.avatarMe.loadPhoto(i,n,5),this.avatarOpponent.loadPhoto(s,r,5)},n.runAnim=function(){this.icon.setVisible(!0),this.myInfoBlock.setVisible(!0),this.opponentInfoBlock.setVisible(!0),this.iconCrown.setScale(0),this.tweenIconCrown.play(),this.tweenIcon.play(),this.tweenMyInfoBlock.play(),this.tweenOpponentInfoBlock.play()},n.checkExistConnectedPlayerId=function(){var e=this,t=this.scene.player.getConnectedPlayerIds(20,0);return!(re()(t).call(t,(function(t){return t!==e.scene.player.getPlayerId()})).length<=Zh.length)},t}(Phaser.GameObjects.Container),Af=Sf,Tf={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},yf=function(e){function t(t){return e.call(this,Tf,t)||this}return(0,o.Z)(t,e),t}(gc.Z),If=Qa.Z.DEFAULT,Cf=If.KEY,Of=If.FRAME,bf=function(e){function t(t){var n;return(n=e.call(this,t,Cf,Of.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("JourneyIcon"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Cf,frame:Of.ICON_BROWN_JOURNEY});e.setWorldSize(28,26),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(ts.Z),Pf=bf,Rf=Qa.Z.DEFAULT,wf=Rf.KEY,xf=Rf.FRAME,_f=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.title=void 0,n.contents=void 0,n.scoreText=void 0,n.bestScoreText=void 0,n.tweenScoreText=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.journeyButton=void 0,n.bestScore=void 0,n.currentScore=void 0,n.payload=void 0,n.buttonClose=void 0,n.counterAnimation=void 0,n.scoreAnimation=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(eu());case 2:Il.emit(Co.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.scene.storage.dispatch(Xh()),Il.emit(Co.REPLAY)},n.clickJourney1=function(){n.scene.scene.switch(Ua.Co.LEVEL_SCENE)},n.initScore(),n.scene=t,n.createPopup(),n.createPopupContent(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.journeyButton])},n.updateButtons=function(){try{this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0)}catch(e){}},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:wf,frame:xf.TEXT_YOUR_SCORE});t.setWorldSize(t.width/e,t.height/e),Phaser.Display.Align.In.Center(t,this.title,0,10),this.buttonClose=new ts.Z(this.scene,wf,xf.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:wf,frame:xf.SCORE_PANEL});e.setWorldSize(263,70),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(85),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.scoreBlock,0,4),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-78)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:wf,frame:xf.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(44),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonJourney()},n.createButtonHome=function(){this.homeButton=new $g(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(Ua.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new hf(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonPlay=function(){this.playButton=new ff(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.bestScoreBlock,0,80)},n.createButtonJourney=function(){this.journeyButton=new Pf(this.scene),this.journeyButton.onClick=this.clickJourney1,this.popup.add(this.journeyButton),Phaser.Display.Align.In.Center(this.journeyButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Sl(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=vl(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(0),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter()},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new yf({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(es.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(Phaser.GameObjects.Container),kf=_f,Lf=(GameCore.Configs.LeadersBoard,Qa.Z.DEFAULT),Mf=(Lf.KEY,Lf.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).bestScore=void 0,s.currentScore=void 0,s.confettiLeftEffect=void 0,s.confettiRightEffect=void 0,s.queueScreens=[],s.popupYourScore=void 0,s.popupResult=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.open=function(){e.prototype.open.call((0,Va.Z)(s)),s.popupYourScore.setVisible(!1),s.popupResult.setVisible(!1),s.runFadeInMaskAnimation(100,300),s.initScore(),s.updateScore(),s.showPopupYourScore(),s.scene.audio.playSound(es.Z.GAME_OVER_SCENE)},s.onPopupClose=function(){var e,t;null==(e=s.popupYourScore)||e.runCloseAnimation(),null==(t=s.popupResult)||t.runCloseAnimation(),s.runFadeOutMaskAnimation(0,200),s.scene.time.delayedCall(300,(function(){s.close(),s.scene.screen.open($a.o4.MINI_JOURNEY_SCREEN,{onClose:function(){s.scene.storage.dispatch(Xh()),Il.emit(Co.START_GAME)}})}))},s.createConfettiSmallAnimation(),s.createPopups(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.showQueueScreens=function(){var e=this.queueScreens.pop();if(e&&e===$a.o4.RESULT_SCREEN)this.showPopupResult()},n.showPopupBestScore=function(){},n.showPopupYourScore=function(){this.popupYourScore.setVisible(!0),this.popupYourScore.runOpenAnimation(),this.popupYourScore.updateButtons(),this.popupYourScore.updateScore()},n.showPopupResult=function(){this.popupResult.setVisible(!0),this.popupResult.runOpenAnimation(),this.popupResult.updateInfo(),this.popupResult.loadAvatars(),this.popupResult.updateButtons(),this.popupResult.runAnim()},n.updateQueueScreens=function(){this.updateQueueResultScreen()},n.updateQueueResultScreen=function(){var e,t=this.scene.storage.getState(),n=wc(t);if(-1!==Ot()(e=[wa,xa,_a]).call(e,n)&&rl(t)){var i=cl(t).playerId;n===xa&&i===Pa.playerId||this.queueScreens.push($a.o4.RESULT_SCREEN)}},n.createPopups=function(){this.createPopupYourScore(),this.createPopupResult()},n.createPopupYourScore=function(){this.popupYourScore=new kf(this.scene),this.popupYourScore.setVisible(!1),this.popupYourScore.buttonClose.onClick=this.onPopupClose,this.add(this.popupYourScore),Phaser.Display.Align.In.Center(this.popupYourScore,this,0,0)},n.createPopupResult=function(){this.popupResult=new Af(this.scene),this.popupResult.setVisible(!1),this.popupResult.buttonClose.onClick=this.onPopupClose,this.add(this.popupResult),Phaser.Display.Align.In.Center(this.popupResult,this,0,-61)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new jg.Z(this.scene,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new jg.Z(this.scene,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(qa.Z.ON_TOP),this.confettiRightEffect.setDepth(qa.Z.ON_TOP)},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Sl(e),n=t.score,i=t.bestScore;if(this.bestScore=i,void 0===n||void 0===i){var a=vl(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen)),Df=Mf,Nf=n(464),Bf=n.n(Nf),Gf=(GameCore.Utils.Valid.isDebugger(),[{key:"level-0",mapJson:"./assets/json/levels/level-0.json"}]),Ff=1;Ff<=200;Ff++)Gf.push({key:"level-"+Ff,mapJson:"./assets/json/levels/level-"+Ff+".json"});var Uf=Gf,Hf=function(e){return e[zi]},Zf=(0,j.P1)([function(e){return Hf(e).lives}],(function(e){return e})),Yf=(0,j.P1)([function(e){return Hf(e).lastBonusLifeTime}],(function(e){return e})),Vf=(0,j.P1)([function(e){return Hf(e).countDownStartAt}],(function(e){return e})),Wf=n(202),zf=Qa.Z.GAMEPLAY_32.FRAME,Kf="vertical",jf="horizontal",Xf="left",Jf="right",qf="top",Qf="bottom",$f="vertical_left",em="vertical_right",tm="horizontal_left",nm="horizontal_right",im="gem/gem",am="gem/diamond/diamond-10",sm="gem/diamond/diamond-11",rm="gem/diamond/diamond-12",om="gem/diamond/diamond-13",cm="gem/diamond/diamond-14",lm="gem/diamond/diamond-15",hm="gem/ruby/ruby-20",um="gem/sapphire/sapphire-30",dm=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Qa.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Qa.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Qa.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],pm=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],gm="l",fm="l_1",mm="l_3",Em="line_2",vm="line_3",Sm="line_4",Am="line_5",Tm="square_1",ym="square_2",Im="square_3",Cm="trapezoid",Om="triangle",bm="t_piece",Pm="plus_piece",Rm="cross_piece_2",wm="cross_piece_3",xm="cross_piece_4",_m="cross_piece_5",km="u_piece",Lm=[gm,fm,mm,Em,vm,Sm,Am,Tm,ym,Im,Om,Cm,bm,Pm,Rm,wm,xm,_m,km],Mm=[{type:gm,rate:3},{type:fm,rate:4},{type:mm,rate:2},{type:Em,rate:16},{type:vm,rate:12},{type:Sm,rate:8},{type:Am,rate:4},{type:Tm,rate:16},{type:ym,rate:8},{type:Om,rate:4},{type:Cm,rate:4},{type:bm,rate:2},{type:Pm,rate:1},{type:Rm,rate:4},{type:wm,rate:2},{type:xm,rate:1},{type:km,rate:2}],Dm=[[1,0],[1,0],[1,1]],Nm=[[0,1],[0,1],[1,1]],Bm=[[1,0],[1,1]],Gm=[[1,0,0],[1,0,0],[1,1,1]],Fm=[[1,1,1],[1,0,0]],Um=[[1,1,1],[0,0,1]],Hm=[[1,1],[1,0]],Zm=[[1,1,1],[1,0,0],[1,0,0]],Ym=[[1,1],[0,1],[0,1]],Vm=[[1,1],[1,0],[1,0]],Wm=[[1,1],[0,1]],zm=[[1,1,1],[0,0,1],[0,0,1]],Km=[[0,0,1],[1,1,1]],jm=[[1,0,0],[1,1,1]],Xm=[[0,1],[1,1]],Jm=[[0,0,1],[0,0,1],[1,1,1]],qm=[[1],[1]],Qm=[[1,1]],$m=[[1],[1],[1]],eE=[[1,1,1]],tE=[[1],[1],[1],[1]],nE=[[1,1,1,1]],iE=[[1],[1],[1],[1],[1]],aE=[[1,1,1,1,1]],sE=[[1]],rE=[[1,1],[1,1]],oE=[[1,1,1],[1,1,1],[1,1,1]],cE=[[1,0],[1,1],[0,1]],lE=[[0,1],[1,1],[1,0]],hE=[[1,1,0],[0,1,1]],uE=[[0,1,1],[1,1,0]],dE=[[0,1],[1,1],[0,1]],pE=[[1,0],[1,1],[1,0]],gE=[[0,1,0],[1,1,1]],fE=[[1,1,1],[0,1,0]],mE=[[0,0,1],[1,1,1],[0,0,1]],EE=[[1,0,0],[1,1,1],[1,0,0]],vE=[[0,1,0],[0,1,0],[1,1,1]],SE=[[1,1,1],[0,1,0],[0,1,0]],AE=[[0,1,0],[1,1,1],[0,1,0]],TE=[[1,0],[0,1]],yE=[[0,1],[1,0]],IE=[[1,0,0],[0,1,0],[0,0,1]],CE=[[0,0,1],[0,1,0],[1,0,0]],OE=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],bE=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],PE=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],RE=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],wE=[[1,1],[0,1],[1,1]],xE=[[1,1],[1,0],[1,1]],_E=[[1,0,1],[1,1,1]],kE=[[1,1,1],[1,0,1]],LE={1:zf.GEM,10:zf.GEM_DIAMOND_10,11:zf.GEM_DIAMOND_11,12:zf.GEM_DIAMOND_12,13:zf.GEM_DIAMOND_13,14:zf.GEM_DIAMOND_14,15:zf.GEM_DIAMOND_15},ME={1:{type:Tm,direction:null,isReverse:!1,data:sE},I2:{type:Em,direction:Kf,isReverse:!1,data:qm},I3:{type:vm,direction:Kf,isReverse:!1,data:$m},I4:{type:Sm,direction:Kf,isReverse:!1,data:tE},I5:{type:Am,direction:Kf,isReverse:!1,data:iE},II2:{type:Em,direction:jf,isReverse:!1,data:Qm},II3:{type:vm,direction:jf,isReverse:!1,data:eE},II4:{type:Sm,direction:jf,isReverse:!1,data:nE},II5:{type:Am,direction:jf,isReverse:!1,data:aE},J1:{type:gm,direction:qf,isReverse:!0,data:Dm},J2:{type:gm,direction:Xf,isReverse:!0,data:jm},J3:{type:gm,direction:Qf,isReverse:!0,data:Vm},J4:{type:gm,direction:Jf,isReverse:!0,data:Um},L1:{type:gm,direction:qf,isReverse:!1,data:Dm},L2:{type:gm,direction:Jf,isReverse:!1,data:Fm},L3:{type:gm,direction:Qf,isReverse:!1,data:Ym},L4:{type:gm,direction:Xf,isReverse:!1,data:Km},O:{type:ym,direction:null,isReverse:!1,data:rE},"polyplet-left-2":{type:Rm,direction:Xf,isReverse:!1,data:TE},"polyplet-left-3":{type:wm,direction:Xf,isReverse:!1,data:IE},"polyplet-left-4":{type:xm,direction:Xf,isReverse:!1,data:OE},"polyplet-left-5":{type:_m,direction:Xf,isReverse:!1,data:PE},"polyplet-right-2":{type:Rm,direction:Jf,isReverse:!1,data:yE},"polyplet-right-3":{type:wm,direction:Jf,isReverse:!1,data:CE},"polyplet-right-4":{type:xm,direction:Jf,isReverse:!1,data:bE},"polyplet-right-5":{type:_m,direction:Jf,isReverse:!1,data:RE},S1:{type:Cm,direction:nm,isReverse:!1,data:uE},S2:{type:Cm,direction:$f,isReverse:!1,data:cE},T1:{type:Om,direction:qf,isReverse:!1,data:gE},T2:{type:Om,direction:Jf,isReverse:!1,data:pE},T3:{type:Om,direction:Qf,isReverse:!1,data:fE},T4:{type:Om,direction:Xf,isReverse:!1,data:dE},TT1:{type:bm,direction:Qf,isReverse:!1,data:SE},TT2:{type:bm,direction:Xf,isReverse:!1,data:mE},TT3:{type:bm,direction:qf,isReverse:!1,data:vE},TT4:{type:bm,direction:Jf,isReverse:!1,data:EE},U1:{type:km,direction:qf,isReverse:!1,data:_E},U2:{type:km,direction:Jf,isReverse:!1,data:xE},U3:{type:km,direction:Qf,isReverse:!1,data:kE},U4:{type:km,direction:Xf,isReverse:!1,data:wE},V1:{type:fm,direction:Jf,isReverse:!1,data:Hm},V2:{type:fm,direction:Qf,isReverse:!1,data:Wm},V3:{type:fm,direction:qf,isReverse:!1,data:Bm},V4:{type:fm,direction:Xf,isReverse:!1,data:Xm},VV1:{type:mm,direction:Jf,isReverse:!1,data:Zm},VV2:{type:mm,direction:Qf,isReverse:!1,data:zm},VV3:{type:mm,direction:qf,isReverse:!1,data:Gm},VV4:{type:mm,direction:Xf,isReverse:!1,data:Jm},X:{type:Pm,direction:null,isReverse:!1,data:AE},Z1:{type:Cm,direction:tm,isReverse:!1,data:hE},Z2:{type:Cm,direction:em,isReverse:!1,data:lE}},DE=GameCore.Configs.Board,NE=(DE.cols,DE.rows,0),BE=function(){return NE},GE=function(e,t){NE=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(i){n.some((function(e){return e.x===i&&e.y===t}))||n.push({x:i,y:t,frame:e[t][i].frame})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(i){n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i,frame:e[i][t].frame})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=HE(e,t);if(u&&u.length>0)for(var d=function(){var t=u[p],i=t.x,a=t.y;n.some((function(e){return e.x===i&&e.y===a}))||n.push({x:i,y:a,frame:e[a][i].frame})},p=0;p<u.length;p++)d();return NE+=s.length,NE+=r.length,NE+=Math.floor(u.length/9),n},FE=function(e,t){if(0===e.length)return!1;var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},UE=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},HE=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});FE(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=UE(e,s);n.push.apply(n,r)}return n},ZE=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},YE=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},VE=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(WE(e,s,a,t[r]))return!1;return!0},WE=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},zE=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(WE(e,s,a,t))return!0;return!1},KE=0,jE=function(){return KE++,18+10*(XE()-1)},XE=function(){return KE+1},JE=function(e){var t=e;switch(e){case im:t="g";break;case am:t="d10";break;case sm:t="d11";break;case rm:t="d12";break;case om:t="d13";break;case cm:t="d14";break;case lm:t="d15";break;case hm:t="r20";break;case um:t="s30";break;case gm:t="l";break;case fm:t="l1";break;case mm:t="l3";break;case Em:t="e2";break;case vm:t="e3";break;case Sm:t="e4";break;case Am:t="e5";break;case Tm:t="s1";break;case ym:t="s2";break;case Im:t="s3";break;case Cm:t="tz";break;case Om:t="ta";break;case Pm:t="pl";break;case bm:t="tp";break;case Rm:t="cr2";break;case wm:t="cr3";break;case xm:t="cr4";break;case _m:t="cr5";break;case km:t="up";break;case qf:t="dt";break;case Xf:t="dl";break;case Jf:t="dr";break;case Qf:t="db";break;case Kf:t="v";break;case jf:t="h";break;case $f:t="vl";break;case em:t="vr";break;case tm:t="hl";break;case nm:t="hr"}return t},qE=function(e){var t=e;switch(e){case"g":t=im;break;case"d10":t=am;break;case"d11":t=sm;break;case"d12":t=rm;break;case"d13":t=om;break;case"d14":t=cm;break;case"d15":t=lm;break;case"r20":t=hm;break;case"s30":t=um;break;case"b":case"c":case"d":case"g":case"o":case"p":case"q":case"r":case"y":t="gem/gem";break;case"l":t=gm;break;case"l1":t=fm;break;case"l3":t=mm;break;case"e2":t=Em;break;case"e3":t=vm;break;case"e4":t=Sm;break;case"e5":t=Am;break;case"s1":t=Tm;break;case"s2":t=ym;break;case"s3":t=Im;break;case"tz":t=Cm;break;case"ta":t=Om;break;case"pl":t=Pm;break;case"tp":t=bm;break;case"cr2":t=Rm;break;case"cr3":t=wm;break;case"cr4":t=xm;break;case"cr5":t=_m;break;case"up":t=km;break;case"dt":t=qf;break;case"dl":t=Xf;break;case"dr":t=Jf;break;case"db":t=Qf;break;case"v":t=Kf;break;case"h":t=jf;break;case"vl":t=$f;break;case"vr":t=em;break;case"hl":t=tm;break;case"hr":t=nm}return t},QE=function(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var a=n[i],s=qE(a);"x"===a?t.push({value:0,frame:"gem/gem_transparent"}):t.push({value:1,frame:s})}return t},$E=function(e){var t=e.split("|"),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:qE(n[0]),direction:qE(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,fenPiece:t[1]}},ev=Qa.Z.DEFAULT,tv=ev.KEY,nv=ev.FRAME,iv=function(e){function t(t){var n;return(n=e.call(this,t,tv,nv.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:tv,frame:nv.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:tv,frame:nv.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),av=iv,sv=Qa.Z.DEFAULT,rv=sv.KEY,ov=sv.FRAME,cv=Qa.Z.GAMEPLAY,lv=cv.KEY,hv=cv.FRAME,uv=Qa.Z.GAMEPLAY_32,dv=uv.KEY,pv=uv.FRAME,gv=GameCore.Configs,fv=gv.Network,mv=gv.Board,Ev=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=fl(e),n=Uf[t];n||(n=Uf[Uf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:fv.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rv,frame:ov.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,rv,ov.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:rv,frame:ov.TEXT_COLLECT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=this.scene.make.image({key:rv,frame:ov.WOOD_PANEL});a.setWorldSize(200,37),this.popup.add([t,a]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(a,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=fl(n),a=Uf[i];a||(a=Uf[Uf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Wf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=Bf()(e=Bf()(t=Bf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=LE[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,E=m.container,v=m.text,S=m.gem;E.setVisible(!0),v.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(E,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:dv,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:lv,frame:hv.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<mv.rows;e++){this.boardCellData[e]=[];for(var t=0;t<mv.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=pv.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=pl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<mv.rows;e++)for(var t=0;t<mv.cols;t++){this.boardCellData[e][t].setFrame(pv.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=id()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=qE(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=fl(e),n=Uf[t],i=this.scene.make.tilemap({key:n.key}).layers;if((0,Wf.isArray)(i)){var a=i[0].data;if((0,Wf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=LE[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:dv,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new av(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();Zf(t)<1?this.scene.screen.open($a.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=fl(t);n>Uf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Jh()))})))},n.getLevelName=function(e){var t;return"journey_"+Ja()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),vv=Qa.Z.DEFAULT,Sv=vv.KEY,Av=vv.FRAME,Tv=function(e){function t(t){var n;return(n=e.call(this,t,Sv,Av.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Sv,frame:Av.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Sv,frame:Av.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),yv=Tv,Iv=Qa.Z.DEFAULT,Cv=Iv.KEY,Ov=Iv.FRAME,bv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.levelManager.getCurrentTargetScore();this.textScore.setText(""+t),this.runOpenAnimation()},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Cv,frame:Ov.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Cv,frame:Ov.TEXT_NEXT_MILESTONE});t.setWorldSize(t.width/e,t.height/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextTargetScore(),this.createTextScore()},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.popup,0,-60)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-15)},n.createButtons=function(){this.createButtonContinue()},n.createButtonContinue=function(){this.buttonContinue=new yv(this.scene),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,0,55)},n.clickButtonContinue=function(){this.scene.nextLevel(),this.runCloseAnimation()},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.scene.layoutManager.objects.main.board.handleTweenStartMission(),n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Pv=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.font,n=e.size,i=e.text;this.textMain=this.scene.make.bitmapText({font:t,size:n,origin:{x:.5,y:.5},text:i}).setVisible(!1),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.font,i=e.size;if(t){this.chars=t.split("");var a=t.length,s=0;a>15&&(s=a-15);for(var r=0,o=0;o<this.chars.length;o++){var c=this.chars[o],l=this.scene.make.bitmapText({font:n,size:i-s,origin:{x:.5,y:.5},text:c});this.listText.push(l),r+=l.width}for(var h=-r/2,u=0;u<this.chars.length;u++){var d=this.listText[u],p=d.width/2;d.setX(h+p),d.setAlpha(0),h+=d.width}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.resetListText(),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),Rv=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=(e.font,e.size),n=e.text;this.textMain=this.scene.make.text({style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(t)+"px"},origin:{x:.5,y:.5},text:n}).setAlpha(0),this.textMain.setTint(15651762),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=(e.font,e.size);if(t){this.chars=t.split("");for(var i=0,a=0;a<this.chars.length;a++){var s=this.chars[a],r=this.scene.make.text({style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(n)+"px"},origin:{x:.5,y:.5},text:s});r.setTint(15651762),this.listText.push(r),i+=r.width}for(var o=-i/2,c=0;c<this.chars.length;c++){var l=this.listText[c];l.setX(o),l.setAlpha(0),o+=l.width+1}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.textMain.setScale(0).setAlpha(0),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),wv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,Va.Z)(s))},s.scene=t,s.setDepth($a.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new Rv(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new Pv(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen),xv=n(124),_v=Qa.Z.DEFAULT,kv=_v.KEY,Lv=_v.FRAME,Mv=function(e){function t(t){var n;return(n=e.call(this,t,kv,Lv.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(160,54),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:kv,frame:Lv.ICON_ADS}),this.icon.setWorldSize(30,27),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:kv,frame:this.scene.lang.Texture.CONTINUE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-5-t-n)/2+t/2,s=a+5+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),Dv=Mv,Nv=Qa.Z.DEFAULT.KEY,Bv=function(e){function t(t){var n;(n=e.call(this,t,Nv,t.lang.Texture.NO_THANKS)||this).scene=void 0,n.scene=t;var i=n.scene.world.getPixelRatio(),a=(0,Va.Z)(n),s=a.width,r=a.height;return n.button.setWorldSize(s/i,r/i),n.setName("NoThanks"),n}return(0,o.Z)(t,e),t}(ts.Z),Gv=Bv,Fv=Qa.Z.DEFAULT,Uv=Fv.KEY,Hv=Fv.FRAME,Zv=GameCore.Configs,Yv=Zv.Network,Vv=Zv.Match,Wv=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.isUseRescue=void 0,s.countdownCount=void 0,s.popup=void 0,s.skipText=void 0,s.continueButton=void 0,s.tweenContinueButton=void 0,s.continueButtonAnimation=void 0,s.textRescueTime=void 0,s.tweenTextRescueTime=void 0,s.progressCircle=void 0,s.skipTextTween=void 0,s.countdownTimer=void 0,s.bgProgress=void 0,s.popupShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.adsTimer=void 0,s.open=function(){e.prototype.open.call((0,Va.Z)(s)),s.scene.audio.playSound(es.Z.RESCUE_TIME),s.runOpenAnimation()},s.close=function(){e.prototype.close.call((0,Va.Z)(s)),s.scene.audio.stopSound(es.Z.RESCUE_TIME),s.bgProgress.setVisible(!1),s.progressCircle.setVisible(!1),s.continueButton.setVisible(!1),s.skipText.setVisible(!1),s.textRescueTime.setScale(0).setAlpha(0)},s.handleShowRewardedVideoAd=(0,r.Z)(u().mark((function e(){var t,n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.game,n=t.globalScene,i=t.lang,a=t.audio,s.countdownTimer.remove(),e.prev=2,!s.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:return s.isUseRescue=!0,n.screen.open($a.o4.NOTIFY_SCREEN,{message:i.Text.LOADING_AD,duration:0,loading:!0}),a.pauseMusic(),a.muteAll(),a.stopSound(es.Z.RESCUE_TIME),e.next=12,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(Yv.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 12:return e.next=14,s.scene.ads.showRewardedVideoAsync();case 14:a.unmuteAll(),a.playMusic(),s.scene.storage.dispatch(ou()),s.scene.analytics.showRewardedVideoAd(s.scene.getSceneName()),n.screen.close($a.o4.NOTIFY_SCREEN),Il.emit(Co.RESCUE),s.scene.screen.close(s.name),s.scene.audio.playSound(es.Z.DAILY_REWARD),n.screen.close($a.o4.NOTIFY_SCREEN),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=31;break}if("USER_INPUT"!==e.t0.code){e.next=31;break}return s.showNotifySkipAds(),e.abrupt("return");case 31:s.showNotifyNoAds();case 32:return e.prev=32,null==(r=s.adsTimer)||r.destroy(),a.unmuteAll(),a.playMusic(),s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),e.finish(32);case 38:case"end":return e.stop()}}),e,null,[[2,25,32,38]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===$a.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open($a.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==$a.o4.NOTIFY_SCREEN||(s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame())},s.handleSkip=function(){s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame()},s.handleRunCountdown=function(){s.countdownCount-=1,s.countdownCount<=0?s.rescueTimeout():s.setTime(s.countdownCount)},s.scene=t,s.countdownCount=Vv.MaxRescueCount,s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s.createPopup(),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.tweenTextRescueTime.play(),this.skipText.setVisible(!0),this.skipTextTween.play(),this.tweenContinueButton.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=Sl(e);this.textRescueTime.setText(String(t.score||0))},n.setTime=function(e){this.textRescueTime.setText(""+e),Phaser.Display.Align.In.Center(this.textRescueTime,this.zone,0,-42)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-5,290,310),this.add(this.popup)},n.createContent=function(){this.createTitle(),this.createTextRescueTime(),this.createBgProgressCircle(),this.createProgressCircle(),this.createContinueButton(),this.createSkipText()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:Uv,frame:Hv.TEXT_SECOND_CHANGE});n.setWorldSize(n.width/t,n.height/t),Phaser.Display.Align.In.Center(n,e,0,12),e.add([n]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-2)},n.createTextRescueTime=function(){this.textRescueTime=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(140),origin:{x:.5,y:.5}}),this.textRescueTime.setOrigin(.5).setScale(0).setAlpha(0),this.add(this.textRescueTime),Phaser.Display.Align.In.Center(this.textRescueTime,this,0,-40),this.tweenTextRescueTime=this.scene.tweens.add({delay:100,targets:this.textRescueTime,paused:!0,duration:200,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Power1"})},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.setProgressCircle=function(e){var t=Phaser.Math.DegToRad(-90),n=Phaser.Math.DegToRad(e-360-90);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(7,16762368),this.progressCircle.arc(0,-44,54,t,n,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.runCountdown=function(){this.startProgressCircle();var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e)},n.startProgressCircle=function(){var e=this;this.scene.tweens.addCounter({from:0,to:360,duration:1e3*Vv.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)},onComplete:function(){e.setProgressCircle(0),e.progressCircle.setAlpha(1)}})},n.createBgProgressCircle=function(){this.bgProgress=this.scene.make.image({key:Uv,frame:Hv.BG_PROGRESS_CIRCLE}),this.bgProgress.setWorldSize(115,115),this.popup.add(this.bgProgress),Phaser.Display.Align.In.Center(this.bgProgress,this.popup,0,-38)},n.rescueTimeout=function(){this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.endGame()},n.createContinueButton=function(){this.continueButton=new Dv(this.scene),this.continueButton.setScale(0).setAlpha(0),this.continueButton.onClick=this.handleShowRewardedVideoAd,this.add(this.continueButton),Phaser.Display.Align.In.Center(this.continueButton,this.textRescueTime,0,115),this.tweenContinueButton=this.scene.tweens.add({paused:!0,targets:this.continueButton,ease:xv.Z,props:{alpha:{from:0,to:1},scale:{from:1.2,to:1}},delay:300,duration:300})},n.createSkipText=function(){this.skipText=new Gv(this.scene),this.skipText.setVisible(!1).setAlpha(0),this.skipText.onClick=this.handleSkip,this.add(this.skipText),Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,43.5),this.skipTextTween=this.scene.tweens.add({targets:this.skipText,delay:Vv.DelayNoThank,paused:!0,alpha:{from:0,to:1},ease:"Power1",duration:500})},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}},onComplete:function(){n.bgProgress.setVisible(!0),n.progressCircle.setVisible(!0),n.continueButton.setVisible(!0),n.skipText.setVisible(!0),n.runAnim(),n.updateInfo(),n.isUseRescue=!1,n.countdownCount=Vv.RescueGamePopupTimeout,n.setTime(n.countdownCount),n.runCountdown()}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),zv=Wv,Kv=n(613),jv=n.n(Kv),Xv=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+jv()(e)*n*e*e},Jv=function(e){function t(n){var i;return(i=e.call(this,n)||this).windX=1,i.airFrictionX=.05,i.airFrictionY=.01,i._lastRotaion=0,i.rotationRate=Math.random()+t.bonusRotationRate<.5?-1:1,i.scaleXNumber=i.getRandomFloat(.1,.2),i.scaleYNumber=i.scaleXNumber,i.scaleRate=-1,i.maxScale=i.getRandomFloat(.5,1),i.deltaAlpha=0,i.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007),i.airFrictionY=.004*Math.random()+(t.bonusAirFrictionY||.006),i.maxScale=Math.max(i.scaleXNumber,i.maxScale),i.alpha=0,(0,Va.Z)(i)||(0,Va.Z)(i)}(0,o.Z)(t,e);var n=t.prototype;return n.getRandomNumberBetween=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},n.getRandomFloat=function(e,t){return Math.random()*(t-e)+e},n.setValueAirFrictionX=function(e){t.bonusAirFrictionX=e,this.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007)},n.setValueAirFrictionY=function(e){t.bonusAirFrictionY=e},n.setValueRotationRate=function(e){t.bonusRotationRate=e},n.reset=function(){this.scaleXNumber=this.getRandomFloat(.3,.8),this.scaleYNumber=this.scaleXNumber,this.scaleRate=-1,this.alpha=0,this.deltaAlpha=0},n.update=function(t,n,i){for(var a=e.prototype.update.call(this,t,n,i),s=.5,r=t;r>16.67;)this.velocityX-=Xv(this.velocityX,s,this.airFrictionX)/60,this.velocityY-=Xv(this.velocityY,s,this.airFrictionY)/60,r-=16.67;if(this.velocityX-=Xv(this.velocityX,s,this.airFrictionX)*r/1e3,this.velocityY-=Xv(this.velocityY,s,this.airFrictionY)*r/1e3,this._lastRotaion=this.rotation,this.lifeCurrent>3*this.life/4)this.scaleX=this.maxScale,this.scaleY=this.maxScale,this.deltaAlpha+=t/(this.life/4),this.alpha=this.deltaAlpha;else if(this.lifeCurrent>0){var o=this.scaleRate>0?this.maxScale:1;this.scaleXNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleYNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleX=this.scaleXNumber,this.scaleY=this.scaleYNumber,this.alpha=this.deltaAlpha,this.scaleX<=0&&(this.scaleRate=1),this.scaleX>=this.maxScale&&(this.scaleRate=-1)}else this.reset();return a},t}(Phaser.GameObjects.Particles.Particle);Jv.bonusAirFrictionX=0,Jv.bonusAirFrictionY=0,Jv.bonusRotationRate=0,Jv.scaleXNumber=void 0,Jv.scaleYNumber=void 0,Jv.bonusAirFrictionX=0,Jv.bonusAirFrictionY=0,Jv.bonusRotationRate=0,Jv.scaleXNumber=Math.random(),Jv.scaleYNumber=Math.random();var qv=Jv,Qv=Qa.Z.EFFECTS,$v=Qv.KEY,eS=Qv.FRAME,tS=function(e){function t(t){var n;return(n=e.call(this,t,$v)||this).position1={x:-70,y:-180},n.emitterStar1=void 0,n.circleImage1=void 0,n.tweenShowCircle1=void 0,n.tweenHideCircle1=void 0,n.position2={x:-20,y:190},n.emitterStar2=void 0,n.circleImage2=void 0,n.tweenShowCircle2=void 0,n.tweenHideCircle2=void 0,n.position3={x:90,y:0},n.emitterStar3=void 0,n.circleImage3=void 0,n.tweenShowCircle3=void 0,n.tweenHideCircle3=void 0,n.setDepth(qa.Z.ON_TOP+1),n.createEmitterStars(),n.createTweenCircle(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitterStars=function(){var e=[eS.GLARE_CROSS,eS.DUST],t=[16636263,5289969,15880535];this.emitterStar1=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position1.x,y:this.position1.y,speed:{min:50,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:qv,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar2=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position2.x,y:this.position2.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:qv,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar3=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position3.x,y:this.position3.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:qv,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}})},n.createTweenCircle=function(){var e=this;this.circleImage1=this.scene.make.image({x:this.position1.x,y:this.position1.y,key:$v,frame:eS.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle1.play()}}),this.tweenHideCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage1.setVisible(!1),e.emitterStar1.stop()}}),this.circleImage2=this.scene.make.image({x:this.position2.x,y:this.position2.y,key:$v,frame:eS.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle2.play()}}),this.tweenHideCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage2.setVisible(!1),e.emitterStar2.stop()}}),this.circleImage3=this.scene.make.image({x:this.position3.x,y:this.position3.y,key:$v,frame:eS.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle3.play()}}),this.tweenHideCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage3.setVisible(!1),e.emitterStar3.stop()}})},n.getImages=function(){return[this.circleImage1,this.circleImage2,this.circleImage3]},n.playConfettiAnimation=function(){var e=this;this.scene.time.addEvent({delay:300,callback:function(){e.emitterStar1.flow(1e4,30),e.circleImage1.setVisible(!0),e.tweenShowCircle1.play()},callbackScope:this}),this.scene.time.addEvent({delay:800,callback:function(){e.emitterStar2.flow(1e4,25),e.circleImage2.setVisible(!0),e.tweenShowCircle2.play()},callbackScope:this}),this.scene.time.addEvent({delay:1300,callback:function(){e.emitterStar3.flow(1e4,30),e.circleImage3.setVisible(!0),e.tweenShowCircle3.play()},callbackScope:this})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),nS=tS,iS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textScoreReached=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.starSuperTwinkle=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.scene.enableInput(),s.runPopupEntrancesAnimation(300,300),s.textScoreReached.restart(),s.scene.audio.playSound(es.Z.SCORE_REACHED)},s.close=function(){e.prototype.close.call((0,Va.Z)(s))},s.scene=t,s.setDepth($a.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textScoreReached.start(),n.starSuperTwinkle.playConfettiAnimation(),n.handleDelegate(),n.runAnim()}})),this.tweenBackground.play()},n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText(),this.createAnim()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textScoreReached="ar"==e?new Rv(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new Pv(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(70)}),this.add(this.textScoreReached),Phaser.Display.Align.In.Center(this.textScoreReached,this)},n.createAnim=function(){this.starSuperTwinkle=new nS(this.scene),this.add(this.starSuperTwinkle),this.add(this.starSuperTwinkle.getImages())},t}(GameCore.Screen),aS=Qa.Z.DEFAULT,sS=aS.KEY,rS=aS.FRAME,oS=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).onClick=void 0,i.options=void 0,i.text=void 0,i.panel=void 0,i.icon=void 0,i.animOn=void 0,i.animOff=void 0,i.setSize(n.width,n.height),i.options=n,i.createPanel(),i.createIcon(),i.createText(),i.createAnimation(),i.updateStatus(i.options.enable),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){var e=this;this.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){e.options.enable?e.animOff.play():e.animOn.play(),e.onClick&&e.onClick(!e.options.enable)}))},n.createPanel=function(){this.panel=this.scene.make.image({key:sS,frame:rS.BUTTON_TOGGLE_ON}),this.panel.setWorldSize(this.width,this.height),this.add(this.panel),Phaser.Display.Align.In.Center(this.panel,this)},n.createIcon=function(){this.icon=this.scene.make.image({key:sS,frame:rS.BUTTON_CIRCLE}),this.icon.setWorldSize(27,27),this.add(this.icon),Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:sS,frame:rS.TEXT_ON});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.panel,-10)},n.createAnimation=function(){var e=this;this.animOn=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:-this.panel.width/2+this.icon.width/2,to:this.panel.width/2-this.icon.width/2-3},onComplete:function(){var t=e.scene.world.getPixelRatio();Phaser.Display.Align.In.Center(e.text,e.panel,-10),e.text.setFrame(rS.TEXT_ON);var n=e.text,i=n.width,a=n.height;e.text.setWorldSize(i/t,a/t),e.panel.setFrame(rS.BUTTON_TOGGLE_ON),e.panel.setWorldSize(e.width,e.height),e.options.enable=!0}});var t=this.scene.facebook.getLocale();this.animOff=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:this.panel.width/2-this.icon.width/2,to:-this.panel.width/2+this.icon.width/2},onComplete:function(){var n=e.scene.world.getPixelRatio();e.text.setFrame(rS.TEXT_OFF);var i=e.text,a=i.width,s=i.height;e.text.setWorldSize(a/n,s/n),e.panel.setFrame(rS.BUTTON_TOGGLE_OFF),e.panel.setWorldSize(e.width,e.height),e.options.enable=!1;var r=0;"it"==t&&(r=3),"pt"==t&&(r=5),Phaser.Display.Align.In.RightCenter(e.text,e.panel,-11+r)}})},n.updateStatus=function(e){this.options.enable=e,e?this.animOn.play():this.animOff.play()},t}(Phaser.GameObjects.Container),cS=oS,lS=Qa.Z.DEFAULT,hS=lS.KEY,uS=lS.FRAME,dS=function(e){function t(t){var n;return(n=e.call(this,t,hS,uS.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:hS,frame:uS.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ts.Z),pS=dS,gS=Qa.Z.DEFAULT,fS=gS.KEY,mS=gS.FRAME,ES=function(e){function t(t){var n;return(n=e.call(this,t,fS,mS.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:fS,frame:mS.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(ts.Z),vS=ES,SS=Qa.Z.DEFAULT,AS=SS.KEY,TS=SS.FRAME,yS=function(e){function t(t){var n;return(n=e.call(this,t,AS,TS.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:AS,frame:TS.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:AS,frame:TS.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(ts.Z),IS=yS,CS=Qa.Z.DEFAULT,OS=CS.KEY,bS=CS.FRAME,PS=function(e){function t(t){var n;return(n=e.call(this,t,OS,bS.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:OS,frame:bS.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:OS,frame:bS.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(ts.Z),RS=PS,wS=Qa.Z.DEFAULT,xS=wS.KEY,_S=wS.FRAME,kS=function(e){function t(t,n,a,s){var o;return(o=e.call(this,t,n,a,s)||this).scene=void 0,o.popup=void 0,o.title=void 0,o.buttonClose=void 0,o.contents=void 0,o.backgroundContent=void 0,o.settingMusic=void 0,o.settingSound=void 0,o.settingVibrate=void 0,o.settingSoundContainer=void 0,o.settingMusicContainer=void 0,o.settingVibrateContainer=void 0,o.popupShowUpAnimation=void 0,o.popupFadeOutAnimation=void 0,o.contentShowUpAnimation=void 0,o.buttonReplay=void 0,o.buttonPlayWithFriend=void 0,o.buttonHome=void 0,o.buttonJourney=void 0,o.popupFadeInMaskAnimation=void 0,o.popupFadeOutMaskAnimation=void 0,o.handleClose=function(){o.runCloseAnimation()},o.handleMusicSetting=function(e){o.scene.player.setSetting("music",e),e?o.scene.audio.playMusic():o.scene.audio.pauseMusic()},o.handleSoundSetting=function(e){o.scene.player.setSetting("sound",e)},o.handleVibrateSetting=function(e){e&&mg(199),o.scene.player.setSetting("vibrate",e)},o.clickReplay=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.scene.usedRescue=!1,o.scene.screen.close(o.name),e.next=4,o.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game,r=s.globalScene,o=s.lang,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=n(),l=wc(c),v()(a=[Ra,_a]).call(a,l)&&(t(Ph()),t(yh())),h=null,l===wa&&(h=cl(c),t({type:Jn,payload:{}})),t(Gh()),e.next=11,t(iu(l,h));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,Wh(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}());case 4:Il.emit(Co.REPLAY);case 5:case"end":return e.stop()}}),e)}))))},o.clickButtonPlayWithFriends=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.scene.storage.dispatch(Qh());case 2:o.scene.startGame(),o.scene.screen.close(o.name);case 4:case"end":return e.stop()}}),e)}))),o.clickButtonHome=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.scene.switch(Ua.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},o.clickButtonLeaderboard=function(){o.scene.screen.open($a.o4.LEADER_BOARD_SCREEN)},o.clickButtonShare=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.storage.dispatch(Dl());case 1:case"end":return e.stop()}}),e)}))))},o.scene=t,o.createPopup(),o.createTitle(),o.createContentBackground(),o.createSwitchButtons(),o.createButtons(),o.addItem(),o.arrangeItems(),o.createInput(),o.setDepth($a.Ks.POPUP),o.background.setAlpha(.5),o.scene.world.isLandscape()&&o.popup.setScale(o.popup.scale-.1),o}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:xS,frame:_S.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:xS,frame:_S.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ts.Z(this.scene,xS,_S.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new RS(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new IS(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new pS(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new vS(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Ua.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),gg()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:xS,frame:_S.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new cS(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:xS,frame:_S.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new cS(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:xS,frame:_S.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new cS(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),LS=kS,MS=Qa.Z.DEFAULT,DS=MS.KEY,NS=MS.FRAME,BS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.levelManager.getCurrentTargetScore(),a=this.scene.levelManager.getCurrentIndex(),s=this.scene.world.getPixelRatio();this.textScore.setText(""+i),0===a?this.titleFrame.setFrame(NS.TEXT_FIRST_MILESTONE):this.titleFrame.setFrame(NS.TEXT_NEXT_MILESTONE),this.titleFrame.setWorldSize(this.titleFrame.width/s,this.titleFrame.height/s);var r=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(r,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:DS,frame:NS.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){var e=this.scene.world.getPixelRatio();this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:DS,frame:NS.TEXT_FIRST_MILESTONE}),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.height/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterTargetScoreScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),GS=BS,FS=Qa.Z.DEFAULT,US=FS.KEY,HS=FS.FRAME,ZS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.scoreText=void 0,s.bestScoreText=void 0,s.tweenScoreText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.scoreBlock=void 0,s.bestScoreBlock=void 0,s.playWithFriendsButton=void 0,s.homeButton=void 0,s.shareButton=void 0,s.bestScore=void 0,s.currentScore=void 0,s.payload=void 0,s.counterAnimation=void 0,s.scoreAnimation=void 0,s.scene=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.initScore(),s.updateScore(),s.setVisible(!0),s.runOpenAnimation()},s.clickPlayWithFriends=function(){s.scene.storage.dispatch(Qh())},s.clickShare=function(){s.scene.storage.dispatch(Pl())},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){}))},s.setVisible(!1),s.scene=t,s.setDepth($a.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.createScoreAnimation(),Phaser.Display.Align.In.Center(s.popup,s.zone,0,-100),s.background.setVisible(!1),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,300,310),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.shareButton])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:US,frame:HS.TEXT_YOUR_SCORE}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),Phaser.Display.Align.In.Center(t,this.title,0,10);var a=new ts.Z(this.scene,US,HS.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.RightCenter(a,this.title,165,-15),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:US,frame:HS.SCORE_PANEL});e.setWorldSize(263,76),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(55),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-90)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:US,frame:HS.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(48),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new $g(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(Ua.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new hf(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonShare=function(){this.shareButton=new sf(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=Sl(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=vl(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(n),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){}))},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new yf({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(es.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a),t.scene.audio.playSound(es.Z.GAME_OVER)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(GameCore.Screen),YS=ZS,VS=GameCore.Configs,WS=VS.Match,zS=VS.Network,KS=VS.Tutorial,jS=VS.Board,XS=VS.Ads,JS=Qa.Z.GAMEPLAY_32.FRAME,qS=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.usedRescue=!1,n.bestScoreGlareEffect=void 0,n.bestScore=0,n.isBestScoreScreenShowed=void 0,n.isGameOver=void 0,n.isShowedNextTargetScreen=void 0,n.piecesByFen=void 0,n.isGameError=void 0,n.gamePlayMode=void 0,n.isNextTarget=!1,n.layoutManager=void 0,n.tutorialManager=void 0,n.effectManager=void 0,n.levelManager=void 0,n.run=function(){try{var e;n.initManager();var t=n.storage.getState();if(null===Lc(t)&&n.storage.dispatch(Kh(!1)),n.checkAndAddShortcut(),n.ads.showBannerAdAsync().catch(i.tO),n.tutorialManager.isValidForTutorial()||KS.ForceUseTutorial)return n.handleStartTutorial(),n.layoutManager.objects.main.praise.reset(),void n.player.incUserGuideDisplays();var a=wc(t);if(Ot()(e=[xa,wa,_a]).call(e,a)>=0){var s=n.player.getPlayerId(),r=cl(t).playerId,o=hl(t,{playerId:s}),c=ul(t,{opponentId:r});if(o&&c)return void n.screen.open($a.o4.GAME_OVER_SCREEN)}n.startGame()}catch(l){}},n.create=function(){e.prototype.create.call((0,Va.Z)(n)),n.createBackground(ba.Z.BACKGROUND.KEY);var t=n.player.getBestScore();n.bestScore=t,n.createManager(),n.createScreens(),n.createBestScoreGlareEffect(),n.createInput(),n.listenEvents(),n.input.setTopOnly(!0),n.preLoadAds()},n.closeSettingScreen=function(){(0,Va.Z)(n).screen.close($a.o4.SETTINGS_SCREEN)},n.closeGameOverScreen=function(){(0,Va.Z)(n).screen.close($a.o4.GAME_OVER_SCREEN)},n.handlePauseGame=function(){n.isGameOver||n.checkReachTargetScore()||(0,Va.Z)(n).screen.open($a.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=function(){var e=(0,r.Z)(u().mark((function e(t){var a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),a=n.game,s=a.globalScene,r=a.lang,e.prev=2,n.audio.muteAll(),n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=7;break}return e.abrupt("return");case 7:return s.screen.open($a.o4.NOTIFY_SCREEN,{message:r.Text.LOADING_AD,duration:zS.Timeout,loading:!0}),e.next=10,n.ads.showInterstitialAdAsync();case 10:n.analytics.showInterstitialAd(n.getSceneName()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return");case 16:return e.prev=16,s.screen.close($a.o4.NOTIFY_SCREEN),t&&n.postSessionScore(),n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),e.finish(16);case 23:case"end":return e.stop()}}),e,null,[[2,13,16,23]])})));return function(t){return e.apply(this,arguments)}}(),n.rescued=function(){try{var e=n.layoutManager.objects.main,t=n.getLevelLogInfo(),i=t.level,a=t.score,s=t.levelName;n.analytics.levelRescue(i,a,s),e.board.rescue(),n.nextLevel(),n.usedRescue=!0}catch(r){}},n.replay=function(){n.restartGame(),n.startGame()},n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){})),this.ads.preloadRewardedVideoAsync().catch((function(e){}))},n.createBestScoreGlareEffect=function(){this.bestScoreGlareEffect=new Bu(this),this.bestScoreGlareEffect.setDepth(qa.Z.ON_TOP),Phaser.Display.Align.In.Center(this.bestScoreGlareEffect,this.gameZone)},n.createManager=function(){this.layoutManager=new Kg(this),this.tutorialManager=new Io(this),this.effectManager=new ep(this),this.levelManager=new Yu},n.initManager=function(){this.layoutManager.init(),this.tutorialManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createSettingScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createYourScoreScreen(),this.createScoreReachedScreen(),this.createNextTargetScoreScreen(),this.createNoSpaceLeftScreen(),this.createTargetScoreScreen(),this.createLeaderboardScreen(),this.createMiniJourneyScreen()},n.createLeaderboardScreen=function(){this.screen.add($a.o4.LEADER_BOARD_SCREEN,Mu)},n.createMiniJourneyScreen=function(){this.screen.add($a.o4.MINI_JOURNEY_SCREEN,Ev)},n.createTargetScoreScreen=function(){this.screen.add($a.o4.TARGET_SCORE_SCREEN,GS)},n.createNoSpaceLeftScreen=function(){this.screen.add($a.o4.NO_SPACE_LEFT_SCREEN,wv)},n.createNextTargetScoreScreen=function(){this.screen.add($a.o4.NEXT_TARGET_SCORE_SCREEN,bv)},n.createScoreReachedScreen=function(){this.screen.add($a.o4.SCORE_REACHED_SCREEN,iS)},n.createYourScoreScreen=function(){this.screen.add($a.o4.YOUR_SCORE_SCREEN,YS)},n.createSettingScreen=function(){this.screen.add($a.o4.SETTINGS_SCREEN,LS)},n.startGame=function(){try{var e=this.layoutManager.objects,t=e.header,n=e.footer;this.isGameOver=!1,this.tutorialManager.skipTutorial(),this.closeSettingScreen(),this.closeGameOverScreen(),this.handleUsedRescue(),this.restartGame(),t.setVisible(!0),this.world.isLandscape()&&n.buttonSetting.setVisible(!0),t.progressBar.reset(),this.handleGameModeUI(),this.updateCurrentBestScore(),this.updateLevelManager(),this.updateProgressBar(),t.buttonSetting.setDisabled(!0),this.time.delayedCall(300,(function(){t.buttonSetting.setDisabled(!1)})),this.openTargetScoreScreen(),this.handleGameModeChange()}catch(a){this.isGameError||(this.isGameError=!0,this.replay()),(0,i.R0)(new Error("Start game scene"),{error:a,scene:"GameScene"})}},n.handleGameModeChange=function(){var e=this,t=[{selector:wc,callback:function(t){t!==e.gamePlayMode&&e.handleGameModeUI()}}];this.handleStateChange(t)},n.handleGameModeUI=function(){var e,t=this.storage.getState();this.gamePlayMode=wc(t),this.gamePlayMode&&this.gamePlayMode!==Ra&&Ot()(e=[xa,wa,_a]).call(e,this.gamePlayMode)>=0?this.handleStartGameFriendMode():this.handleStartGameSingleMode()},n.startGameAfterTargetScoreScreenClose=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=wc(a),r=this.getLevelLogInfo(),o=r.level,c=r.score,l=r.levelName;this.analytics.levelStart(o,c,l),this.levelManager.getCurrentIndex()>0&&n.board.handleTweenStartMission(),Ot()(e=[xa,wa,_a]).call(e,s)>=0?i.pieces.showNewPieces():this.piecesByFen?i.pieces.showAvailablePieces(this.piecesByFen):i.pieces.showNewPieces()},n.openTargetScoreScreen=function(){var e=this;this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open($a.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.handleUsedRescue=function(){this.usedRescue&&this.storage.dispatch(ou())},n.handleStartTutorial=function(){var e=this.layoutManager.objects,t=e.header,n=e.footer;this.analytics.event(Gt._.TUTORIAL_BEGIN),this.tutorialManager.start(),t.setVisible(!1),n.buttonSetting.setVisible(!1)},n.handleStartGameSingleMode=function(){var e,t,n=this.layoutManager.objects,i=n.main,a=n.footer,s=n.header,r=this.storage.getState(),o=(null==(e=nl(r))?void 0:e.data)||{},c=(null==(t=nl(r))?void 0:t.score)||0;if(o){var l=o.fen,h=null;if(this.piecesByFen=null,l){var u=i.board.getBoardByFen(l);h=this.handleDynamicFenSize(u),this.piecesByFen=a.pieces.getPiecesByFen(l),this.isFenGameOver(h,this.piecesByFen)&&(h=null,this.piecesByFen=null,this.storage.dispatch(Gh()),r=this.storage.getState(),c=0,this.resetRescuedGame())}i.board.clearBoard(),h&&i.board.startGame(h),a.pieces.clearPieces(),s.showItemSingleMode(),s.mainScoreBlock.setScore(c),s.mainScoreBlock.setScoreText(c),i.praise.reset()}},n.handleStartGameFriendMode=function(){var e=this.layoutManager.objects,t=e.header,n=e.main,i=e.footer;t.showItemPlayWithFriendsMode(),t.myScoreBlock.updateInfo(),t.opponentScoreBlock.updateInfo(),n.praise.reset(),n.board.clearBoard(),i.pieces.clearPieces()},n.listenEvents=function(){var e=this;Il.on(Co.START_GAME,(function(){e.startGame()})),Il.on(Co.RESCUE,this.rescued),Il.on(Co.REPLAY,this.replay),Il.on(Co.GAME_OVER,this.handleGameOver.bind(this)),Il.on("handle_state_change",this.handleStateChange.bind(this))},n.postSessionScore=function(){var e=this.storage.getState(),t=Sl(e).score,n=void 0===t?0:t;this.storage.dispatch(jc(n))},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.createRescueScreen=function(){this.screen.add($a.o4.RESCUE_SCREEN,zv)},n.createGameOverScreen=function(){this.screen.add($a.o4.GAME_OVER_SCREEN,Df)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore()||0,n=this.storage.getState(),i=Sl(n),a=i.score,s=void 0===a?0:a,r=i.bestScore,o=void 0===r?0:r,c=t>o?t:o;c=c>s?c:s,this.player.setBestScore(c),e.bestScoreBlock.setScoreText(c)},n.updateLevelManager=function(){var e=this.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e)},n.updateProgressBar=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n)},n.setIsGameOver=function(e){this.isGameOver=e},n.handleGameOver=function(){this.isGameOver=!0;var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelFail(t,n,i),this.screen.open($a.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0;var t=this.storage.getState(),n=xc(t);n<WS.MaxRescueCount&&this.ads.preloadRewardedVideoAsync().catch((function(e){})),this.screen.open($a.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){if(e.enableInput(),n<WS.MaxRescueCount&&XS.Enabled)return e.screen.open($a.o4.RESCUE_SCREEN),void(e.isGameOver=!1);e.usedRescue=!1,e.endGame()}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.restartGame=function(){var e,t=this.layoutManager.objects,n=t.header,i=t.main;this.usedRescue=!1,null==(e=n.mainScoreBlock.addScore)||e.stop().remove(),n.mainScoreBlock.setScore(0),n.mainScoreBlock.setScoreText(0),n.myScoreBlock.setScore(0),n.myScoreBlock.setScoreText(0),n.progressBar.hideProgressBar(),n.progressBar.setPercent(0),this.levelManager.restart(),i.praise.listScore=[]},n.endGame=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleShowInterstitialAd(!1).catch(i.tO);case 2:this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,o,c,l,h,d,p,g,f,m,E,v,S,A,T,y,I,C,O,b,P,R,w,x,_;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.analytics,o=a.facebook,c=a.globalScene,l=a.lang,c.screen.open($a.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),h=n(),d=wc(h),p=Sl(h),g=p.score,f=void 0===g?0:g,m=p.level,E=void 0===m?0:m,t(jc(f)),t(nu(f)),e.next=10,t(su(d,{score:f}));case 10:if(h=n(),v=_c(h),S=kc(h),A=Math.floor((S-v)/1e3),s.event(Gt._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(d),level:E,level_name:"level_"+E,time_played:A}),T=o.getContextID(),d===xa&&T&&t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game.analytics,e.prev=1,s=window.game.facebook.getContextID(),Gl({contextId:s}),r=n(),o=dl(r),c=o.playerId,l=o.score,h=Sl(r),d=h.score,!c||c===Pa.playerId){e.next=25;break}if(!(d>l)){e.next=18;break}return e.next=13,Ll(r);case 13:return p=e.sent,e.next=16,Xl(p,r);case 16:e.next=23;break;case 18:return e.next=20,wl(r);case 20:return p=e.sent,e.next=23,Jl(p,r);case 23:e.next=30;break;case 25:return e.next=27,wl(r);case 27:return p=e.sent,e.next=30,Jl(p,r);case 30:Ul({imageShare:p}),a.event(Gt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),a.event(Gt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,i.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!T||d!==wa){e.next=26;break}if(y=cl(h),(I=y.playerId)&&I!==Pa.playerId){e.next=21;break}return e.abrupt("return");case 21:C=vl(h),O=C[I]||{},b=O.score,P=void 0===b?0:b,R=sl(h),w=R._id,x=R.whitePlayerFinish,_=R.blackPlayerFinish,t(x&&_?f>P?Kl(I,{matchId:w,contextId:T}):zl(I,{matchId:w,contextId:T}):jl(I,{matchId:w,contextId:T,score:f}));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),(0,i.tO)(e.t0);case 31:return e.prev=31,Wh(300),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})));return function(t,n){return e.apply(this,arguments)}}()),this.resetRescuedGame();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleUpdateScore=function(e){if(!this.tutorialManager.isRunning()){var t=this.getCurrentScoreByMode()+e;this.storage.dispatch(Uh({score:t})),this.updateMatchData()}},n.handleAddScoreAnim=function(e){var t,n=this.layoutManager.objects.header,i=this.storage.getState(),a=wc(i);this.tutorialManager.isRunning()?n.mainScoreBlock.animAddScore(e):a&&a!==Ra&&Ot()(t=[xa,wa,_a]).call(t,a)>=0?n.myScoreBlock.animAddScore(e):n.mainScoreBlock.animAddScore(e)},n.getBestScore=function(){var e=this.storage.getState();return Sl(e).bestScore},n.bestScoreReached=function(){if(!this.isBestScoreScreenShowed&&!this.isGameOver){var e=this.getBestScore(),t=this.getCurrentScoreByMode();!e||e>=t||(this.player.setBestScore(t),this.isBestScoreScreenShowed=!0,this.audio.playSound(es.Z.CONGRATULATION),this.bestScoreGlareEffect.playEffect())}},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=e/t.progressBar.getTargetScore();t.progressBar.setPercent(n)},n.checkReachTargetScore=function(){var e=this.layoutManager.objects.header;return this.getCurrentScoreByMode()>=e.progressBar.getTargetScore()},n.handleNextTargetScore=function(){var e=this;if(!this.isGameOver&&(this.checkReachTargetScore()&&!this.isShowedNextTargetScreen)){this.isShowedNextTargetScreen=!0,this.disableInput();var t=this.getLevelLogInfo(),n=t.level,a=t.score,s=t.levelName;this.analytics.levelComplete(n,a,s),this.screen.open($a.o4.SCORE_REACHED_SCREEN,{duration:4e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowedNextTargetScreen=!1,t.next=3,e.handleShowInterstitialAd(!1).catch(i.tO);case 3:e.showNextTargetScreen();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.getCurrentScoreByMode=function(){var e,t=this.storage.getState(),n=wc(t),i=this.layoutManager.objects.header;return n&&n!==Ra&&Ot()(e=[xa,wa,_a]).call(e,n)>=0?i.myScoreBlock.score:i.mainScoreBlock.score},n.showNextTargetScreen=function(){var e=this.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e);this.screen.open($a.o4.NEXT_TARGET_SCORE_SCREEN)},n.updateMatchData=function(){if(!this.tutorialManager.isRunning()){var e=this.getFen(),t=this.storage.getState(),n=nl(t).data||{},a=wc(t),r=xc(t);if(!a||a===Ra){var o,c,l=il(t),h=Sl(t).score,u=void 0===h?0:h;this.storage.dispatch((o=l,c={score:u,rescued:r,data:(0,s.Z)({},n,{fen:e}),updateAt:Date.now()},function(e,t){try{dh((0,s.Z)({matchId:o},c));var n=t(),a=il(n);ph({matchId:o,currentMatchId:a}),e({type:Dn,payload:{match:c}});var r=c.data;c.data=Ah(r),Ql(Sh.SingleMatchStore,c)}catch(l){if(l instanceof $l)return;(0,i.tO)(l)}}))}}},n.nextLevel=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);this.isNextTarget=!0,e.progressBar.hideProgressBar(),e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n);var i=this.getLevelLogInfo(),a=i.level,s=i.levelName;this.analytics.levelStart(a,t,s)},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case Hs:case Zs:case Ys:n.push({data:Ld.getData(s,r,o)});break;case Vs:case Ws:case zs:case Ks:n.push({data:Dd.getData(s,r)});break;case js:case Xs:case Js:n.push({data:Bd.getData(s)});break;case Qs:n.push({data:Fd.getData(r)});break;case $s:n.push({data:Kd.getData(r)});break;case sr:n.push({data:Xd.getData(r)});break;case tr:case nr:case ir:case ar:n.push({data:Hd.getData(s,r)});break;case qs:n.push({data:Yd.getData(r)});break;case er:n.push({data:Wd.getData()})}}return fd(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=m()(t=[]).call(t,e);if(n>jS.rows)za()(a).call(a,jS.rows,n-jS.rows);else if(i<jS.rows)for(var s=0;s<jS.rows-n;s++){var r;a.push(ja()(r=new Array(n)).call(r,{value:0,frame:JS.GEM_TRANSPARENT}))}return i>jS.cols?a.forEach((function(e){za()(e).call(e,jS.cols,i-jS.cols)})):i<jS.cols&&a.forEach((function(e){for(var t=0;t<jS.cols-i;t++)e.push({value:0,frame:JS.GEM_TRANSPARENT})})),a},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();Ma(e)!=_a&&this.facebook.attemptToAddShortcut()}},n.getLevelName=function(){var e,t=this.levelManager.getCurrentIndex()+1;return"target_"+Ja()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.getLevelLogInfo=function(){return{level:this.levelManager.getCurrentIndex()+1,score:this.getCurrentScoreByMode(),levelName:this.getLevelName()}},n.resetRescuedGame=function(){this.storage.dispatch((function(e){e({type:Rn,payload:{}}),Ql(Hh.SingleMatchStore,{rescued:0})}))},t}(Du.Z);for(var QS=qS,$S=n(450),eA=GameCore.Configs.Notification.ApiUrl,tA=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,Me("players/"+n,t,{},eA,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),iA=[{id:"pass-levels",title:"PASS_10_LEVELS",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"COLLECT_300_DIAMONDS",require:{diamond:300},reward:{diamond:100}},{id:"reach-score",title:"REACH_TOTAL_SCORES",require:{score:1e5},reward:{diamond:200}}],aA=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iA);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sA=(0,j.P1)([function(e){var t;return null==(t=e[xi])?void 0:t.tasks}],(function(e){return e})),rA=(0,j.P1)([function(e){var t;return null==(t=e[xi])?void 0:t.process}],(function(e){return e})),oA=(0,j.P1)([function(e){var t;return null==(t=e[xi])?void 0:t.isRequesting}],(function(e){return e})),cA=((0,j.P1)([function(e){var t;return null==(t=e[xi])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),lA=function(e){return function(t){t({type:ki,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>cA.Duration?hA(e):uA(r))}},hA=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},B()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(uA(n)),Il.emit(el.EVENTS.TASKS_RESET)}},uA=function(e){return{type:Li,payload:{process:e}}},dA=n(370),pA=n.n(dA),gA=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},fA=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e,t){var i;void 0===t&&(t=!0);var a=e.type,s=e.value;if(!(s<1)&&(-1!==Ot()(i=n.requireTypes).call(i,a)&&!n.isPassRequiredTarget(a)&&n.processMore(e))){a=e.type,s=e.value;var r=n.getCorrectValue(a,s);n.game.storage.dispatch(function(e,t,n,i){return void 0===i&&(i=!0),function(a){var s=gA();if(GameCore.Utils.Valid.isObject(s)){var r=s;GameCore.Utils.Object.hasOwn(r,e)&&!r[e].rewarded&&(i&&(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r})),a({type:Mi,payload:{id:e,type:t,value:n}}))}}}(n.id,a,r,t)),n.isTaskFinished(a)&&n.game.storage.dispatch(function(e){return function(t){t({type:Di,payload:{id:e}}),Il.emit(el.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=sA(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:pA()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=B()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=rA(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),mA=fA,EA=el.COLLECT_DIAMONDS,vA=EA.ID,SA=EA.EVENTS,AA=function(e){function t(t){return e.call(this,t,vA)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(SA.COLLECT_DIAMONDS,this.process),Il.on(SA.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(mA),TA=AA,yA=el.PASS_LEVELS,IA=yA.ID,CA=yA.EVENTS,OA=function(e){function t(t){return e.call(this,t,IA)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(CA.PASS_LEVEL,this.process),Il.on(CA.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(mA),bA=OA,PA=el.REACH_SCORE,RA=PA.ID,wA=PA.EVENTS,xA=function(e){function t(t){var n;return(n=e.call(this,t,RA)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(wA.ADD_SCORE,this.process),Il.on(wA.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(mA),_A=xA,kA=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!oA(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:_i,payload:{}}),e.next=7,aA();case 7:a=e.sent,t(lA(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[el.PASS_LEVELS.ID]=new bA(this.game),this.eventsListener[el.REACH_SCORE.ID]=new _A(this.game),this.eventsListener[el.COLLECT_DIAMONDS.ID]=new TA(this.game)},e}(),LA=kA,MA=GameCore.Configs,DA=MA.Match,NA=MA.Lives,BA=function(e){return function(t){setTimeout((function(){t(UA()),t(FA()),t(GA())}),e)}},GA=function(){return function(e){var t=60*NA.bonusDurationMins*1e3;setInterval((function(){e(UA()),e(FA())}),t)}},FA=function(){return function(e){e({type:Ji,payload:{}})}},UA=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=Zf(r),(c=NA.bonusLife+o)>NA.livesCapacity&&(c=NA.livesCapacity),l={lives:c,lastBonusLifeTime:(new Date).getTime()},t({type:ji,payload:{data:l}}),e.next=11,window.FBInstant.player.setDataAsync({lives:l});case 11:Ql(DA.LivesStore+"-"+s,l),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}()},HA=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=n(),a=Zf(i)||0,s=Yf(i)){e.next=8;break}return e.next=7,t(ZA({lives:a,lastBonusLifeTime:(new Date).getTime()}));case 7:return e.abrupt("return");case 8:return r=(new Date).getTime(),o=Math.floor((r-s)/1e3/(60*NA.bonusDurationMins)),(c=o+a)>NA.livesCapacity&&(c=NA.livesCapacity),l={lives:c,lastBonusLifeTime:c===a?s:(new Date).getTime()},e.next=15,t(ZA(l));case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}()},ZA=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var i,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game.player,a=i.getPlayer(),s=a.playerId,n({type:ji,payload:{data:e}}),t.next=5,window.FBInstant.player.setDataAsync({lives:e});case 5:Ql(DA.LivesStore+"-"+s,e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},YA=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],VA=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YA);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),WA=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.missions}],(function(e){return e})),zA=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.isRequesting}],(function(e){return e})),KA=((0,j.P1)([WA,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:Oi,payload:{missions:e}}}),jA={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"}},XA=(0,j.P1)([function(e){var t;return null==(t=e[Ii])?void 0:t.mission}],(function(e){return e})),JA=((0,j.P1)([XA],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:bi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(Il.emit(jA.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:Pi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=XA(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=XA(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return B()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),qA=JA,QA=jA.EVENTS,$A=jA.TYPES,eT=function(e){function t(t,n){return e.call(this,t,$A.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(QA.MISSION_UPDATE,this.process),Il.on(QA.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(qA),tT=eT,nT=jA.EVENTS,iT=jA.TYPES,aT=function(e){function t(t,n){return e.call(this,t,iT.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(nT.MISSION_UPDATE,this.process),Il.on(nT.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(qA),sT=aT,rT=jA.EVENTS,oT=jA.TYPES,cT=function(e){function t(t,n){return e.call(this,t,oT.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){Il.off(rT.MISSION_UPDATE,this.process),Il.on(rT.MISSION_UPDATE,this.process)},n.processMore=function(e){return!0},t}(qA),lT=cT,hT=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!zA(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ci,payload:{}}),e.next=7,VA();case 7:a=e.sent,t(KA(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=WA(t);n&&B()(n).forEach((function(t){switch(n[t].id){case jA.TYPES.COLLECT_GEMS:e.listener[t]=new tT(e.game,t);break;case jA.TYPES.COMBO:e.listener[t]=new sT(e.game,t);break;case jA.TYPES.USE_ITEM:e.listener[t]=new lT(e.game,t)}}))},t.initEvents=function(){Il.off(jA.EVENTS.MISSION_START,this.startListener),Il.on(jA.EVENTS.MISSION_START,this.startListener)},e}(),uT=hT,dT=function(e){try{var t=La(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?Pa:new Ve.Z(a,s,r).toObject()}catch(o){return Pa}},pT=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Yc(n))})).catch((function(e){})),e(jh())}catch(t){}}},gT=function(){return function(e,t){try{var n=t(),i=La(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,l=dT(n);c||a.updateConnectedPlayers([l]);var h=l.playerId;e(Qh(r,h,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},fT=function(){return function(e,t){try{var n=t(),i=La(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,l=a.playerId===c;e(tu(r,l?o:c))}catch(h){throw new Error("processChallengeFriendMode: "+h)}}},mT=function(){return function(e,t){try{var n=t(),a=La(n).entryPointData||{},o=a.playerId,c=a.playerScore;e(Fh(o,{score:c,level:0}));var l=dT(n);e(function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.facebook,r=a.globalScene,o=a.analytics,c=a.lang,r.screen.open($a.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),l=s.getContextID(),Yh({contextId:l}),o.event(Gt._.JOIN_GROUP,{group_id:l}),t.next=8,n(iu(xa,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof Oc)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,Wh(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,s.Z)({},l,{score:c})))}catch(h){throw new Error("processMatchingGroupMode: "+h)}}},ET=function(){return function(e){try{e(Xh())}catch(t){throw new Error("processNewUserMode: "+t)}}},vT=n(447),ST={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",game_over_scene:"./assets/sounds/game_over_scene.mp3",game_over:"./assets/sounds/game_over.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",score_count:"./assets/sounds/score_count.mp3",piece_pick:"./assets/sounds/piece_pick.mp3",piece_drop:"./assets/sounds/piece_drop.mp3",piece_invalid_move:"./assets/sounds/piece_invalid_move.mp3",board_end:"./assets/sounds/board_end.mp3",rescue_timer:"./assets/sounds/rescue_timer.mp3",eat_block:"./assets/sounds/eat_block.mp3",good:"./assets/sounds/good.mp3",cool:"./assets/sounds/cool.mp3",excellent:"./assets/sounds/excellent.mp3",reach_score:"./assets/sounds/reach_score.mp3",reach_goal:"./assets/sounds/reach_goal.mp3",wait_opponent:"./assets/sounds/wait_opponent.mp3",win:"./assets/sounds/win.mp3",lose:"./assets/sounds/lose.mp3",draw:"./assets/sounds/win.mp3",fireworks_big:"./assets/sounds/fireworks_big.mp3",fireworks_soar:"./assets/sounds/fireworks_soar.mp3",fireworks_small:"./assets/sounds/fireworks_small.mp3"}},AT=GameCore.Configs,TT=AT.AppId,yT=AT.Notification,IT=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){yT.Enable&&(n.updatePlayerProfileToNotificationService(),yT.DisableSendNotification||n.sendNotificationForNewUser())},n.startGame=function(){n.analytics.event(Gt._.APP_READY),n.storage.dispatch((0,vT.I)(Ua.Co.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=La(r),c=Ma(r),l=i.getPlayer(),h=(o.entryPointData||{}).type;if(l.isUserNew&&a.event(Gt._.NEW_USER),c===_a)return void e(pT());if(c===wa){if(h===ya)return void e(gT());if(h===Ca)return void e(fT())}if(c===xa)return void e(mT());if(l.isUserNew)return void e(ET());s.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE)}catch(u){s.events.emit(Ua.K5.SWITCH,Ua.Co.DASHBOARD_SCENE)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(ST.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this,t=this.getLangCode();this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Gt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new nA("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.multiatlas(Qa.Z.DEFAULT.KEY,Qa.Z.DEFAULT.JSON.replace(/{\w+}/g,t),Qa.Z.DEFAULT.URL.replace(/{\w+}/g,t)),this.load.bitmapFont(ns.Z.PRIMARY.KEY,ns.Z.PRIMARY.TEXTURE.replace(/(fonts)/g,"fonts"+t),ns.Z.PRIMARY.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(ns.Z.PRIMARY_LIGHT.KEY,ns.Z.PRIMARY_LIGHT.TEXTURE.replace(/(fonts)/g,"fonts"+t),ns.Z.PRIMARY_LIGHT.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(ns.Z.NUMBER_LIGHT.KEY,ns.Z.NUMBER_LIGHT.TEXTURE,ns.Z.NUMBER_LIGHT.DATA),this.load.bitmapFont(ns.Z.NUMBER_DARK.KEY,ns.Z.NUMBER_DARK.TEXTURE,ns.Z.NUMBER_DARK.DATA),this.load.atlas({key:Qa.Z.EFFECTS.KEY,textureURL:Qa.Z.EFFECTS.PATH.replace(/{\w+}/g,t),atlasURL:Qa.Z.EFFECTS.JSON.replace(/{\w+}/g,t)}),this.load.atlas({key:Qa.Z.GAMEPLAY_32.KEY,textureURL:Qa.Z.GAMEPLAY_32.TEXTURE,atlasURL:Qa.Z.GAMEPLAY_32.JSON}),this.load.atlas({key:Qa.Z.GAMEPLAY.KEY,textureURL:Qa.Z.GAMEPLAY.TEXTURE,atlasURL:Qa.Z.GAMEPLAY.JSON}),this.world.isLandscape()?this.load.image(ba.Z.BACKGROUND.KEY,ba.Z.BACKGROUND.FILE_LANDSCAPE):this.load.image(ba.Z.BACKGROUND.KEY,ba.Z.BACKGROUND.FILE_PORTRAIT),this.load.image(ba.Z.AVATAR.KEY,ba.Z.AVATAR.FILE),this.load.spine(Nu.BEST_SCORE.KEY,Nu.BEST_SCORE.JSON.replace(/{\w+}/g,t),Nu.BEST_SCORE.ATLAS.replace(/{\w+}/g,t)),this.load.spine(Nu.LOGO.KEY,Nu.LOGO.JSON,[Nu.LOGO.ATLAS],!0),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(ST.EFFECTS),this.analytics.event(Gt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.getLangCode=function(){var e="";switch(this.facebook.getLocale()){case"ru":e="/ru";break;case"pt":e="/pt";break;case"fr":e="/fr";break;case"hi":e="/hi";break;case"it":e="/it";break;case"id":e="/id";break;case"de":e="/de";break;case"ja":e="/ja";break;case"es":e="/es";break;case"zh":e="/zh";break;case"ar":e="/ar";break;case"tr":e="/tr"}return e},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID;tA({appId:TT,playerId:t,name:n,photo:i,locale:a,ASID:s})},n.sendNotificationForNewUser=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.getPlayerIsNew()){e.next=4;break}return e.abrupt("return");case 4:if(t=this.player.getPlayerASID()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(n=e.t0,!0!==n.isNotificationFirstSent){e.next=16;break}return e.abrupt("return");case 16:this.facebook.sendNotificationAsync({message:"Hi @["+t+"] your friends are waiting to play with you, play now!",delayTime:14400}),FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),n.setupGlobalScene=function(){var e=this.scene.get(Ua.Co.GLOBAL_SCENE);e instanceof $S.Z&&e.setup()},n.initModules=function(){new uT(this.game),new LA(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.lazyLoadLevel(),e.lazyLoadLives(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.lazyLoadLevel=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.storage.dispatch(Dh());case 7:this.loadLevelConfig(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.lazyLoadLives=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:Ki,payload:{}}),e.next=6,null==(s=window.FBInstant.player.getDataAsync(["lives"]))?void 0:s.lives;case 6:return r=e.sent,o=ql(DA.LivesStore+"-"+a)||{},c=o.lives,l=void 0===c?NA.livesCapacity:c,h=o.lastBonusLifeTime,d=void 0===h?0:h,r&&(l=r.lives||0,d=r.lastBonusLifeTime||0),t({type:ji,payload:{data:{lives:l,lastBonusLifeTime:d}}}),t((function(e,t){e(FA());var n=t(),i=60*NA.bonusDurationMins*1e3,a=(new Date).getTime(),s=Yf(n);e(a-s<i?BA(i-(a-s)):GA())})),e.next=15,t(HA());case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t({type:Xi,payload:{}});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,i.tO)(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=fl(e),n=Uf[t];n||(n=Uf[Uf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return;this.load.tilemapTiledJSON(s,r),this.load.start()}catch(o){(0,i.tO)(o)}},n.loadSounds=function(){this.loadSoundEffects()},n.loadSoundEffects=function(){var e=this;B()(ST.EFFECTS).forEach((function(t){e.load.audio(t,ST.EFFECTS[t])}))},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+ST.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(ST.BACKGROUND.KEY,ST.BACKGROUND.FILE),this.load.start()}},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t=this.time.now,n=GameCore.Utils.Device.isDesktop()?4e3:7e3,a=Math.max(n-t,10),s={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",o=document.createElement("div");o.id="wait-ads-mask";var c=document.createElement("div");c.id="wait-ads-content",o.appendChild(c);var l=document.createElement("div");l.id="wait-ads-dual-ring",c.appendChild(l);var h=document.createElement("div");h.id="wait-ads-text",h.innerHTML=s,c.appendChild(h),document.body.appendChild(o),this.audio.muteAll(),setTimeout((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadPreRollAdAsync();case 5:return t.next=7,e.ads.showPreRollAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,o.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 18:case"end":return t.stop()}}),t,null,[[0,9,12,18]])}))),a)}},n.loadTexture32Bit=function(e,t){var n=this,i=[];t.forEach((function(e){var t=GameCore.Utils.String.generateObjectId();n.load.image(t,e),i.push(t)})),this.load.start();this.textures.on(Phaser.Textures.Events.ADD,(function(t){var a=Ot()(i).call(i,t);if(-1!==a){var s=n.textures.get(t),r=n.textures.get(e);r.source[a].glTexture=s.source[0].glTexture,r.source[a].glIndex=s.source[0].glIndex,r.source[a].glIndexCounter=s.source[0].glIndexCounter}}))},t}(Phaser.Scene),CT=IT,OT=n(190),bT={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(OT)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},PT=function(e){function t(t){return e.call(this,bT,t)||this}return(0,o.Z)(t,e),t}(gc.Z),RT=Qa.Z.DEFAULT,wT=RT.KEY,xT=RT.FRAME,_T=GameCore.Configs.Lives,kT=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.circle=void 0,n.icon=void 0,n.textLives=void 0,n.textTimer=void 0,n.textFull=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.iconBeat=void 0,n.intervalTimer=void 0,n.scene.add.existing((0,Va.Z)(n)),n.createBackgroundLives(),n.createTextLives(),n.createTextTimer(),n.createTextFull(),n.createIconPlus(),n.createHeartBeatAnimation(),n.setSize(140,27),n.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){n.scene.screen.open($a.o4.CLAIM_HEART_SCREEN)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundLives=function(){this.background=this.scene.make.image({key:wT,frame:xT.LIVES_TIME_BLOCK}),this.background.setWorldSize(111,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.setFrameLivesTimeBlock2=function(){this.background.setFrame(xT.LIVES_TIME_BLOCK_2)},n.createIconPlus=function(){this.icon=this.scene.make.image({key:wT,frame:xT.ICON_PLUS}),this.icon.setWorldSize(14,14),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-62,11)},n.createTextLives=function(){this.circle=this.scene.make.image({key:wT,frame:xT.LIVES_HEART}),this.circle.setWorldSize(38,31),this.add(this.circle),Phaser.Display.Align.In.Center(this.circle,this,-51,0);var e=this.scene.storage.getState(),t=Zf(e);this.textLives=this.scene.make.text({text:""+t,style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.circle)},n.createTextTimer=function(){this.textTimer=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:"00:00",origin:{x:.2,y:.5}}),this.add(this.textTimer),Phaser.Display.Align.In.Center(this.textTimer,this,6,2)},n.createTextFull=function(){this.textFull=this.scene.make.text({text:this.scene.lang.Text.FULL,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textFull.setTint(15651762),this.textFull.setVisible(!1),this.add(this.textFull),Phaser.Display.Align.In.Center(this.textTimer,this,6,0)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=Zf(e);this.textLives.setText(t)},n.startIntervalTimer=function(){var e=this;this.runHeartBeatAnimation();var t=60*_T.bonusDurationMins*1e3,n=this.scene.lang;this.intervalTimer=setInterval((function(){var i,a,s=e.scene.storage.getState(),r=Zf(s)||0;if(r===_T.livesCapacity)return e.textTimer.setText(n.Text.FULL),e.textLives.setText(String(_T.livesCapacity)),void("ar"==e.scene.facebook.getLocale()&&(e.textTimer.setVisible(!1),e.textFull.setVisible(!0)));var o=Vf(s),c=Yf(s),l=(new Date).getTime();l-c<t&&(o=c);var h=(0,Oe.ne)(t-(l-o)),u=Ke()(i="0"+h.minutes).call(i,-2),d=Ke()(a="0"+h.seconds).call(a,-2);parseInt(e.textLives.text)!==r&&e.updateTextLives(),e.textTimer.setText(u+":"+d)}),1e3)},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setLives=function(e){this.textLives.setText(String(e))},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play(),this.iconBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new PT({targets:[this.circle],props:{scale:"+=0.005"}}),this.textLivesBeat=new PT({targets:[this.textLives],props:{scale:"+=0.05"}}),this.iconBeat=new PT({targets:[this.icon],props:{scale:"+=0.025"}})},t}(Phaser.GameObjects.Container),LT=kT,MT=Qa.Z.DEFAULT,DT=MT.KEY,NT=MT.FRAME,BT=GameCore.Configs.Lives,GT=function(e){function t(t){var n;return(n=e.call(this,t,DT,NT.BUTTON_GREEN)||this).heart=void 0,n.textLives=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.icon=void 0,n.text=void 0,n.button.setWorldSize(251,63),n.setName("RefillLives"),n.createText(),n.createIcon(),n.alignItem(),n.createHeart(),n.createHeartBeatAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:DT,frame:NT.TEXT_REFILL_LIVES}),this.text.setWorldSize(this.text.width/e,this.text.height/e),this.add(this.text)},n.createIcon=function(){this.icon=this.scene.make.image({key:DT,frame:NT.ICON_ADS}),this.icon.setWorldSize(33,32),this.add(this.icon)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+n/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,s-i,-2),Phaser.Display.Align.In.Center(this.text,this,a-i,-2)},n.createHeart=function(){this.heart=this.scene.make.image({key:DT,frame:NT.LIVES_HEART}),this.heart.setAngle(-30),this.heart.setWorldSize(46,36),this.add(this.heart),Phaser.Display.Align.In.Center(this.heart,this,-120,-25),this.textLives=this.scene.make.text({text:"+"+BT.livesCapacity,style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.textLives.setAngle(-30),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.heart)},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new PT({targets:[this.heart],props:{scale:"+=0.005"}}),this.textLivesBeat=new PT({targets:[this.textLives],props:{scale:"+=0.025"}})},t}(ts.Z),FT=GT,UT=Qa.Z.DEFAULT,HT=UT.KEY,ZT=UT.FRAME,YT=GameCore.Configs,VT=YT.Network,WT=YT.Lives,zT=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.currentScreen=void 0,s.refillLivesButton=void 0,s.textTitle=void 0,s.livesContent=void 0,s.textContent=void 0,s.textContent2=void 0,s.adsTimer=void 0,s.livesTimer=void 0,s.intervalTimer=void 0,s.textBlock=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.clickPlayWithFriend=function(){s.scene.storage.dispatch(Qh()),s.currentScreen&&s.currentScreen.setVisible(!1),s.close()},s.handleShowRewardedVideoAd=(0,r.Z)(u().mark((function e(){var t,n,i,a,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene.game,n=t.globalScene,i=t.audio,a=t.lang,e.prev=1,n.screen.open($a.o4.NOTIFY_SCREEN,{message:a.Text.LOADING_AD+"...",duration:VT.Timeout,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=7,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(VT.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,s.scene.ads.showRewardedVideoAsync();case 9:s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),i.playSound(es.Z.DAILY_REWARD),n.screen.close($a.o4.NOTIFY_SCREEN),s.scene.analytics.showRewardedVideoAd(s.getScreenName()),s.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={lives:NA.livesCapacity,lastBonusLifeTime:(new Date).getTime()},e.next=4,t(ZA(n));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),s.close(),e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=24;break}if("USER_INPUT"!==e.t0.code){e.next=24;break}return s.showNotifySkipAds(),e.abrupt("return");case 24:s.showNotifyNoAds();case 25:return e.prev=25,null==(o=s.adsTimer)||o.destroy(),i.unmuteAll(),i.playMusic(),s.scene.screen.close(s.name),c=s.getData(["onClose"]),(h=c[0])&&h(),e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[1,18,25,33]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===$a.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open($a.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==$a.o4.NOTIFY_SCREEN||s.scene.screen.close(s.name)},s.createPopup(),s.createLivesTimer(),s.createTitle(),s.createContentBackground(),s.createLiveContent(),s.createTextContent(),s.createButtons(),s.addItem(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.updateIntervalTimer(),this.startIntervalTimer(),this.runOpenAnimation(),null!=t&&t.currentScreen&&(this.currentScreen=t.currentScreen),this.showLivesTimer()},n.showLivesTimer=function(){var e=this.getData(["showLivesTimer"])[0];this.livesTimer.setVisible(e),e&&this.livesTimer.startIntervalTimer()},n.createLivesTimer=function(){this.livesTimer=new LT(this.scene),this.popup.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this.popup,0,-270)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:HT,frame:ZT.LIVES_HEART}),this.backgroundContent.setWorldSize(114,93),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createLiveContent=function(){var e=this.scene.storage.getState(),t=Zf(e);this.livesContent=this.scene.make.text({text:""+t,style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(150)+"px",fontStyle:"700",align:"center"}}),this.livesContent.setTint(16777215),this.popup.add(this.livesContent),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)},n.createTextContent=function(){this.textBlock=this.scene.make.image({key:HT,frame:ZT.LIVES_TIME_BLOCK}),this.popup.add(this.textBlock),this.textBlock.setWorldSize(227,40),Phaser.Display.Align.In.Center(this.textBlock,this.backgroundContent,0,80),this.textContent=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.popup.add(this.textContent),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2),this.textContent2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textContent2.setTint(15651762),this.textContent2.setVisible(!1),this.popup.add(this.textContent2),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2)},n.startIntervalTimer=function(){var e=this;this.intervalTimer=setInterval((function(){e.updateIntervalTimer()}),1e3)},n.updateIntervalTimer=function(){var e,t,n=60*WT.bonusDurationMins*1e3,i=this.scene.storage.getState(),a=Zf(i),s=Vf(i),r=Yf(i),o=(new Date).getTime();o-r<n&&(s=r);var c=(0,Oe.ne)(n-(o-s)),l=Ke()(e="0"+c.minutes).call(e,-2),h=Ke()(t="0"+c.seconds).call(t,-2);this.setTextContent(this.scene.lang.Text.Next_life+": "+l+":"+h);var u=this.scene.world.getPixelRatio();a>0?this.textTitle.setFrame(ZT.TEXT_KEEP_PLAYING):this.textTitle.setFrame(ZT.TEXT_OUT_OF_LIVE);var d=this.textTitle,p=d.width,g=d.height;this.textTitle.setWorldSize(p/u,g/u),parseInt(this.livesContent.text)!=a&&(this.livesContent.setText(""+a),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)),a===WT.livesCapacity?(this.setTextContent(this.scene.lang.Text.FULL),this.refillLivesButton.setVisible(!1)):(this.refillLivesButton.setVisible(!0),this.refillLivesButton.runHeartBeatAnimation())},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setTextContent=function(e){this.textContent.setText(e),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2);var t=this.scene.facebook.getLocale();"id"==t&&this.textContent.setFontSize(this.scene.fontSize(35)),"ar"==t&&(this.textContent2.setText(e),this.textContent2.setVisible(!0),this.textContent.setVisible(!1),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2))},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-30,290,323),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-30)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.textTitle=this.scene.make.image({key:HT,frame:ZT.TEXT_OUT_OF_LIVE});var t=this.textTitle,n=t.width,i=t.height;this.textTitle.setWorldSize(n/e,i/e),this.buttonClose=new ts.Z(this.scene,HT,ZT.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.handleClose,this.title.add([this.textTitle,this.buttonClose]),this.popup.add([this.title]),Phaser.Display.Align.In.Center(this.textTitle,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createButtons=function(){this.createRefillLivesButton()},n.createRefillLivesButton=function(){this.refillLivesButton=new FT(this.scene),this.popup.add(this.refillLivesButton),this.refillLivesButton.onClick=this.handleShowRewardedVideoAd,Phaser.Display.Align.In.Center(this.refillLivesButton,this.popup,0,85)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onComplete:function(){var e=n.getData(["onClose"])[0];e&&e()}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),KT=zT,jT=Qa.Z.DEFAULT,XT=jT.KEY,JT=jT.FRAME,qT=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBackground=function(){this.background=this.scene.make.image({key:XT,frame:JT.FOOTER,origin:{x:.5,y:1}}),this.background.setWorldSize(375,85),this.add(this.background)},t}(Phaser.GameObjects.Container),QT=qT,$T=Qa.Z.DEFAULT,ey=$T.KEY,ty=$T.FRAME,ny=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,ey,ty.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),iy=ny,ay=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaf=void 0,n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createLeaf=function(){this.leaf=new iy(this.scene),this.add(this.leaf),Phaser.Display.Align.In.Center(this.leaf,this,0,this.leaf.displayHeight/2)},t}(Phaser.GameObjects.Container),sy=ay,ry=Qa.Z.DEFAULT,oy=ry.KEY,cy=ry.FRAME,ly=GameCore.Configs.Match,hy=function(e){function t(t){var n;return(n=e.call(this,t,oy,cy.BUTTON_MINOR)||this).suggestDailyMode=void 0,n.button.setWorldSize(62,53),n.setName("DailyChallenge"),n.createIcon(),n.createSuggestDailyMode(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:oy,frame:cy.ICON_DAILY});e.setWorldSize(35,35),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2.5)},n.createSuggestDailyMode=function(){this.suggestDailyMode=this.scene.make.image({key:oy,frame:cy.ICON_DOT_RED}),this.suggestDailyMode.setWorldSize(17,17),this.suggestDailyMode.setVisible(!1),this.add(this.suggestDailyMode),Phaser.Display.Align.In.Center(this.suggestDailyMode,this,28,-25)},n.checkSuggestDailyMode=function(){var e=window.game.player.getPlayer().playerId,t=ql(ly.JourneyMatchStore+"-"+e)||{},n=Object(t).updateAt||0;(0,Oe.Gm)(n)?this.suggestDailyMode.setVisible(!1):this.suggestDailyMode.setVisible(!0)},t}(ts.Z),uy=hy,dy=Qa.Z.DEFAULT,py=dy.KEY,gy=dy.FRAME,fy=function(e){function t(t){var n;return(n=e.call(this,t,py,gy.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,54),n.setName("Journey"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:py,frame:gy.ICON_JOURNEY}),this.icon.setWorldSize(35,29),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:py,frame:gy.TEXT_JOURNEY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),my=fy,Ey=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).logo=void 0,a.drawLogo(),t.add.existing((0,Va.Z)(a)),a}return(0,o.Z)(t,e),t.prototype.drawLogo=function(){var e=this;this.logo=this.scene.add.spine(0,0,Nu.LOGO.KEY,Nu.LOGO.ANIMATIONS.START_GROW),this.add(this.logo),this.logo.on("complete",(function(t){t.animation.name===Nu.LOGO.ANIMATIONS.START_GROW&&e.logo.play(Nu.LOGO.ANIMATIONS.IDLE_GROW,!0)}))},t}(Phaser.GameObjects.Container),vy=Ey,Sy=Qa.Z.DEFAULT,Ay=Sy.KEY,Ty=Sy.FRAME,yy=function(e){function t(t){var n;return(n=e.call(this,t,Ay,Ty.BUTTON_GREEN_LARGE)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,70),n.setName("PlaySingle"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Ay,frame:Ty.ICON_PLAY_GREEN}),this.icon.setWorldSize(31,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Ay,frame:Ty.TEXT_SINGLE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),Iy=yy,Cy=Qa.Z.DEFAULT,Oy=Cy.KEY,by=Cy.FRAME,Py=function(e){function t(t){var n;return(n=e.call(this,t,Oy,by.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Oy,frame:by.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1.5)},t}(ts.Z),Ry=Py,wy=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.journeyButton=void 0,n.dailyChallengeButton=void 0,n.settingButton=void 0,n.playSingleButtonAnimation=void 0,n.createLogo(),n.createPlaySingleButton(),n.createJourneyButton(),n.createDailyChallengeButton(),n.createSettingButton(),n.alignButton(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new vy(this.scene,0,0),this.logo.setDepth(qa.Z.ON_TOP),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-140)},n.createPlaySingleButton=function(){this.playSingleButton=new Iy(this.scene),this.add(this.playSingleButton)},n.runPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation.play()},n.createPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation=new PT({targets:[this.playSingleButton],props:{scale:{from:1,to:1.05}}})},n.createJourneyButton=function(){this.journeyButton=new my(this.scene),this.add(this.journeyButton)},n.createDailyChallengeButton=function(){this.dailyChallengeButton=new uy(this.scene),this.add(this.dailyChallengeButton)},n.createSettingButton=function(){this.settingButton=new Ry(this.scene),this.add(this.settingButton)},n.alignButton=function(){Phaser.Display.Align.In.Center(this.playSingleButton,this,0,44),Phaser.Display.Align.In.Center(this.journeyButton,this,0,118),Phaser.Display.Align.In.Center(this.dailyChallengeButton,this,-60,192),Phaser.Display.Align.In.Center(this.settingButton,this,60,192)},t}(Phaser.GameObjects.Container),xy=wy,_y=function(){function e(e){this.scene=void 0,this.main=void 0,this.header=void 0,this.footer=void 0,this.group=void 0,this.scene=e,this.createGroup(),this.createObjects()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},t.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},t.createHeader=function(){this.header=new sy(this.scene),this.group.add(this.header)},t.createMain=function(){this.main=new xy(this.scene),this.group.add(this.main)},t.createFooter=function(){this.footer=new QT(this.scene),this.group.add(this.footer)},e}(),ky=_y,Ly=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),My=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ly),Dy=My,Ny=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone;this.objects.main.logo.setY(-150),this.objects.main.setScale(.95),this.objects.footer.setVisible(!1),Phaser.Display.Align.In.TopCenter(this.objects.header,t),Phaser.Display.Align.In.Center(this.objects.main,t),Phaser.Display.Align.In.BottomCenter(this.objects.footer,t)}},t}(Dy),By=Ny,Gy=is.STATUS,Fy=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new ky(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new By(this.scene):this.layout=new Dy(this.scene),this.layout.setUIObjects(this.objects)},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.layout.alignUI,this)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(Gy.READY)},n.start=function(){this.isRunning()||this.setState(Gy.RUNNING)},n.stop=function(){this.isRunning()&&this.setState(Gy.STOPPED)},n.initUILogic=function(){GameCore.Utils.Valid.isDebugger()},t}(os),Uy=Fy,Hy=[{key:"daily-level-0",mapJson:"./assets/json/daily-levels/level-0.json"}],Zy=1;Zy<=57;Zy++)Hy.push({key:"daily-level-"+Zy,mapJson:"./assets/json/daily-levels/level-"+Zy+".json"});var Yy=function(){var e=new Date("01/01/2022"),t=(new Date).getTime()-e.getTime();return Math.floor(t/864e5)%Hy.length},Vy=function(){var e=Yy();return Hy[e]},Wy=Qa.Z.DEFAULT,zy=Wy.KEY,Ky=Wy.FRAME,jy=function(e){function t(t){var n;return(n=e.call(this,t,zy,Ky.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:zy,frame:Ky.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:zy,frame:Ky.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),Xy=jy,Jy="score",qy="collect",Qy=Qa.Z.DEFAULT,$y=Qy.KEY,eI=Qy.FRAME,tI=Qa.Z.GAMEPLAY,nI=tI.KEY,iI=tI.FRAME,aI=Qa.Z.GAMEPLAY_32,sI=aI.KEY,rI=aI.FRAME,oI=GameCore.Configs,cI=oI.Network,lI=oI.Board,hI=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.panelCollection=void 0,s.tileCollection=void 0,s.textScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTextScore(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.showLoadingScreen(),this.loadLevelConfig();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=Vy(),t=e.key,n=e.mapJson;if(this.scene.cache.tilemap.exists(t))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(t,n),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(a){(0,i.tO)(a)}},n.handleLoadCurrentMapComplete=function(){this.startGame(),this.hideLoadingScreen()},n.updateContent=function(){this.resetTarget(),this.updateTargetType(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.scene.storage.dispatch(Dh());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:cI.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:$y,frame:eI.TEXT_DAILY_CHALLENGE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,$y,eI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-26),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:ns.Z.NUMBER_DARK.KEY,size:this.scene.fontSize(54),origin:{x:.5,y:.5},text:"0"}),this.popup.add(this.textScore)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio();this.tileCollection=this.scene.make.image({key:$y,frame:eI.TEXT_COLLECT});var t=this.tileCollection,n=t.width,i=t.height;this.tileCollection.setWorldSize(n/e,i/e),this.panelCollection=this.scene.make.image({key:$y,frame:eI.WOOD_PANEL}),this.panelCollection.setWorldSize(200,37),this.popup.add([this.tileCollection,this.panelCollection]),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),Phaser.Display.Align.In.Center(this.panelCollection,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=Vy().key,i=this.scene.make.tilemap({key:n}).properties;if(i&&(0,Wf.isArray)(i)&&!(i.length<2))for(var a=i[0].value,s=Bf()(e=Bf()(t=Bf()(a).call(a,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),r=JSON.parse(s),o=B()(r),c=this.calcPosition(o.length),l=0;l<o.length;l++){var h=o[l],u=LE[h],d=r[h],p=this.targetData[l];p||(p=this.spawnTargetItem(u,d));var g=p,f=g.container,m=g.text,E=g.gem;f.setVisible(!0),m.setText("x"+d),E.setFrame(u),this.targetData.push(p),Phaser.Display.Align.In.Center(f,this.popup,c[l],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:sI,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:nI,frame:iI.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<lI.rows;e++){this.boardCellData[e]=[];for(var t=0;t<lI.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=rI.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.updateTargetType=function(){var e=Vy().key,t=this.scene.make.tilemap({key:e}).properties;if(t&&(0,Wf.isArray)(t)&&!(t.length<2)){var n=t[0].value,i=t[1].value,a=this.scene.world.getPixelRatio();if(i===Jy){this.panelCollection.setVisible(!1),this.tileCollection.setFrame(eI.TEXT_TARGET_SCORE);var s=this.tileCollection,r=s.width,o=s.height;return this.tileCollection.setWorldSize(r/a,o/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-150),this.textScore.setText(""+n).setVisible(!0),void Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-125)}this.panelCollection.setVisible(!0),this.tileCollection.setFrame(eI.TEXT_COLLECT);var c=this.tileCollection,l=c.width,h=c.height;this.tileCollection.setWorldSize(l/a,h/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),this.textScore.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<lI.rows;e++)for(var t=0;t<lI.cols;t++){this.boardCellData[e][t].setFrame(rI.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=id()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=qE(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=Vy().key,t=this.scene.make.tilemap({key:e}).layers;if((0,Wf.isArray)(t)){var n=t[0].data;if((0,Wf.isArray)(n))for(var i=0;i<n.length;i++)for(var a=n[i],s=0;s<a.length;s++){var r=a[s];if(!(r.index<0)){var o=LE[r.index-1];this.boardCellData[i][s].setFrame(o)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:sI,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new Xy(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState();fl(t)>Uf.length||(e.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Hn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.scene.storage.dispatch(Jh()),e.scene.analytics.event(Gt._.DAILY_CHALLENGE_BEGIN))}))},n.getLevelName=function(e){var t;return"journey_"+Ja()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),uI=Qa.Z.DEFAULT,dI=uI.KEY,pI=uI.FRAME,gI=Qa.Z.GAMEPLAY,fI=gI.KEY,mI=gI.FRAME,EI=Qa.Z.GAMEPLAY_32,vI=EI.KEY,SI=EI.FRAME,AI=GameCore.Configs,TI=AI.Network,yI=AI.Board,II=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=fl(e),n=Uf[t];n||(n=Uf[Uf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:TI.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:dI,frame:pI.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,dI,pI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:dI,frame:pI.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:dI,frame:pI.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=fl(n),a=Uf[i];a||(a=Uf[Uf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Wf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=Bf()(e=Bf()(t=Bf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=LE[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,E=m.container,v=m.text,S=m.gem;E.setVisible(!0),v.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(E,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:vI,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:fI,frame:mI.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<yI.rows;e++){this.boardCellData[e]=[];for(var t=0;t<yI.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=SI.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=pl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<yI.rows;e++)for(var t=0;t<yI.cols;t++){this.boardCellData[e][t].setFrame(SI.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=id()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=qE(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=fl(e),n=Uf[t];n||(n=Uf[Uf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,Wf.isArray)(i)){var a=i[0].data;if((0,Wf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=LE[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:vI,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new Xy(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();Zf(t)<1?this.scene.screen.open($a.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=fl(t);n>Uf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Jh()))})))},n.getLevelName=function(e){var t;return"journey_"+Ja()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),CI=Qa.Z.DEFAULT,OI=CI.KEY,bI=CI.FRAME,PI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&mg(199),s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createContentBackground(),s.createTitle(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){var e=this.scene.make.image({key:OI,frame:bI.POPUP_CONTENT_BACKGROUND});e.setWorldSize(260,145),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-4)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,286,226),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:OI,frame:bI.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ts.Z(this.scene,OI,bI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-18)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),gg()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,0)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:OI,frame:bI.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new cS(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:OI,frame:bI.ICON_SOUND});t.setWorldSize(40,35),this.settingSound=new cS(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),RI=PI,wI=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).layoutManager=void 0,n.run=function(){n.initManager(),n.checkAndAddShortcut(),n.layoutManager.objects.main.dailyChallengeButton.checkSuggestDailyMode()},n.onCreate=function(){var e=n.storage.getState(),t=Lc(e);null===t?n.storage.dispatch(Kh(!1)):!1===t&&n.showMiniJourneyScreen(),n.run()},n.onResume=function(){n.run()},n.onWake=function(){n.run();var e=n.storage.getState();Lc(e)||n.showMiniJourneyScreen()},n.clickPlayWithFriend=function(){n.storage.dispatch(Qh())},n.clickPlaySolo=function(){n.storage.dispatch(Xh())},n.clickJourney=function(){n.storage.dispatch(Jh())},n.clickLevelScene=function(){n.scene.switch(Ua.Co.LEVEL_SCENE)},n.clickLeaderBoard=function(){n.screen.open($a.o4.LEADER_BOARD_SCREEN)},n.clickJourney1=function(){n.scene.switch(Ua.Co.LEVEL_SCENE)},n.clickSetting=function(){n.screen.open($a.o4.SETTINGS_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.showDailyChallengeScreen=function(){this.storage.dispatch(Kh(!0)),this.screen.open($a.o4.DAILY_CHALLENGE_SCREEN)},n.checkAndAddShortcut=function(){var e=this.storage.getState();Ma(e)===Ra&&this.facebook.attemptToAddShortcut()},n.preload=function(){this.events.on("wake",this.onWake),this.events.on("resume",this.onResume),this.events.on("create",this.onCreate)},n.create=function(){e.prototype.create.call(this),this.createBackground(ba.Z.BACKGROUND.KEY),this.createManager(),this.createScreens(),this.listenEvents()},n.createBg=function(){var e=this.make.image({key:ba.Z.BACKGROUND.KEY}),t=this.make.image({key:ba.Z.BACKGROUND.KEY});t.setFlipY(!0),Phaser.Display.Align.In.Center(e,this.gameZone),Phaser.Display.Align.In.Center(t,this.gameZone)},n.createManager=function(){this.layoutManager=new Uy(this)},n.initManager=function(){this.layoutManager.init()},n.listenEvents=function(){var e=this.layoutManager.objects.main;e.setDepth(qa.Z.LOGO),e.playSingleButton.onClick=this.clickPlaySolo,e.journeyButton.onClick=this.clickLevelScene,e.dailyChallengeButton.onClick=this.showDailyChallengeScreen.bind(this),e.settingButton.onClick=this.clickSetting},n.createScreens=function(){this.createSettingsScreen(),this.createLeaderBoardScreen(),this.createDailyChallengeScreen(),this.createMiniJourneyScreen(),this.createClaimHeartScreen()},n.createSettingsScreen=function(){this.screen.add($a.o4.SETTINGS_SCREEN,RI)},n.createLeaderBoardScreen=function(){this.screen.add($a.o4.LEADER_BOARD_SCREEN,Mu)},n.createDailyChallengeScreen=function(){this.screen.add($a.o4.DAILY_CHALLENGE_SCREEN,hI)},n.createMiniJourneyScreen=function(){this.screen.add($a.o4.MINI_JOURNEY_SCREEN,II)},n.createClaimHeartScreen=function(){this.screen.add($a.o4.CLAIM_HEART_SCREEN,KT)},n.showMiniJourneyScreen=function(){this.storage.dispatch(Kh(!0)),this.screen.open($a.o4.MINI_JOURNEY_SCREEN)},t}(Du.Z);var xI=wI,_I=Qa.Z.GAMEPLAY_32,kI=_I.KEY,LI=_I.FRAME,MI=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:kI,frame:LI.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.add(this.imageCell),this.scale0=this.imageCell.scale},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:kI,frame:LI.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:kI,frame:LI.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:kI,frame:LI.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:kI,frame:LI.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){var e=this.imageCell.frame.name+"_light";this.imageHighlight.setFrame(e),this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.scale=1,this.alpha=1,this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Xu(this.v0,this.alpha0,t),i=Ju(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.setScaleImageCell=function(e){this.imageCell.setScale(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),DI=MI,NI=Qa.Z.GAMEPLAY_32,BI=NI.KEY,GI=NI.FRAME,FI=GameCore.Configs.Board,UI=FI.cols,HI=FI.rows,ZI=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.type=void 0,s.direction=void 0,s.isReverse=!1,s.data=[],s.matrixData=void 0,s.texture=void 0,s.frame=void 0,s.maxHeight=void 0,s.cellItems=[],s.originalData=void 0,s.isSetDrag=!1,s.isCreateCell=!1,s.wrap=void 0,s.wrapPiece=void 0,s.isDragEnd=!1,s.isActive=!0,s.isVisible=!0,s.pointerY=void 0,s.parentHeight=void 0,s.index=void 0,s.props=void 0,s.cells=[],s.parent=void 0,s.moveTopNumber=30,s.backupPx=void 0,s.backupPy=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.distancePY=void 0,s.isCanMove=void 0,s.correctAlpha=1,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.parentHeight=a.parentHeight||0,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,Va.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:BI,frame:GI.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.updateDataPiece=function(e){this.data=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive().input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(qa.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.audio.playSound(es.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(zu()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.getPX=function(e,t){var n=this.scene.gameZone.width,i=this.getContainerSize().width;return e<i?i/2:e>n-i?n-2*i:t},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(Vu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=UI,r=HI,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=re()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return"continue";for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=re()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return"continue";for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[E],t=re()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return"continue";var s=t[0];a.checkItemInArray(o,s)||o.push(s)},E=0;E<n.length;E++)m();for(var v=function(){var e,t=o[S],n=t.x,i=t.y,c=re()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return"continue";var l=a.getFrameLight(c[0].cell.getFrameImageCell());c[0].cell.setFrameImageCell(l)},S=0;S<o.length;S++)v()},n.getFrameLight=function(e){var t=e;switch(e){case GI.GEM:t=GI.GEM_LIGHT;break;case GI.GEM_DIAMOND_10:t=GI.GEM_DIAMOND_10_LIGHT;break;case GI.GEM_DIAMOND_11:t=GI.GEM_DIAMOND_11_LIGHT;break;case GI.GEM_DIAMOND_12:t=GI.GEM_DIAMOND_12_LIGHT;break;case GI.GEM_DIAMOND_13:t=GI.GEM_DIAMOND_13_LIGHT;break;case GI.GEM_DIAMOND_14:t=GI.GEM_DIAMOND_14_LIGHT;break;case GI.GEM_DIAMOND_15:t=GI.GEM_DIAMOND_15_LIGHT}return t},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++){var t=this.cellItems[e].cell.getFrameImageCell().replace("_light","");this.cellItems[e].cell.setFrameImageCell(t)}},n.checkItemInArray=function(e,t){var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(qa.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(es.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(qa.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.getPositionTopLeftInBoard(),n=this.scene.layoutManager.objects.main;if(t){if(this.scene.targetMissionManager.getTargetType()===Jy){var i=this.calcScore();this.scene.handleUpdateScore(i||0),this.scene.handleAddScoreAnim(i||0)}var a=t.x,s=t.y,r=n.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,E=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),n.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),n.board.handleMove(E,e.onBoardHandleMoveCompleted.bind(e))}})}else n.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.nextStep()},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(WE(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this;this.scene.audio.playSound(es.Z.PIECE_INVALID_MOVE),this.scene.layoutManager.objects.main.board.handleRemoveHighlight(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:"Sine.easeInOut",delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}}),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.handleStep()},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()){if(1==this.index&&0==this.scene.tutorialManager.step)return t;if(!this.scene.tutorialManager.validTargetPosition(n))return t}for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=HI||s>=UI||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c,frame:this.data[i][a].texture})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<HI;p++)for(var g=0;g<UI;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,E=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&E-h/2<=l&&E+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>UI-1||d<0||d>HI-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?GI.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell?this.updateCells():this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Linear,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Linear})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture&&"x"!==this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new DI(this.scene,r);o.setFrameImageCell(this.data[a][s].texture),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.updateCells=function(){for(var e=0;e<this.data.length;e++)for(var t=0;t<this.data[e].length;t++)if(this.data[e][t].texture&&"x"!==this.data[e][t].texture){var n=this.cells[e][t];n.setFrameImageCell(this.data[e][t].texture),this.cells[e][t]=n}},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive(),this.data=t.buildData(this.matrixData)},n.getScore=function(){if(!this.matrixData)return 0;for(var e=0,t=0;t<this.matrixData.length;t++)for(var n=0;n<this.matrixData[0].length;n++)1===this.matrixData[t][n]&&e++;return e},t}(Phaser.GameObjects.Container),YI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case Xf:n?i=jm:(i=Km,e===fm&&(i=Xm),e===mm&&(i=Jm));break;case Jf:n?i=Um:(i=Fm,e===fm&&(i=Hm),e===mm&&(i=Zm));break;case qf:if(n){i=Nm;break}i=Dm,e===fm&&(i=Bm),e===mm&&(i=Gm);break;case Qf:n?i=Vm:(i=Ym,e===fm&&(i=Wm),e===mm&&(i=zm))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(ZI),VI=YI,WI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case Am:n=t===Kf?iE:aE;break;case Sm:n=t===Kf?tE:nE;break;case Em:n=t===Kf?qm:Qm;break;case vm:n=t===Kf?$m:eE}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(ZI),zI=WI,KI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Tm:t=sE;break;case ym:t=rE;break;case Im:t=oE}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(ZI),jI=KI,XI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Xf:t=dE;break;case Jf:t=pE;break;case qf:t=gE;break;case Qf:t=fE;break;default:t=dE}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(ZI),JI=XI,qI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case Xf:t=TE;break;case Jf:t=yE;break;default:t=TE}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case Xf:t=IE;break;case Jf:t=CE;break;default:t=IE}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case Xf:t=OE;break;case Jf:t=bE;break;default:t=OE}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case Xf:t=PE;break;case Jf:t=RE;break;default:t=PE}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case Rm:i=t.getDataByDirectionCross2(n);break;case wm:i=t.getDataByDirectionCross3(n);break;case xm:i=t.getDataByDirectionCross4(n);break;case _m:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(ZI),QI=qI,$I=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case $f:t=cE;break;case em:t=lE;break;case nm:t=uE;break;case tm:t=hE;break;default:t=cE}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(ZI),eC=$I,tC=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return AE},t.getData=function(){return t.buildData(t.getMatrixData())},t}(ZI),nC=tC,iC=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Xf:t=mE;break;case Jf:t=EE;break;case qf:t=vE;break;case Qf:t=SE;break;default:t=mE}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(ZI),aC=iC,sC=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Xf:t=wE;break;case Jf:t=xE;break;case qf:t=_E;break;case Qf:t=kE;break;default:t=wE}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(ZI),rC=sC,oC=function(){function e(e){this.scene=void 0,this.currentLevel=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){var e=this.scene.storage.getState(),t=fl(e)||1;this.currentLevel=t},t.setLevel=function(e){this.currentLevel=e},t.getLevel=function(){return this.currentLevel},t.getLevelConfig=function(){var e=this.scene.storage.getState();return ml(e)?Vy():Uf[this.currentLevel]},t.getNextLevel=function(){return this.currentLevel+1},t.getNextLevelConfig=function(){return Uf[this.currentLevel+1]},t.increaseLevel=function(){this.currentLevel++},e}(),cC=function(){function e(e){this.scene=void 0,this.map=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.initMap()},t.initMap=function(){var e=this.scene.levelManager.getLevelConfig();this.map=this.scene.make.tilemap({key:e.key})},t.getTileMap=function(){return ce()(this)},t.reloadMap=function(){var e,t=this.scene.storage.getState();0===fl(t)&&this.scene.levelManager.setLevel(1);var n=this.scene.levelManager.getLevelConfig();null==(e=ce()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:n.key})},e}(),lC=function(){function e(){this.targetType=void 0,this.targetValue=void 0,this.init()}var t=e.prototype;return t.init=function(){},t.setTargetType=function(e){this.targetType=e},t.setTargetValue=function(e){this.targetValue=e},t.getTargetType=function(){return this.targetType},t.getTargetValue=function(){return this.targetValue},e}(),hC=Qa.Z.GAMEPLAY_32.KEY,uC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textWellDone=void 0,s.listTargetFrame=[],s.listAnim=[],s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.runPopupEntrancesAnimation(0,300)},s.close=function(){e.prototype.close.call((0,Va.Z)(s))},s.scene=t,s.setDepth($a.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textWellDone="ar"==e?new Rv(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new Pv(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(80)}),this.add(this.textWellDone),Phaser.Display.Align.In.Center(this.textWellDone,this)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=0;t<3;t++){var n=this.scene.make.image({key:hC});n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0),this.listTargetFrame.push(n)}this.add(this.listTargetFrame)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length)for(var t=0;t<3;t++){var n=this.listTargetFrame[t];n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0)}},n.createAnimTargetItems=function(){var e=[100,500,700],t=[-120,0,120],n=[-100,-150,-100],i=[.7,1,.7];if(this.scene.targetMissionManager.getTargetType()!=Jy)for(var a=0;a<3;a++){this.listTargetFrame[a].setAlpha(0).setVisible(!0);var s=this.scene.add.tween({targets:this.listTargetFrame[a],delay:e[a],x:{from:0,to:t[a]},y:{from:300,to:n[a]},alpha:{from:0,to:1},scale:{from:0,to:i[a]},rotation:{from:-180,to:0},duration:500});this.listAnim.push(s)}},n.playAnimTargetItems=function(){if(this.scene.targetMissionManager.getTargetType()!=Jy)for(var e=0;e<3;e++){this.listTargetFrame[e].setAlpha(0).setVisible(!0),this.listAnim[e].play()}},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.listTargetFrame.forEach((function(e){e.setAlpha(0)})),this.textWellDone.restart(),this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textWellDone.start(),0===n.listTargetFrame.length?(n.createTargetItems(),n.createAnimTargetItems()):(n.updateTargetItems(),n.playAnimTargetItems()),n.handleDelegate(),n.runAnim()}})),this.background.setAlpha(0),this.tweenBackground.play()},t}(GameCore.Screen),dC=Qa.Z.DEFAULT,pC=dC.KEY,gC=dC.FRAME,fC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textNextLevel=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.checkFinishAllLevel=function(){var e=s.scene.storage.getState();return fl(e)>=Uf.length},s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1))},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:pC,frame:gC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:pC,frame:gC.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,pC,gC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,150,-15),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-60)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.COMPLETED,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,-20)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Qa.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Qa.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:pC,frame:gC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ts.Z(this.scene,pC,gC.BUTTON_MINOR,70,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-88,55)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:pC,frame:gC.TEXT_NEXT_LEVEL}),this.checkFinishAllLevel()&&this.textNextLevel.setFrame(gC.TEXT_START_OVER),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new ts.Z(this.scene,pC,gC.BUTTON_GREEN,172,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,37,55)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(Zf(t)<1)return this.setVisible(!1),void this.scene.screen.open($a.o4.CLAIM_HEART_SCREEN);fl(t)>=Uf.length-1?this.scene.handleClickStartOver():(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.startGame()})))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),mC=Qa.Z.DEFAULT,EC=mC.KEY,vC=mC.FRAME,SC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.textNextLevel=void 0,s.livesTimer=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();e<Uf.length-1&&(e-=1),e>Uf.length-1&&(e=Uf.length-1),this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1)),this.updateTextNextLevel()},n.updateTextNextLevel=function(){var e=this.scene.levelManager.getLevel(),t=this.scene.world.getPixelRatio();if(e>Uf.length-1)return this.textNextLevel.setFrame(vC.TEXT_START_OVER),void this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t);this.textNextLevel.setFrame(vC.TEXT_NEXT_LEVEL),this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,234),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:EC,frame:vC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:EC,frame:vC.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,EC,vC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-23)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(44),text:this.scene.lang.Text.Completed,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,3)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Qa.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Qa.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:EC,frame:vC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ts.Z(this.scene,EC,vC.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:EC,frame:vC.TEXT_NEXT_LEVEL}),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new ts.Z(this.scene,EC,vC.BUTTON_GREEN,178,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,33,52)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(Zf(t)<1)return this.runCloseAnimation(),void this.scene.screen.open($a.o4.CLAIM_HEART_SCREEN,{onClose:function(){e.scene.screen.open($a.o4.MISSION_COLLECTION_COMPLETE_SCREEN)}});if(fl(t)>=Uf.length-1)this.scene.handleClickStartOver();else{this.runCloseAnimation();var n=this.scene.layoutManager.objects,i=n.header,a=n.main;this.scene.time.delayedCall(300,(function(){e.scene.analytics.levelStart(e.scene.levelManager.getLevel(),void 0,e.scene.getLevelName());var t=a.board.fadeOut();t?t.on("complete",(function(){i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame()})):(i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame())}))}},n.createLivesTimer=function(){this.livesTimer=new LT(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.TopCenter(this.livesTimer,this,0,-62)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),AC=Qa.Z.GAMEPLAY,TC=(AC.KEY,AC.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,Va.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,Va.Z)(s))},s.scene=t,s.setDepth($a.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new Rv(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new Pv(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen)),yC=Qa.Z.DEFAULT,IC=yC.KEY,CC=yC.FRAME,OC=function(e){function t(t){var n;return(n=e.call(this,t,IC,CC.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(178,54),n.setName("Retry"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:IC,frame:CC.ICON_RETRY}),this.icon.setWorldSize(33,35),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:IC,frame:CC.TEXT_RETRY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),bC=OC,PC=Qa.Z.DEFAULT,RC=PC.KEY,wC=PC.FRAME,xC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonRetry=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textLevelFail=void 0,s.buttonClose=void 0,s.livesTimer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.scene.enableInput(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,234),this.add(this.popup),this.popup.setFrameTop(wC.POPUP_TOP_DARK),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:RC,frame:wC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:RC,frame:wC.TEXT_LOSE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,RC,wC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevelFail()},n.createTextLevelFail=function(){var e=this.scene.world.getPixelRatio();this.textLevelFail=this.scene.make.image({key:RC,frame:wC.TEXT_LEVEL_FAIL}),this.textLevelFail.setWorldSize(this.textLevelFail.width/e,this.textLevelFail.height/e),this.popup.add(this.textLevelFail),Phaser.Display.Align.In.Center(this.textLevelFail,this.popup,0,-10)},n.createButtons=function(){this.createButtonBack(),this.createButtonRetry()},n.createButtonBack=function(){var e=this.scene.make.image({key:RC,frame:wC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new ts.Z(this.scene,RC,wC.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.createButtonRetry=function(){this.buttonRetry=new bC(this.scene),this.popup.add(this.buttonRetry),this.buttonRetry.onClick=this.clickButtonRetry.bind(this),Phaser.Display.Align.In.Center(this.buttonRetry,this.popup,33,52)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(Ua.Co.LEVEL_SCENE)}))},n.clickButtonRetry=function(){var e=this,t=this.scene.storage.getState();Zf(t)<1?this.scene.screen.open($a.o4.CLAIM_HEART_SCREEN,{currentScreen:this}):(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.handleRetryLevel()})))},n.createLivesTimer=function(){this.livesTimer=new LT(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.TopCenter(this.livesTimer,this,0,-62)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.livesTimer.startIntervalTimer(),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.livesTimer.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),_C=Qa.Z.DEFAULT,kC=_C.KEY,LC=_C.FRAME,MC=function(e){function t(t){var n;return(n=e.call(this,t,kC,LC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:kC,frame:LC.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ts.Z),DC=MC,NC=Qa.Z.DEFAULT,BC=NC.KEY,GC=NC.FRAME,FC=function(e){function t(t){var n;return(n=e.call(this,t,BC,GC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:BC,frame:GC.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(ts.Z),UC=FC,HC=Qa.Z.DEFAULT,ZC=HC.KEY,YC=HC.FRAME,VC=function(e){function t(t){var n;return(n=e.call(this,t,ZC,YC.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:ZC,frame:YC.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:ZC,frame:YC.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(ts.Z),WC=VC,zC=Qa.Z.DEFAULT,KC=zC.KEY,jC=zC.FRAME,XC=function(e){function t(t){var n;return(n=e.call(this,t,KC,jC.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:KC,frame:jC.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:KC,frame:jC.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(ts.Z),JC=XC,qC=Qa.Z.DEFAULT,QC=qC.KEY,$C=qC.FRAME,eO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.settingMusic=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonReplay=void 0,s.buttonPlayWithFriend=void 0,s.buttonHome=void 0,s.buttonJourney=void 0,s.debuggerCurrentLevelText=void 0,s.debuggerCurrentLevel=0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&mg(199),s.scene.player.setSetting("vibrate",e)},s.clickReplay=function(){var e=s.scene.storage.getState();if(Zf(e)<1)return s.setVisible(!1),void s.scene.screen.open($a.o4.CLAIM_HEART_SCREEN);s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.handleRetryLevel();case 2:case"end":return e.stop()}}),e)}))))},s.clickButtonPlayWithFriends=function(){s.scene.storage.dispatch(Qh()),s.scene.screen.close(s.name)},s.clickButtonHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.scene.switch(Ua.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},s.clickButtonLeaderboard=function(){s.scene.screen.open($a.o4.LEADER_BOARD_SCREEN)},s.clickButtonShare=function(){s.scene.storage.dispatch(Dl())},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createSwitchButtons(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.createDebuggerInputLevel(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.1),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:QC,frame:$C.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:QC,frame:$C.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ts.Z(this.scene,QC,$C.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new JC(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new WC(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new DC(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new UC(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Ua.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),gg()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:QC,frame:$C.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new cS(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:QC,frame:$C.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new cS(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:QC,frame:$C.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new cS(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.createDebuggerInputLevel=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){for(var t=this.scene.make.container({}),n=function(n){var i=e.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:e.scene.fontSize(34),origin:{x:.5,y:.5},text:""+n});t.add(i),i.setInteractive(),i.on("pointerdown",(function(){e.debuggerHandleClick(n)})),Phaser.Display.Align.In.Center(i,t,20*n)},i=0;i<10;i++)n(i);this.add(t),Phaser.Display.Align.In.Center(t,this.popup,-100,190),this.debuggerCurrentLevelText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Level 0"}),this.add(this.debuggerCurrentLevelText),Phaser.Display.Align.In.Center(this.debuggerCurrentLevelText,this.popup,0,210);var a=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Go"});this.add(a),a.setInteractive(),a.on("pointerdown",(function(){e.close(),e.scene.time.delayedCall(300,(function(){e.scene.levelManager.setLevel(e.debuggerCurrentLevel),e.scene.startGame()}))})),Phaser.Display.Align.In.Center(a,this.popup,-70,210);var s=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Clear"});s.setInteractive(),s.on("pointerdown",(function(){e.debuggerCurrentLevel=0,e.debuggerCurrentLevelText.setText("Level "+String(e.debuggerCurrentLevel))})),this.add(s),Phaser.Display.Align.In.Center(s,this.popup,70,210)}},n.debuggerHandleClick=function(e){var t=this.debuggerCurrentLevel+""+e;this.debuggerCurrentLevel=parseInt(t),this.debuggerCurrentLevelText.setText("Level "+String(this.debuggerCurrentLevel))},t}(GameCore.Screen),tO=eO,nO=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidTileMap",i.message=t||"This tile is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,b.Z)(Error)),iO=n(624),aO=n(456),sO=function(){function e(e){this.scene=void 0,this.tweenScaleUp=void 0,this.tweenScaleDown=void 0,this.tweenMoveTo=void 0,this.target=void 0,this.handleOnComplete=void 0,this.playing=void 0,this.path=void 0,this.scene=e,this.path=new Phaser.Curves.Path}var t=e.prototype;return t.runScaleUpAnimation=function(e,t){var n;null==(n=this.tweenScaleUp)||n.remove(),this.tweenScaleUp||(this.tweenScaleUp=new iO.Z({targets:[this.target],delay:e,duration:t,props:{scale:"+=0.05"}})),this.tweenScaleUp.play()},t.runScaleDownAnimation=function(e,t){var n;null==(n=this.tweenScaleDown)||n.remove(),this.tweenScaleDown||(this.tweenScaleDown=new aO.Z({targets:[this.target],delay:e,duration:t,props:{scale:"-=0.15"}})),this.tweenScaleDown.play()},t.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=Math.abs(n-r)/2,l=Math.abs(i-o),h=Phaser.Math.Between(1,2),u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=(c-p*Phaser.Math.Between(c/4,c/3))*h,f=o-d*(l/4);u.push(new Phaser.Math.Vector2(g,f))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var m=new Phaser.Curves.Spline(u),E=this.target.x,v=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=m.getPoint(t);a.target.setPosition(n.x-r-E,n.y-o-v)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},t.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(qa.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.width/2,c=Math.abs(n-s)+o-50,l=Math.abs(i-r),h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=1.5*(c-d*Phaser.Math.Between(c/8,c/7)),g=r-u*(l/4);h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t.setTarget=function(e){this.target=e},(0,V.Z)(e,[{key:"onComplete",set:function(e){this.handleOnComplete=e}},{key:"isPlaying",get:function(){return this.playing}}]),e}(),rO=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=this.scene.gameZone.height/2,l=Math.abs(n-r),h=Math.abs(i-o)+c-50,u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=Phaser.Math.Between(h/18,h/17),f=r-d*(l/4),m=1.5*(h-p*g);u.push(new Phaser.Math.Vector2(f,m))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var E=new Phaser.Curves.Spline(u),v=this.target.x,S=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=E.getPoint(t);a.target.setPosition(n.x-r-v,n.y-o-S)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},n.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(qa.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.height/2,c=Math.abs(n-s),l=Math.abs(i-r)+o-50,h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=s-u*(c/4),g=1.5*(l-d*Phaser.Math.Between(l/18,l/17));h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t}(sO),oO=Qa.Z.DEFAULT,cO=(oO.KEY,oO.FRAME,Qa.Z.GAMEPLAY_32.KEY),lO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.text=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createText()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:cO}),this.imageGem.setWorldSize(35,35),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-10.5)},n.createText=function(){this.text=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(42),origin:{x:.5,y:.5},text:"0"}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,29)},n.updateGem=function(e){this.imageGem.setFrame(e)},n.updateText=function(e){this.text.setText("x"+e)},n.getFrame=function(){return this.imageGem.frame.name},t}(Phaser.GameObjects.Container),hO=Qa.Z.DEFAULT,uO=hO.KEY,dO=hO.FRAME,pO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.listItems=[],s.targetImages=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.listAnimCollectionItem=[],s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.addItem(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.getData(["duration"])[0];this.hideAllCollectionItems(),this.createCollectionItems(),this.alginCollectionItems(),this.runOpenAnimation(),this.scene.time.delayedCall(i,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:uO,frame:dO.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createCollectionItems=function(){for(var e=this.getData(["jsonTarget"])[0],t=B()(e),n=0;n<t.length;n++){var i=t[n],a=this.getCollectionItemFree(n);a.updateGem(i),a.updateText(e[i])}},n.getCollectionItemFree=function(e){var t=this.listItems[e];return t||(t=new lO(this.scene),this.popup.add(t),this.listItems.push(t)),t.setVisible(!0),t},n.alginCollectionItems=function(){var e;this.targetImages=[];for(var t=re()(e=this.listItems).call(e,(function(e){return e.visible})),n=t.length,i=263/(n+1)+5,a=-i*(n-1)/2,s=0;s<n;s++){var r=t[s];Phaser.Display.Align.In.Center(r,this.backgroundContent,a+i*s);var o=r.getFrame(),c=this.scene.make.image({key:Qa.Z.GAMEPLAY_32.KEY,frame:o});c.setWorldSize(22,22),c.setVisible(!1),this.targetImages.push(c),Phaser.Display.Align.In.Center(c,this.backgroundContent,a+i*s+this.scene.gameZone.width/2,this.scene.gameZone.height/2)}},n.hideAllCollectionItems=function(){for(var e=0;e<this.listItems.length;e++){this.listItems[e].setVisible(!1)}},n.moveGemsToCollectItems=function(){var e=this;this.resetPositionTargetImages();for(var t=this.scene.layoutManager.objects,n=t.header,i=t.main,a=n.collectItems,s=a.getTargetKeys(),r=this.scene.gameZone.width/2,o=function(t){var o=s[t],c=a.getPositionCollectionItem(o),l=r+c.x,h=c.y-23;e.scene.world.isLandscape()&&(l=n.collectItems.getWorldPosition().x,h=n.collectItems.getWorldPosition().y+c.y),e.targetImages[t].setAlpha(1),e.targetImages[t].setVisible(!0);var u=e.getFreeAnim(),d=Phaser.Math.Between(500,1e3);u.setTarget(e.targetImages[t]),u.runGemMoveToPosition(0,d,l,h).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.collectItems.showCollectItemByKey(o),e.targetImages[t].setVisible(!1),t==e.targetImages.length-1&&i.board.handleTweenStartMission()}))},c=0;c<s.length;c++)o(c)},n.resetPositionTargetImages=function(){for(var e,t=re()(e=this.listItems).call(e,(function(e){return e.visible})),n=263/(t.length+1)+5,i=-n*(t.length-1)/2,a=0;a<t.length;a++){var s;this.targetImages[a]&&(null==(s=this.targetImages[a])||s.setVisible(!1),Phaser.Display.Align.In.Center(this.targetImages[a],this.backgroundContent,i+n*a+this.scene.gameZone.width/2,this.scene.gameZone.height/2))}},n.getFreeAnim=function(){if(!this.scene.world.isLandscape()){var e=new sO(this.scene);return this.listAnimCollectionItem.push(e),e}var t=new rO(this.scene);return this.listAnimCollectionItem.push(t),t},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:uO,frame:dO.TEXT_MISSION}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t=this;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.scene.time.delayedCall(50,(function(){t.moveGemsToCollectItems()})),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),gO=pO,fO=is.STATUS,mO=Qa.Z.GAMEPLAY,EO=mO.KEY,vO=mO.FRAME,SO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.step=void 0,n.listPositionStart=void 0,n.listPositionTo=void 0,n.positionStart=void 0,n.positionTo=void 0,n.handFrame=void 0,n.tweenHand=void 0,n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.step){case 0:case 1:t={x:3,y:3}}return t.x===e.x&&t.y===e.y},n.scene=t,n.step=0,n.createHand(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){this.isRunning()&&(this.initPosition(),this.positionStart=this.listPositionStart[this.step],this.positionTo=this.listPositionTo[this.step],this.createTweenHand())},n.start=function(){this.initPosition(),this.isRunning()||(this.setState(fO.RUNNING),this.handleStep())},n.initPosition=function(){var e=this.scene.layoutManager.objects.main.board,t=e.dataBoard,n=e.cellSize,i=this.scene.layoutManager.objects.footer.pieces,a=i.allPieces,s=i.piecesActive,r=a[s[0].position].piece.getWorldPosition().x+n/2,o=a[s[0].position].piece.getWorldPosition().y+n/2,c=t[3][3].cell.getWorldPosition().x+n/2,l=t[3][3].cell.getWorldPosition().y+n/2,h=a[s[1].position].piece.getWorldPosition().x+n,u=a[s[1].position].piece.getWorldPosition().y+n,d=t[5][5].cell.getWorldPosition().x+n/2,p=t[5][5].cell.getWorldPosition().y+n/2;this.listPositionStart=[{x:r,y:o},{x:h,y:u}],this.listPositionTo=[{x:c,y:l},{x:d,y:p}]},n.createHand=function(){this.handFrame=this.scene.make.image({key:EO,frame:vO.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(qa.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.createTweenHand=function(){var e;null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({paused:!0,repeatDelay:500,targets:this.handFrame,repeat:-1,x:{from:this.positionStart.x,to:this.positionTo.x},y:{from:this.positionStart.y,to:this.positionTo.y},duration:1500,ease:Phaser.Math.Easing.Sine.InOut}),this.tweenHand.play()},n.handleStep=function(){switch(this.positionStart=this.listPositionStart[this.step],this.positionTo=this.listPositionTo[this.step],this.handFrame.setVisible(!0),this.handFrame.setPosition(this.positionStart.x,this.positionStart.y),this.createTweenHand(),this.step){case 0:this.handleStep1();break;case 1:this.handleStep2()}},n.handleStep1=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[3][3].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][4].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][3].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleStep2=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[5][3].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][4].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][5].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][5].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][5].cell.setFrameImageCell(Qa.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleCompleteTutorial=function(){this.setState(fO.STOPPED),this.stopAnimHand()},n.nextStep=function(){this.handFrame.setVisible(!1),this.step++,this.step>=2?this.handleCompleteTutorial():this.handleStep()},n.stopAnimHand=function(){var e;this.handFrame.setVisible(!1),null==(e=this.tweenHand)||e.stop()},n.runAnimHand=function(){this.handFrame.setVisible(!0),this.tweenHand.play()},n.validStep=function(e){return this.step===e},n.reset=function(){this.setState(fO.STOPPED),this.stopAnimHand(),this.step=0},t}(os),AO=SO,TO=function(e){return e[Ui]},yO=((0,j.P1)([function(e){return TO(e).isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return TO(e).leaders}],(function(e){return e}))),IO=(0,j.P1)([function(e){return TO(e).time}],(function(e){return e})),CO=Qa.Z.DEFAULT,OO=CO.KEY,bO=CO.FRAME,PO=function(e){function t(t){var n;return(n=e.call(this,t,OO,bO.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:OO,frame:bO.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2)},t}(ts.Z),RO=PO,wO=Qa.Z.DEFAULT,xO=wO.KEY,_O=wO.FRAME,kO=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.textTime=void 0,i.createBackground(),i.updateSize(),i.createRank(),i.createUsername(),i.createTimeBlock(),n&&i.updateInfo(n),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({backgroundFrame:""},e),this.updateBackground(),this.updateRank(),this.updateUsername(),this.updateTime()},n.createBackground=function(){this.background=this.scene.make.image({key:xO,frame:_O.DAILY_BG_ITEM_DARK}),this.background.setWorldSize(254,38),this.add(this.background)},n.updateBackground=function(){var e=this.payload.backgroundFrame;this.background.setVisible(!0),this.background.setFrame(e||_O.DAILY_BG_ITEM_DARK),this.background.setWorldSize(254,38)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:xO,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-15)},n.getRankIconFrame=function(e){var t=_O.ICON_CUP_GOLD;switch(e){case 1:t=_O.ICON_CUP_GOLD;break;case 2:t=_O.ICON_CUP_SILVER;break;case 3:t=_O.ICON_CUP_COPPER}return t},n.updateRankIcon=function(e){if(e<=3){this.rankText.setVisible(!1),this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t)}else this.rankText.setVisible(!0).setText(String(e)),this.rankIcon.setVisible(!1)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(ns.Z.NUMBER_DARK.KEY))},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("Sang Le"),style:{fontFamily:ns.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(36)+"px",fontStyle:"700"}}),this.username.setTint(7551258),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.background,-44)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e)),this.username.setTint(7551258)},n.createTimeBlock=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:xO,frame:_O.DAILY_BG_TIME});t.setWorldSize(85,24),e.add(t);var n=this.scene.make.image({key:xO,frame:_O.ICON_CLOCK});n.setWorldSize(17,17),e.add(n),Phaser.Display.Align.In.LeftCenter(n,t,-5),this.textTime=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(27),text:"0",origin:{x:.5,y:.5}}),e.add(this.textTime),Phaser.Display.Align.In.Center(this.textTime,t,10,1.5),this.add(e),Phaser.Display.Align.In.Center(e,this.background,70)},n.updateTime=function(){var e=this.payload.score;this.textTime.setText(this.secondsToHms(e))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return Ke()(t="0"+r).call(t,-2)+":"+Ke()(n="0"+s).call(n,-2)+":"+Ke()(i="0"+a).call(i,-2)},t}(Phaser.GameObjects.Container),LO=kO;function MO(e,t){var n="undefined"!==typeof wo()&&_o()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return DO(e,t);var i=Ke()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Po()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return DO(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var NO=Qa.Z.DEFAULT,BO=NO.KEY,GO=NO.FRAME,FO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scroller=void 0,n.scrollerValue=void 0,n.tweenMoveToRank=void 0,n.scene=t,n.createReuseScroller(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){var e=190,t=0,n=0;this.scene.world.isLandscape()&&(e=150,t=-20,n=-20),this.scroller=new vu(this.scene,{classType:LO,listConfigs:[],width:260,height:e,padding:0,marginTop:t,marginBottom:n,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(BO,GO.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=[],i=0;if(!(e.length<1)){for(var a,s=Ei()(e).call(e,(function(e,t){return+e.score-+t.score})),r=window.game.player.getPlayer().playerId,o=0,c=MO(s);!(a=c()).done;){var l=a.value,h=l.playerId,u=l.score,d=l.name;i++;var p=GO.DAILY_BG_ITEM_LIGHT;i%2==0&&(p=GO.DAILY_BG_ITEM_DARK);var g={playerId:h,name:d,score:u,rank:i,backgroundFrame:p};n.push(g),h==r&&(o=i),t&&t==h&&this.runTweenMoveToRank(i)}this.scroller.updateConfig(n);var f=0;if(this.scene.world.isLandscape()&&(f=20),!t){var m=this.scroller.getChildren()[0].height;this.scroller.value=-m*this.showDefaultRank(o)-f}this.showLeaders()}},n.showDefaultRank=function(e){return e<3?0:e-3},n.runTweenMoveToRank=function(e){var t=this,n=this.scroller.getChildren()[0].height;this.scrollerValue=-n*(e-3),this.tweenMoveToRank=this.scene.tweens.addCounter({from:this.scroller.value,to:this.scrollerValue,duration:1e3,onUpdate:function(e){t.scroller.value=e.getValue()}}),this.scene.time.delayedCall(2500,(function(){1!=e&&2!=e||(t.scroller.value=0)}))},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&a.setVisible(!0)}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},n.getTestData=function(){return[{playerId:"001",name:"A",score:"001",rank:1},{playerId:"002",name:"B",score:"002",rank:2},{playerId:"003",name:"C",score:"003",rank:3},{playerId:"004",name:"D",score:"004",rank:4},{playerId:"005",name:"E",score:"005",rank:5},{playerId:"006",name:"F",score:"006",rank:6},{playerId:"007",name:"G",score:"007",rank:7}]},t}(Phaser.GameObjects.Container),UO=FO;function HO(e,t){var n="undefined"!==typeof wo()&&_o()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ZO(e,t);var i=Ke()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Po()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ZO(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ZO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var YO=Qa.Z.DEFAULT,VO=YO.KEY,WO=YO.FRAME,zO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonHome=void 0,s.contents=void 0,s.avatar=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.leaderItems=void 0,s.timeText=void 0,s.scene=t,s.createPopup(),s.createScroller(),s.createContentBackground(),s.createAvatar(),s.createTitle(),s.createTimeText(),s.createButtons(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.2),s}(0,o.Z)(t,e);var n=t.prototype;return n.createScroller=function(){this.leaderItems=new UO(this.scene),this.popup.add(this.leaderItems),Phaser.Display.Align.In.Center(this.leaderItems,this.popup,0,36)},n.updateTimeText=function(){var e=this.scene.storage.getState(),t=IO(e);this.timeText.setText(this.secondsToHms(t))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return Ke()(t="0"+r).call(t,-2)+":"+Ke()(n="0"+s).call(n,-2)+":"+Ke()(i="0"+a).call(i,-2)},n.getLeadersData=function(){var e=this.scene.game.storage.getState(),t=yO(e),n=[],i=fi()(t)||[],a=Ei()(i).call(i,(function(e,t){return+e.score-+t.score}));if(a.length>0)for(var s,r=HO(a);!(s=r()).done;){var o=s.value;n.push(o)}return n},n.open=function(){e.prototype.open.call(this),this.loadAvatar(),this.updateTimeText(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new us.Z(this.scene,0,20,290,280,{forceHeightTop:54}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-10)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:VO,frame:WO.DAILY_BACKGROUND}),this.backgroundContent.setWorldSize(258,132),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-86)},n.createAvatar=function(){this.avatar=new Ic(this.scene,{key:VO,frame:WO.AVATAR_BORDER,background:WO.AVATAR_BACKGROUND,width:70,height:70,radius:10,borderWidth:10}),this.popup.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundContent,71,-10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:VO,frame:WO.TEXT_RESULT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new ts.Z(this.scene,VO,WO.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,10),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,0),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-30)},n.clickButtonClose=function(){this.runCloseAnimation(),this.scene.storage.dispatch(Kh(!0)),this.scene.screen.open($a.o4.MINI_JOURNEY_SCREEN)},n.createTimeText=function(){this.timeText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(35),text:"00:00:00",origin:{x:.5,y:.5}}),this.popup.add(this.timeText),this.timeText.setPosition(70,50)},n.createButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new RO(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome.bind(this),Phaser.Display.Align.In.BottomCenter(this.buttonHome,this.popup,0,5)},n.clickButtonHome=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(Ua.Co.DASHBOARD_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.loadAvatar=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},t}(GameCore.Screen),KO=GameCore.Configs,jO=KO.OtherHost,XO=KO.DailyChallenge,JO=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me("leaderboards/"+XO.LeaderBoardId+"/players/"+t,{score:n},{},jO);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qO=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],a=XO.Prefix+"/"+XO.LeaderBoardId+"/leaders"){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,Le(a+"?limit="+t+"&offset="+n,{},jO);case 6:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=10;break}return e.abrupt("return",i);case 10:return i=r,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function QO(e,t){var n="undefined"!==typeof wo()&&_o()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return $O(e,t);var i=Ke()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Po()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var eb,tb=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.time,s=e.limit,r=e.offset,o=window.game.player,c=o.getPlayerId(),n({type:Hi,payload:{}}),n(ab(a)),t.next=8,JO(c,a);case 8:return t.next=10,(0,Oe.qZ)(500);case 10:n(nb({limit:s,offset:r})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},nb=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l,h,d,p,g,f,m,E,v,S,A,T,y,I;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Hi,payload:{}}),a=e.limit,s=e.offset,r=window.game,o=r.player,c=r.profile,l=o.getPlayerId(),o.getConnectedPlayerIds(5,0).push(l),t.next=9,qO(a,s);case 9:return h=t.sent,d=ce()(h).call(h,(function(e){return e.playerId})),d.push(o.getPlayerId()),t.next=14,c.requestProfiles(d);case 14:p=c.getProfiles(),g={},f=QO(h);case 17:if((m=f()).done){t.next=26;break}if(E=m.value,v=E.playerId,S=E.score,A=E.rank,p[v]){t.next=22;break}return t.abrupt("continue",24);case 22:T=p[v],y=T.name,I=T.photo,g[v]={playerId:v,name:y,photo:I,score:S,rank:A};case 24:t.next=17;break;case 26:n(ib(g)),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(0),n(ib([])),(0,i.tO)(t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,29]])})));return function(e){return t.apply(this,arguments)}}()},ib=function(e){return{type:Zi,payload:{leaders:e}}},ab=function(e){return{type:Yi,payload:{time:e}}},sb=Qa.Z.DEFAULT,rb=sb.KEY,ob=sb.FRAME,cb=function(e){function t(t){var n;return(n=e.call(this,t,rb,ob.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:rb,frame:ob.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:rb,frame:ob.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(ts.Z),lb=cb,hb=Qa.Z.DEFAULT,ub=hb.KEY,db=hb.FRAME,pb=Qa.Z.GAMEPLAY,gb=pb.KEY,fb=pb.FRAME,mb=Qa.Z.GAMEPLAY_32,Eb=mb.KEY,vb=mb.FRAME,Sb=GameCore.Configs,Ab=Sb.Network,Tb=Sb.Board,yb=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),s.scene.scene.switch(Ua.Co.DASHBOARD_SCENE),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5)}catch(r){}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=fl(e),n=Uf[t];if(!n)return void this.handleLoadCurrentMapComplete();var a=n.key,s=n.mapJson;if(this.scene.cache.tilemap.exists(a))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(a,s),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(r){(0,i.tO)(r)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:Ab.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:ub,frame:db.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new ts.Z(this.scene,ub,db.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:ub,frame:db.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:ub,frame:db.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=fl(n),a=Uf[i];a||(a=Uf[Uf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,Wf.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=Bf()(e=Bf()(t=Bf()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=LE[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,E=m.container,v=m.text,S=m.gem;E.setVisible(!0),v.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(E,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:Eb,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:gb,frame:fb.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<Tb.rows;e++){this.boardCellData[e]=[];for(var t=0;t<Tb.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=vb.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=pl(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<Tb.rows;e++)for(var t=0;t<Tb.cols;t++){this.boardCellData[e][t].setFrame(vb.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=id()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=qE(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=fl(e),n=Uf[t];n||(n=Uf[Uf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,Wf.isArray)(i)){var a=i[0].data;if((0,Wf.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=LE[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:Eb,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new lb(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=fl(t);e.scene.storage.dispatch(Nh()),n>Uf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Jh()),e.scene.handleRetryLevel())}))},n.getLevelName=function(e){var t;return"journey_"+Ja()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Ib=Qa.Z.DEFAULT,Cb=Ib.KEY,Ob=Ib.FRAME,bb=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.targetMissionManager.getTargetValue();this.textScore.setText(""+i);var a=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(a,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Cb,frame:Ob.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.titleFrame=this.scene.make.image({key:Cb,frame:Ob.TEXT_MISSION});var t=this.titleFrame,n=t.width,i=t.height;this.titleFrame.setWorldSize(n/e,i/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Pb=bb,Rb=Qa.Z.DEFAULT,wb=Rb.KEY,xb=Rb.FRAME,_b=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:wb,frame:xb.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),kb=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new _b(this.scene)},e}(),Lb=Qa.Z.DEFAULT,Mb=Lb.KEY,Db=Lb.FRAME,Nb=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.startOver=function(){(0,s.getData(["onConfirm"])[0])(),s.handleClose()},s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createButtons(),s.addItem(),s.setDepth($a.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:Mb,frame:Db.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){"ar"==this.scene.facebook.getLocale()?(this.textTargetScore=this.scene.make.text({text:this.scene.lang.Text.MESS_START_OVER,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textTargetScore.setTint(7551258),this.textTargetScore.setAlign("center")):(this.textTargetScore=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.MESS_START_OVER,origin:{x:.5,y:.5}}),this.textTargetScore.setCenterAlign()),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createButtons=function(){var e,t,n=new ts.Z(this.scene,Mb,Db.BUTTON_GREEN_BIG,89,41),i=new ts.Z(this.scene,Mb,Db.BUTTON_DARK_BLUE_BIG,89,41);"ar"==this.scene.facebook.getLocale()?(e=this.scene.make.text({text:this.scene.lang.Text.OK,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),t=this.scene.make.text({text:this.scene.lang.Text.CANCEL,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),e.setTint(15651762),t.setTint(15651762)):(e=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.OK,origin:{x:.5,y:.5}}),t=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}})),n.add(e),i.add(t),this.popup.add([n,i]),n.onClick=this.startOver,i.onClick=this.handleClose,Phaser.Display.Align.In.Center(n,this.backgroundContent,-60,30),Phaser.Display.Align.In.Center(i,this.backgroundContent,60,30)},n.createPopup=function(){this.popup=new us.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){if(this.title=this.scene.add.container(),"ar"==this.scene.facebook.getLocale()){var e=this.scene.make.text({text:this.scene.lang.Text.CONFIRM_START_OVER,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(38)+"px"},origin:{x:.5,y:.5}});e.setTint(15651762),this.title.add([e]),Phaser.Display.Align.In.Center(e,this.title,0,-5)}else{var t=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(38),text:this.scene.lang.Text.CONFIRM_START_OVER,origin:{x:.5,y:.5}});this.title.add([t]),Phaser.Display.Align.In.Center(t,this.title,0,-5)}this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(es.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new hs.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new ls.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new cs.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new Oo.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new cs.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Bb=Nb,Gb=n(433),Fb=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case gm:case fm:case mm:i=new VI(e,t,n);break;case Em:case vm:case Sm:case Am:i=new zI(e,t,n);break;case Tm:case ym:case Im:i=new jI(e,t,n);break;case Om:i=new JI(e,t,n);break;case bm:i=new aC(e,t,n);break;case km:i=new rC(e,t,n);break;case Pm:i=new nC(e,t,n);break;case Rm:case wm:case xm:case _m:i=new QI(e,t,n);break;case Cm:i=new eC(e,t,n);break;default:i=new jI(e,t,n)}return i},e}(),Ub=Fb,Hb=Qa.Z.GAMEPLAY_32,Zb=Hb.KEY,Yb=Hb.FRAME,Vb=Gb.Z.Configs,Wb=Vb.Gameplay,zb=Vb.Match,Kb=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.listPieceMap=[],n.amountPieceContainGem=0,n.hasPieceContainGem=void 0,n.segmentAmountPiece1Min=0,n.segmentAmountPiece1Max=0,n.segmentAmountPiece1Cur=0,n.segmentAmountPiece5Min=0,n.segmentAmountPiece5Max=0,n.segmentAmountPiece5Cur=0,n.segmentAvgScore=0,n.segmentTotalPieceScore=0,n.segmentTotalPiece=0,n.segmentTotalScore=0,n.segmentPieceDistancePerGem=0,n.segmentPieceRandomGem=!1,n.scene=t,n.scene.world.isLandscape()?n.setSize(101,300):n.setSize(375,140),t.add.existing((0,Va.Z)(n));var i=n.scene.gameZone,a=i.width,s=(i.height/2-176-27+100)/-2;return n.positionPiece=[{x:-a/3,y:s},{x:0,y:s},{x:a/3,y:s}],n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps(),this.addDebuggerBtnRandomPieces(),this.registerEvents()},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position].piece,n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([Tm,ym,Im].some((function(t){return t===e})))return[];var t=[];switch(e){case gm:case fm:case mm:t=[qf,Xf,Jf,Qf];break;case Em:case vm:case Sm:case Am:t=[Kf,jf];break;case Om:t=[qf,Xf,Jf,Qf];break;case Cm:t=[$f,em,tm,nm];break;case bm:case km:t=[qf,Xf,Jf,Qf];break;case Pm:t=[];break;case Rm:case wm:case xm:case _m:t=[Xf,Jf]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<Lm.length;n++){var i=this.getDirectionsByType(Lm[n]);if(i.length<=0)t.push({type:Lm[n]});else{for(var a=0;a<i.length;a++)t.push({type:Lm[n],direction:i[a]});if(gm===Lm[n])for(var r=0;r<i.length;r++)t.push({type:Lm[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:Zb,frame:Yb.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=Ub.create(this.scene,this,c);this.add(l),l.hide(),this.allPieces.push({piece:l,isUsed:!1})}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e].piece;this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(Vu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return"continue";var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[Sm,Am].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c],h=e.allPieces[l].piece;if(h&&h.direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r].piece;a.push({position:r,texture:Zb,frame:Yb.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=[],n=0;n<Mm.length;n++)t.push((0,s.Z)({},Mm[n]));var i=this.scene.layoutManager.objects.main;if(e){var a=i.board.dataBoard,r=5;if(this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<t.length;o++)t[o].type===Am&&(t[o].rate=8);else if(r=4,this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<t.length;c++)t[c].type===Sm&&(t[c].rate=8)}for(var l=[],h=0;h<t.length;h++)for(var u=t[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e],n=t.position,i=t.fenPiece,a=this.allPieces[n].piece,s=this.positionPiece[e],r=s.x,o=s.y;if(i){var c=this.convertFenPiecesToData(i);c&&a.updateDataPiece(c)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var l=this.getRandomPieceData(a.data);l&&a.updateDataPiece(l)}}a.updatePosition(r,o),a.updateWrapPiecePosition(),a.setIndex(e),a.drawPiece(),this.allPieces[n]={piece:a,isUsed:!0}}},n.isPieceContainGem=function(){if(1===Phaser.Math.Between(0,1)&&!this.hasPieceContainGem)return this.amountPieceContainGem++,this.hasPieceContainGem=!0,!0;if(this.amountPieceContainGem<Wb.RatePieceContainGem)return this.amountPieceContainGem++,!1;if(this.amountPieceContainGem>=Wb.RatePieceContainGem){var e=this.hasPieceContainGem;return this.amountPieceContainGem=0,this.hasPieceContainGem=!1,!e}return!1},n.convertFenPiecesToData=function(e){if(!e)return null;var t=e.split("/");if(0===t.length)return null;for(var n=[],i=0;i<t.length;i++){var a=t[i].split(",");n[i]=[];for(var s=0;s<a.length;s++){var r=qE(a[s]);"null"!==a[s]&&"x"!==a[s]||(r=null),n[i].push({x:i,y:s,texture:r})}}return n},n.countDataGem=function(e){for(var t=0,n=0;n<e.length;n++)e[n].texture&&t++;return t},n.getRandomPieceData=function(e){var t=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(!t||0===t.length)return null;for(var n=0,i=e.length,a=e[0].length,s=0;s<i;s++)for(var r=0;r<a;r++){var o=this.countDataGem(e[s]);if(e[s][r].texture&&(Phaser.Math.Between(0,1)||n||r+1===o)){var c=Yb.GEM;if(n<Wb.MaxGemInPiece)c=t[Phaser.Math.Between(0,t.length-1)];e[s][r]={x:s,y:r,texture:c},n++}}return e},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=re()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){this.resetAllPieces(),this.listPieceMap.length>0?this.showListPieceMap():(this.randomPieces(),this.setActivePieces(),this.drawPieces())},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=this.allPieces[n].piece,a=zE(e,i);i.setCanMove(a)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=za()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==id()(s=i[a]).call(s)){var o=$E(id()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.used,o=n.position;if(!r){var c=JE(i);a&&""!==a&&(c+="-"+JE(a)),s&&(c+="-r");var l=this.allPieces[o].piece;e+=" "+c+"|"+this.getFenDataPiece(l)}}return e},n.getFenDataPiece=function(e){for(var t=e.data,n=t.length,i=t[0].length,a="",s=0;s<n;s++){for(var r="",o=0;o<i;o++)r+=","+JE(t[s][o].texture);a+="/"+r.substring(1)}return a.substring(1)},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].isUsed=!1,this.allPieces[t].piece.hide()}this.piecesActive=[],this.listPieceMap=[]},n.resetAllPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].isUsed=!1,this.allPieces[e].piece.reset()},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){this.resetAllPieces();for(var t=[],n=0;n<e.length;n++){for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=!1,l=0;l<this.allPieces.length;l++){var h=this.allPieces[l],u=h.piece,d=h.isUsed;if(a===u.type&&s===u.direction&&r===u.isReverse){if(d){c=!0;continue}c=!1,t.push({position:l,texture:Zb,frame:o,type:u.type,direction:u.direction,isReverse:u.isReverse,fenPiece:e[n].fenPiece}),this.allPieces[l].isUsed=!0;break}}if(c){var p=this.spawnPiece(a,s,r),g=p.piece,f=p.index;t.push({position:f,texture:Zb,frame:o,type:g.type,direction:g.direction,isReverse:g.isReverse,fenPiece:e[n].fenPiece})}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.spawnPiece=function(e,t,n){var i=this.cellSize,a={type:e,direction:t,isReverse:n,texture:Zb,frame:Yb.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2),cellLength:Math.floor(i/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2)}},s=Ub.create(this.scene,this,a);return s.hide(),this.allPieces.push({piece:s,isUsed:!0}),this.add(s),{piece:s,index:this.allPieces.length-1}},n.showListPieceMap=function(){var e;this.piecesActive=za()(e=this.listPieceMap).call(e,0,3),this.showAvailablePieces(this.piecesActive);var t=this.scene.layoutManager.objects.footer;if(t.textExist){var n=this.listPieceMap.length<=0?"Done":"Exits";t.textExist.setText(n)}},n.validItemsPieceMap=function(e){for(var t,n=!0,i=m()(t=[]).call(t,e),a=function(){var e=i.shift(),t=re()(i).call(i,(function(t){return t.type===(null==e?void 0:e.type)&&t.direction===e.direction&&t.isReverse===e.isReverse}));t&&t.length>0&&(n=!1)};i.length>1;)a();return n},n.getPieceDataByType=function(e){return ME[e]},n.addItemPieceMap=function(e){if(e.properties){var t=this.getFenPieceForPropertiesPieceMap(e);t&&(e=(0,s.Z)({},e,{fenPiece:t}))}this.listPieceMap.push(e)},n.getFenPieceForPropertiesPieceMap=function(e){var t,n;if(!e.properties)return"";var i="",a=null==(t=re()(n=this.allPieces).call(n,(function(t){var n=t.piece;return n.direction===e.direction&&n.isReverse===e.isReverse&&n.type===e.type}))[0])?void 0:t.piece,s=e.properties[0].value.split(","),r=e.properties[1].value.split(","),o=0;if(!a)return i;for(var c=a.data,l=c.length,h=c[0].length,u=0;u<l;u++){for(var d="",p=0;p<h;p++){var g=c[u][p].texture,f=g,m=Ot()(r).call(r,String(o));g&&(-1!==m&&(f=LE[s[m]]),o++);var E=null;f&&(E=JE(f)),d+=","+E}i+="/"+d.substring(1)}return i.substring(1)},n.start=function(){0!==this.listPieceMap.length?this.showListPieceMap():this.showNewPieces()},n.getListPieceMap=function(){return this.listPieceMap},n.setListPieceMap=function(e){var t;this.listPieceMap=m()(t=[]).call(t,e)},n.buildPiecesByMap=function(){var e=this.scene.mapManager.getTileMap().layers[0].properties;if(e&&!(e.length<=0))for(var t=0;t<e.length;t++){var n=e[t].value;if(n){var i=n.avgScore,a=n.score,s=n.pieceDistancePerGem,r=n.piece1,o=n.piece5;r=r.replace("min",'"min"').replace("max",'"max"'),o=o.replace("min",'"min"').replace("max",'"max"');var c=JSON.parse(r),l=JSON.parse(o);this.segmentAvgScore=i,this.segmentAmountPiece1Min=c.min,this.segmentAmountPiece1Max=c.max,this.segmentAmountPiece5Min=l.min,this.segmentAmountPiece5Max=l.max,this.segmentTotalScore=a,this.segmentPieceDistancePerGem=s,this.segmentTotalPieceScore=0,this.segmentTotalPiece=0,this.listPieceMap=[],this.buildObjectPieces()}}},n.buildObjectPieces=function(){for(;this.checkAverageScore();)this.buildObjectPiece()},n.checkAverageScore=function(){return 0===this.segmentTotalPiece||0===this.segmentTotalPieceScore||!(this.segmentTotalPiece>zb.PieceRandoms.maxPiece)&&!(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore+zb.PieceRandoms.measureError&&this.segmentTotalPieceScore/this.segmentTotalPiece>=this.segmentAvgScore-zb.PieceRandoms.measureError&&this.segmentTotalPieceScore>=this.segmentTotalScore)},n.buildObjectPiece=function(){var e=this.getPieceByAvgScore();if(e)if(this.checkPieceMaxAmountConfig(e)){var t="";if(Math.floor((this.segmentTotalPiece-1)/3)%this.segmentPieceDistancePerGem===0){var n=Phaser.Math.Between(0,1);if((this.segmentTotalPiece-1)%3===0&&1===this.segmentPieceDistancePerGem&&(this.segmentPieceRandomGem=!1),n&&!this.segmentPieceRandomGem||!this.segmentPieceRandomGem&&this.segmentTotalPiece%3===2){var i=this.getRandomPieceData(e.data);i&&(e.updateDataPiece(i),t=this.getFenDataPiece(e)),this.segmentPieceRandomGem=!0}}else this.segmentPieceRandomGem=!1;this.listPieceMap.push({type:e.type,direction:e.direction,isReverse:e.isReverse,fenPiece:t})}else this.buildObjectPiece()},n.checkPieceMaxAmountConfig=function(e){var t=e.getScore();switch(t){case 1:if(this.segmentAmountPiece1Max<=this.segmentAmountPiece1Cur)return!1;this.segmentAmountPiece1Cur++;break;case 5:if(this.segmentAmountPiece5Max<=this.segmentAmountPiece5Cur)return!1;this.segmentAmountPiece5Cur++}return this.segmentTotalPiece++,this.segmentTotalPieceScore+=t,!0},n.getPieceByAvgScore=function(){var e=this;if(this.segmentTotalPieceScore<this.segmentTotalScore){var t=this.buildPieceRates(!1),n=t[Math.floor(Math.random()*t.length)];if(!this.allPiecesGroup[n])return null;var i=Math.floor(Math.random()*this.allPiecesGroup[n].length),a=this.allPiecesGroup[n][i];return this.allPieces[a].piece}if(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore){var s,r=re()(s=this.allPieces).call(s,(function(t){return t.piece.getScore()<=e.segmentAvgScore}));return r&&0!==r.length?r[Phaser.Math.Between(0,r.length-1)].piece:null}if(this.segmentTotalPieceScore/this.segmentTotalPiece>this.segmentAvgScore){var o,c=re()(o=this.allPieces).call(o,(function(t){return t.piece.getScore()>e.segmentAvgScore}));return c&&0!==c.length?c[Phaser.Math.Between(0,c.length-1)].piece:null}return null},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].piece.wrapPiece.setVisible(!1);this.showNewPieces()},n.addDebuggerBtnRandomPieces=function(){var e=this;if(Gb.Z.Utils.Valid.isDebugger())for(var t=[80,187.5,295],n=this.scene.gameZone.height,i=function(i){var a=new ts.Z(e.scene,Zb,Yb.GEM,50,30);e.add(a),a.onClick=function(){e.debuggerNewPieces(i)},a.setPosition(t[i],n)},a=0;a<3;a++)i(a)},n.debuggerNewPieces=function(e){this.removeActivePiece(e);var t=this.piecesActive[e],n=this.allPieces[t.position].piece;n.setVisible(!1);var i=Phaser.Math.Between(0,this.allPieces.length-1);this.piecesActive[e]={position:i,texture:Zb,frame:Yb.GEM,type:n.type,direction:n.direction,isReverse:n.isReverse};var a=this.piecesActive[e],s=a.position,r=a.fenPiece,o=this.allPieces[s].piece,c=this.positionPiece[e],l=c.x,h=c.y;if(r){var u=this.convertFenPiecesToData(r);u&&o.updateDataPiece(u)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var d=this.getRandomPieceData(o.data);d&&o.updateDataPiece(d)}}o.updatePosition(l,h),o.setIndex(e),o.drawPiece()},t}(Phaser.GameObjects.Container),jb=Qa.Z.GAMEPLAY,Xb=jb.KEY,Jb=jb.FRAME,qb=function(e){function t(t){var n;return(n=e.call(this,t,Xb,Jb.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Xb,frame:Jb.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ts.Z),Qb=qb,$b=Qa.Z.GAMEPLAY,eP=$b.KEY,tP=$b.FRAME,nP=Qa.Z.DEFAULT,iP=nP.KEY,aP=nP.FRAME,sP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.pX=void 0,n.pY=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,85),t.add.existing((0,Va.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:iP,frame:aP.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new Kb(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new ts.Z(this.scene,eP,tP.BUTTON_WOOD_SMALL,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUILandscape=function(){var e,t;this.initPosition(),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),this.buttonSetting.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5)},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:iP,frame:aP.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:iP,frame:aP.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new Qb(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(qa.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),rP=sP,oP=Qa.Z.DEFAULT,cP=oP.KEY,lP=oP.FRAME,hP=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.bestScoreText=void 0,n.titleText=void 0,n.titleText2=void 0,n.dayText=void 0,n.titleDayText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createLevelTitleText(),n.createLevelTitleText2(),n.createTitleDayText(),n.createDayText(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:cP,frame:lP.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,23)},n.createTitleDayText=function(){var e=this.scene.game.lang,t=this.scene.facebook.getLocale();"ar"==t?(this.titleDayText=this.scene.make.text({style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5},text:e.Text.mmddyy}),this.titleDayText.setTint(15389360)):this.titleDayText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:e.Text.mmddyy}),"id"==t&&this.titleDayText.setFontSize(this.scene.fontSize(25)),this.add(this.titleDayText),Phaser.Display.Align.In.Center(this.titleDayText,this.background,0,4)},n.createDayText=function(){this.dayText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"0"}),this.add(this.dayText),Phaser.Display.Align.In.Center(this.dayText,this.background,0,23)},n.createLevelTitleText=function(){this.titleText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.LEVEL}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.background,0,4)},n.createLevelTitleText2=function(){this.titleText2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:ns.Z.FONT_FAMILY,fontSize:this.scene.fontSize(32)+"px"},origin:{x:.5,y:.5}}),this.titleText2.setTint(15651762),this.titleText2.setVisible(!1),this.add(this.titleText2),Phaser.Display.Align.In.Center(this.titleText2,this.background,0,4)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.setDayText=function(e){this.dayText.setText(e)},n.showTextScore=function(){this.titleText.setVisible(!0),this.bestScoreText.setVisible(!0),"ar"==this.scene.facebook.getLocale()&&(this.titleText2.setVisible(!0),this.titleText.setVisible(!1)),this.titleDayText.setVisible(!1),this.dayText.setVisible(!1)},n.showTextDay=function(){this.titleText.setVisible(!1),this.titleText2.setVisible(!1),this.bestScoreText.setVisible(!1),this.titleDayText.setVisible(!0),this.dayText.setVisible(!0)},t}(Phaser.GameObjects.Container),uP=hP,dP=Qa.Z.GAMEPLAY,pP=dP.KEY,gP=dP.FRAME,fP=Qa.Z.GAMEPLAY_32.KEY,mP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.imageCheck=void 0,n.text=void 0,n.particle=void 0,n.emitter=void 0,n.currentPosition=void 0,n.imageGlow=void 0,n.tweenGlow=void 0,n.imageGlowCrop=void 0,n.tweenCropMaskTopDown=void 0,n.tweenCropMaskDownBottom=void 0,n.imageStar=void 0,n.tweenShowStar=void 0,n.tweenHideStar=void 0,n.tweenShowMe=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createImageCheck(),this.createText(),this.createParticle(),this.createEmitter(),this.createGlow(),this.createTweenGlow(),this.createGlowCrop(),this.createStar(),this.createTweenStar(),this.createTweenShowMe()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:fP}),this.imageGem.setWorldSize(22,22),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-7)},n.createImageCheck=function(){this.imageCheck=this.scene.make.image({key:pP,frame:gP.ICON_CHECK}),this.imageCheck.setWorldSize(22,17),this.imageCheck.setVisible(!1),this.add(this.imageCheck),Phaser.Display.Align.In.Center(this.imageCheck,this.imageGem)},n.createText=function(){this.text=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.imageGem,0,19)},n.createParticle=function(){this.particle=this.scene.add.particles(pP).setDepth(qa.Z.ON_TOP)},n.createEmitter=function(){var e=1.5/this.scene.world.getPixelRatio();this.emitter=this.particle.createEmitter({on:!1,angle:{start:0,end:360,steps:8},frame:[gP.DUST],lifespan:1e3,quantity:1,scale:{start:e,end:0,ease:"Quart.easeIn"},speed:50})},n.createGlow=function(){this.imageGlow=this.scene.make.image({key:pP,frame:gP.VIOLET_GLOW}),this.imageGlow.setVisible(!1).setScale(0).setAlpha(0),this.add(this.imageGlow),Phaser.Display.Align.In.Center(this.imageGlow,this.imageGem)},n.createTweenGlow=function(){var e=this;this.tweenGlow=this.scene.tweens.add({targets:[this.imageGlow],paused:!0,scale:{from:0,to:.6},alpha:{from:0,to:1},delay:100,duration:600,onComplete:function(){e.imageGlow.setVisible(!1).setScale(0).setAlpha(0),e.playAnimMaskCrop(),e.playAnimStar()}})},n.createGlowCrop=function(){this.imageGlowCrop=this.scene.make.image({key:pP,frame:gP.MASK}),this.imageGlowCrop.setVisible(!1),this.imageGlowCrop.setWorldSize(this.imageGem.displayWidth,this.imageGem.displayHeight),this.add(this.imageGlowCrop),Phaser.Display.Align.In.Center(this.imageGlowCrop,this.imageGem)},n.createStar=function(){this.imageStar=this.scene.make.image({key:pP,frame:gP.ICON_STAR_1}),this.imageStar.setVisible(!1).setScale(0).setAlpha(0),this.imageStar.setWorldSize(27,26),this.add(this.imageStar),Phaser.Display.Align.In.Center(this.imageStar,this.imageGem,-10,-10)},n.createTweenStar=function(){var e=this;this.tweenHideStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:1,to:0},alpha:{from:1,to:0},delay:100,duration:500,onComplete:function(){e.imageStar.setVisible(!1).setScale(0).setAlpha(0)}}),this.tweenShowStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:0,to:1},alpha:{from:0,to:1},delay:100,duration:500,onComplete:function(){e.tweenHideStar.play()}})},n.createTweenShowMe=function(){this.tweenShowMe=this.scene.add.tween({paused:!0,targets:[this],alpha:{from:0,to:1},duration:200})},n.cropTopDownImageGlow=function(){var e=this;if(!this.tweenCropMaskTopDown){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskTopDown=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,0,n/i,r/a)},onComplete:function(){e.cropDownBottomImageGlow()}})}this.tweenCropMaskTopDown.play()},n.cropDownBottomImageGlow=function(){var e=this;if(!this.tweenCropMaskDownBottom){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskDownBottom=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,r/a,n/i,t/a)}})}this.tweenCropMaskDownBottom.play()},n.playAnimStar=function(){this.imageStar.setVisible(!0),this.tweenShowStar.play()},n.playAnimMaskCrop=function(){this.imageGlowCrop.setVisible(!0).setCrop(0,0,0,0),this.cropTopDownImageGlow()},n.setFrame=function(e){this.imageGem.setFrame(e)},n.getFrame=function(){return this.imageGem.frame.name},n.setText=function(e,t){this.text.setText(e+" / "+t)},n.completeMission=function(){this.imageGem.setAlpha(.3),this.text.setAlpha(.3),this.imageCheck.setVisible(!0)},n.reset=function(){this.imageGem.setAlpha(1),this.text.setAlpha(1),this.imageCheck.setVisible(!1)},n.updateCurrentPosition=function(e){this.currentPosition=e},n.runAnimCollectionItem=function(){var e=this.scene.layoutManager.objects.header,t=this.scene.gameZone.width/2+this.currentPosition.x,n=this.currentPosition.y-25;this.scene.world.isLandscape()&&(t=e.collectItems.getWorldPosition().x,n=e.collectItems.getWorldPosition().y+this.currentPosition.y),this.tweenGlow.play(),this.emitter.explode(8,t,n)},n.playAnimShowMe=function(){this.setVisible(!0).setAlpha(0),this.tweenShowMe.play()},t}(Phaser.GameObjects.Container),EP=Qa.Z.GAMEPLAY,vP=EP.KEY,SP=EP.FRAME,AP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.target=void 0,n.targetKeys=[],n.jsonPosition={},n.jsonAmount={},n.jsonTarget={},n.jsonCollectItem={},n.textMission=void 0,n.background=void 0,n.listCollectItems=[],n.scene=t,n.createBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:vP,frame:SP.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.calcPosition=function(e){var t=[],n=200/(e+1);if(this.scene.world.isLandscape()){n=255/(e+1)}for(var i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.parseTargetToJson=function(){if(!(0,Wf.isObject)(this.target))for(var e=JSON.parse(this.target),t=B()(e),n=this.calcPosition(t.length),i=0;i<t.length;i++){var a=t[i],s=LE[a];this.targetKeys.push(s),this.jsonAmount[s]=0,this.jsonTarget[s]=e[a],this.jsonPosition[s]={x:n[i],y:68},this.scene.world.isLandscape()&&(this.jsonPosition[s]={x:68,y:n[i]});var r=this.listCollectItems[i];r||(r=new mP(this.scene),this.add(r),this.listCollectItems.push(r)),r.updateCurrentPosition(this.jsonPosition[s]),r.setVisible(!0),this.scene.world.isLandscape()?r.setY(n[i]):r.setX(n[i]),r.setFrame(s),r.setText(0,e[a]),this.jsonCollectItem[s]=r}},n.hideListCollectItems=function(){this.listCollectItems.forEach((function(e){e.setVisible(!1),e.reset()}))},n.showListCollectItems=function(){this.listCollectItems.forEach((function(e){e.reset(),e.playAnimShowMe()}))},n.showCollectItemByKey=function(e){var t,n=re()(t=this.listCollectItems).call(t,(function(t){return t.getFrame()===e}));n&&0!==n.length&&(this.jsonAmount[e]>=this.jsonTarget[e]?n[0].completeMission():n[0].reset(),n[0].playAnimShowMe())},n.start=function(){this.parseTargetToJson()},n.setTargets=function(e){var t,n;this.target=Bf()(t=Bf()(n=Bf()(e).call(e,"{",'{"')).call(n,", ",', "')).call(t,":",'":')},n.collectItem=function(e){if(e in this.jsonAmount){this.jsonAmount[e]++;var t=this.jsonAmount[e],n=this.jsonTarget[e];t===n&&this.jsonCollectItem[e].completeMission(),this.jsonCollectItem[e].setText(t,n)}},n.checkCompleteMission=function(){for(var e=B()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t];if(this.jsonTarget[n]>this.jsonAmount[n])return!1}return!0},n.reset=function(){this.hideListCollectItems(),this.targetKeys=[],this.jsonAmount={},this.jsonTarget={},this.jsonCollectItem={},this.jsonPosition={}},n.getPositionCollectionItem=function(e){return this.jsonPosition[e]},n.getTargetKeys=function(){return this.targetKeys},n.getJsonAmount=function(){return this.jsonAmount},n.getJsonTarget=function(){return this.jsonTarget},n.getCollectItemByKey=function(e){return this.jsonCollectItem[e]},n.updateJsonAmountByFen=function(e){this.jsonAmount=JSON.parse(ye()(e));for(var t=B()(this.jsonTarget),n=0;n<t.length;n++){var i=t[n],a=this.jsonCollectItem[i];this.jsonTarget[i]>this.jsonAmount[i]?a.reset():a.completeMission(),a.setText(this.jsonAmount[i],this.jsonTarget[i])}},n.resetTextAmount=function(){for(var e=B()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t],i=this.listCollectItems[t];i&&i.setText(0,this.jsonTarget[n])}},t}(Phaser.GameObjects.Container),TP=Qa.Z.DEFAULT,yP=TP.KEY,IP=TP.FRAME,CP=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,yP,IP.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.setInteractive().on(Phaser.Input.Events.POINTER_MOVE,(function(){n.disableInteractive()})),n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),OP=CP,bP=Qa.Z.GAMEPLAY,PP=bP.KEY,RP=bP.FRAME,wP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=0,n.scene=t,n.scene.add.existing((0,Va.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:PP,frame:RP.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this;if(this.addScore&&this.addScore.isPlaying()){this.addScore.stop();var n=this.score+e;this.setScore(n),this.setScoreText(n)}this.addScore=this.scene.tweens.addCounter({from:0,to:e,duration:100,onUpdate:function(e){var n=t.score+Math.floor(e.getValue());t.setScoreText(n),t.scene.updateProgressTargetScore(n)},onComplete:function(){var n=t.score+e;t.setScore(n),t.setScoreText(n),t.scene.handleCompleteScoreMission()}})},n.reset=function(){this.setScore(0),this.setScoreText(0)},t}(Phaser.GameObjects.Container),xP=wP,_P=Qa.Z.GAMEPLAY,kP=_P.KEY,LP=_P.FRAME,MP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup()},n.initBg=function(){this.leftBg=this.scene.make.image({key:kP,frame:LP.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:kP,frame:LP.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:kP,frame:LP.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:kP,frame:LP.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:kP,frame:LP.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:kP,frame:LP.PROGRESS_BAR_RIGHT});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.width-(i+o)+2;this.midProgress.setWorldSize(c,this.height),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:kP,frame:LP.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:kP,frame:LP.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new Op.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(kP),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:LP.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:kP,frame:LP.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=re()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth;if(e>=1){if(this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}return this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n?(this.leftProgress.setVisible(!0),void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height)):t>n+i?(this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),void this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height)):(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),void this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height))},t}(Phaser.GameObjects.Container),DP=Qa.Z.GAMEPLAY,NP=DP.KEY,BP=DP.FRAME,GP=function(e){function t(t){var n;return(n=e.call(this,t,NP,BP.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:NP,frame:BP.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(ts.Z),FP=GP,UP=Qa.Z.DEFAULT,HP=UP.KEY,ZP=UP.FRAME,YP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.progressBar=void 0,n.collectItems=void 0,n.textMission=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),t.add.existing((0,Va.Z)(n)),n.createSettingButton(),n.createBestScoreBlock(),n.createMainScoreBlock(),n.createProgressBar(),n.createCollectItems(),n.addTextScore(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLeaf=function(){var e=new OP(this.scene);this.add(e),Phaser.Display.Align.In.Center(e,this,0,e.displayHeight/2-5)},n.createBestScoreBlock=function(){this.bestScoreBlock=new uP(this.scene),this.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this,-132,-12.5)},n.createMainScoreBlock=function(){this.mainScoreBlock=new xP(this.scene),this.add(this.mainScoreBlock),Phaser.Display.Align.In.Center(this.mainScoreBlock,this,0,52)},n.createSettingButton=function(){this.buttonSetting=new FP(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new MP(this.scene,315,13),this.add(this.progressBar),Phaser.Display.Align.In.Center(this.progressBar,this,-19,92),this.progressBar.setVisible(!1)},n.createCollectItems=function(){this.collectItems=new AP(this.scene),this.add(this.collectItems),Phaser.Display.Align.In.Center(this.collectItems,this,0,52),this.collectItems.setVisible(!1)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0)},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1)},n.start=function(){var e=this.scene.targetMissionManager.getTargetType();switch(this.scene.world.isLandscape()&&this.updateUILevel(),e){case Jy:this.targetScore();break;case qy:this.targetCollect()}},n.targetScore=function(){var e=parseInt(this.scene.targetMissionManager.getTargetValue()),t=this.scene.storage.getState(),n=El(t)||0;(0,Wf.isArray)(e)||(this.progressBar.reset(),this.progressBar.setVisible(!0),this.progressBar.setTargetScore(e),this.mainScoreBlock.reset(),this.mainScoreBlock.setVisible(!0),ml(t)||(this.progressBar.setPercent(n/e),this.mainScoreBlock.setScore(n),this.mainScoreBlock.setScoreText(n)),this.collectItems.setVisible(!1))},n.targetCollect=function(){this.collectItems.reset(),this.mainScoreBlock.setVisible(!1),this.progressBar.setVisible(!1);var e=this.scene.targetMissionManager.getTargetValue();this.collectItems.setTargets(e),this.collectItems.setVisible(!0),this.collectItems.start()},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textMission.setVisible(!0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIMissionGem(),this.updateUILevel(),this.textMission.setPosition(-this.width/2-5.5,10),this.collectItems.setPosition(-this.width/2-5.5,154)},n.calcSize=function(){this.setSize(575,110)},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textMission=this.scene.make.image({key:HP,frame:ZP.TEXT_MISSION_LANDSCAPE});var t=this.textMission,n=t.width,i=t.height;this.textMission.setVisible(!1),this.textMission.setWorldSize(n/e,i/e),this.add(this.textMission)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(HP),this.mainScoreBlock.background.setFrame(ZP.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.bestScoreBlock.setPosition(-this.width/2-5.5,115),this.mainScoreBlock.setPosition(-this.width/2-5.5,77)},n.updateUIMissionGem=function(){this.collectItems.background.setTexture(HP),this.collectItems.background.setFrame(ZP.PANEL_MISSION),this.collectItems.background.setWorldSize(47.5,232)},n.updateUILevel=function(){switch(this.scene.targetMissionManager.getTargetType()){case qy:this.bestScoreBlock.setY(245);break;case Jy:this.bestScoreBlock.setY(85);break;default:this.bestScoreBlock.setY(245)}},n.updateUIProgress=function(){this.progressBar.setPosition(0,-33)},t}(Phaser.GameObjects.Container),VP=YP,WP=function(){function e(e){this.scene=void 0,this.listAnimCollectionItem=[],this.scene=e}var t=e.prototype;return t.handleShowEffect=function(e){var t=this;if(e&&0!==e.length){for(var n=this.scene.layoutManager.objects.header,i=n.collectItems.getTargetKeys(),a=n.collectItems.getJsonAmount(),s=n.collectItems.getJsonTarget(),r=0,o=function(){var n=i[c],o=re()(e).call(e,(function(e){return e.frame===n}));a[n]+o.length>=s[n]&&r++,t.showEffect(o)},c=0;c<i.length;c++)o();r===B()(s).length&&this.scene.setLevelCompleted(!0),this.scene.time.delayedCall(2e3,(function(){t.scene.handleCollectionItemsComplete()}))}},t.showEffect=function(e){for(var t=this,n=e.length,i=this.scene.layoutManager.objects,a=i.header,s=i.main.board.dataBoard,r=function(){var i=e[o],r=i.x,c=i.y,l=i.frame,h=s[c][r].cell,u=h.imageBreak,d=t.scene.gameZone.width/2,p=a.collectItems.getPositionCollectionItem(l),g=d+p.x,f=p.y-24;t.scene.world.isLandscape()&&(g=a.collectItems.getWorldPosition().x,f=a.collectItems.getWorldPosition().y+p.y-3);var m=t.getFreeAnim();t.scene.layoutManager.objects.main.board.bringToTop(h),h.resetImageBreak(),u.setVisible(!0),u.setFrame(l),m.setTarget(u),m.onComplete=function(){(n--,u.setVisible(!1),u.setPosition(0,0),a.collectItems.collectItem(l),n<=0)&&(a.collectItems.getCollectItemByKey(l).runAnimCollectionItem(),t.scene.updateMatchData())},m.runScaleUpAnimation(0,300),m.runScaleDownAnimation(450,400),m.runAnimMoveToPosition(700,Phaser.Math.Between(500,1e3),g,f)},o=0;o<e.length;o++)r()},t.getFreeAnim=function(){if(!this.scene.world.isLandscape()){var e=new sO(this.scene);return this.listAnimCollectionItem.push(e),e}var t=new rO(this.scene);return this.listAnimCollectionItem.push(t),t},e}(),zP=WP,KP=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){if(this.captureCells){var e=this.scene.layoutManager.objects.main;if(e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setVisible(!0),c.imageBreak.setFrame(Qa.Z.GAMEPLAY_32.FRAME.GEM),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Xu(o.v0,o.alpha0,u),p=Ju(o.v0,o.alpha0,u);c.setVisible(!0),c.x=o.x0+d,c.y=o.y0+-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),jP=KP,XP=Qa.Z.GAMEPLAY,JP=XP.KEY,qP=XP.FRAME,QP=Qa.Z.GAMEPLAY_32,$P=QP.KEY,eR=QP.FRAME,tR=GameCore.Configs.Board,nR=tR.cols,iR=tR.rows,aR=Qa.Z.DEFAULT.FRAME,sR=GameCore.Configs.Gameplay.VibrateValue,rR=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.collectionEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,E={x:-1,y:-1},v=0;v<a.length;v++)if(0!==v){if(a[v].x===E.x+1&&a[v].y===E.y?(E.x=a[v].x,E.y=a[v].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else E.x=a[v].x,E.y=a[v].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new jP(a.scene),a.collectionEffect=new zP(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:JP,frame:qP.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*(nR+1))/nR},n.initDataBoard=function(){for(var e=this.boardFrame.x-this.boardFrame.displayWidth/2+this.cellSize/2+this.borderLeftSize,t=this.boardFrame.y-this.boardFrame.displayHeight/2+this.cellSize/2+this.borderTopSize,n=0;n<iR;n++){this.dataBoard[n]=[];for(var i=0;i<nR;i++){var a=e+i*this.cellSize+this.cellPadding*i,s=t+n*this.cellSize+this.cellPadding*n,r={x:a,y:s,width:this.cellSize,height:this.cellSize,texture:$P,frame:eR.GEM_TRANSPARENT,depth:qa.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},o=new DI(this.scene,r);o.setFrameImageCell(eR.GEM),this.add(o),this.dataBoard[n][i]={x:a,y:s,width:this.cellSize,height:this.cellSize,frame:eR.GEM_TRANSPARENT,value:0,cell:o}}}},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var o=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=r||eR.GEM,o.setFrameImageCell(r||eR.GEM),o.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<iR;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<nR;a++)i()},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw KE=0,new Error("Invalid Capture");var n=re()(e).call(e,(function(e){return e.frame!==eR.GEM}));this.collectionEffect.handleShowEffect(n);for(var i=300,a=0,s=ZE(this.dataBoard),r=YE(this.dataBoard),o=BE(),c=function(){var n=e[l],c=n.x,h=n.y,u=t.dataBoard[h][c].cell,d=0,p=0,g=0;if(s.length>0&&r.length>0){var f=0,m=0;a=i/nR,-1!==Ot()(s).call(s,h)&&-1===Ot()(r).call(r,c)&&(f=a*c,m=0,p=Ot()(s).call(s,h)),-1===Ot()(s).call(s,h)&&-1!==Ot()(r).call(r,c)&&(f=0,m=a*h,p=Ot()(r).call(r,c)),-1!==Ot()(s).call(s,h)&&-1!==Ot()(r).call(r,c)&&(f=a*c,m=a*h,p=Math.max(Ot()(r).call(r,c),Ot()(s).call(s,h),0)),-1===Ot()(s).call(s,h)&&-1===Ot()(r).call(r,c)&&(f=a*c,m=a*h),d=Math.max(f,m,0)}else if(r.length>0)d=(a=i/nR)*h,p=Ot()(r).call(r,c),g=h;else if(s.length>0)d=(a=i/iR)*c,p=Ot()(s).call(s,h),g=c;else{a=100;var E=e[0].x;d=a*(c-E),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){if(u.getFrameImageCell()===eR.GEM){u.resetImageBreak();var e="";o>2&&(r.length>=3||s.length>=3)?(e=dg[g]||dg[0],u.imageBreak.setFrame(e)):(e=ug[p]||ug[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown()}0==t.dataBoard[h][c].value&&u.setFrameImageCell(eR.GEM_TRANSPARENT)})),t.dataBoard[h][c].frame=eR.GEM_TRANSPARENT,t.dataBoard[h][c].value=0},l=0;l<e.length;l++)c()}catch(h){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=re()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){for(var n=[],i=0;i<e.length;i++){var a=e[i];this.checkPositionCellOnCaptureCell(a,t)&&n.push(a)}if(0!==n.length)if(this.scene.targetMissionManager.getTargetType()!==qy){var s=jE(),r=BE();r>1&&(s=18*NE+10*(XE()-1));for(var o=n[0].pX,c=0,l=n[0].pY,h=0,u=0;u<n.length;u++){var d=n[u];d.pX<o&&(o=d.pX),d.pX>c&&(c=d.pX),d.pY<l&&(l=d.pY),d.pY>h&&(h=d.pY)}var p=o+(c-o)/2,g=l+(h-l)/2;this.scene.layoutManager.objects.main.praise.handlePraise(p,g,s,r),this.handleStreakBreak(p,g),this.playEatSound(r)}else this.playEatSound(1)},n.handleStreakBreak=function(e,t){var n=BE(),i=XE()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&mg(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(aR.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}},n.getVibrateByLevel=function(e){return sR[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(es.Z.EAT_BLOCK),e){case 1:default:break;case 2:this.scene.audio.playSound(es.Z.GOOD);break;case 3:this.scene.audio.playSound(es.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(es.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=eR.GEM_TRANSPARENT,a.setFrameImageCell(eR.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=GE(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,E=f.y,v=this.dataBoard[E][m].cell;v.isHighlight()||v.showImageHighlight()}t(ZE(a),YE(a),HE(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=ZE(e),a=YE(e),s=HE(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==Ot()(i).call(i,r)||-1!==Ot()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return"continue";c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(eR.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(eR.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame,o=void 0===r?eR.GEM:r;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=o,this.dataBoard[s][a].value=1;var c=this.dataBoard[s][a].cell;c.setFrameImageCell(o),c.setAlphaImageCell(1)}}var l=GE(this.dataBoard,e);this.handleCapturePiece(l),this.handlePraise(e,l),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(h){}},n.handleResetFrameBoard=function(){for(var e=0;e<iR;e++)for(var t=0;t<nR;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setAlpha(1),s.setFrameImageCell(a)}},n.handleGameOver=function(){if(!this.scene.isLevelComplete){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r].piece;t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}VE(this.dataBoard,t)&&(this.scene.isGameOver=!0,this.scene.disableInput(),this.runAnimationGameOver())}},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(es.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<nR;a++)i(a)},i=0;i<iR;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){}},n.getBoardByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=QE(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t},n.getFenByBoard=function(){for(var e="",t=0;t<iR;t++){for(var n="",i=0;i<nR;i++){var a=this.dataBoard[t][i],s=a.value,r=a.frame,o=JE(r)||"g";switch(s){case 0:n+=",x";break;case 1:n+=","+o}}e+="/"+(n=n.substring(1))}return e.substring(1)},n.startGame=function(e,t){if(e){for(var n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var s=e[n][a].frame,r=e[n][a].value,o=this.dataBoard[n][a];1===r&&(s&&s!==eR.GEM_TRANSPARENT||((0,i.R0)(new Error("MapByBoardError"),{level:this.scene.levelManager.getLevel(),row:n,col:a,frame:s,fen:t}),s=eR.GEM),o.value=1,o.frame=s,o.cell.setFrameImageCell(s),o.cell.setScale(0))}this.fadeIn()}},n.clearBoard=function(){for(var e=0;e<iR;e++)for(var t=0;t<nR;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=eR.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(eR.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=re()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},n.setFrameBoardByIndex=function(e,t,n){var i=this.dataBoard[e][t],a=i.cell;a.setFrameImageCell(n),i.frame=n,i.value=1,a.setScale(0)},n.getFrameByMapItemIndex=function(e){return LE[e]},n.fadeOut=function(){for(var e=[],t=0;t<iR;t++)for(var n=0;n<nR;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}if(!e||0===e.length)return null;var a=this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:1,to:0},scale:{from:1,to:0},paused:!0});return a.play(),a},n.fadeIn=function(){for(var e=[],t=0;t<iR;t++)for(var n=0;n<nR;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}e&&0!==e.length&&this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1},scale:{from:0,to:1},paused:!0}).play()},t}(Phaser.GameObjects.Container),oR=GameCore.Configs.Gameplay.VibrateValue,cR=Qa.Z.EFFECTS,lR=cR.KEY,hR=cR.FRAME,uR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createTweenScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(lR),this.particle.setDepth(qa.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:hR.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:ns.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(qa.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e,t=this,n=this.scene.storage.getState(),i=wc(n),a=this.scene.gameZone.width/2;Ot()(e=[xa,wa,_a]).call(e,i)>=0&&(a=105),this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){t.tweenHideScoreText=t.scene.tweens.add({targets:t.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:a,y:65,delay:1e3,duration:300,onComplete:function(){t.scoreText.setVisible(!1),t.scoreText.setAlpha(0),t.scoreText.setScale(0),t.scene.handleAddScoreAnim(t.score||0)}})}})},n.playAnimShowScoreText=function(){if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var e=this.scene.storage.getState(),t=0;if(wc(e)===Ra){var n=this.scene.layoutManager.objects.header;t=n.mainScoreBlock.score,n.mainScoreBlock.setScore(t+(this.score||0)),n.mainScoreBlock.setScoreText(t+(this.score||0))}}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:lR}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(qa.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(qa.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10,s=this.scene.targetMissionManager.getTargetType()===Jy;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),this.scoreText.setVisible(s),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),s&&(this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i));var r=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&mg(r),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return oR[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){var s=this.scene.targetMissionManager.getTargetType()===Jy?-40:0;switch(a){case hR.TEXT_COOL:case hR.TEXT_GOOD:case hR.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var r=this.praiseFrame,o=r.width/i,c=r.height/i;this.praiseFrame.setWorldSize(o,c);var l=this.praiseFrame.displayWidth,h=e,u=this.scene.gameZone.width;h=e-l/2<0?l/2+5:e+l/2>u?u-l/2-5:e,this.praiseFrame.setPosition(h,t+s),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return pm[e-1]||pm[0]||null},n.getMainFrameByLevel=function(e){var t=dm[e-1]||dm[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),dR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new rR(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new uR(this.scene)},n.updateUILandscape=function(){},t}(Phaser.GameObjects.Container),pR=dR,gR=function(){function e(e){this.scene=void 0,this.header=void 0,this.main=void 0,this.footer=void 0,this.group=void 0,this.scene=e,this.createGroup(),this.createObjects()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},t.createObjects=function(){this.createHeader(),this.createMain(),this.createFooter()},t.createHeader=function(){this.header=new VP(this.scene),this.group.add(this.header)},t.createMain=function(){this.main=new pR(this.scene),this.group.add(this.main)},t.createFooter=function(){this.footer=new rP(this.scene),this.group.add(this.footer)},e}(),fR=gR,mR=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),ER=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,-27),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e),this.scene.world.getScreenRatio()>.6&&(Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,40))}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(mR),vR=ER,SR=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone;this.objects.header.updateUILandscape(),this.objects.main.updateUILandscape(),this.objects.footer.updateUILandscape(),Phaser.Display.Align.In.Center(this.objects.header,t,0,-195),Phaser.Display.Align.In.Center(this.objects.main,t,0,20),Phaser.Display.Align.In.Center(this.objects.footer,t,300,0)}},t}(vR),AR=SR,TR=is.STATUS,yR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new fR(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new AR(this.scene):this.layout=new vR(this.scene),this.layout.setUIObjects(this.objects)},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.layout.alignUI,this)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init(),this.setState(TR.READY)},n.start=function(){this.isRunning()||this.setState(TR.RUNNING)},n.stop=function(){this.isRunning()&&this.setState(TR.STOPPED)},n.initUILogic=function(){GameCore.Utils.Valid.isDebugger()},t}(os),IR=yR,CR=GameCore.Configs,OR=CR.Board,bR=CR.Network,PR=Qa.Z.GAMEPLAY_32.FRAME,RR=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.layoutManager=void 0,n.tutorialManager=void 0,n.levelManager=void 0,n.mapManager=void 0,n.targetMissionManager=void 0,n.effectManager=void 0,n.isGameOver=void 0,n.isLevelComplete=void 0,n.restartCurrentLevel=0,n.startGameAt=void 0,n.run=function(){n.initManager();var e=n.storage.getState();!0!==Lc(e)&&n.storage.dispatch(Kh(!0)),n.updateCurrentBestScore(),n.preloadNextLevel(),n.startGame(),n.analytics.levelStart(n.levelManager.getLevel(),void 0,n.getLevelName())},n.create=function(){e.prototype.create.call((0,Va.Z)(n)),n.createBackground(ba.Z.BACKGROUND.KEY),n.createManager(),n.createScreens(),n.createInput(),n.input.setTopOnly(!0),n.preLoadAds()},n.onConfirm=function(){FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(Bh(1)),n.levelManager.setLevel(1),n.screen.close($a.o4.START_OVER_SCREEN),n.screen.close($a.o4.MISSION_COLLECTION_COMPLETE_SCREEN),n.handleRestartLevel()},n.handleClickStartOver=function(){n.screen.open($a.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.handlePauseGame=function(){n.isGameOver||n.isLevelComplete||(0,Va.Z)(n).screen.open($a.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.ads.showInterstitialAdAsync();case 6:n.analytics.showInterstitialAd(n.getSceneName()),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return");case 12:return e.prev=12,n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){})),this.ads.preloadRewardedVideoAsync().catch((function(e){}))},n.createManager=function(){this.layoutManager=new IR(this),this.tutorialManager=new AO(this),this.levelManager=new oC(this),this.mapManager=new cC(this),this.effectManager=new kb(this),this.targetMissionManager=new lC},n.initManager=function(){this.layoutManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createMissionScoreCompleteScreen(),this.createMissionCollectionCompleteScreen(),this.createCollectionCompletedScreen(),this.createNoSpaceLeftScreen(),this.createMissionFailScreen(),this.createSettingScreen(),this.createCollectionItemsScreen(),this.createLeaderboardScreen(),this.createDailyChallengeModeScreen(),this.createMiniJourneyScreen(),this.createTargetScoreScreen(),this.createClaimHeartScreen(),this.createStartOverScreen()},n.createLeaderboardScreen=function(){this.screen.add($a.o4.LEADER_BOARD_SCREEN,Mu)},n.createCollectionCompletedScreen=function(){this.screen.add($a.o4.COLLISION_COMPLETED_SCREEN,uC)},n.createMissionScoreCompleteScreen=function(){this.screen.add($a.o4.MISSION_SCORE_COMPLETE_SCREEN,fC)},n.createMissionCollectionCompleteScreen=function(){this.screen.add($a.o4.MISSION_COLLECTION_COMPLETE_SCREEN,SC)},n.createDailyChallengeModeScreen=function(){this.screen.add($a.o4.DAILY_CHALLENGE_SCREEN,zO)},n.createMissionFailScreen=function(){this.screen.add($a.o4.MISSION_FAIL_SCREEN,xC)},n.createNoSpaceLeftScreen=function(){this.screen.add($a.o4.NO_SPACE_LEFT_SCREEN,TC)},n.createSettingScreen=function(){this.screen.add($a.o4.SETTINGS_SCREEN,tO)},n.createCollectionItemsScreen=function(){this.screen.add($a.o4.COLLECTION_ITEMS_SCREEN,gO)},n.createMiniJourneyScreen=function(){this.screen.add($a.o4.MINI_JOURNEY_SCREEN,yb)},n.createTargetScoreScreen=function(){this.screen.add($a.o4.TARGET_SCORE_SCREEN,Pb)},n.createClaimHeartScreen=function(){this.screen.add($a.o4.CLAIM_HEART_SCREEN,KT)},n.createStartOverScreen=function(){this.screen.add($a.o4.START_OVER_SCREEN,Bb)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore(),n=this.storage.getState(),i=Sl(n).bestScore,a=void 0===i?0:i,s=t>a?t:a;e.bestScoreBlock.setScoreText(s)},n.openLevelScreen=function(){this.screen.open($a.o4.LEVEL_SCREEN)},n.handleNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleLoadMapComplete():(this.preloadNextLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}else{this.levelManager.increaseLevel();var n=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:n})}},n.handleSwitchJourney=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleSwitchMode():(this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}},n.handleSwitchMode=function(){var e,t=this.levelManager.getLevel();this.storage.dispatch((e={data:"",level:t,listPieceMap:[]},function(t,n){var i=window.game.player.getPlayerId(),a=n(),r=pl(a),o=(0,s.Z)({},r,e),c=o.data;o.data=Ah(c),t(bh(o)),Ql(Sh.JourneyMatchStore+"-"+i,o)})),FBInstant.player.setDataAsync({level:t}),this.mapManager.reloadMap(),this.clearFen()},n.handleLoadMapComplete=function(){this.levelManager.increaseLevel();var e=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:e}),this.mapManager.reloadMap()},n.handleGuideIfLevel1=function(){var e=this.storage.getState();ml(e)||1===this.levelManager.getLevel()&&this.tutorialManager.start()},n.startGame=function(){try{var e,t,n=this.layoutManager.objects,a=n.header,s=n.main,r=n.footer;null==(e=a.mainScoreBlock.addScore)||e.stop().remove(),a.mainScoreBlock.setScore(0),a.mainScoreBlock.setScoreText(0),a.progressBar.hideProgressBar(),a.progressBar.setPercent(0),this.isGameOver=!1,this.isLevelComplete=!1,this.mapManager.reloadMap(),null==(t=this.tutorialManager)||t.reset(),s.board.clearBoard(),r.pieces.clearPieces(),this.loadTargetByMap(),a.start(),this.loadBoardAndPieces(),this.loadTargetAmountByFen(),this.loadTextHeader(),this.restartCurrentLevel=0,this.openMissionScreen()}catch(o){this.handleRestartLevel(),(0,i.R0)(o,{scene:"Journey scene"})}},n.startGameAfterCollectionItemsScreenClose=function(){var e,t=this.layoutManager.objects.footer;this.startGameAt=(new Date).getTime();var n=this.storage.getState(),i=ml(n),a=((null==(e=pl(n))?void 0:e.data)||{}).fen;!a||i?(t.pieces.start(),this.handleGuideIfLevel1()):this.loadPiecesByFen(a)},n.openMissionScreen=function(){switch(this.targetMissionManager.getTargetType()){case qy:this.openCollectionItemsScreen();break;case Jy:this.openTargetScoreScreen()}},n.openCollectionItemsScreen=function(){var e=this,t=this.layoutManager.objects.header,n=t.collectItems.getJsonTarget();t.collectItems.hideListCollectItems(),this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open($a.o4.COLLECTION_ITEMS_SCREEN,{jsonTarget:n,duration:1500})}))},n.openTargetScoreScreen=function(){var e=this;this.disableInput(),this.layoutManager.objects.header.collectItems.reset(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open($a.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.showCollectItems=function(){this.layoutManager.objects.header.collectItems.showListCollectItems()},n.loadBoardAndPieces=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=ml(a),r=((null==(e=pl(a))?void 0:e.data)||{}).fen,o=null,c=null;if(r&&!s){var l=n.board.getBoardByFen(r);return o=this.handleDynamicFenSize(l),c=i.pieces.getPiecesByFen(r),this.isFenGameOver(o,c)?(this.clearFen(),this.loadBoardByMap(),void this.loadPiecesByMap()):void this.loadBoardByFen(r)}this.loadBoardByMap(),this.loadPiecesByMap()},n.loadBoardByFen=function(e){var t=this.layoutManager.objects.main,n=t.board.getBoardByFen(e);t.board.startGame(n,e)},n.loadBoardByMap=function(){for(var e=this.layoutManager.objects.main,t=this.mapManager.getTileMap().layers,n=t.length,a=0;a<n;a++)for(var s=t[a].data,r=0;r<s.length;r++)for(var o=s[r],c=0;c<o.length;c++){var l=o[c];if(!(l.index<0)){var h=e.board.getFrameByMapItemIndex(l.index-1);h&&h!==PR.GEM_TRANSPARENT||(h=e.board.getFrameByMapItemIndex(1),(0,i.R0)(new Error("MapByBoardError"),{index:l.index,level:this.levelManager.getLevel(),row:r,col:c})),e.board.setFrameBoardByIndex(r,c,h)}}e.board.fadeIn()},n.loadPiecesByFen=function(e){var t=this.layoutManager.objects.footer,n=t.pieces.getPiecesByFen(e);t.pieces.showAvailablePieces(n),this.loadListPieceMapByFen()},n.loadListPieceMapByFen=function(){var e=this.layoutManager.objects.footer,t=this.storage.getState(),n=pl(t).listPieceMap;n&&0!==n.length&&e.pieces.setListPieceMap(n)},n.loadPiecesByMap=function(){var e=this.layoutManager.objects.footer;e.pieces.buildPiecesByMap();var t=this.mapManager.getTileMap().getObjectLayer("spawnOrder");if(t)for(var n=t.objects,i=0;i<n.length;i++){var a=n[i],r=a.type,o=a.properties,c=e.pieces.getPieceDataByType(r);o&&(c=(0,s.Z)({},c,{properties:o})),c&&e.pieces.addItemPieceMap(c)}},n.loadTargetByMap=function(){var e=this.mapManager.getTileMap().properties;if(!e||!(0,Wf.isArray)(e)||e.length<2)throw new nO;var t=e[0].value,n=e[1].value;this.targetMissionManager.setTargetValue(t),this.targetMissionManager.setTargetType(n)},n.loadTargetAmountByFen=function(){var e,t=this.layoutManager.objects.header;t.collectItems.resetTextAmount();var n=this.storage.getState();if(!ml(n)){var i=((null==(e=pl(n))?void 0:e.data)||{}).jsonAmount;i&&0!==B()(i).length&&t.collectItems.updateJsonAmountByFen(i)}},n.loadTextHeader=function(){var e=this.layoutManager.objects.header,t=this.storage.getState();if(ml(t))return e.bestScoreBlock.showTextDay(),void e.bestScoreBlock.setDayText(this.getTextDay());var n=this.levelManager.getLevel();e.bestScoreBlock.showTextScore(),e.bestScoreBlock.setScoreText(n)},n.getTextDay=function(){var e,t=new Date,n="0"+t.getDate(),i="0"+(t.getMonth()+1),a=Ke()(e=String(t.getFullYear())).call(e,-2);return Ke()(i).call(i,-2)+"/"+Ke()(n).call(n,-2)+"/"+a},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.handleRestartLevel=function(){this.restartCurrentLevel>0||(this.game.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:this.lang.Text.RESTARTING_MAP,duration:bR.Timeout,loading:!0}),this.restartCurrentLevel++,this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this)),this.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR),this.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadCurrentMapError.bind(this)))},n.handleGameOver=function(){this.isGameOver=!0,this.screen.open($a.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0,this.clearFen();var t=this.storage.getState();if(ml(t)){var n,a=Yy(),s=Ja()(n=GameCore.Utils.Number).call(n,a,4,"0");this.analytics.event(Gt._.DAILY_CHALLENGE_FAIL,{level:a,levelName:"daily_challenge_"+s})}else this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=Zf(r),c=Yf(r),(l=o-NA.bonusLife)>NA.livesCapacity&&(l=NA.livesCapacity),l<0&&(l=0),t({type:ji,payload:{data:h={lives:l,lastBonusLifeTime:c}}}),e.next=13,window.FBInstant.player.setDataAsync({lives:h});case 13:Ql(DA.LivesStore+"-"+s,h),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()),this.analytics.levelFail(this.levelManager.getLevel(),void 0,this.getLevelName());this.screen.open($a.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){e.handleShowInterstitialAd().catch(i.tO),e.screen.open($a.o4.MISSION_FAIL_SCREEN)}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.piece.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.handleUpdateScore=function(e){var t=this.layoutManager.objects.header.mainScoreBlock.score+e;this.storage.dispatch(function(e){return{type:Yn,payload:{score:e}}}(t))},n.handleAddScoreAnim=function(e){this.layoutManager.objects.header.mainScoreBlock.animAddScore(e)},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=t.progressBar.getTargetScore();t.progressBar.setPercent(e/n)},n.handleCompleteScoreMission=function(){var e=this;if(!this.isGameOver&&this.targetMissionManager.getTargetType()===Jy){var t=this.layoutManager.objects.header.mainScoreBlock.score,n=parseInt(this.targetMissionManager.getTargetValue());if(!(t<n)){var a=this.storage.getState();if(ml(a)){var s,o=Yy(),c=Ja()(s=GameCore.Utils.Number).call(s,o,4,"0");this.handleSwitchJourney(),this.analytics.event(Gt._.DAILY_CHALLENGE_END,{level:o,levelName:"daily_challenge_"+c})}else this.handleNextLevel(),this.analytics.levelComplete(n,void 0,this.getLevelName());this.isGameOver=!0,this.screen.open($a.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}},n.canUpdateFenMatch=function(){var e=this.storage.getState(),t=ml(e);return!(this.isGameOver||this.isLevelComplete||t)},n.updateMatchData=function(){var e;if(this.canUpdateFenMatch()){var t=this.layoutManager.objects,n=t.header,i=t.footer,a=this.getFen(),r=this.storage.getState(),o=pl(r).data||{},c=gl(r),l=El(r)||0,h=this.levelManager.getLevel(),u=n.collectItems.getJsonAmount(),d=i.pieces.getListPieceMap();this.storage.dispatch(Ih(c,{score:l,data:(0,s.Z)({},o,{fen:a,jsonAmount:(0,s.Z)({},u)}),level:h,updateAt:Date.now(),listPieceMap:m()(e=[]).call(e,d)}))}},n.clearFen=function(){var e=this.storage.getState(),t=gl(e),n=this.levelManager.getLevel();this.storage.dispatch(Ih(t,{score:0,data:{fen:"",jsonAmount:{}},level:n,listPieceMap:[],updateAt:Date.now()}))},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case gm:case fm:case mm:n.push({data:VI.getData(s,r,o)});break;case Em:case vm:case Sm:case Am:n.push({data:zI.getData(s,r)});break;case Tm:case ym:case Im:n.push({data:jI.getData(s)});break;case Om:n.push({data:JI.getData(r)});break;case bm:n.push({data:aC.getData(r)});break;case km:n.push({data:rC.getData(r)});break;case Rm:case wm:case xm:case _m:n.push({data:QI.getData(s,r)});break;case Cm:n.push({data:eC.getData(r)});break;case Pm:n.push({data:nC.getData()})}}return VE(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=m()(t=[]).call(t,e);if(n>OR.rows)za()(a).call(a,OR.rows,n-OR.rows);else if(i<OR.rows)for(var s=0;s<OR.rows-n;s++){var r;a.push(ja()(r=new Array(n)).call(r,{value:0,frame:PR.GEM_TRANSPARENT}))}return i>OR.cols?a.forEach((function(e){za()(e).call(e,OR.cols,i-OR.cols)})):i<OR.cols&&a.forEach((function(e){for(var t=0;t<OR.cols-i;t++)e.push({value:0,frame:PR.GEM_TRANSPARENT})})),a},n.handleCollectionItemsComplete=function(){var e=this;if(this.targetMissionManager.getTargetType()!==Jy&&this.layoutManager.objects.header.collectItems.checkCompleteMission()){this.clearFen(),this.audio.playSound(es.Z.TARGET_REACHED);var t=this.levelManager.getLevel(),n=this.storage.getState();if(pl(n).challengeMode){var a,s=Yy(),o=Ja()(a=GameCore.Utils.Number).call(a,s,4,"0");this.handleSwitchJourney(),this.analytics.event(Gt._.DAILY_CHALLENGE_END,{level:s,levelName:"daily_challenge_"+o})}else this.handleNextLevel(),this.analytics.levelComplete(t,void 0,this.getLevelName());t>Uf.length-1&&this.time.delayedCall(2e3,(function(){e.game.globalScene.screen.open($a.o4.NOTIFY_SCREEN,{message:e.lang.Text.UPDATING_NEW_LEVELS,duration:1e3}),e.time.delayedCall(1e3,(function(){e.scene.switch(Ua.Co.LEVEL_SCENE)}))})),this.screen.open($a.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.showPopupCompleteScreenAfterCollectionCompleted=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!ml(t)){e.next=8;break}return n=(new Date).getTime()-this.startGameAt,((i=IO(t))>n||0==i)&&(this.storage.dispatch(tb({time:n,limit:100,offset:0})),this.storage.dispatch(Nh())),this.screen.open($a.o4.DAILY_CHALLENGE_SCREEN),e.abrupt("return");case 8:if(this.targetMissionManager.getTargetType()!==Jy){e.next=11;break}return this.screen.open($a.o4.MISSION_SCORE_COMPLETE_SCREEN),e.abrupt("return");case 11:this.screen.open($a.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevelCompleted=function(e){this.targetMissionManager.getTargetType()!==Jy&&(this.isLevelComplete=e)},n.handleRetryLevel=function(){var e=this.storage.getState();if(pl(e).challengeMode){var t,n=Yy(),i=Ja()(t=GameCore.Utils.Number).call(t,n,4,"0");this.analytics.event(Gt._.DAILY_CHALLENGE_BEGIN,{level:n,levelName:"daily_challenge_"+i})}else this.analytics.levelStart(this.levelManager.getLevel(),void 0,this.getLevelName());this.layoutManager.objects.header.progressBar.reset(),this.clearFen(),this.startGame()},n.preloadNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key,n=e.mapJson;"level-from-json"!==t&&(this.cache.tilemap.exists(t)||(this.load.tilemapTiledJSON(t,n),this.load.start()))}},n.preloadCurrentLevel=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)?this.handleLoadCurrentMapComplete():(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.handleLoadCurrentMapComplete=function(){var e=this.game.globalScene;this.mapManager.reloadMap(),this.clearFen(),this.startGame(),e.screen.close($a.o4.NOTIFY_SCREEN)},n.handleLoadCurrentMapError=function(e){var t=this.game.globalScene,n=new nA("Load resources at LoadScene failed.");(0,i.R0)(n,{file:null==e?void 0:e.url}),t.screen.close($a.o4.NOTIFY_SCREEN)},n.getLevelName=function(){var e,t=this.levelManager.getLevel();return"journey_"+Ja()(e=GameCore.Utils.Number).call(e,t,4,"0")},t}(Du.Z),wR=RR;null==(eb=void 0)||eb.accept(GameCore.LiveUpdate.Scene(Ua.Co.JOURNEY_SCENE));var xR,_R=wR,kR=function(e){if("string"!==typeof e||!e)throw new $c(null,{imageShare:e})},LR=Qa.Z.GAMEPLAY,MR=LR.KEY,DR=LR.FRAME,NR=function(e){function t(t){var n;return(n=e.call(this,t,MR,DR.BUTTON_WOOD_SMALL)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:MR,frame:DR.ICON_HOME});e.setWorldSize(34,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(ts.Z),BR=NR,GR=Qa.Z.DEFAULT,FR=GR.KEY,UR=GR.FRAME,HR=function(e){function t(t){var n;return(n=e.call(this,t,FR,UR.BUTTON_GREEN)||this).nextLevel=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.nextLevel=this.scene.make.image({key:FR,frame:UR.TEXT_NEXT_LEVEL}),this.nextLevel.setWorldSize(this.nextLevel.width/e,this.nextLevel.height/e),this.add(this.nextLevel),Phaser.Display.Align.In.Center(this.nextLevel,this,0,-1)},t}(ts.Z),ZR=HR,YR=Qa.Z.DEFAULT,VR=YR.KEY,WR=YR.FRAME,zR=function(e){function t(t){var n;return(n=e.call(this,t,VR,WR.BUTTON_GREEN)||this).textStartOver=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.textStartOver=this.scene.make.image({key:VR,frame:WR.TEXT_START_OVER});var t=this.textStartOver,n=t.width,i=t.height;this.textStartOver.setWorldSize(n/e,i/e),this.add(this.textStartOver),Phaser.Display.Align.In.Center(this.textStartOver,this,0,-1)},t}(ts.Z),KR=zR,jR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonPlay=void 0,n.buttonStartOver=void 0,n.buttonHome=void 0,n.scene=t,n.init(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createButton()},n.createButton=function(){this.createButtonPlay(),this.createButtonStartOver(),this.createButtonHome()},n.createButtonPlay=function(){this.buttonPlay=new ZR(this.scene),this.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this,40,1)},n.createButtonStartOver=function(){this.buttonStartOver=new KR(this.scene),this.add(this.buttonStartOver),Phaser.Display.Align.In.Center(this.buttonStartOver,this,0,1)},n.createButtonHome=function(){this.buttonHome=new BR(this.scene),this.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this,-90,1)},n.updateTextButtonPlay=function(){var e=this.scene.storage.getState(),t=fl(e),n=this.scene.world.getPixelRatio();1===t?this.buttonPlay.nextLevel.setFrame(Qa.Z.DEFAULT.FRAME.TEXT_PLAY):this.buttonPlay.nextLevel.setFrame(Qa.Z.DEFAULT.FRAME.TEXT_NEXT_LEVEL),this.buttonPlay.nextLevel.setWorldSize(this.buttonPlay.nextLevel.width/n,this.buttonPlay.nextLevel.height/n)},t}(Phaser.GameObjects.Container),XR=jR,JR=Qa.Z.DEFAULT,qR=JR.KEY,QR=JR.FRAME,$R=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,qR,QR.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,Va.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),ew=$R,tw=Qa.Z.DEFAULT,nw=tw.KEY,iw=tw.FRAME,aw=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.livesTimer=void 0,n.scene=t,t.add.existing((0,Va.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createText(),this.createLivesTimer()},n.createText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:nw,frame:iw.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.add(t),Phaser.Display.Align.In.Center(t,this,0,14)},n.createLeaf=function(){var e=new ew(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,e.displayHeight/2-30)},n.createLivesTimer=function(){this.livesTimer=new LT(this.scene),this.livesTimer.startIntervalTimer(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,50)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=Zf(e);this.livesTimer.setLives(t)},t}(Phaser.GameObjects.Container),sw=aw,rw=function(e){return e.PASSED="passed",e.READY="ready",e.WAITING="waiting",e}({}),ow=Qa.Z.DEFAULT,cw=ow.KEY,lw=ow.FRAME,hw=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.tick=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createImageCheck(),this.createText(),this.updateSize(),this.alignLevelItem(),this.setInteractive(),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.audio.playSound(es.Z.BUTTON_CLICK),e.tweenClick?e.tweenClick.play():e.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:cw,frame:lw.LEVEL_PLAYING}),this.levelBackground.setWorldSize(75,60),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:cw,frame:lw.ICON_CHECK}),this.tick.setWorldSize(30,23),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:ns.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:""+this.level,origin:{x:.2,y:.5}}),this.levelNumber.setAlpha(.7),this.levelNumber.setTint(7813671),this.add(this.levelNumber)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case rw.PASSED:this.levelNumber.setAlpha(.7),this.levelBackground.setFrame(lw.LEVEL_PLAYED),this.tick.setVisible(!0);break;case rw.READY:this.levelNumber.setAlpha(.7),this.setInteractive(),this.createTweenClick(),this.levelBackground.setFrame(lw.LEVEL_PLAYING),this.tick.setVisible(!1);break;case rw.WAITING:this.levelNumber.setAlpha(.5),this.levelBackground.setFrame(lw.LEVEL_LOCKED),this.tick.setVisible(!1)}},n.updateInfo=function(e){this.payload=(0,s.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:t-.1},onComplete:function(){e.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){this.levelNumber.setText(""+this.payload.level),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.tick,this.levelBackground,25,10),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e},t}(Phaser.GameObjects.Container),uw=Qa.Z.DEFAULT,dw=uw.KEY,pw=uw.FRAME,gw=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,Va.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:dw,frame:pw.BG_DARK}),this.background.setWorldSize(325,64),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,s.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new hw(this.scene,{level:1,status:rw.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-120,0),this.levelItem2=new hw(this.scene,{level:2,status:rw.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-40,0),this.levelItem3=new hw(this.scene,{level:3,status:rw.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,40,0),this.levelItem4=new hw(this.scene,{level:4,status:rw.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,120,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),fw=Qa.Z.DEFAULT,mw=fw.KEY,Ew=fw.FRAME,vw=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backgroundContent=void 0,n.backgroundContainer=void 0,n.scroller=void 0,n.createBackground=function(){n.backgroundContainer=n.scene.make.container({});var e=(n.scene.gameZone.height-385)/2+20,t=n.scene.make.image({key:mw,frame:Ew.BG_TOP});t.setWorldSize(375,e);var i=n.scene.make.image({key:mw,frame:Ew.BG_BOTTOM});i.setWorldSize(375,e);var a=n.scene.make.image({key:mw,frame:Ew.BG_MIDDLE});a.setWorldSize(375,415),n.backgroundContainer.add([t,a,i]),Phaser.Display.Align.In.Center(a,n.backgroundContainer,0,0),Phaser.Display.Align.In.Center(t,a,0,-a.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,a,0,a.displayHeight/2+i.displayHeight/2),Phaser.Display.Align.In.Center(n.backgroundContainer,n.scene.gameZone,0,-29),n.scene.world.getScreenRatio()>.6&&Phaser.Display.Align.In.Center(n.backgroundContainer,n.scene.gameZone,0,-5),n.backgroundContainer.setDepth(qa.Z.BACKGROUND),n.setSizeBackground(t.displayHeight+a.displayHeight+i.displayHeight)},n.scene=t,n.init(),n.createReuseScroller(),n.scene.add.existing((0,Va.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackgroundContent(),this.createBackground()},n.createReuseScroller=function(){this.scroller=new vu(this.scene,{classType:gw,listConfigs:[],width:325,height:385,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scroller.setVisible(!1),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Qa.Z.DEFAULT.KEY,Qa.Z.DEFAULT.FRAME.BLANK,40,1528359),this.scroller.createMask(),this.scroller.setPosition(0,-5),this.add(this.scroller)},n.setSizeBackground=function(e){var t=e*this.backgroundContent.displayWidth/this.backgroundContent.displayHeight;this.backgroundContent.setWorldSize(t,e)},n.updateData=function(){var e=this.scene.storage.getState(),t=fl(e);0===t&&(t=1);for(var n=[],i={levelItem1:{status:"",level:0}},a={levelItem1:{status:"",level:0}},r=1;r<Uf.length;r++){var o="";o=r>t?rw.WAITING:r<t?rw.PASSED:rw.READY;var c="";switch(r%4){case 1:c="levelItem1";break;case 2:c="levelItem2";break;case 3:c="levelItem3";break;case 0:c="levelItem4"}i[c]={level:r,status:o},a[c]={level:r,status:o},r%4===0&&(n.push((0,s.Z)({},i)),a={levelItem1:{status:"",level:0}})}(Uf.length-1)%4>0&&n.push((0,s.Z)({},a)),this.scroller.updateConfig(n);var l=this.scroller.getChildren()[0].height;if(this.scroller.value=-l*this.showDefaultLevel(t),t>Uf.length)this.scene.game.globalScene;else this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.floor((e-1)/4),n=Math.floor((Uf.length-1)/4);return n-t<3?n-5:t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.resetScroller=function(){this.scroller.destroy(),this.createReuseScroller()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},n.createBackgroundContent=function(){this.backgroundContent=this.scene.make.image({key:mw,frame:Ew.BG_DARK}),this.backgroundContent.setWorldSize(340,399),this.add(this.backgroundContent)},t}(Phaser.GameObjects.Container),Sw=vw,Aw=function(){function e(e){this.scene=void 0,this.header=void 0,this.main=void 0,this.footer=void 0,this.group=void 0,this.scene=e,this.createGroup(),this.createObjects()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},t.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},t.createHeader=function(){this.header=new sw(this.scene),this.header.setDepth(qa.Z.BACKGROUND),this.group.add(this.header)},t.createMain=function(){this.main=new Sw(this.scene),this.group.add(this.main)},t.createFooter=function(){this.footer=new XR(this.scene),this.footer.setDepth(qa.Z.BACKGROUND),this.group.add(this.footer)},e}(),Tw=Aw,yw=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Iw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).guideUI=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,-15),Phaser.Display.Align.In.Center(this.objects.main,e,0,-24),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-90),this.scene.world.getScreenRatio()>.6&&(Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,0),Phaser.Display.Align.In.Center(this.objects.main,e,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-45))}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(yw),Cw=Iw,Ow=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(e.prototype.alignUI.call(this),null!==this.objects){var t=this.scene.gameZone;this.objects.main.backgroundContainer.setVisible(!1),this.objects.main.backgroundContent.setVisible(!1),this.objects.main.scroller.setSize(325,325),this.objects.main.scroller.createMask(),this.objects.footer.setScale(.9),Phaser.Display.Align.In.TopCenter(this.objects.header,t,0,-10),Phaser.Display.Align.In.Center(this.objects.main,t,0,0),Phaser.Display.Align.In.BottomCenter(this.objects.footer,t,0,-60)}},t}(Cw),bw=Ow,Pw=is.STATUS,Rw=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Tw(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new bw(this.scene):this.layout=new Cw(this.scene),this.layout.setUIObjects(this.objects)},n.registerEvents=function(){this.scene.world.events.on(Ft.Z.RESIZE,this.layout.alignUI,this)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(Pw.READY)},n.start=function(){this.isRunning()||this.setState(Pw.RUNNING)},n.stop=function(){this.isRunning()&&this.setState(Pw.STOPPED)},n.initUILogic=function(){GameCore.Utils.Valid.isDebugger()},t}(os),ww=Rw,xw=GameCore.Configs.Network,_w=Qa.Z.DEFAULT,kw=(_w.KEY,_w.FRAME,function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).layoutManager=void 0,n.run=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.initManager(),e.next=3,n.checkReceiveLevelFromFb();case 3:n.layoutManager.objects.header.updateTextLives(),n.loadLevelConfig();case 6:case"end":return e.stop()}}),e)}))),n.create=function(){e.prototype.create.call((0,Va.Z)(n)),n.createBackground(ba.Z.BACKGROUND.KEY),n.createManager(),n.createLeaderBoardScreen(),n.createClaimHeartScreen(),n.createStartOverScreen(),n.listenEvents()},n.clickButtonHome=function(){n.scene.switch(Ua.Co.DASHBOARD_SCENE)},n.onConfirm=function(){var e=n.layoutManager.objects.main;FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(Bh(1)),e.resetScroller(),n.loadLevelConfig(),e.updateData()},n.handleClickStartOver=function(){n.screen.open($a.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.checkFinishAllLevel=function(){var e=n.layoutManager.objects.footer,t=n.storage.getState();if(fl(t)>=Uf.length)return e.buttonPlay.setVisible(!1),void e.buttonStartOver.setVisible(!0);e.buttonPlay.setVisible(!0),e.buttonStartOver.setVisible(!1)},n.clickLeaderBoard=function(){n.screen.open($a.o4.LEADER_BOARD_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.startGame=function(){var e=this.layoutManager.objects,t=e.footer,n=e.main;n.updateData(),this.checkFinishAllLevel(),t.updateTextButtonPlay(),n.scroller.setVisible(!0)},n.createManager=function(){this.layoutManager=new ww(this)},n.initManager=function(){this.layoutManager.init()},n.createClaimHeartScreen=function(){this.screen.add($a.o4.CLAIM_HEART_SCREEN,KT)},n.createStartOverScreen=function(){this.screen.add($a.o4.START_OVER_SCREEN,Bb)},n.listenEvents=function(){var e=this.layoutManager.objects.footer;e.buttonHome.onClick=this.clickButtonHome.bind(this),e.buttonPlay.onClick=this.handlePlay.bind(this),e.buttonStartOver.onClick=this.handleClickStartOver},n.handlePlay=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!(Zf(t)<1)){e.next=5;break}return this.screen.open($a.o4.CLAIM_HEART_SCREEN),e.abrupt("return");case 5:n=fl(t),this.storage.dispatch(Nh()),this.analytics.levelStart(n,void 0,this.getLevelName(n)),this.storage.dispatch(Jh());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!fl(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.storage.dispatch(Dh());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.game,t=e.globalScene,n=e.lang;t.screen.open($a.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:xw.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.game.globalScene.screen.close($a.o4.NOTIFY_SCREEN)},n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=fl(e);0===t&&(t=1);var n=Uf[t];n||(n=Uf[Uf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.load.tilemapTiledJSON(s,r),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.handleInviteFriends=function(){this.storage.dispatch((0,r.Z)(u().mark((function e(){var t,n,a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open($a.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,Rl();case 5:return c=e.sent,kR(c),l=n.getPlayer(),h=l.playerId,d=l.name,p=l.photo,e.next=10,s.inviteAsync({template:Ia,cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:c||"",data:{playerId:h,playerName:d,playerPhoto:p,type:Ia}});case 10:a.event(Gt._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Gt._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close($a.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},n.createLeaderBoardScreen=function(){this.screen.add($a.o4.LEADER_BOARD_SCREEN,Mu)},n.getLevelName=function(e){var t;return"journey_"+Ja()(t=GameCore.Utils.Number).call(t,e,4,"0")},t}(Du.Z)),Lw=kw;null==(xR=void 0)||xR.accept(GameCore.LiveUpdate.Scene(Ua.Co.LEVEL_SCENE));var Mw=Lw,Dw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return Ot()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,s.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,r=void 0!==a&&a;this.data=t,this.supportedLanguages=B()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,r)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,s=t.maxHeight,r=void 0===s?Phaser.Math.MAX_SAFE_INTEGER:s,o=t.align,c=void 0===o?"center":o,l=t.drawMaxBoxDebug,h=void 0!==l&&l,u=e.make.bitmapText(t);for("center"===c?u.setCenterAlign():"left"===c?u.setLeftAlign():"right"===c&&u.setRightAlign(),Ot()(n=t.text||"").call(n," ")>=0&&u.setMaxWidth(a);u.width>a||u.height>=r;)u.setFontSize(.95*u.fontSize);if(h&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),u&&u.visible&&u.active){var e=u.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-u.originX)*u.width,n-.5*r+(.5-u.originY)*u.height,a,r)}}))}return u},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,s=n||Phaser.Math.MAX_SAFE_INTEGER;for(Ot()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=s;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),Nw={en:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NO ADS TO DISPLAY!","NO_REWARDS":"SORRY, NO REWARDS!","CANCELLED_AD":"YOU HAVE CANCELLED THE AD!","LOADING":"LOADING...","LOADING_AD":"LOADING AD ...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Leaderboard is empty!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Target score","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Loading level","SCORE_REACHED":"SCORE REACHED!","WELL_DONE":"WELL  DONE!","Level":"Level","Completed":"Completed","COMPLETED":"COMPLETED","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"UPDATING NEW LEVELS...","RESTARTING_MAP":"RESTARTING MAP...","CANCEL":"Cancel","OK":"OK","CONFIRM_START_OVER":"CONFIRM START OVER","MESS_START_OVER":"Are you sure to start over?","mmddyy":"Date","Anonymous":"Anonymous"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ru:JSON.parse('{"Text":{"POP JEWELS":"\u0412\u0417\u0420\u042b\u0412\u041d\u042b\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","DAY_{X}":"\u0414\u0415\u041d\u042c {X}","PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","DAILY_MISSION":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","PASS_10_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418 10 \u0423\u0420\u041e\u0412\u041d\u0415\u0419","COLLECT_300_DIAMONDS":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2_FRIENDS":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL_SCORES":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u041e\u041b\u0423\u0427\u0418 \u041f\u0420\u042f\u041c\u041e \u0421\u0415\u0419\u0427\u0410\u0421!","TARGET":"\u0426\u0415\u041b\u042c","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","YOUR_SCORE":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","LOADING_INTERSTITIAL_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","HAMMER_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","MAGIC_BOTTLE_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","FAILED_TEXT":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","HOME":"\u0414\u041e\u041c\u041e\u0419","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_FOR_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","VS":"\u041f\u0420\u041e\u0422\u0418\u0412","GUIDE_TEXT_GEM":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_TEXT_CURRENT_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_TEXT_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","GUIDE_TEXT_RAINBOW_GEM":"\u0420\u0410\u0414\u0423\u0416\u041d\u042b\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422 \u041c\u041e\u0416\u0415\u0422 \u0423\u0411\u0420\u0410\u0422\u042c \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b, \u041a\u041e\u0422\u041e\u0420\u042b\u0415 \u0415\u0413\u041e \u041e\u041a\u0420\u0423\u0416\u0410\u042e\u0422","GUIDE_TEXT_HAMMER":"\u042d\u0422\u041e \u041c\u041e\u041b\u041e\u0422\u041e\u041a. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0413\u041e, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422!","GUIDE_TEXT_SHUFFLE":"\u042d\u0422\u041e \u041f\u041b\u0418\u0422\u041a\u0410 \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0418\u0412\u0410\u041d\u0418\u042f. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0410\u0422\u042c \u0412\u0421\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","GUIDE_TEXT_MAGIC_BOTTLE":"\u042d\u0422\u041e \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","NO_ADS_TO_DISPLAY":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","NO_REWARDS":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!","CANCELLED_AD":"\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","LOADING_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","CLOSE":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","LEADERBOARD_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","MESSAGE_INVITE":"{Playername} \u0431\u0440\u043e\u0441\u0430\u0435\u0442 \u0432\u044b\u0437\u043e\u0432 \u0432\u0430\u043c","MESSAGE_FINISH_MATCH":"{Playername} \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0445 \u0441\u0435\u0439\u0447\u0430\u0441.","MESSAGE_BEST_SCORE":"{playername} \u043f\u043e\u0431\u0435\u0434\u0438\u043b \u0432\u0430\u0448 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0431\u0430\u043b\u043b. \u0418\u0445 \u043e\u0446\u0435\u043d\u043a\u0430: {\u0438\u0433\u0440\u043e\u043a\u0438}","MESSAGE_FINISH_TURN":"{Playername} \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043e\u0446\u0435\u043d\u043a\u0438. \u0422\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e! \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c?","SHARE_LEADERBOARDS":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","SHARE_GAME_RESULTS":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","SHARE_BEST_SCORE":"\u0411\u043e\u043b\u044c\u0448\u043e\u0439! \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442!","TARGET_SCORE":"\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u0441\u0447\u0435\u0442","NO_SPACE_LEFT":"\u041c\u0415\u0421\u0422\u0410 \u041d\u0415 \u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c!","FULL":"\u041f\u043e\u043b\u043d\u044b\u0439","LOADING_LEVEL":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410","SCORE_REACHED":"\u0421\u0427\u0415\u0422 \u0414\u041e\u0421\u0422\u0418\u0413\u041d\u0423\u0422!","WELL_DONE":"\u041e\u0422\u041b\u0418\u0427\u041d\u041e!","Level":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","Completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d","COMPLETED":"\u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041d","Next_life":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0436\u0438\u0437\u043d\u044c","MESS_TUTORIAL_1":"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0431\u043b\u043e\u043a \u0432 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e \\n\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f!","MESS_TUTORIAL_2":"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \\n\u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e.","MESS_TUTORIAL_3":"\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0432\u0430\u0434\u0440\u0430\u0442 3x3.\\n\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!","MESS_TUTORIAL_4":"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043b\u0438\u043d\u0438\u0438 \u0438 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u044b \\n\u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u0431\u043e-\u043e\u0447\u043a\u0438!","COMBO":"\u041a\u041e\u041c\u0411\u041e","STREAK":"\u0421\u0422\u0420\u0418\u041a","MESS_SKIP_TUTORIAL":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435\\n\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0443\u0440\u043e\u043a?","MESS_TAKE_A_BREAK_ADS":"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\\n\u041f\u043e\u043a\u0430\u0437 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0432 %s...","UPDATING_NEW_LEVELS":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","RESTARTING_MAP":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","CANCEL":"\u041e\u0442\u043c\u0435\u043d\u0430","OK":"\u0414\u0430","CONFIRM_START_OVER":"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0414\u0418\u0422\u042c \u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410","MESS_START_OVER":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430?","mmddyy":"\u0414\u0430\u0442\u0430","Anonymous":"\u0410\u043d\u043e\u043d\u0438\u043c"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),pt:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"JOGAR","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"N\xedvel","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"SEM AN\xdaNCIOS A EXIBIR!","NO_REWARDS":"DESCULPA, N\xc3O H\xc1 RECOMPENSAS!","CANCELLED_AD":"CANCELASTE O AN\xdaNCIO!","LOADING":"A CARREGAR...","LOADING_AD":"A CARREGAR AN\xdaNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"A tabela de classifica\xe7\xe3o est\xe1 vazia!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xd3ptimo! Tenho uma das melhores pontua\xe7\xf5es!","TARGET_SCORE":"Pontua\xe7\xe3o alvo","NO_SPACE_LEFT":"N\xc3O TEM MAIS ESPA\xc7O!","FULL":"Completo","LOADING_LEVEL":"A carregar n\xedvel","SCORE_REACHED":"PONTUA\xc7\xc3O ATINGIDA!","WELL_DONE":"BEM FEITO!","Level":"N\xedvel","Completed":"Conclu\xeddo","COMPLETED":"CONCLU\xcdDO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"Coloca o bloco na linha horizontal\\ne olha o que acontece!","MESS_TUTORIAL_2":"Agora olha para o que\\nacontece quando fazes uma linha vertical.","MESS_TUTORIAL_3":"Tamb\xe9m se pode fazer um quadrado 3x3.\\nExperimenta!","MESS_TUTORIAL_4":"Organiza linhas e quadrados para\\nobter pontos de combina\xe7\xe3o!","COMBO":"Combina\xe7\xe3o","STREAK":"MAR\xc9 DE SORTE","MESS_SKIP_TUTORIAL":"Tens a certeza de que\\nqueres saltar o tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZA\xc7\xc3O DE NOVOS N\xcdVEIS...","RESTARTING_MAP":"A REINICIAR O MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"TENS A CERTEZA DE RECOME\xc7AR?","MESS_START_OVER":"Tens a certeza de recome\xe7ar?","mmddyy":"Data","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),fr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEAU","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"AUCUNE PUBLICIT\xc9 \xc0 AFFICHER!","NO_REWARDS":"D\xc9SOL\xc9, AUCUNE R\xc9COMPENSE!","CANCELLED_AD":"VOUS AVEZ ANNUL\xc9 LA PUBLICIT\xc9!","LOADING":"CHARGEMENT EN COURS...","LOADING_AD":"CHARGEMENT DES PUBLICIT\xc9S...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Le classement est vide!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"G\xe9nial\xa0! J\u2019ai un meilleur score!","TARGET_SCORE":"Score cible","NO_SPACE_LEFT":"IL NE RESTE PLUS D\'ESPACE!","FULL":"Plein","LOADING_LEVEL":"Chargement du niveau...","SCORE_REACHED":"SCORE ATTEINT!","WELL_DONE":"BIEN JOU\xc9!","Level":"Niveau","Completed":"Termin\xe9","COMPLETED":"TERMIN\xc9","Next_life":"Vie suivante","MESS_TUTORIAL_1":"Placez le bloc dans la ligne horizontale et\\nconstatez le r\xe9sultat!","MESS_TUTORIAL_2":"\xc0 pr\xe9sent, d\xe9couvrez ce qui se passe\\nquand vous faites une ligne verticale.","MESS_TUTORIAL_3":"Vous pouvez aussi faire un carr\xe9 de 3x3.\\nEssayez pour voir!","MESS_TUTORIAL_4":"Assemblez des lignes et des carr\xe9s\\npour obtenir des points de combinaison!","COMBO":"COMBO","STREAK":"S\xc9RIE","MESS_SKIP_TUTORIAL":"Voulez-vous vraiment\\nignorer le tutoriel?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MISE \xc0 JOUR DE NOUVEAUX NIVEAUX...","RESTARTING_MAP":"RED\xc9MARRAGE DE LA CARTE...","CANCEL":"Annuler","OK":"OK","CONFIRM_START_OVER":"CONFIRMER POUR RECOMMENCER","MESS_START_OVER":"Voulez-vous vraiment\\nrecommencer?","mmddyy":"Date","Anonymous":"Anonyme"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),hi:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0932\u0947\u0935\u0932","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0926\u093f\u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","NO_REWARDS":"\u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","CANCELLED_AD":"\u0906\u092a\u0928\u0947 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","LOADING":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948\u0902...","LOADING_AD":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u092c\u095d\u093f\u092f\u093e! \u092e\u0948\u0902\u0928\u0947 \u0936\u093e\u0928\u0926\u093e\u0930 \u0938\u094d\u0915\u094b\u0930 \u092c\u0928\u093e\u092f\u093e \u0939\u0948!","TARGET_SCORE":"\u091f\u093e\u0930\u0917\u0947\u091f \u0938\u094d\u0915\u094b\u0930","NO_SPACE_LEFT":"\u091c\u0917\u0939 \u0928\u0939\u0940\u0902 \u092c\u091a\u0940!","FULL":"\u092a\u0942\u0930\u093e","LOADING_LEVEL":"\u0932\u0947\u0935\u0932 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","SCORE_REACHED":"\u0938\u094d\u0915\u094b\u0930 \u092a\u0939\u0941\u0902\u091a \u0917\u092f\u093e!","WELL_DONE":"\u092c\u0939\u0941\u0924 \u092c\u095d\u093f\u092f\u093e!","Level":"\u0932\u0947\u0935\u0932","Completed":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","COMPLETED":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","Next_life":"\u0905\u0917\u0932\u093e \u091c\u0940\u0935\u0928","MESS_TUTORIAL_1":"\u092c\u094d\u0932\u0949\u0915 \u0915\u094b \u0939\u0949\u0930\u093f\u091c\u0949\u0928\u094d\u091f\u0932 \u0932\u093e\u0907\u0928 \u092e\u0947\u0902 \u0930\u0916\u0947\u0902\\n\u0914\u0930 \u0926\u0947\u0916\u0947\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e \u0939\u0948!","MESS_TUTORIAL_2":"\u0905\u092c \u0926\u0947\u0916\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e\\n\u0939\u0948 \u091c\u092c \u0906\u092a \u0935\u0930\u094d\u091f\u093f\u0915\u0932 \u0932\u093e\u0907\u0928 \u092c\u0928\u093e\u0924\u0947 \u0939\u0948\u0902.","MESS_TUTORIAL_3":"\u0938\u093e\u0925 \u0939\u0940 \u0906\u092a 3x3 \u0915\u0947 \u0935\u0930\u094d\u0917 \u092d\u0940 \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902.\\n\u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902!","MESS_TUTORIAL_4":"\u0915\u0949\u092e\u094d\u092c\u094b \u092a\u0949\u0907\u0902\u091f\u094d\u0938 \u092a\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0932\u093e\u0907\u0928\\n\u0914\u0930 \u0935\u0930\u094d\u0917 \u0915\u094b \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0930\u0916\u0947\u0902!","COMBO":"\u0915\u0949\u092e\u094d\u092c\u094b","STREAK":"\u0938\u094d\u091f\u094d\u0930\u0940\u0915","MESS_SKIP_TUTORIAL":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u0907\u0938 \u091f\u094d\u092f\u0942\u091f\u094b\u0930\u093f\u092f\u0932\\n\u0915\u094b \u091b\u094b\u095c\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u0928\u090f \u0932\u0947\u0935\u0932 \u0905\u092a\u0921\u0947\u091f \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","RESTARTING_MAP":"\u092e\u0948\u092a \u0915\u094b \u0930\u0940\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u093f\u092f\u093e \u091c\u093e \u0930\u0939\u093e \u0939\u0948...","CANCEL":"\u0915\u0948\u0902\u0938\u0932 \u0915\u0930\u0947\u0902","OK":"\u0920\u0940\u0915 \u0939\u0948","CONFIRM_START_OVER":"\u092b\u093f\u0930 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0940 \u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902","MESS_START_OVER":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u092b\u093f\u0930 \u0938\u0947\\n\u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","mmddyy":"\u0924\u093e\u0930\u0940\u0916","Anonymous":"\u0905\u0928\u093e\u092e"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),it:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LIVELLO","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NESSUN ANNUNCIO DA VISUALIZZARE!","NO_REWARDS":"SPIACENTE, NESSUNA RICOMPENSA!","CANCELLED_AD":"HAI CANCELLATO L\'ANNUNCIO!","LOADING":"CARICAMENTO...","LOADING_AD":"CARICAMENTO ANNUNCI...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"La classifica \xe8 vuota!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Ottimo! Ho un punteggio migliore!","TARGET_SCORE":"Punteggio Obiettivo","NO_SPACE_LEFT":"NESSUNO SPAZIO RIMASTO!","FULL":"Pieno","LOADING_LEVEL":"Caricamento livello...","SCORE_REACHED":"PUNTEGGIO RAGGIUNTO!","WELL_DONE":"BEN FATTO!","Level":"Livello","Completed":"Completato","COMPLETED":"COMPLETATO","Next_life":"Prossima vita","MESS_TUTORIAL_1":"Posiziona il blocco nella linea orizzontale\\ne guarda cosa succede!","MESS_TUTORIAL_2":"Ora guarda cosa succede quando\\ncrei una linea verticale.","MESS_TUTORIAL_3":"Puoi anche creare un quadrato 3x3.\\nProva!","MESS_TUTORIAL_4":"Disponi le linee e i quadrati\\nper ottenere punti combo!","COMBO":"COMBO","STREAK":"SERIE","MESS_SKIP_TUTORIAL":"Saltare il tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"AGGIORNAMENTO NUOVI LIVELLI...","RESTARTING_MAP":"Riavvio della mappa...","CANCEL":"Annulla","OK":"OK","CONFIRM_START_OVER":"CONFERMA DI VOLER RICOMINCIARE","MESS_START_OVER":"Sei sicuro di ricominciare?","mmddyy":"Data","Anonymous":"Anonimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),id:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"TINGKAT","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"TINGKAT FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"TIDAK ADA IKLAN UNTUK DITAMPILKAN!","NO_REWARDS":"MAAF, TIDAK ADA HADIAH!","CANCELLED_AD":"KAMU TELAH MEMBATALKAN IKLANNYA!","LOADING":"MEMUAT...","LOADING_AD":"MEMUAT IKLAN...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Papan peringkat kosong!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Hebat! Aku dapat skor terbaik!","TARGET_SCORE":"Skor Target","NO_SPACE_LEFT":"TIDAK ADA RUANG TERSISA!","FULL":"Penuh","LOADING_LEVEL":"Memuat Tingkat...","SCORE_REACHED":"SKOR TERCAPAI!","WELL_DONE":"KERJA BAGUS!","Level":"Tingkat","Completed":"Selesai","COMPLETED":"SELESAI","Next_life":"Kehidupan selanjutnya","MESS_TUTORIAL_1":"Tempatkan blok dalam baris horizontal\\ndan lihat apa yang terjadi!","MESS_TUTORIAL_2":"Sekarang lihat apa yang\\nterjadi saat kamu membuat baris vertikal.","MESS_TUTORIAL_3":"Kamu juga bisa membuat kotak 3x3.\\nCobalah!","MESS_TUTORIAL_4":"Atur baris dan kotak untuk\\nmendapatkan poin kombo!","COMBO":"KOMBO","STREAK":"RENTETAN","MESS_SKIP_TUTORIAL":"Yakin ingin melewati tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MEMPERBARUI TINGKAT BARU...","RESTARTING_MAP":"MEMULAI ULANG PETA...","CANCEL":"Batalkan","OK":"OK","CONFIRM_START_OVER":"KONFIRMASI MULAI ULANG","MESS_START_OVER":"Yakin ingin mulai ulang?","mmddyy":"Tanggal","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),de:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"EBENE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"EBENE FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"KEINE ANZEIGEN VORHANDEN!","NO_REWARDS":"LEIDER ERH\xc4LTST DU KEINE BELOHNUNGEN!","CANCELLED_AD":"DU HAST DIE ANZEIGE ABGEBROCHEN!","LOADING":"WIRD GELADEN\u2026","LOADING_AD":"ANZEIGEN WERDEN GELADEN\u2026","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Bestenliste ist leer!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Toll! Ich habe eine Bestpunktzahl erreicht!","TARGET_SCORE":"Zielpunktzahl","NO_SPACE_LEFT":"KEIN PLATZ MEHR \xdcBRIG!","FULL":"Voll","LOADING_LEVEL":"Ebene wird geladen\u2026","SCORE_REACHED":"PUNKTZAHL ERREICHT!","WELL_DONE":"GUT GEMACHT!","Level":"Ebene","Completed":"Abgeschlossen","COMPLETED":"ABGESCHLOSSEN","Next_life":"N\xe4chstes Leben","MESS_TUTORIAL_1":"F\xfcge den Block in die horizontale\\nLinie ein und gib gut acht!","MESS_TUTORIAL_2":"Jetzt bilden wir eine vertikale Linie.\\nPass noch einmal genau auf.","MESS_TUTORIAL_3":"Du kannst auch ein 3x3-Quadrat bilden.\\nVersuch es mal!","MESS_TUTORIAL_4":"Bilde Linien und Quadrate,\\num Kombo-Punkte zu erhalten!","COMBO":"COMBO","STREAK":"STR\xc4HNE","MESS_SKIP_TUTORIAL":"M\xf6chtest du das Tutorial\\nwirklich \xfcberspringen?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"NEUE EBENE WERDEN AKTUALISIERT\u2026","RESTARTING_MAP":"KARTE WIRD NEU GESTARTET\u2026","CANCEL":"Abbrechen","OK":"OK","CONFIRM_START_OVER":"NEUSTART BEST\xc4TIGEN","MESS_START_OVER":"M\xf6chtest du wirklich von vorn beginnen?","mmddyy":"Datum","Anonymous":"Anonym"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ja:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u30ec\u30d9\u30eb","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093!","NO_REWARDS":"\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u306e\u3067!","CANCELLED_AD":"\u6b8b\u5ff5\u3067\u3059\u304c\u30ea\u30ef\u30fc\u30c9\u306a\u3057\u3067\u3059\uff01","LOADING":"\u8aad\u307f\u8fbc\u307f\u4e2d...","LOADING_AD":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3063\u307d\uff01","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u3059\u3054\u3044\uff01\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2\u3092\u7372\u5f97\u3057\u305f\uff01","TARGET_SCORE":"\u76ee\u6a19\u30b9\u30b3\u30a2","NO_SPACE_LEFT":"\u30b9\u30da\u30fc\u30b9\u304c\u306a\u3044!","FULL":"\u30d5\u30eb","LOADING_LEVEL":"\u30ec\u30d9\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","SCORE_REACHED":"\u5230\u9054\u3057\u305f\u30b9\u30b3\u30a2!","WELL_DONE":"\u304a\u898b\u4e8b!","Level":"\u30ec\u30d9\u30eb","Completed":"\u5b8c\u4e86","COMPLETED":"\u5b8c\u4e86","Next_life":"\u6b21\u306e\u4eba\u751f","MESS_TUTORIAL_1":"\u6a2a\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u30d6\u30ed\\n\u30c3\u30af\u3092\u914d\u7f6e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_2":"\u6b21\u306f\u7e26\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u914d\u7f6e\\n\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002","MESS_TUTORIAL_3":"\u307e\u305f\u30013x3 \u306e\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\u3084\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_4":"\u30e9\u30a4\u30f3\u3084\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u3063\u3066\u30b3\u30f3\u30dc\\n\u30dd\u30a4\u30f3\u30c8\u3092\u7372\u5f97\u3057\u307e\u3057\u3087\u3046\uff01","COMBO":"\u30b3\u30f3\u30dc","STREAK":"\u9023\u7d9a","MESS_SKIP_TUTORIAL":"\u672c\u5f53\u306b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u30b9\u30ad\u30c3\\n\u30d7\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u65b0\u3057\u3044\u30ec\u30d9\u30eb\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4e2d...","RESTARTING_MAP":"\u30de\u30c3\u30d7\u3092\u3084\u308a\u306a\u304a\u3057\u3066\u3044\u307e\u3059...","CANCEL":"\u30ad\u30e3\u30f3\u30bb\u30eb","OK":"OK","CONFIRM_START_OVER":"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3092\u78ba\u5b9a","MESS_START_OVER":"\u672c\u5f53\u306b\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","mmddyy":"\u65e5\u4ed8","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),es:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\xa1NO HAY ANUNCIOS PARA MOSTRAR!","NO_REWARDS":"LO SENTIMOS, NO HAY RECOMPENSAS!","CANCELLED_AD":"HAS CANCELADO EL ANUNCIO!","LOADING":"CARGANDO...","LOADING_AD":"CARGANDO ANUNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\xa1La tabla de clasificaci\xf3n est\xe1 vac\xeda!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xa1Muy bien! Tengo la mejor puntuaci\xf3n!","TARGET_SCORE":"Puntuaci\xf3n Objetivo","NO_SPACE_LEFT":"\xa1NO QUEDA ESPACIO!","FULL":"Completo","LOADING_LEVEL":"Cargando nivel...","SCORE_REACHED":"\xa1PUNTUACI\xd3N ALCANZADA!","WELL_DONE":"BIEN HECHO!","Level":"Nivel","Completed":"Completado","COMPLETED":"COMPLETADO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"\xa1Coloca el bloque en la l\xednea\\nhorizontal y mira lo que pasa!","MESS_TUTORIAL_2":"Ahora mira lo que sucede cuando haces\\nuna l\xednea vertical.","MESS_TUTORIAL_3":"\xa1Tambi\xe9n puedes hacer un cuadrado de 3x3.\\nPru\xe9balo!","MESS_TUTORIAL_4":"\xa1Organiza l\xedneas y cuadrados para\\nobtener puntos de combo!","COMBO":"COMBO","STREAK":"RACHA","MESS_SKIP_TUTORIAL":"\xbfEst\xe1s seguro de que quieres\\nsaltarte el tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZANDO NUEVOS NIVELES...","RESTARTING_MAP":"REINICIANDO EL MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"CONFIRMAR EMPEZAR DE NUEVO","MESS_START_OVER":"\xbfSeguro que quieres\\nempezar de nuevo?","mmddyy":"Fecha","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),zh:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u5173\u5361","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u5e7f\u544a!","NO_REWARDS":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1!","CANCELLED_AD":"\u60a8\u5df2\u53d6\u6d88\u4e86\u5e7f\u544a!","LOADING":"\u6b63\u5728\u52a0\u8f7d...","LOADING_AD":"\u6b63\u5728\u52a0\u8f7d\u5e7f\u544a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u6392\u884c\u699c\u8fd8\u6ca1\u6709\u4eba!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u592a\u68d2\u4e86\uff01\u6211\u83b7\u5f97\u4e86\u6700\u4f73\u5f97\u5206!","TARGET_SCORE":"\u76ee\u6807\u5206\u6570","NO_SPACE_LEFT":"\u6ca1\u6709\u5269\u4f59\u7684\u7a7a\u95f4!","FULL":"\u5df2\u6ee1","LOADING_LEVEL":"\u6b63\u5728\u52a0\u8f7d\u5173\u5361...","SCORE_REACHED":"\u8fbe\u5230\u7684\u5206\u6570!","WELL_DONE":"\u592a\u68d2\u4e86!","Level":"\u5173\u5361","Completed":"\u5df2\u5b8c\u6210","COMPLETED":"\u5df2\u5b8c\u6210","Next_life":"\u4e0b\u4e00\u4e2a\u751f\u547d","MESS_TUTORIAL_1":"\u5c06\u6728\u5757\u653e\u5728\u6c34\u5e73\u7ebf\u4e0a\\n\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48!","MESS_TUTORIAL_2":"\u73b0\u5728\u60a8\u77e5\u9053\u5f53\u60a8\u8fde\u6210\u4e00\u6761\\n\u5782\u76f4\u7ebf\u65f6\u4f1a\u53d1\u751f\u7684\u60c5\u51b5.","MESS_TUTORIAL_3":"\u60a8\u8fd8\u53ef\u4ee5\u5792\u6210\u4e00\u4e2a 3x3 \u7684\u65b9\u5f62.\\n\u8bd5\u8bd5\u5427!","MESS_TUTORIAL_4":"\u540c\u65f6\u8fde\u6210\u76f4\u7ebf\u548c\u65b9\u5f62,\\n\u83b7\u5f97\u8fde\u51fb\u5206\u6570!","COMBO":"COMBO","STREAK":"\u8fde\u80dc","MESS_SKIP_TUTORIAL":"\u786e\u5b9a\u8981\u8df3\u8fc7\u6559\u7a0b\u5417\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u6b63\u5728\u66f4\u65b0\u65b0\u5173\u5361...","RESTARTING_MAP":"\u6b63\u5728\u91cd\u542f\u5730\u56fe...","CANCEL":"\u53d6\u6d88","OK":"\u786e\u5b9a","CONFIRM_START_OVER":"\u786e\u5b9a\u91cd\u65b0\u5f00\u59cb","MESS_START_OVER":"\u786e\u5b9a\u8981\u91cd\u65b0\u5f00\u59cb\u5417\uff1f","mmddyy":"\u65e5\u671f","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ar:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0645\u0633\u062a\u0648\u0649","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0625\u0639\u0644\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627!","NO_REWARDS":"\u0646\u0623\u0633\u0641\u060c \u0644\u0627 \u064a\u064f\u0648\u062c\u062f \u0645\u0643\u0627\u0641\u0622\u062a!","CANCELLED_AD":"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u0639\u0644\u0627\u0646!","LOADING":"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...","LOADING_AD":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"!\u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u062a\u0633\u0627\u0628\u0642\u064a\u0646 \u0641\u0627\u0631\u063a\u0629","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u0631\u0627\u0626\u0639! \u0644\u0642\u062f \u062d\u0642\u0642\u062a \u0623\u0641\u0636\u0644 \u0631\u0642\u0645 \u0642\u064a\u0627\u0633\u064a","TARGET_SCORE":"\u0647\u062f\u0641 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u064a\u0627\u0633\u064a","NO_SPACE_LEFT":"!\u0644\u0645 \u064a\u062a\u0628\u0642 \u0645\u0633\u0627\u062d\u0629","FULL":"\u0645\u0643\u062a\u0645\u0644","LOADING_LEVEL":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u0648\u0649...","SCORE_REACHED":"!\u0648\u0635\u0644\u062a \u0627\u0644\u0646\u062a\u064a\u062c\u0629","WELL_DONE":"!\u0623\u062d\u0633\u0646\u062a","Level":"\u0645\u0633\u062a\u0648\u0649","Completed":"\u0627\u0643\u062a\u0645\u0644","COMPLETED":"\u0627\u0643\u062a\u0645\u0644","Next_life":"\u0627\u0644\u062d\u064a\u0627\u0629 \u0627\u0644\u0642\u0627\u062f\u0645\u0629","MESS_TUTORIAL_1":"\u0636\u0639 \u0627\u0644\u0642\u0641\u0644 \u0641\u064a \u062e\u0637 \u0623\u0641\u0642\u064a \u0648\u0631\u0627\u0642\u0628 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b!","MESS_TUTORIAL_2":"\u0631\u0627\u0642\u0628 \u0627\u0644\u0622\u0646 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b \u0639\u0646\u062f\u0645\u0627 \u062a\u0635\u0646\u0639 \u062e\u0637\u064b\u0627 \u0631\u0623\u0633\u064a\u064b\u0627.","MESS_TUTORIAL_3":"\u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u064b\u0627 \u0625\u0646\u0634\u0627\u0621 \u0645\u0631\u0628\u0639 3x3. \u062d\u0627\u0648\u0644 \u0641\u0639\u0644 \u0630\u0644\u0643!","MESS_TUTORIAL_4":"!\u0631\u062a\u0628 \u0627\u0644\u062e\u0637\u0648\u0637 \u0648\u0627\u0644\u0645\u0631\u0628\u0639\u0627\u062a \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0645\u062c\u0645\u0648\u0639\u0629 \u0646\u0642\u0627\u0637","COMBO":"\u0643\u0648\u0645\u0628\u0648","STREAK":"\u0627\u0636\u0631\u0628","MESS_SKIP_TUTORIAL":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u062a\u062e\u0637\u064a \u0634\u0631\u062d \u0627\u0644\u0644\u0639\u0628\u0629\u061f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"...\u062a\u062d\u062f\u064a\u062b \u0645\u0633\u062a\u0648\u064a\u0627\u062a \u062c\u062f\u064a\u062f\u0629","RESTARTING_MAP":"...\u062c\u0627\u0631 \u0625\u0639\u0627\u062f\u0629 \u0628\u062f\u0621 \u0627\u0644\u062e\u0631\u064a\u0637\u0629","CANCEL":"\u0625\u0644\u063a\u0627\u0621","OK":"\u0645\u0648\u0627\u0641\u0642","CONFIRM_START_OVER":"\u0642\u0645 \u0628\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621","MESS_START_OVER":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621\u061f","mmddyy":"\u062a\u0627\u0631\u064a\u062e","Anonymous":"\u0645\u062c\u0647\u0648\u0644"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),tr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"SEVIYE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"G\xd6R\xdcNT\xdcLENECEK REKLAM YOK!","NO_REWARDS":"\xdcZG\xdcN\xdcM, \xd6D\xdcL YOK!","CANCELLED_AD":"REKLAMI IPTAL ETTINIZ!","LOADING":"Y\xdcKLEN\u0130YOR...","LOADING_AD":"REKLAM Y\xdcKLEN\u0130YOR...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Skorbord bo\u015f!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Harika! En iyi puan\u0131 ald\u0131m!","TARGET_SCORE":"Hedef Skoru","NO_SPACE_LEFT":"BO\u015e YER KALMADI!","FULL":"Tam","LOADING_LEVEL":"Seviye y\xfckleniyor...","SCORE_REACHED":"PUAN ULA\u015eILDI!","WELL_DONE":"AFER\u0130N!","Level":"Seviye","Completed":"Tamamland\u0131","COMPLETED":"TAMAMLANDI","Next_life":"Sonraki hayat","MESS_TUTORIAL_1":"Blo\u011fu yatay \xe7izgiye yerle\u015ftir\\nve ne oldu\u011funu g\xf6r!","MESS_TUTORIAL_2":"\u015eimdi dikey bir \xe7izgi olu\u015fturdu\u011fundan\\ne olaca\u011f\u0131n\u0131 g\xf6r.","MESS_TUTORIAL_3":"Ayr\u0131ca 3x3 kare de yapabilirsin.\\nBir dene!","MESS_TUTORIAL_4":"Kombo puanlar almak i\xe7in \xe7izgileri\\nve kareleri d\xfczenle!","COMBO":"KOMBO","STREAK":"SER\u0130","MESS_SKIP_TUTORIAL":"E\u011fitimi atlamak istedi\u011fine\\nemin misin?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"YEN\u0130 SEV\u0130YELER G\xdcNCELLEN\u0130YOR...","RESTARTING_MAP":"HARITA YENIDEN BA\u015eLATILIYOR...","CANCEL":"\u0130PTAL ET","OK":"TAMAM","CONFIRM_START_OVER":"BA\u015eTAN BA\u015eLAMAYI ONAYLA","MESS_START_OVER":"Ba\u015ftan ba\u015flamak istedi\u011fine\\nemin misin?","mmddyy":"Tarih","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}')},Bw=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,s.Z)({data:Nw,locale:"en",upperCaseText:!1},t))},t}(Dw),Gw=Bw,Fw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Uw=Fw,Hw=n(625),Zw=0,Yw=0,Vw=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;Yw=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(Yw)),Yw+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!Yw||Yw<30)&&(Yw=60),Zw=Yw;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(Yw)),Yw+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-Yw,n=Math.round(e*t+Yw);n>Zw&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),Ww=Vw,zw=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Kw=zw,jw=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Xw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(v()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,a.Z)(e,jw);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new Kw(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),!0)},t}(Phaser.Plugins.BasePlugin),Jw=Xw,qw=["Enable"],Qw=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.updateFps=function(e){void 0===e&&(e=60),this.getFps()!==e&&this.setFps(e)},i.getFps=function(){return this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf?this.scene.game.loop.raf.fps:5},i.setFps=function(e){this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf&&"function"===typeof this.scene.game.loop.raf.updateFps&&this.scene.game.loop.raf.updateFps(e)},i.addExtraGameObjectMethods=function(){var e=new g(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new Ww(this)},i.addPlugins=function(){this.plugins.install("Storage",ra,!0,"storage"),this.plugins.install("Rollbar",Dt,!0,"rollbar"),this.plugins.install("AdsManager",x,!0,"ads"),this.plugins.install("AuthManager",ee,!0,"auth"),this.plugins.install("AudioManager",Y,!0,"audio"),this.plugins.install("WorldManager",Ea,!0,"world"),this.plugins.install("PlayerManager",gt,!0,"player"),this.plugins.install("LanguageManager",Gw,!0,"lang"),this.plugins.install("ProfileManager",It,!0,"profile"),this.plugins.install("AnalyticsManager",L,!0,"analytics"),this.plugins.install("AdaptivePerformance",Jw,!0,"performance"),this.plugins.install("VisibilityChangeHandler",Uw,!0,"visibility"),this.plugins.installScenePlugin("textStyler",da,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Vt,"screen"),this.plugins.installScenePlugin("FrameCapture",ie,"frameCapture"),this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,626));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,627));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,628));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,629));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,630));case 16:return r=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,631));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(Ua.Co.BOOT_SCENE,Ya,!0),this.scene.add(Ua.Co.LOAD_SCENE,CT,!1),this.scene.add(Ua.Co.GAME_SCENE,QS,!1),this.scene.add(Ua.Co.LEVEL_SCENE,Mw,!1),this.scene.add(Ua.Co.JOURNEY_SCENE,_R,!1),this.scene.add(Ua.Co.DASHBOARD_SCENE,xI,!1),this.scene.add(Ua.Co.GLOBAL_SCENE,$S.Z,!1)},i.addDevScenes=function(){var e=(0,r.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,632));case 4:return t=e.sent.default,e.next=7,n.e(539).then(n.bind(n,633));case 7:i=e.sent.default,this.scene.add(Ua.Co.TEST_SCENE,t,!1),this.scene.add(Ua.Co.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,Hw.Z.setGame(this),i=Hw.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,634));case 6:a=e.sent.default,i=a;case 8:r=(0,s.Z)({},t.InterstitialAdOptions),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:r,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,h=e.FullSizeOnLandscape,u=n,d=i,p=a,g=s,f=r,m=o;this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:g,landscapeWidth:f,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:h}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Fa(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!1})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,qw);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,s.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:s});var c=document.querySelector("canvas");if(c){this.canvasRecorder.setCanvas(c);var h=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(l())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/h.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.next=8,d.call(e.canvasRecorder);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))}}}},i.initRollbar=function(){GameCore.Configs.Rollbar.Enable&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),$w=Qw,ex=GameCore.Configs.Debugger.ShowInspector,tx={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:ex,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,fps:{},render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"low-power",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var nx=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(nx),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new $w(tx);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},123:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",DAILY_CHALLENGE_BEGIN:"daily_challenge_begin",DAILY_CHALLENGE_FAIL:"daily_challenge_fail",DAILY_CHALLENGE_END:"daily_challenge_end",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},441:function(e,t,n){"use strict";var i=n(442),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},446:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},447:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(444),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},443:function(e,t,n){"use strict";n.d(t,{Gm:function(){return r},ne:function(){return o},qZ:function(){return s}});var i=n(99),a=n.n(i),s=(n(38),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},o=function(e){var t=e/1e3,n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60);return{hours:n,minutes:i,seconds:Math.floor(t-3600*n-60*i)}}},199:function(e,t,n){"use strict";n.d(t,{R0:function(){return r},Tv:function(){return s},j6:function(){return i},sw:function(){return a},tO:function(){return o}});n(440),n(130),n(81),n(63);var i=function(){var e=setInterval((function(){window.Sentry&&clearInterval(e)}),100)},a=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},s=function(e){window.Sentry&&window.Sentry.setUser(e)},r=function(e,t){e&&window.Sentry.withScope((function(e){e.setExtras(t)}))},o=function(e){}},615:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},s=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],a=e[h][1],s=e[h][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(h--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var h=c(n)}for(t&&t(i);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(636)})),n.O(void 0,[216,630,542],(function(){return n(637)})),n.O(void 0,[216,630,542],(function(){return n(468)})),n.O(void 0,[216,630,542],(function(){return n(433)})),n.O(void 0,[216,630,542],(function(){return n(638)})),n.O(void 0,[216,630,542],(function(){return n(559)})),n.O(void 0,[216,630,542],(function(){return n(639)}));var i=n.O(void 0,[216,630,542],(function(){return n(575)}));i=n.O(i)})();