(function(){var e={472:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,s=a>>2,r=new Uint8Array(a),o=new Uint32Array(r.buffer,0,s),c=0,l=0;c<s;c++)o[c]=i.charCodeAt(l++)|i.charCodeAt(l++)<<8|i.charCodeAt(l++)<<16|i.charCodeAt(l++)<<24;for(var h=3&a;h--;)r[l]=i.charCodeAt(l++);e(new Blob([r],{type:t||"image/png"}))}})},621:function(e,t,n){"use strict";n.d(t,{J:function(){return k},Z:function(){return L}});var i=n(63),a=n(86),s=n.n(a),r=n(46),o=n.n(r),c=n(126),l=n(103),h=n.n(l),u=n(84),d=n.n(u),p=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},g=function(e){var t=document.createElement("div");return t.innerHTML=h()(e).call(e),t.firstChild},f=function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=g('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=g('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),s=g('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",p(n)),s.addEventListener("click",p(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(d())((function(e,t){f(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),v=m,E=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},S=function(e){var t=document.createElement("div");return t.innerHTML=h()(e).call(e),t.firstChild},A=function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=S('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),s=S('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&s||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(s),document.body.appendChild(i),a.addEventListener("click",E(n)),s.addEventListener("click",E(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(d())((function(e,t){A(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),y=T,I=n(37),C=n.n(I),b=function(){function e(){}return e.GetLangCode=function(e){return C()(e).call(e,0,2)},e}(),O=n(444),P=n(125),R=GameCore.Configs,w=R.Notification,x=(R.AddShortcut,R.SubscribeBot,w.GameTitle),k=(w.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),_=function(){function e(e){var t=this;this.facebook=void 0,this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.attemptToAddShortcut=(0,i.Z)(o().mark((function e(){var n,i,a,r,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(i=e.t0,!(a=i.lastCallCreateShortcut)||!(0,P.Gm)(+a)){e.next=12;break}return e.abrupt("return",!1);case 12:if(r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),s()(n=GameSDK.getSupportedAPIs()).call(n,"canCreateShortcutAsync")){e.next=17;break}return e.abrupt("return",!1);case 17:return e.next=19,GameSDK.canCreateShortcutAsync();case 19:if(!e.sent){e.next=37;break}return l=c._.SHORTCUT_CREATE,h=c._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(h),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.createShortcutAsync();case 29:return window.game.analytics.event(l,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(l,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,null,[[2,40],[24,33]])}))),this.attemptToSubscribeBot=(0,i.Z)(o().mark((function e(){var n,i,a,r,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,s()(n=GameSDK.getSupportedAPIs()).call(n,"player.canSubscribeBotAsync")){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.canSubscribeBotAsync();case 8:if(!e.sent){e.next=37;break}return e.next=12,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:if(i=e.t0,!(a=i.lastCallSubscribeBot)||!(0,P.Gm)(+a)){e.next=19;break}return e.abrupt("return",!1);case 19:return r=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:r}),l=c._.BOT_SUBSCRIBE,h=c._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(h),e.prev=24,e.next=27,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 27:return e.next=29,GameSDK.player.subscribeBotAsync();case 29:return window.game.analytics.event(l,{success:!0}),e.abrupt("return",!0);case 33:return e.prev=33,e.t1=e.catch(24),window.game.analytics.event(l,{success:!1}),e.abrupt("return",!1);case 37:return e.abrupt("return",!1);case 40:return e.prev=40,e.t2=e.catch(2),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,null,[[2,40],[24,33]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(o().mark((function e(t,n,i){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s()(a=GameSDK.getSupportedAPIs()).call(a,"checkCanPlayerMatchAsync")){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(t,n,i);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.requestTournamentAsync=function(){var e=(0,i.Z)(o().mark((function e(n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.facebook=e,this.mockSubscribeBot=new y,this.mockAddShortcut=new v}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var s=e.getPhoto();i.push(new O.Z(n,a,s).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,s,r,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,s=t.cta,r=t.text,c={data:n,image:i,action:"CUSTOM",template:a,cta:s,text:r,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return b.GetLangCode(GameSDK.getLocale()||"en")},t.injectTournament=function(){var e=(0,i.Z)(o().mark((function e(){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(829).then(n.bind(n,640));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,FBInstant.getTournamentAsync=this.getTournamentAsync,FBInstant.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new k;case 12:this.facebook.getTournamentAsync=this.getTournamentAsync,this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getTournamentAsync=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getTournamentAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,i=t.delayTime,e.next=5,FBInstant.scheduleNotificationAsync({title:x,minDelayInSeconds:i,description:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),L=_},436:function(e,t,n){"use strict";n.d(t,{Z:function(){return Je}});var i=n(128),a=n.n(i),s=n(37),r=n.n(s),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return r()(e).call(e,i*t,i*t+t)}))},c=n(83),l=n.n(c),h=n(86),u=n.n(h),d=function(e,t){return l()(e).call(e,(function(e){return!u()(t).call(t,e)}))},p=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},g=n(65),f=n.n(g),m=function(e,t,n){return f()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return l()(e).call(e,m)},E={chunk:o,difference:d,shuffle:p,unique:v},S=n(85),A=n.n(S),T=n(264),y=n.n(T),I=y()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),C=y()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),b=y()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var s,o=a.length,c=r()(a).call(a,0,o-1),l=a[o-1],h=A()(s=new Array(+c)).call(s,l);n.push.apply(n,h)}else n.push(a)}return n})),O=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},s=0,r=0;return C(n).forEach((function(e){s=0,r++,a[r]||(a[r]={}),b(e).forEach((function(e){s++,a[r][s]=I(e,i)}))})),a},P=y()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),R=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var s="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var l=t[c];if(GameCore.Utils.Valid.isObject(l))a+=":"+e(l,n,!0);else if(GameCore.Utils.Valid.isString(l)){var h=P(l,n);h===s?(o++,a=r()(a).call(a,0,-2)):o=1,a+=""+o+h,s=h}}return a=a.replace(/1([A-Z])/g,"$1")},w=function(e){try{return atob(e)}catch(t){return""}},x={decodeMap:O,encodeMap:R,hashToString:w,stringToHash:function(e){try{return btoa(e)}catch(t){return""}}},k=function(e){try{return JSON.parse(e)}catch(t){return null}},_=n(66),L=n.n(_),M=function(e){try{return L()(e,null,0)}catch(t){return""}},D=function(e){return k(M(e))},N={clone:D,decode:k,encode:M},B=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},G=function(e){return void 0===e||null===e},F=function e(t){if(!B(t))return t;for(var n in t){G(t[n])&&delete t[n];var i=t[n];B(i)&&(t[n]=e(i))}return t},U=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},H=n(82),Z=n.n(H),Y=function(e){var t={};return Z()(e).forEach((function(n){if(U(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},W=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(U(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},V={clear:F,hasOwn:U,invert:Y,keyBy:W},z=function(e){return e?e[0].toUpperCase()+r()(e).call(e,1):e},K=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},j=n(87),X=n.n(j),J=function(e){var t;return X()(t=Z()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},q=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},Q=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var s=0;s<a;s++){var r=Math.floor(67*Math.random());i+=n.charAt(r)}return i},$=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},ee=n(64),te=n.n(ee),ne=n(267),ie=n.n(ne),ae=function(e,t){var n,i=e.split(" "),a=(i.length<=1?te()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),s=ie()(a).call(a," ")||0,r=s>=0?s:t;return(a.length>t?a.substring(0,r):a).substring(0,t)},se=n(272),re=n.n(se),oe={capitalize:z,hashCode:K,params:J,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:q,random:Q,removeDiacritics:$,getShortName:ae,generateObjectId:function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+re()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))}},ce=function(e){return"boolean"===typeof e},le=function(){return true},he=function(e){return"function"===typeof e},ue=function(e){return"number"===typeof e},de=function(e){var t;return f()(t=["string","number","symbol"]).call(t,typeof e)>-1},pe=function(e){return"string"===typeof e},ge=n(84),fe=n.n(ge),me=function(e,t,n){var i=n||{},a=i.timeout,s=void 0===a?1e3:a,r=i.checkInterval,o=void 0===r?100:r;return new(fe())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);s>0&&setTimeout((function(){clearInterval(i),n(!1)}),s)}))},ve={isBoolean:ce,isDebugger:le,isFunction:he,isNumber:ue,isObject:B,isPropertyKey:de,isString:pe,isValueChangeAsync:me},Ee=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var s=Math.min(a.width,a.height);i||t.textures.removeKey(n);var r=t.textures.createCanvas(i||n,s,s),o=r.context;return o.beginPath(),o.arc(s/2,s/2,s/2,0,2*Math.PI,!1),o.clip(),r.draw((a.width-s)/2,(a.height-s)/2,a),!0},Se=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,s=e.width,r=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;s||(s=o.width),r||(r=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,s,r),l=c.context,h=Math.min(s,r)/100*a/2;return l.beginPath(),l.moveTo(0+h,0),l.lineTo(0+s-h,0),l.quadraticCurveTo(0+s,0,0+s,0+h),l.lineTo(0+s,0+r-h),l.quadraticCurveTo(0+s,0+r,0+s-h,0+r),l.lineTo(0+h,0+r),l.quadraticCurveTo(0,0+r,0,0+r-h),l.lineTo(0,0+h),l.quadraticCurveTo(0,0,0+h,0),l.closePath(),l.clip(),c.draw(0,0,o),!0},Ae=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Te=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],s=atob(n[n.length-1]),r=s.length,o=new Uint8Array(r);r--;)o[r]=s.charCodeAt(r);return new File([o],t,{type:a})},ye=n(132),Ie=n.n(ye),Ce=new Image,be=function(e,t){return void 0===t&&(t=!0),new(fe())((function(n){t&&(Ce=new Image),Ce.onload=function(){n(Ce)},Ce.onerror=function(){n(null)},Ce.src=Ie().createObjectURL(e)}))},Oe=n(63),Pe=n(46),Re=n.n(Pe),we=function(){var e=(0,Oe.Z)(Re().mark((function e(t,n){var i;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(e){if(f()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ke=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,s=n.startAbbreviate,r=void 0===s?1e3:s,o=n.abbreviateStep,c=void 0===o?3:o,l=n.maxLength,h=void 0===l?-1:l,u=n.removeLastZero,d=void 0===u||u,p=n.suffixes,g=void 0===p?["","k","m","b","t","q"]:p,f=-1===h?99999999:h;if(e>=r){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,E=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),S=f-g[v].length,A=E.substring(0,S);return(d?xe(A):A)+g[v]}var T=e.toFixed(a),y=f-g[0].length,I=T.substring(0,y);return d?xe(I):I+g[0]},_e={Array:E,Hash:x,Json:N,Object:V,String:oe,Valid:ve,Image:{drawCircle:Ee,drawBorder:Se,getImageScale:Ae,base64ToFile:Te,blobToHtmlImage:be,blobUrlToFile:we},Number:{toAbbreviatedString:ke,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,s=0;s<t-a;s++)i+=n;return i}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return"ANDROID"===FBInstant.getPlatform()},isIOS:function(){return"IOS"===FBInstant.getPlatform()},isMobileWeb:function(){return"MOBILE_WEB"===FBInstant.getPlatform()},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(fe())((function(t){return setTimeout(t,e)}))}}},Le=n(62),Me=n(124),De={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1}},Ne={ENV:"production",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1}},Be={ENV:"development",AppId:"405221927720733",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!0,PlayerDataStoreUsingApi:!1,Notification:{Enable:!1,DisableSendNotification:!0,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png"},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:500,EnableVibrate:!0,VibrateValue:[0,0,119,199,279,359,439],Progress:{BonusScore:1e3,Milestone:3},MaxGemInPiece:2,RatePieceContainGem:10},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"YANDEX-PlayerData.WoodBlockJourney",Game:{AutoResize:!0,PortraitRatio:450/667,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/450,LandscapeWidth:760,LandscapeHeight:500,ForcePixelRatio:0,AutoDropFps:!1,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!0,ShowMonitoring:!0,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:10,DelayNoThank:1e3,ContinueSingleMatchEnabled:!1,SingleMatchStore:"YANDEX-SingleMatch.WoodBlockJourney",JourneyMatchStore:"YANDEX-JourneyMatch.WoodBlockJourney",LivesStore:"lives",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}},Levels:[200,500,1e3,1500,2e3,2500,3e3,3600,4200,4800,5400,6e3,6700,7400,8100,8800,9500,10300,11100,11900,12700,13500,14400,15300,16200,17100,18e3],PieceRandoms:{maxPiece:200,measureError:.5}},DailyRewards:{MaxDays:6,MockTime:0,CheckInterrupt:!0},DailyTasks:{Duration:86400},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!1,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"61811128f28777ad0ed05787",Limit:50},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!0,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!1,secondsFirstTime:5,secondsBetweenAds:5},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},MagnetItem:{key:"magnet-item",scoreForOnePercent:4,maxMagnetPerMatch:5},Board:{cols:9,rows:9},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed"]}},DailyChallenge:{Prefix:"leaderboards",LeaderBoardId:"61e00146f28777ad0e328f2c"},Lives:{bonusDurationMins:5,bonusLife:1,livesCapacity:10},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed"]}},ListPlayerDevIds:[]},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};Be=(0,Me.TS)((0,Le.Z)({},Be),Ne);var Ge=Be=(0,Me.TS)((0,Le.Z)({},Be),De),Fe=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(r){var s;null==(s=void 0)||s.invalidate()}}},Ue=n(557),He=n.n(Ue),Ze=n(559),Ye=n.n(Ze),We=n(561),Ve=n.n(We),ze=n(199),Ke=!1,je=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name),Ke&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),a){if("Container"===n.type){var s=a,r=n.getAll();if(e(t,r,s),!s.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",s.name)}var o=He()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],h=l()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(f()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=Ye()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===Ye()(a,e))))}));h.length<1||(Ke&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,h),h.forEach((function(e){if(a){var t=Ye()(n,e),i=Ye()(a,e),s=Ve()(a,e,t);Ke&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",s,e,{oldValue:i,newValue:t})}})))}}}))},Xe={Configs:Ge,Utils:_e,LiveUpdate:{Scene:Fe,SceneObjects:function(e,t){return void 0===t&&(t=Ke),function(n){try{var i=window.game,a=n.module,s=i.scene.getScenes(!0)[0];if(s.scene.key!==e)return;Ke=t;var r=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,r);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),s=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,ze.D)((function(){var e=c.children.getAll();je(s,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(s),i.scene.bringToTop(i.globalScene)}catch(l){console.warn(l)}}}}};window.GameCore=Xe;console.warn("production",{Configs:Ge,isDebugger:_e.Valid.isDebugger()});var Je=Xe},630:function(e,t,n){"use strict";var i=n(63),a=n(17),s=n(46),r=n.n(s),o=n(453),c=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instance=null,i.placementId=n,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===GameCore.Ads.Status.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=GameCore.Ads.Status.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=GameCore.Ads.Status.FILLED,e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(2),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.t0;case 19:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.status===GameCore.Ads.Status.FILLED){e.next=3;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 3:if(this.status=GameCore.Ads.Status.SHOWING,null!==this.instance){e.next=6;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 6:return e.next=8,this.instance.showAsync();case 8:t=this.getSceneName(),this.type===GameCore.Ads.Types.INTERSTITIAL&&self.game.analytics.showInterstitialAd(t),this.type===GameCore.Ads.Types.PRE_ROLL&&self.game.analytics.showPreRollAd(t),this.type===GameCore.Ads.Types.REWARDED&&self.game.analytics.showRewardedVideoAd(t),this.status=GameCore.Ads.Status.IDLE,this.instance=null,e.next=22;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code")&&"ADS_NOT_LOADED"===e.t0.code?this.status=GameCore.Ads.Status.FILLED:(this.status=GameCore.Ads.Status.IDLE,this.instance=null),n=this.getSceneName(),self.game.analytics.showAdFail(this.type,n,e.t0),e.t0;case 22:return e.prev=22,window.focus(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[0,16,22,25]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.t0=t,e.next=e.t0===GameCore.Ads.Types.REWARDED?4:e.t0===GameCore.Ads.Types.INTERSTITIAL||e.t0===GameCore.Ads.Types.PRE_ROLL?7:10;break;case 4:return e.next=6,n.getRewardedVideoAsync(this.placementId);case 6:case 9:return e.abrupt("return",e.sent);case 7:return e.next=9,n.getInterstitialAdAsync(this.placementId);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof o.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=c},449:function(e,t,n){"use strict";n.d(t,{U:function(){return T},v:function(){return y}});var i=n(62),a=n(63),s=n(46),r=n.n(s),o=n(66),c=n.n(o),l=n(17),h=n(446),u=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,l.Z)(t,e),t}((0,h.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,l.Z)(t,e),t}((0,h.Z)(Error)),p=n(125),g=GameCore.Configs,f=g.AppId,m=g.Network,v=function(e){if(!e.ok)throw new u(null,{response:e})},E=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},S=function(e,t,n,i){return(0,a.Z)(r().mark((function a(){var s,o,l,h,p;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s=e+"/apps/"+f+"/"+t,o=new AbortController,n.signal=o.signal,l=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(s,n);case 8:return h=a.sent,clearTimeout(l),v(h),a.next=13,h.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return p=a.t0,a.abrupt("return",p);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof u)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},A=function(){var e=(0,a.Z)(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,p.qZ)(600);case 10:return e.next=12,A(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s){var o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===s&&(s=m.Retries),e.prev=2,o=(0,i.Z)({},E(),n,{method:"GET"}),c=S(a,t,o),e.next=7,A(c,s);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(r().mark((function e(t,n,a,s,o){var c,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},E(),a,{method:"POST"}),l=S(s,t,c,n),e.next=7,A(l,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,s){return e.apply(this,arguments)}}()},445:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return s},fJ:function(){return a},kL:function(){return i},qj:function(){return r},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",s="CONTEXT_GAME_MODE_DETECTED",r="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},45:function(e,t,n){"use strict";var i=n(124),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},627:function(e,t,n){"use strict";var i=n(50),a=n(17),s=n(45),r={targets:[],repeat:-1,yoyo:!0,duration:33,ease:Phaser.Math.Easing.Sine.InOut,props:{x:5}},o=function(e){function t(t){var n,a,s;return(s=e.call(this,r,t)||this).posX=void 0,s.handleSwitchPosition=function(){var e;s.posX=-s.posX,null==(e=s.tween)||e.updateTo("x",-s.posX)},null!=(n=s.config)&&n.props?(s.posX=s.config.props.x,null==(a=s.tween)||a.on(Phaser.Tweens.Events.TWEEN_REPEAT,s.handleSwitchPosition),s):(0,i.Z)(s)}return(0,a.Z)(t,e),t}(s.Z);t.Z=o},455:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},459:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:400,ease:n(127).Z,props:{scale:"-=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},629:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:400,ease:n(127).Z,props:{scale:"+=0.1"}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},127:function(e,t,n){"use strict";var i=n(191),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},462:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},460:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},456:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:300,ease:n(127).Z,props:{scale:{from:1.2,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},461:function(e,t,n){"use strict";var i=n(17),a=n(45),s={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:250,to:0},scale:{from:.9,to:1},alpha:{start:0,from:0,to:1}}},r=function(e){function t(t){return e.call(this,s,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=r},458:function(e,t,n){"use strict";var i=n(99),a=n(50),s=n(17),r=n(126),o=n(459),c=n(101),l=n(203),h=n(200),u=function(e){function t(t,n,i,s,r,h){var u;return void 0===h&&(h=!1),(u=e.call(this,t)||this).useSound=!0,u.isClicked=!1,u.scaleUp=-1,u.scaleDown=-1,u.button=void 0,u.upAnimation=void 0,u.downAnimation=void 0,u.isUsePixelPerfect=!1,u.hitArea=void 0,u.hitZone=void 0,u.scaleDownPress=void 0,u.parentName=void 0,u.handelObjectDestroy=function(){u.scene&&u.scene.events.off(Phaser.Scenes.Events.SLEEP,u.handleSceneSleep)},u.handleSceneSleep=function(){u.scene&&u.scene.tweens.killTweensOf((0,a.Z)(u))},u.handlePointerDown=function(){var e;u.isClicked||null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!0,u.runDownAnimation())},u.handleOnClick=function(e){return function(){var t,n;u.isClicked&&(null!=(t=u.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(u.isClicked=!1,u.runUpAnimation(),null==(n=u.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){u.logButtonEvent(),u.addDebugData(),u.processCallback(e)}))))}},u.handlePointerOut=function(){var e;u.isClicked&&(null!=(e=u.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(u.isClicked=!1,u.runUpAnimation()))},u.runDownAnimation=function(){var e;-1===u.scaleDown&&(u.scaleUp=u.scale,u.scaleDown=u.scaleDownPress),u.useSound&&u.scene.audio.playSound(l.Z.BUTTON_CLICK),null==(e=u.downAnimation)||e.remove(),u.downAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleDown},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.downAnimation.play()},u.runUpAnimation=function(){var e;-1!==u.scaleUp&&(null==(e=u.upAnimation)||e.remove(),u.upAnimation=new o.Z({targets:[(0,a.Z)(u)],duration:150,props:{scale:u.scaleUp},onUpdate:function(){u.hitZone.scale=1/u.scale}}),u.upAnimation.play())},u.isUsePixelPerfect=h,u.setDepth(c.Z.BUTTON),u.createButton(n,i,s,r),u.updateSize(),u.listenEvents(),u.scene.add.existing((0,a.Z)(u)),u}(0,s.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,s=a.displayWidth,r=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:s,displayHeight:r}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,s=i<10?i:10,r=a<10?a:10;this.setSize(t+s,n+r),this.hitZone.setSize(t+s,n+r)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,h.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(r._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container);t.Z=u},454:function(e,t,n){"use strict";var i=n(50),a=n(17),s=n(100),r=n(455),o=s.Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t){var n;return(n=e.call(this,t,0,0,c,l.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(80,80),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new r.Z({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image);t.Z=h},457:function(e,t,n){"use strict";var i=n(99),a=n(50),s=n(17),r=n(101),o=n(100).Z.DEFAULT,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n,i,s,o,c){var l;return(l=e.call(this,t,n,i)||this).top=void 0,l.mid=void 0,l.bottom=void 0,l.payload=void 0,l.payload=c,l.setSize(s,o),l.setDepth(r.Z.POPUP),l.createPopup(),l.scene.add.existing((0,a.Z)(l)),l}(0,s.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.createPopupImages(),this.updatePopupSize(),this.alignPopupImages()},n.createPopupImages=function(){this.top=this.scene.add.image(0,0,c,l.POPUP_TOP),this.mid=this.scene.add.image(0,0,c,l.POPUP_MID),this.bottom=this.scene.add.image(0,0,c,l.POPUP_BOTTOM),this.add([this.top,this.mid,this.bottom])},n.updatePopupSize=function(){var e,t=(null==(e=this.payload)?void 0:e.forceHeightTop)||this.width*this.top.height/this.top.width;this.top.setWorldSize(this.width,t),this.bottom.setWorldSize(this.width,this.width*this.bottom.height/this.bottom.width),this.mid.setWorldSize(this.width,this.height-this.top.displayHeight-this.bottom.displayHeight)},n.alignPopupImages=function(){Phaser.Display.Align.In.Center(this.top,this,0,-this.mid.displayHeight/2-this.top.displayHeight/2),Phaser.Display.Align.In.Center(this.mid,this),Phaser.Display.Align.In.Center(this.bottom,this,0,this.mid.displayHeight/2+this.bottom.displayHeight/2)},n.setFrameTop=function(e,t,n){t||(t=this.top.displayWidth),n||(n=this.top.displayHeight),this.top.setFrame(e),this.top.setWorldSize(t,n)},(0,i.Z)(t,[{key:"onClose",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e)}}]),t}(Phaser.GameObjects.Container);t.Z=h},626:function(e,t,n){"use strict";var i=n(62),a=n(99),s=n(50),r=n(17),o=n(102),c=n.n(o),l=n(87),h=n.n(l),u=n(85),d=n.n(u),p=n(83),g=n.n(p),f=n(37),m=n.n(f),v=n(128),E=n.n(v),S=n(104),A=n.n(S),T=n(205),y=n.n(T),I=n(101),C=n(199);function b(e,t){var n="undefined"!==typeof A()&&y()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return O(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return E()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var P=function(e){function t(t,n){var a,r;(r=e.call(this,t)||this).config=void 0,r.isEnable=void 0,r.maxHeight=void 0,r.isScrolling=void 0,r.boundTop=void 0,r.boundBottom=void 0,r.maskGraphics=void 0,r.objects=void 0,r._value=0,r.velocity=0,r.isScrollingSmooth=void 0,r.lastScrollY=void 0,r.isScrollingBack=void 0,r.scrollingBackTo=void 0,r.lastScrollYCount=0,r.hitArea=void 0,r.onScrollEvents=[],r.update=function(e,t){r.isScrollingSmooth&&r.velocity&&r.scrollingSmooth(t),r.isScrollingBack&&r.scrollingBack(t)},r.checkReachBound=function(){return r.isReachTop()||r.isReachBottom()},r.onMouseScroll=(0,C.D)((function(e,t,n){if(r.isEnable){var i;if(r.isScrolling=!0,r.checkReachBound())return r.lastScrollY=c()(i=r.lastScrollY).call(i,(function(){return 0})),void(r.isScrolling=!1);r.stopScrollingBack(),r.startScrollSmooth(-n*r.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),r.onTouchScroll=function(e){if(r.isEnable){r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack(),r.isScrolling=!0;var t=r.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,a=(n.y-i.y)/t,s=r.height*r.maxScrollOver,o=1;if(r.lastScrollY[++r.lastScrollYCount%r.lastScrollY.length]=a,r.isReachTop()&&a>=0){var c=(s-(r.value-r.marginTop))/s;o=Math.min(o,c)}if(r.isReachBottom()&&a<=0){var l=(s-(-r.maxHeight-r.value))/s;o=Math.min(o,l)}var h=a*o,u=r.maxScrollOver*r.height;r.value+h>r.marginTop+u?r.value=r.marginTop+u:r.value+h<-r.maxHeight-u?r.value=-r.maxHeight-u:r.value+=h,r.callOnScrollEvents(r.value,h)}},r.onTouchDown=function(){r.isEnable&&(r.velocity&&r.stopScrollSmooth(),r.stopScrollingBack())},r.onTouchEnd=function(){var e,t;if(r.isReachTop()&&(r.startScrollingBack(r.marginTop),r.stopScrollSmooth()),r.isReachBottom()&&(r.startScrollingBack(-r.maxHeight),r.stopScrollSmooth()),r.isScrolling){var n=h()(e=r.lastScrollY).call(e,(function(e,t){return e+t}))/r.lastScrollY.length;r.startScrollSmooth(n*r.scrollSmooth),r.lastScrollY=c()(t=r.lastScrollY).call(t,(function(){return 0}))}},r.config=(0,i.Z)({marginTop:0,marginBottom:0,acceleration:1400,maxScrollOver:.15,scrollSmooth:40,scrollingBackRate:5,useMask:!0},n);var o=n.width,l=n.height;return r.isEnable=!1,r.maxHeight=0,r.lastScrollY=d()(a=new Array(3)).call(a,0),r.setSize(o,l),r.createGroup(),r.createInput(),r.createEvents(),r.scene.add.existing((0,s.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.maxHeight=0,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y+e.height+this.marginBottom-this.height/2;this.maxHeight=Math.max(this.maxHeight,t,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=c()(e).call(e,(function(e){return e.y+e.height+t.marginBottom-t.height/2}));this.maxHeight=Math.max(this.maxHeight,Math.max.apply(Math,n),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return g()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),i&&(this.boundTop.setTint(i),this.boundBottom.setTint(i)),this.boundTop.setAlpha(0,0,0,0),this.boundBottom.setAlpha(0,0,0,0),this.boundTop.setDepth(I.Z.PRIORITY),this.boundBottom.setDepth(I.Z.PRIORITY);var a=this.width,s=n,r=this.getWorldPosition(),o=r.x,c=r.y;this.boundTop.setDisplaySize(a,s),this.boundBottom.setDisplaySize(a,s),this.boundTop.setY(-this.displayHeight/2+s/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-s/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.config.useMask&&this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.updateObjectVisible=function(){for(var e=this.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-this.height/2||n.y-n.height>this.height/2?n.setVisible(!1):n.setVisible(!0)}},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=b(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.velocity-=n*this.acceleration*e/1e3,Math.abs(this.velocity)<this.acceleration*e/1e3&&this.stopScrollSmooth(),this.isReachTop()&&(this.startScrollingBack(this.marginTop),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxHeight),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t)},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0},n.isReachTop=function(){return this.value>this.marginTop},n.isReachBottom=function(){return-this.value>this.maxHeight},(0,a.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container);t.Z=P},101:function(e,t){"use strict";t.Z={BACKGROUND:1,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:20,TILE:25,TEXT:30,ENCOURAGING:31,EFFECT:32,MESSAGE:33,POPUP:999,PRIORITY:80,DEBUG:90,DICE:99,PIECE:99,ON_TOP:1e4}},465:function(e,t){"use strict";t.Z={min:18,max:60}},452:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"font-main",TEXTURE:"./assets/fonts/primary.png",DATA:"./assets/fonts/primary.xml"},PRIMARY_LIGHT:{KEY:"font-main-light",TEXTURE:"./assets/fonts/primary-light.png",DATA:"./assets/fonts/primary-light.xml"},NUMBER_LIGHT:{KEY:"number-light",TEXTURE:"./assets/fonts/number-light.png",DATA:"./assets/fonts/number-light.xml"},NUMBER_DARK:{KEY:"number-dark",TEXTURE:"./assets/fonts/number-dark.png",DATA:"./assets/fonts/number-dark.xml"},FONT_FAMILY:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',FONT_FAMILY_ARIAL:"Arial"}},201:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",KEY_LANDSCAPE:"background-landscape",KEY_PORTRAIT:"background-portrait",FILE_LANDSCAPE:"./assets/images/"+n+"x/background-landscape.jpg",FILE_PORTRAIT:"./assets/images/"+n+"x/background-portrait.jpg",CONFIG:{}}};t.Z=i},100:function(e,t,n){"use strict";var i=n(62),a=GameCore.Utils.Image.getImageScale(),s={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+a+"x/tutorial-resources.png",JSON:"./assets/textures/"+a+"x/tutorial-resources.json",FRAME:{HAND:"hand",BLANK:"blank",BUTTON_BROWN:"brown"}},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+a+"x{langcode}/default-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/default-resources.json",URL:"./assets/textures/"+a+"x{langcode}/",FRAME:{BLANK:"blank",LOGO:"logo",TEXT_LOADING:"loading",BORDER_BOTTOM_PANEL:"border-bottom-panel",BOTTOM_PANEL:"bottom-panel",BOTTOM_LINE:"bottom-line",GLARE:"glare",TITLE_YOUR_SCORE:"title-your-score",BG_YOUR_SCORE:"bg-your-score",LEAF:"leaf",BEST_SCORE_FRAME:"best-score-frame",BEST_SCORE_FRAME_LONG:"best-score-frame-long",FOOTER:"footer",SCORE_PANEL:"score-panel",SCORE_PANEL_DARK:"score-panel-dark",BG_PROGRESS_CIRCLE:"bg-progress-circle",BG_TEXT_TARGET_PANEL:"text-target-panel",WOOD_PANEL:"wood-panel",BORDER_DAILY:"border-daily",BG_STREAK:"bg-streak",BG_COMBO:"bg-combo",LEVEL_PLAYED:"bg/level-played",LEVEL_PLAYING:"bg/level-playing",LEVEL_LOCKED:"bg/level-locked",BG_DARK:"bg/bg-dark",BG_TOP:"bg/bg-top",BG_MIDDLE:"bg/bg-middle",BG_BOTTOM:"bg/bg-bottom",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_TOP:"leaderboards/bg-top",LEADERBOARD_BG_MIDDLE:"leaderboards/bg-middle",LEADERBOARD_BG_BOTTOM:"leaderboards/bg-bottom",LEADERBOARD_BG_ITEM:"leaderboards/bg-item",LEADERBOARD_BORDER_LEFT:"leaderboards/border-left",LEADERBOARD_BORDER_RIGHT:"leaderboards/border-right",PREFIX_LEADERBOARD_BG_ITEM:"leaderboards/bg-item-",PREFIX_LEADERBOARD_BG_ITEM_0:"leaderboards/bg-item-0",AVATAR_BORDER:"avatar/border",AVATAR_BORDER_BIG:"avatar/border-big",AVATAR_BORDER_CHALLENGE:"avatar/border-challenge",AVATAR_BACKGROUND:"avatar/background",POPUP_TOP:"popup/top",POPUP_TOP_DARK:"popup/top-dark",POPUP_MID:"popup/middle",POPUP_BOTTOM:"popup/bottom",POPUP_CONTENT_BACKGROUND:"popup/background",POPUP_SCORE_PANEL:"popup/score-panel",ICON_ADS:"icons/flat-ad",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_SOUND:"icons/sound",ICON_VIBRATE:"icons/vibrate",ICON_MUSIC:"icons/music",ICON_RANK:"icons/rank",ICON_PLAY:"icons/play",ICON_I_PLAY:"icons/i-play",ICON_PLAY_GREEN:"icons/play-green",ICON_SHARE:"icons/share",ICON_INVITE:"icons/invite",ICON_FLAG:"icons/milestone",ICON_BROWN_JOURNEY:"icons/brown-journey",ICON_WHITE_JOURNEY:"icons/white-journey",ICON_SWORD:"icons/sword",ICON_SWORD_BLUE:"icons/sword-blue",ICON_SETTING:"icons/setting",ICON_REPLAY:"icons/replay",ICON_RETRY:"icons/retry",ICON_HOME:"icons/home",ICON_BACK:"icons/back",ICON_BATTLE:"icons/battle",ICON_CUP:"icons/cup",ICON_SHARE_BLUE:"icons/share-blue",ICON_CROWN:"icons/crown",ICON_CROWN_BIG:"icons/crown-big",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/icon-daily",ICON_JOURNEY:"icons/icon-journey",ICON_JOURNEY_2:"icon-journey",ICON_DOT_RED:"icons/dot",ICON_STAR:"icons/star",ICON_PLUS:"icons/plus",ICON_CHECK:"icons/check",BUTTON_CLOSE:"buttons/close",BUTTON_RED:"buttons/red",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SMALL:"buttons/blue-small",BUTTON_BLUE_MEDIUM:"buttons/blue-medium",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_BIG:"buttons/green-big",BUTTON_DARK_BLUE:"buttons/dark-blue",BUTTON_DARK_BLUE_BIG:"buttons/dark-blue-big",BUTTON_BROWN:"buttons/brown",BUTTON_GREEN_LARGE:"buttons/green-large",BUTTON_PLAY:"buttons/play",BUTTON_RANDOM:"buttons/random",BUTTON_CHALLENGE_LIGHT:"buttons/challenge_light",BUTTON_SHARE_DARK:"buttons/share",BUTTON_MINOR:"buttons/minor",BUTTON_CIRCLE:"buttons/circle-button",BUTTON_TOGGLE_OFF:"buttons/toggle-off",BUTTON_TOGGLE_ON:"buttons/toggle-on",BUTTON_DARK_BLUE_SMALL:"buttons/dark-blue-small",BUTTON_DOT_BLUE:"buttons/dot-blue",BUTTON_DOT_GREEN:"buttons/dot-green",BUTTON_SKIP:"buttons/skip",DAILY_BORDER:"daily-challenge/border",DAILY_BACKGROUND:"daily-challenge/bg",DAILY_TITLE_PANEL:"daily-challenge/title-panel",DAILY_BORDER_TOP:"daily-challenge/top-panel",DAILY_BORDER_MIDDLE:"daily-challenge/middle-panel",DAILY_BORDER_BOTTOM:"daily-challenge/bottom-panel",DAILY_BG_ITEM_LIGHT:"daily-challenge/bg-item-light",DAILY_BG_ITEM_DARK:"daily-challenge/bg-item-dark",DAILY_BG_TIME:"daily-challenge/time-panel",NO_THANK_TEXT:"texts/no-thank",TEXT_SECOND_CHANGE:"texts/second-chance",TEXT_VS:"texts/vs",TEXT_LOSE:"texts/lose",TEXT_WIN:"texts/win",TEXT_DRAW:"texts/draw",TEXT_CONTINUE:"texts/continue",TEXT_LEADER_BOARD:"texts/leader-board",TEXT_WORLD:"texts/world",TEXT_WORLD_DISABLE:"texts/world-disable",TEXT_FRIENDS:"texts/friends",TEXT_FRIENDS_DISABLE:"texts/friends-disable",TEXT_PLAY_WITH:"texts/play-with",TEXT_PLAY_WITH_BLUE:"texts/play-with-blue",TEXT_JOURNEY:"texts/text-journey",TEXT_SETTING:"texts/setting",TEXT_OFF:"texts/off",TEXT_ON:"texts/on",TEXT_REPLAY:"texts/replay",TEXT_YOUR_SCORE:"texts/your-score",TEXT_WAITING_OPPONENT:"texts/waiting-for-opponent",TEXT_SINGLE:"texts/play-single",TEXT_RETRY:"texts/text-retry",TEXT_LEVEL_FAIL:"texts/level-failed",TEXT_CONGRATULATION:"texts/congratulations",TEXT_NEXT_LEVEL:"texts/text-next-level",TEXT_START_OVER:"texts/start-over",TEXT_SHARE_BLUE:"texts/text-share",TEXT_PLAY:"texts/play",TEXT_MISSION:"texts/mission",TEXT_NEXT_MILESTONE:"texts/next-milestone",TEXT_FIRST_MILESTONE:"texts/first-milestone",TEXT_COLLECT:"texts/collect",TEXT_TARGET_SCORE:"texts/target-score",TEXT_YES:"texts/yes",TEXT_NO:"texts/no",TEXT_TUTORIAL:"texts/text-tutorial",TEXT_DAILY_CHALLENGE:"texts/daily-challenge",TEXT_START:"texts/start",TEXT_RESULT:"texts/result",TEXT_RANKING:"texts/text-ranking",TEXT_NEW_BEST:"texts/new-best",TEXT_INVITE_FRIENDS:"texts/invite-friends",TEXT_KEEP_PLAYING:"texts/keep-playing",TEXT_OUT_OF_LIVE:"texts/out-of-live",TEXT_REFILL_LIVES:"texts/refill-lives",LIVES_HEART:"lives/heart",LIVES_TIME_BLOCK:"lives/time-block",LIVES_TIME_BLOCK_2:"lives/time-block-2",PANEL_BEST_SCORE:"ui-ngang/khung-best-score",PANEL_MISSION:"ui-ngang/khung-mission",PANEL_NEXT_BLOCK:"ui-ngang/khung-next-block",PANEL_SCORE:"ui-ngang/khung-score",TEXT_NEXT_BLOCK:"ui-ngang/text-next-block",TEXT_SCORE:"ui-ngang/text-score",TEXT_MISSION_LANDSCAPE:"ui-ngang/text-mission"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x{langcode}/effects-resources.png",JSON:"./assets/textures/"+a+"x{langcode}/effects-resources.json",FRAME:{BLANK:"blank",GLOW_CIRCLE:"glow-circle",GLARE_CROSS:"glare-cross",DUST:"dust",DUST_YELLOW:"dust-yellow",FX_STAR:"star",FX_STAR_YELLOW:"star-yellow",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_CONFETTI_RIBBON:"ribbon",TEXT_COOL:"text/text_cool",TEXT_EXCELLENT:"text/text_excellent",TEXT_GOOD:"text/text_good",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-"}},ANIMATION_SCENE:{KEY:"effects-resources",PATH:"./assets/textures/"+a+"x/",JSON:"./assets/textures/"+a+"x/animation-scene-resources.json",FRAME:{BLANK:"blank",COIN:"coins/coin",COIN_SMALL:"coins/coin-small",COIN_SMALL_GREY:"coins/coin-small-grey",FX_SPARK_YELLOW:"yellow-spark",FX_CONFETTI_RIBBON:"ribbon/ribbon"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-resources.json",FRAME:{BLANK:"blank",BG_SCORE:"bg-score",BG_MAIN_SCORE:"bg-main-score",BOARD:"board",VIOLET_GLOW:"violet-glow",MASK:"mask",FLAG:"flag",DUST:"dust",CUP_GLARE:"cup-glare",HAND:"hand",AVATAR_BORDER:"avatars/border",AVATAR_BACKGROUND:"avatars/background",ICON_SETTING:"icons/setting",ICON_CUP:"icons/cup",ICON_CHECK:"icons/check",ICON_STAR:"icons/star",ICON_STAR_1:"icons/star-1",ICON_HOME:"icons/home",ICON_ADD_FRIEND:"icons/add-friends",ICON_BATTLE:"icons/battle",TEXT_NEXT_LEVEL:"text/next-level",BUTTON_WOOD_SMALL:"buttons/wood-small",BUTTON_SKIP:"buttons/button-skip",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",PROGRESS_BAR_RIGHT_WHITE:"progress/bar-right-white"}},GAMEPLAY_32:{KEY:"gameplay-32-resources",TEXTURE:"./assets/textures/"+a+"x/gameplay-32-resources.png",JSON:"./assets/textures/"+a+"x/gameplay-32-resources.json",FRAME:{GEM:"gem/gem",GEM_LIGHT:"gem/gem_light",GEM_SILVER:"gem/gem_silver",GEM_TRANSPARENT:"gem/gem_transparent",GEM_WHITE:"gem/gem_white",GEM_GLARE:"gem/gem_glare",GEM_HIGHT_LIGHT:"gem/gem_highlight",GEM_DIAMOND_10:"gem/diamond/diamond-10",GEM_DIAMOND_11:"gem/diamond/diamond-11",GEM_DIAMOND_12:"gem/diamond/diamond-12",GEM_DIAMOND_13:"gem/diamond/diamond-13",GEM_DIAMOND_14:"gem/diamond/diamond-14",GEM_DIAMOND_15:"gem/diamond/diamond-15",GEM_DIAMOND_10_LIGHT:"gem/diamond/diamond-10_light",GEM_DIAMOND_11_LIGHT:"gem/diamond/diamond-11_light",GEM_DIAMOND_12_LIGHT:"gem/diamond/diamond-12_light",GEM_DIAMOND_13_LIGHT:"gem/diamond/diamond-13_light",GEM_DIAMOND_14_LIGHT:"gem/diamond/diamond-14_light",GEM_DIAMOND_15_LIGHT:"gem/diamond/diamond-15_light",GEM_RUBY_20:"gem/ruby/ruby-20",GEM_SAPPHIRE_30:"gem/sapphire/sapphire-30",BLOCK_GRADIENT_PREFIX:"gem/block_gradient/block_color"}},DEMO_SPINE:{KEY:"demo-spine",jsonPATH:"./assets/spines/demo/demo.json",atlasPATH:"./assets/spines/demo/demo.atlas"}};GameCore.Utils.Valid.isDebugger()&&(s.EFFECTS.FRAME=(0,i.Z)({},s.ANIMATION_SCENE.FRAME,s.EFFECTS.FRAME)),t.Z=s},202:function(e,t,n){"use strict";n.d(t,{Co:function(){return s},K5:function(){return r}});var i=n(104),a=n.n(i),s={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",GAME_OVER_SCENE:"GAME_OVER_SCENE",LEADERBOARD_SCENE:"LEADERBOARD_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",LEVEL_SCENE:"LEVEL_SCENE",TEST_SCENE:"TEST_SCENE",ANIMATIONS_SCENE:"ANIMATIONS_SCENE"},r={SWITCH:a()("SWITCH"),LAUNCH:a()("LAUNCH"),RUN:a()("RUN")};!function(e){e[e.SCENE=0]="SCENE",e[e.POPUP=1]="POPUP"}({})},451:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={ALERT_SCREEN:"ALERT_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",RESULT_SCREEN:"RESULT_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",GAME_OVER_SCREEN:"GAME_OVER_SCREEN",TUTORIAL_PLAY_SCREEN:"TUTORIAL_PLAY_SCREEN",LEADER_BOARD_SCREEN:"LEADER_BOARD_SCREEN",MINI_JOURNEY_SCREEN:"MINI_JOURNEY_SCREEN",DAILY_CHALLENGE_SCREEN:"DAILY_CHALLENGE_SCREEN",YOUR_SCORE_SCREEN:"YOUR_SCORE_SCREEN",LEVEL_SCREEN:"LEVEL_SCREEN",MISSION_SCORE_COMPLETE_SCREEN:"MISSION_SCORE_COMPLETE_SCREEN",MISSION_COLLECTION_COMPLETE_SCREEN:"MISSION_COLLECTION_COMPLETE_SCREEN",MISSION_FAIL_SCREEN:"MISSION_FAIL_SCREEN",COLLISION_COMPLETED_SCREEN:"COLLISION_COMPLETED_SCREEN",NO_SPACE_LEFT_SCREEN:"NO_SPACE_LEFT_SCREEN",SCORE_REACHED_SCREEN:"SCORE_REACHED_SCREEN",NEXT_TARGET_SCORE_SCREEN:"NEXT_TARGET_SCORE_SCREEN",COLLECTION_ITEMS_SCREEN:"COLLECTION_ITEMS_SCREEN",TARGET_SCORE_SCREEN:"TARGET_SCORE_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",CLAIM_HEART_SCREEN:"CLAIM_HEART_SCREEN",START_OVER_SCREEN:"START_OVER_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},203:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",CONGRATULATION:"congratulation",DAILY_REWARD:"daily_reward",GAME_OVER_SCENE:"game_over_scene",GAME_OVER:"game_over",POPUP_OFF:"popup_off",POPUP_SHOW:"popup_show",SCORE_COUNT:"score_count",PIECE_PICK:"piece_pick",PIECE_DROP:"piece_drop",PIECE_INVALID_MOVE:"piece_invalid_move",BOARD_GAME_OVER:"board_end",RESCUE_TIME:"rescue_timer",EAT_BLOCK:"eat_block",GOOD:"good",COOL:"cool",EXCELLENT:"excellent",SCORE_REACHED:"reach_score",TARGET_REACHED:"reach_goal",WAIT_OPPONENT:"wait_opponent",WIN:"win",LOSE:"lose",DRAW:"draw",FIREWORKS_BIG:"fireworks_big",FIREWORKS_SOAR:"fireworks_soar",FIREWORKS_SMALL:"fireworks_small"}},628:function(e,t,n){"use strict";var i=n(50),a=n(17),s=n(100),r=n(124),o=s.Z.EFFECTS,c=o.KEY,l=o.FRAME,h=function(e){function t(t,n){var a;return(a=e.call(this,t,c,l.BLANK)||this).config=void 0,a.emitter=void 0,a.config=n||{},a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=l.FX_CONFETTI_SMALL_1,t=l.FX_CONFETTI_SMALL_2,n=l.FX_CONFETTI_SMALL_3,i=l.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),s={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:300,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:.8},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},o=(0,r.TS)(s,this.config);this.emitter=this.createEmitter(o)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager);t.Z=h},464:function(e,t){"use strict";t.Z={LAYOUT_UPDATE:"layout-update"}},463:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(17),a=n(83),s=n.n(a),r=n(126),o=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),c=n(448),l=n(465),h=n(202),u=n(201),d=n(464),p=function(e){(0,i.Z)(n,e);var t=n.prototype;function n(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen(),t.scaleGame()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(d.Z.LAYOUT_UPDATE),t.updateBackgroundImage()}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}return t.updateBackgroundImage=function(){var e=this,t=u.Z.BACKGROUND.KEY_PORTRAIT,n=u.Z.BACKGROUND.FILE_PORTRAIT;if(this.world.isLandscape()&&(t=u.Z.BACKGROUND.KEY_LANDSCAPE,n=u.Z.BACKGROUND.FILE_LANDSCAPE),this.textures.exists(t))this.handleLoadCompleteBackground(t);else{this.load.image(t,n),this.load.start();this.textures.on(Phaser.Textures.Events.ADD,(function t(n){e.handleLoadCompleteBackground(n),e.textures.off(Phaser.Textures.Events.ADD,t)}))}},t.handleLoadCompleteBackground=function(e){for(var t=this.textures.get(u.Z.BACKGROUND.KEY),n=this.textures.get(e),i=0;i<t.source.length;i++)t.source[i].glTexture=n.source[0].glTexture,t.source[i].glIndex=n.source[0].glIndex,t.source[i].glIndexCounter=n.source[0].glIndexCounter},t.create=function(){var e=this;this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(c.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone();var t=GameCore.Configs.Game;this.events.on(Phaser.Scenes.Events.UPDATE,(function(){t.AutoDropFps&&e.autoUpdateFPS()}))},t.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},t.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new o(this,t,n)},t.autoUpdateFPS=function(){this.allowUpdateFPS()&&(this.tweenPlaying()||this.particlePlaying()?this.game.updateFps(l.Z.max):this.game.updateFps(l.Z.min))},t.allowUpdateFPS=function(){return this.scene.key===h.Co.GAME_SCENE||this.scene.key===h.Co.JOURNEY_SCENE},t.tweenPlaying=function(){for(var e=this.tweens.getAllTweens(),t=0;t<e.length;t++)if(e[t].isPlaying())return!0;return!1},t.particlePlaying=function(){var e=this.getAllParticles();if(!e)return!0;var t=!1;return e.forEach((function(e){e.emitters.list.forEach((function(e){e.alive&&e.alive.length>0&&(t=!0)}))})),t},t.getAllParticles=function(){if(this.input.enabled&&this.scene.isActive()&&!this.scene.isPaused()){var e=this.children.list;return!e||e.length<=0?[]:s()(e).call(e,(function(e){return"ParticleEmitterManager"===e.type}))}},t.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},t.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},t.fontSize=function(e){return e/2.4},t.createBackground=function(e,t,n,i){try{this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,s=a.displayWidth,r=a.displayHeight;this.background.setDisplaySize(s,r),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)}catch(o){console.log("Ex === ",o)}},t.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},t.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},t.logEventOpen=function(){this.analytics.event(r._.SCREEN_OPEN,{screen_name:this.getSceneName()})},t.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},n}(Phaser.Scene)},453:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var i=n(99),a=n(17),s=n(64),r=n.n(s),o=(n(462),n(460)),c=n(100),l=n(202),h=n(451),u=n(450),d=(0,n(447).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(200),g=n(463),f=n(50),m=n(452),v=n(101),E=c.Z.DEFAULT,S=E.KEY,A=E.FRAME,T=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:S,frame:A.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:m.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),y=T,I=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(v.Z.DEBUG),n.scene.add.existing((0,f.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,f.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:m.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),C=I,b=n(456),O=n(461),P=n(458),R=n(457),w=n(203),x=c.Z.DEFAULT,k=x.KEY,_=x.FRAME,L=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.buttonNo=void 0,s.buttonYes=void 0,s.messageText=void 0,s.messageText2=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onHandleYes=void 0,s.open=function(t){e.prototype.open.call((0,f.Z)(s),t),s.setVisible(!0);var n=s.getData(["message","onHandleYes"]),i=n[0],a=void 0===i?"":i,r=n[1];s.setTextMessage(a),s.onHandleYes=r,s.runOpenAnimation()},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){s.scene.screen.close(s.name)}))},s.handleNo=function(){s.close()},s.handleYes=function(){s.onHandleYes&&s.onHandleYes(),s.close()},s.setVisible(!1),s.setDepth(h.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,a.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new R.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createTitle(),this.createMessage(),this.createMessage2(),this.createButtonNo(),this.createButtonYes(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.messageText2,this.buttonNo,this.buttonYes])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_TUTORIAL}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=new P.Z(this.scene,k,_.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.Center(a,this.title,155,-19),Phaser.Display.Align.In.Center(t,this.title,0,10),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createButtonNo=function(){this.buttonNo=new P.Z(this.scene,k,_.BUTTON_DARK_BLUE,120,40),this.buttonNo.setName("No");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_NO}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonNo.add(t),Phaser.Display.Align.In.Center(t,this.buttonNo),this.popup.add(this.buttonNo),Phaser.Display.Align.In.Center(this.buttonNo,this.popup,80,60),this.buttonNo.onClick=this.handleNo},n.createButtonYes=function(){this.buttonYes=new P.Z(this.scene,k,_.BUTTON_GREEN_LARGE,120,40),this.buttonYes.setName("Yes");var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:k,frame:_.TEXT_YES}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonYes.add(t),Phaser.Display.Align.In.Center(t,this.buttonYes),this.popup.add(this.buttonYes),Phaser.Display.Align.In.Center(this.buttonYes,this.popup,-80,60),this.buttonYes.onClick=this.handleYes},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:m.Z.PRIMARY.KEY,size:this.scene.fontSize(45),origin:{x:.5,y:.5}}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-40),this.messageText.setScale(0).setAlpha(0)},n.createMessage2=function(){this.messageText2=this.scene.make.text({style:{fontFamily:m.Z.FONT_FAMILY,fontSize:this.scene.fontSize(45)+"px"},origin:{x:.5,y:.5}}),this.messageText2.setTint(7551258),this.messageText2.setVisible(!1),this.popup.add(this.messageText2),Phaser.Display.Align.In.Center(this.messageText2,this.popup,0,-40),this.messageText2.setScale(0).setAlpha(0)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new o.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setTextMessage=function(e){this.messageText.setText(""+e),"ar"==this.scene.facebook.getLocale()&&(this.messageText2.setText(""+e),this.messageText2.setVisible(!0),this.messageText.setVisible(!1))},n.runOpenAnimation=function(){this.scene.audio.playSound(w.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new O.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new b.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),M=L,D=n(87),N=n.n(D),B=n(454),G=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).loadingIcon=void 0,s.messageText=void 0,s.openAnimation=void 0,s.closeTimerEvent=void 0,s.countDownTween=void 0,s.addLoadingIcon(),s.addMessageText(),s.setDepth(h.Ks.PRIORITY),s.background.setAlpha(.8),s}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i,a=this;e.prototype.open.call(this,t);var s=this.getData(["message","duration","loading","countDown"]),r=s[0],o=void 0===r?"":r,c=s[1],l=void 0===c?0:c,h=s[2],u=void 0!==h&&h,d=s[3],p=void 0!==d&&d;null==(n=this.countDownTween)||n.remove(),p?(this.setMessage(o,[Math.round(l/1e3)]),this.countDownTween=this.scene.tweens.addCounter({from:l,to:0,duration:l,onUpdate:function(e){var t=e.getValue();a.setMessage(o,[Math.round(t/1e3)])}})):this.setMessage(o),this.showLoading(u),null==(i=this.closeTimerEvent)||i.remove(),l>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:l,callback:function(){a.visible&&a.scene.screen.close(a.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new B.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(40),font:m.Z.PRIMARY_LIGHT.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e,t){this.messageText.setText(this.printf(e,t)),this.messageText.setScale(1)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?20:80;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove(),this.openAnimation=new b.Z({targets:[this.messageText,this.loadingIcon],props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},n.printf=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 0===n.length?e:N()(n).call(n,(function(e,t){return e.replace(/%s|%v|%d|%f|%d/,t)}),e)},t}(GameCore.Screen),F=G,U=c.Z.DEFAULT,H=U.KEY,Z=U.FRAME,Y=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.key!==e&&n.currentScene.switch(e)},n.runScene=function(e){n.currentScene.run(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==l.Co.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==l.Co.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addAlertScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,F);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addAlertScreen=function(){var e=this.screen.add(h.o4.ALERT_SCREEN,M);Phaser.Display.Align.In.Center(e,this.gameZone)},n.addMask=function(){this.mask=this.make.image({key:H,frame:Z.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(0),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new y(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new C(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){},n.runMaskFadeOutAnimation=function(){},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K5.SWITCH,this.switchScene),this.events.on(l.K5.RUN,this.runScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.Co.GLOBAL_SCENE&&this.storage.dispatch((0,u.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=d(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),W=Y},580:function(e,t,n){"use strict";var i=n(200),a=n(443),s=n(62),r=n(63),o=n(17),c=n(84),l=n.n(c),h=n(46),u=n.n(h),d=n(621),p=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,s=this.height,r=this.depth,o=this.originX,c=this.originY,l=this.scene.add.rectangle(n,i,a,s,e,t);l.setName("Debug Box"),l.setDepth(r);var h=GameCore.Utils.Valid.isNumber;return h(o)&&h(c)&&l.setOrigin(o,c),l},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),g=p,f=n(64),m=n.n(f),v=n(86),E=n.n(v),S=GameCore.Configs.Ads.Mockup.GiphyApiKey,A=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAdContentAsync();case 2:if(t=e.sent,!(n=document.getElementById("mock-banner-ads"))){e.next=11;break}if((i=n.getElementsByTagName("img"))&&!(i.length<=0)){e.next=8;break}return e.abrupt("return");case 8:i[0].src=t,e.next=27;break;case 11:(a=document.createElement("div")).id="mock-banner-ads",a.style.width="100%",a.style.height="50px",a.style.bottom="var(--sab)",a.style.position="fixed",a.style.background="#fff url("+t+") center center/auto no-repeat",a.style.outline="2px solid #ffffff40",a.style.outlineOffset="-2px",s=document.createElement("style"),(document.head||document.getElementsByTagName("head")[0]).appendChild(s),"@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }",s.appendChild(document.createTextNode("@keyframes fake-gif {\n                0%,10% {\n                    background-position-y: top\n                }\n                60% {\n                    background-position-y: center\n                }\n                100% {\n                    background-position-y: bottom\n                }\n            }")),a.style.animation="fake-gif 6s ease-in-out 0s infinite alternate both",document.body.appendChild(a);case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.getAdContentAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.giphy.com/v1/gifs/trending?api_key="+S+"&rate=pg&bundle=low_bandwidth",e.next=3,fetch(t,{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(i=e.sent,GameCore.Utils.Valid.isObject(i)){e.next=9;break}return e.abrupt("return","");case 9:return a=i.data,s=Math.floor(Math.random()*a.length),e.abrupt("return",a[s].images.downsized.url);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),T={LOADED:"loaded",DISPLAYED:"displayed"},y=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(y||{}),I=y,C=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e}(C||{}),b=C,O=n(446),P=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),R=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=I.IDLE};GameCore.Ads={Types:b,Status:I,Events:T,AdError:P,AdInstance:R};var w=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(b.INTERSTITIAL,i.pID),this.rewardedVideo=new e(b.REWARDED,n.pID),this.preRoll=new e(b.PRE_ROLL,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(b.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAd()){e.next=2;break}throw new P("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(b.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(b.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(b.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(b.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new P("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(b.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return e.next=7,n.loadAsync();case 7:this.events.emit(T.LOADED,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new P("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new P("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==b.INTERSTITIAL&&t!==b.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===b.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(T.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case b.INTERSTITIAL:return this.interstitial;case b.REWARDED:return this.rewardedVideo;case b.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){return this.canbeShowInterstitialAdByTime()},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.showBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n,this.bannerAdConfig),this.reloadBannerAdIntervals[n]=setInterval((function(){a.loadBannerAdAsync(n,a.bannerAdConfig)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n,this.bannerAdConfig),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,A.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t,n);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,A.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){var e;if(!this.enabled)return 0;if(!this.canShowBannerAd())return 0;if(!E()(e=this.bannerAdConfig.position).call(e,"bottom"))return 0;var t=(this.bannerAdConfig||{}).bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),s=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/s)}return n},t}(Phaser.Plugins.BasePlugin),x=w,k=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e,t,n){this.processLevelStart(e,t,n),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,{level:e,score:t,levelName:n})},t.levelFail=function(e,t,n){this.processLevelFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": level fail","color: "+this.color,{level:e,score:t,levelName:n})},t.levelRescue=function(e,t,n){this.processLevelRescue(e,t,n),this.selfLog&&console.info("%c"+this.name+": level rescue","color: "+this.color,{level:e,score:t,levelName:n})},t.levelComplete=function(e,t,n){this.processLevelComplete(e,t,n),this.selfLog&&console.info("%c"+this.name+": level complete","color: "+this.color,{level:e,score:t,levelName:n})},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e,t,n){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processShowInterstitialAd=function(e){},t.processShowPreRollAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:k};var _=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelStart(e,t,n)}))},n.levelRescue=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelRescue(e,t,n)}))},n.levelFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelFail(e,t,n)}))},n.levelComplete=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.levelComplete(e,t,n)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),L=_,M=n(467),D=n.n(M),N=n(82),B=n.n(N),G=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.soundKeys=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(D()),this.soundKeys=new(D())}var t=e.prototype;return t.addSoundKeys=function(e){var t=this;B()(e).forEach((function(n){var i=e[n];"string"===typeof i&&t.soundKeys.set(n,i)}))},t.clearSoundKeys=function(){this.soundKeys.clear()},t.play=function(e,t){var n=this,i=(0,s.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var a=this.audios.get(e);if(!a&&this.game.cache.audio.exists(e)){var r=this.game.sound.add(e);this.audios.set(e,r),a=r}if(a)a.play(void 0,i);else{var o=this.soundKeys.get(e);if(!o)return console.log(this.soundKeys.get(e),e),void console.warn(e+" not found. Use importSoundEffectKeys from audio plugin to add it.");try{console.log(e,o,"load_sound_plugin"),this.game.globalScene.load.audio(e,o),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){console.log(e,o,"finish");var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start()}catch(c){console.warn(c)}}},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},t.stopAll=function(){this.audios.forEach((function(e){e.stop()}))},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},e}(),F=G,U=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,a,r=(0,s.Z)({volume:this.volume},t||{});if(r.volume!==this.volume&&(r.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(a=this.audio)||a.play(e,r));this.createMaker(e),null==(n=this.markers[e])||n.play(e,r)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),H=U,Z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new H(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new F(n.game),n.setSoundVolume(1)},n}(0,o.Z)(t,e);var n=t.prototype;return n.importSoundEffectKeys=function(e){this.soundManager.addSoundKeys(e)},n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,s.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),Y=Z,W=n(99),V="AUTH_TOKEN_REQUEST",z="AUTH_TOKEN_RECEIVED",K=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),j=n(447),X="auth",J=(0,j.P1)([function(e){return e[X].token}],(function(e){return e})),q=(0,j.P1)([function(e){return e[X].isRequesting}],(function(e){return e})),Q=function(e){return{type:z,payload:{token:e}}},$=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,s=n(),r=J(s),!q(s)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:V,payload:{}}),e.next=10,a.getPlayerToken();case 10:o=e.sent,t(Q(o)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(Q("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,i.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,i.tO)(new K);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return J(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ee=$,te=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,i,a=(n=this.width*t,i=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(i/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+a.string,a.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},ne=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=B()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.prev=5,e.next=8,this.loadImages();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(l())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],s=a.name,r=a.image;if(r)e.scene.textures.get(s).key!==s&&e.scene.load.image(s,r)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,s=e.text,r=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=r||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(s,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,s=e.frame,r=e.width,o=e.height,c=e.fallbackWithImage,l=this.scene.textures.get(a),h=l.getSourceImage(s);"__MISSING"===l.key&&c&&(h=(l=this.scene.textures.get(c)).getSourceImage()),t.drawImage(h,n,i,r,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&te(e),e},t}(Phaser.Plugins.ScenePlugin),ie=ne,ae={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme},se=n(83),re=n.n(se),oe=n(102),ce=n.n(oe),le=ae.sound,he=ae.music,ue=ae.vibrate,de=ae.language,pe=ae.theme,ge=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,s=t.language,r=t.theme;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:le,this.music=GameCore.Utils.Valid.isBoolean(i)?i:he,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:ue,this.language=GameCore.Utils.Valid.isString(s)?s:de,this.theme=GameCore.Utils.Valid.isString(r)?r:pe}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme}},e}(),fe=ge,me=GameCore.Utils,ve=me.Valid,Ee=me.Object,Se=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,s.Z)({},ae),this.gameData={coins:0,diamond:0,lastReceiveGift:0,dailyRewarded:{lastRewarded:0,logDays:[]},dailyTasks:{startedTime:0,logTasks:{}}},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==ve.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==ve.isObject(t)){var n=new fe(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;if(!1!==ve.isObject(t)){if(Ee.hasOwn(t,"coins")&&ve.isNumber(t.coins)&&(this.gameData.coins=t.coins),Ee.hasOwn(t,"diamond")&&ve.isNumber(t.diamond)&&(this.gameData.diamond=t.diamond),Ee.hasOwn(t,"lastReceiveGift")&&ve.isNumber(t.lastReceiveGift)&&(this.gameData.lastReceiveGift=t.lastReceiveGift),Ee.hasOwn(t,"dailyRewarded")&&ve.isObject(t.dailyRewarded)){var n=t.dailyRewarded;Ee.hasOwn(n,"lastRewarded")&&ve.isNumber(n.lastRewarded)&&(this.gameData.dailyRewarded.lastRewarded=n.lastRewarded),Ee.hasOwn(n,"logDays")&&Array.isArray(n.logDays)&&(this.gameData.dailyRewarded.logDays=n.logDays)}if(Ee.hasOwn(t,"dailyTasks")&&ve.isObject(t.dailyTasks)){var i=t.dailyTasks;Ee.hasOwn(i,"startedTime")&&ve.isNumber(i.startedTime)&&(this.gameData.dailyTasks.startedTime=i.startedTime),Ee.hasOwn(i,"logTasks")&&ve.isObject(i.logTasks)&&(this.gameData.dailyTasks.logTasks=i.logTasks)}}},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==ve.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.diamond,i=e.dailyTasks,a=e.dailyRewarded,s=e.lastReceiveGift;return{score:this.score,settings:this.settings,customFields:{coins:t,diamond:n,dailyTasks:i,dailyRewarded:a,lastReceiveGift:s},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}(),Ae=Se,Te=n(449),ye=GameCore.Configs.ApiHost,Ie=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.v)("players?platform=ms-games",t,{},ye,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.v)("players/"+t+"/user-guide-displays/inc",{},{},ye);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be="PLAYER_RECEIVED",Oe="PLAYER_DATA_UPDATE",Pe="PLAYER_SCORE_UPDATE",Re="PLAYER_PROFILE_UPDATE",we="PLAYER_SETTING_UPDATE",xe="PLAYER_CONNECTED_PLAYERS_UPDATE",ke=n(444),_e=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Le=n(37),Me=n.n(Le),De="player",Ne=(0,j.P1)([function(e){return e[De]}],(function(e){return e})),Be=(0,j.P1)([Ne],(function(e){return e.playerId})),Ge=(0,j.P1)([Ne],(function(e){return e.ASID})),Fe=(0,j.P1)([function(e){return e[De].data}],(function(e){return e})),Ue=((0,j.P1)([Fe],(function(e){return e.settings})),(0,j.P1)([function(e){return e[De].connectedPlayers}],(function(e){return e}))),He=(0,j.P1)([Ue,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=B()(e);return Me()(i).call(i,n,t+n)||[]})),Ze=(0,j.P1)([Fe],(function(e){return e.score})),Ye=(0,j.P1)([Fe],(function(e){return e.customFields})),We=GameCore.Configs,Ve=We.AppId,ze=We.Tutorial,Ke=function(e,t){return function(n){var i=e.playerId,a=e.name,s=e.photo,r=e.locale;n({type:be,payload:{playerId:i,name:a,photo:s,locale:r,data:t||{}}})}},je=function(e){return{type:xe,payload:{connectedPlayers:e}}},Xe=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a({type:we,payload:{name:e,value:t}});case 3:r=s(),o=Fe(r),c=new Ae({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,i.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Je=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={customFields:(r={},r[e]=t,r)},n.next=4,a(Qe(o));case 4:c=s(),l=Fe(c),h=new Ae({}).convertToFacebookData(l),FBInstant.player.setDataAsync(h),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof _e)){n.next=14;break}return n.abrupt("return");case 14:(0,i.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},qe=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={customFields:e},t.next=4,n(Qe(s));case 4:r=a(),o=Fe(r),c=new Ae({}).convertToFacebookData(o),FBInstant.player.setDataAsync(c),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof _e)){t.next=15;break}return t.abrupt("return");case 15:(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Qe=function(e){return{type:Oe,payload:{data:e}}},$e=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Pe,payload:{score:e}});case 3:Ie({score:e}),s=a(),r=Fe(s),o=new Ae({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},et=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ze.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(Qe({userGuideDisplays:1}));case 5:a=n(),s=Be(a),r=Fe(a),o=new Ae({}).convertToFacebookData(r),FBInstant.player.setDataAsync(o),Ce(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ke(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n(),s=Ne(a),r=s.playerId,o=s.name,c=s.photo,l=s.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return h=e.sent,d={appId:Ve,playerId:r,name:o,photo:c,locale:l,ASID:h},e.next=10,t({type:Re,payload:{profile:d}});case 10:return e.next=12,Ie(d);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch($e(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Xe(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Je(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(qe(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game.facebook,e.next=4,new(l())((function(e,t){a.once("players",(function(t){e(t)})),a.once("playersfail",(function(){return t([])})),a.getPlayers()}));case 4:if(s=e.sent,r=function(e){return!!e},o=re()(n=ce()(s).call(s,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new ke.Z(t,n,i).toObject():null}))).call(n,r),!(o.length<1)){e.next=9;break}return e.abrupt("return");case 9:t(je(o)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,i.tO)(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(je(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Ne(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Ge(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(ae,e)?ae[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getDiamond=function(){var e=this.getCustomData("diamond");return GameCore.Utils.Valid.isNumber(e)?e:0},n.getBestScore=function(){return Ze(this.state)},n.getCustomData=function(e){var t=Ye(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Ue(this.state)},n.getConnectedPlayerIds=function(e,t){return He(this.state,{limit:e,offset:t})},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),tt=et,nt=GameCore.Configs.ApiHost,it=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,Te.U)("players?"+n,{},nt);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at="PROFILES_DATA_UPDATE",st="profile",rt=(0,j.P1)([function(e){return e[st].data}],(function(e){return e})),ot=(0,j.P1)([function(e){return e[st].profileIds}],(function(e){return e})),ct=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a(),r=ot(s),!((o=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,it({playerIds:o});case 8:c=t.sent,n({type:at,payload:{data:c}}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),(0,i.tO)(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()},lt=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(ct(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return rt(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ht=lt,ut=n(66),dt=n.n(ut),pt=n(65),gt=n.n(pt),ft=n(210),mt=n.n(ft),vt=["player","match"],Et="null",St=GameCore.Configs.Rollbar,At=St.UseMockup,Tt=St.FilterError,yt=St.ListPlayerDevIds,It=function(e){function t(){for(var t,n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){At&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,s=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;s&&n.events.push(s);var r=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,r);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+dt()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(GameCore.Utils.Object.hasOwn(e,"code")){var t=e.code,n=Tt.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(gt()(i).call(i,t)>=0)return!1;if(gt()(a).call(a,t)>=0)return!0}}else if(GameCore.Utils.Object.hasOwn(e,"name")){var s=e.name,r=Tt.Codes,o=r.accepted,c=r.ignored;if("string"===typeof s){if(gt()(o).call(o,s)>=0)return!1;if(gt()(c).call(c,s)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(GameCore.Utils.Object.hasOwn(e,"message")){var t=e.message,n=Tt.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(gt()(i).call(i,t)>=0)return!1;if(gt()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!GameCore.Utils.Object.hasOwn(window,"game"))return;if(!GameCore.Utils.Object.hasOwn(window.game,"storage"))return;if(!GameCore.Utils.Object.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,i=e.match,s=(0,a.Z)(e,vt);n.rollbar.configure({payload:{player:t,match:i,other:s}})}catch(r){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",r)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(mt())({accessToken:Et,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){var e=this.game.facebook.getPlayerID();E()(yt).call(yt,e)&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),Ct=It,bt=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Ot=bt,Pt=n(126),Rt=n(448),wt=function(e){function t(t,n,i,a){var s;(s=e.call(this,t)||this).zone=void 0,s.background=void 0,s.setName(n),s.setVisible(!1);var r=s.scene.world.getWorldSize(),o=r.width,c=r.height;return s.setSize(i||o,a||c),s.addZone(),s.addBackground(),s.registerEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.setBlockInputOutsideEnabled(!1),this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(0,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Pt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),xt=wt,kt={OPEN:"open",CLOSE:"close",CREATED:"created"};GameCore.Screen=xt,GameCore.Screens={Events:kt};var _t=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Ot,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Lt=_t,Mt=n(391),Dt=n.n(Mt),Nt=n(622),Bt=n(623),Gt=n(445),Ft=n(624),Ut={currentSceneKey:"",prevSceneKey:""};(0,Ft.pV)();var Ht,Zt,Yt,Wt,Vt,zt,Kt,jt,Xt,Jt,qt,Qt={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},$t=Qt,en={data:{}},tn={token:"",isRequesting:!1},nn=(Ht={},Ht[X]=function(e,t){return void 0===e&&(e=tn),(0,Ft.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case V:e.isRequesting=!0;break;case z:e.token=i,e.isRequesting=!1}}}))},Ht),an=n(124),sn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:ae,userGuideDisplays:0,customFields:{}},isUserNew:!0},rn=(Zt={},Zt[De]=function(e,t){return void 0===e&&(e=sn),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,s=i.value,r=i.data,o=void 0===r?{}:r,c=i.score,l=i.connectedPlayers,h=void 0===l?[]:l,u=i.profile;switch(t.type){case be:var d=i.playerId,p=i.name,g=i.photo,f=i.locale,m=i.data;if(n.playerId=d,n.name=p,n.photo=g,n.locale=f,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,an.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case Re:var E=u.playerId,S=u.name,A=u.photo,T=u.locale,y=u.ASID;n.ASID=y,n.playerId=E,n.name=S,n.photo=A,n.locale=T;break;case Pe:n.data.score=c;break;case we:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=s;break;case Oe:n.data=(0,an.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case xe:if(h.length<=0)break;var I=GameCore.Utils.Object.keyBy(h,"playerId");n.connectedPlayers=(0,an.TS)(e.connectedPlayers,I)}}}))},Zt),on=n(581),cn=n.n(on),ln={data:{},profileIds:[]},hn=(Yt={},Yt[st]=function(e,t){return void 0===e&&(e=ln),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.data,r=void 0===a?[]:a;if(t.type===at){var o,c,l=GameCore.Utils.Object.keyBy(r,"playerId"),h=B()(l);n.data=(0,an.TS)((0,s.Z)({},e.data),l),n.profileIds=m()(o=[]).call(o,new(cn())(m()(c=[]).call(c,e.profileIds,h)))}}}))},Yt),un="match",dn="MATCH_GAMEPLAY_INITIALIZE",pn="MATCH_GAMEPLAY_START",gn="MATCH_GAMEPLAY_FINISH",fn="MATCH_GAMEPLAY_UPDATE",mn="MATCH_GAMEPLAY_RESCUE",vn="MATCH_GAMEPLAY_RESET_RESCUE",En="MATCH_GAMEPLAY_SHOW_MINI_JOURNEY",Sn="MATCH_STATS_DATA_CLEAR",An="MATCH_STATS_DATA_UPDATE",Tn="MATCH_STATS_CURRENT_UPDATE",yn="MATCH_SINGLE_CREATE_REQUEST",In="MATCH_SINGLE_DETAIL_REQUEST",Cn="MATCH_SINGLE_MOVE_UPDATED",bn="MATCH_SINGLE_DATA_RECEIVED",On="MATCH_SINGLE_DATA_CLEAR",Pn="MATCH_JOURNEY_CREATE_REQUEST",Rn="MATCH_JOURNEY_MOVE_UPDATED",wn="MATCH_JOURNEY_DATA_RECEIVED",xn="MATCH_JOURNEY_DAILY_CHALLENGE_START",kn="MATCH_JOURNEY_DAILY_CHALLENGE_COMPLETED",_n="MATCH_JOURNEY_SCORE_RECEIVED",Ln="MATCH_JOURNEY_LEVEL_RECEIVED",Mn="MATCH_CHALLENGE_JOIN_REQUEST",Dn="MATCH_CHALLENGE_CREATE_REQUEST",Nn="MATCH_CHALLENGE_FINISH_REQUEST",Bn="MATCH_CHALLENGE_CONTINUE_REQUEST",Gn="MATCH_CHALLENGE_DATA_RECEIVED",Fn="MATCH_CHALLENGE_DATA_CLEAR",Un="MATCH_GROUP_CREATE_REQUEST",Hn="MATCH_GROUP_FINISH_REQUEST",Zn="MATCH_ONLINE_CREATE_REQUEST",Yn="MATCH_ONLINE_DATA_RECEIVED",Wn="open",Vn="active",zn="finished",Kn={mode:"",status:Wn,rescued:0,startAt:0,finishAt:0,showMiniJourney:null},jn={single:{_id:"",data:{fen:""},playerId:"",status:Wn},group:{status:Wn,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:Wn,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:Wn,players:{}},journey:{_id:"",data:{fen:""},playerId:"",status:Wn,challengeMode:!1},updateAt:0,isRequesting:!1},Xn={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},Jn=(Wt={},Wt[un]=(0,Nt.UY)({gameplay:function(e,t){return void 0===e&&(e=Kn),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,s=i.status,r=i.stateShowMiniJourney,o=i.rescued;switch(t.type){case dn:n.status=Wn,n.mode=Kn.mode,n.rescued=Kn.rescued,n.startAt=Kn.startAt,n.finishAt=Kn.finishAt,n.opponentInfo=Kn.opponentInfo;break;case pn:n.mode=a,n.status=Vn,n.rescued=o,n.startAt=Date.now();break;case fn:n.mode="string"===typeof a?a:e.mode,n.status=s||e.status;break;case gn:n.status=zn,n.finishAt=Date.now();break;case mn:n.rescued+=1;break;case En:n.showMiniJourney=r;break;case vn:n.rescued=0}}}))},match:function(e,t){return void 0===e&&(e=jn),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.match,r=i.opponentInfo,o=i.players,c=i.score,l=i.level;switch(t.type){case yn:case In:case Mn:case Nn:case Zn:case Pn:n.isRequesting=!0;break;case Cn:n.single=(0,s.Z)({},e.single,a),n.updateAt=Date.now();break;case Rn:n.journey=(0,s.Z)({},e.journey,a),n.updateAt=Date.now();break;case xn:n.journey.challengeMode=!0;break;case kn:n.journey.challengeMode=!1;break;case bn:n.isRequesting=!1,n.single=a||jn.single;break;case wn:n.isRequesting=!1,n.journey=a||jn.journey;break;case _n:n.journey.score=c;break;case Ln:n.journey.level=l;break;case On:n.isRequesting=!1,n.single=jn.single;break;case"MATCH_JOURNEY_DATA_CLEAR":n.isRequesting=!1,n.journey=jn.journey;break;case Dn:case Bn:n.isRequesting=!0,n.challenge.opponentInfo=r;break;case Gn:n.isRequesting=!1,n.challenge=(0,s.Z)({},a||jn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case Fn:n.isRequesting=!1,n.challenge=jn.challenge;break;case Un:n.group.status=Vn,r&&(n.group.opponentInfo=r);break;case Hn:n.group.status=zn;break;case"MATCH_ONLINE_DATA_CLEAR":n.online.status=jn.online.status,n.online.players=jn.online.players;break;case Yn:n.online.status=Vn,n.online.players=o;break;case"MATCH_ONLINE_FINISH_REQUEST":n.online.status=zn}}}))},stats:function(e,t){return void 0===e&&(e=Xn),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.playerId,r=i.stats,o=i.match,c=i.current,l=i.players,h=i.leaders;switch(t.type){case Sn:delete n.data[a],n.current=Xn.current;break;case"MATCH_STATS_CONTEXT_REQUEST":n.data=Xn.data,n.isRequesting=!0;break;case"MATCH_STATS_CONTEXT_RECEIVED":n.data=r,n.isRequesting=!1;break;case An:n.data[a]=r;break;case Tn:n.current=(0,an.TS)((0,s.Z)({},e.current),r);break;case Yn:B()(l).forEach((function(e){n.data[e]={score:0}}));break;case"MATCH_ONLINE_STATS_UPDATE":h.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case Gn:var u=o||{},d=u.blackPlayerId,p=u.blackPlayerScore,g=u.whitePlayerId,f=u.whitePlayerScore,m=u.whitePlayerLevel,v=u.blackPlayerLevel;if(!d||!g)break;c&&(n.current=c),n.data[d]={score:p,level:v},n.data[g]={score:f,level:m}}}}))}}),Wt),qn="TOURNAMENT_ACTIVE",Qn="TOURNAMENT_REQUEST",$n="TOURNAMENT_RECEIVED",ei={active:!1,tournamentId:null,bestSessionScore:0,isRequesting:!1},ti=(Vt={},Vt.tournament=function(e,t){return void 0===e&&(e=ei),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,s=void 0===a?0:a,r=i.tournamentId;switch(t.type){case qn:n.active=!0,n.tournamentId=r;break;case Qn:n.isRequesting=!0;break;case $n:n.isRequesting=!1,s>e.bestSessionScore&&(n.bestSessionScore=s)}}}))},Vt),ni="leaderboards",ii=n(469),ai=n.n(ii),si=n(130),ri=n.n(si),oi="LEADERBOARD_DATA_REQUEST",ci="LEADERBOARD_DATA_UPDATE",li="LEADERBOARD_DATA_CLEAR",hi={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},ui=(zt={},zt[ni]=function(e,t){return void 0===e&&(e=hi),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.leaderboardId,r=i.type,o=i.limit,c=i.offset,l=i.leaders;switch(t.type){case oi:e.type!==r&&0===c&&(n.leaders=hi.leaders),n.isRequesting=!0,n.leaderboardId=a,n.type=r,n.limit=o,n.offset=c;break;case ci:if(n.isRequesting=!1,e.type!==r)break;var h=GameCore.Utils.Json.clone((0,s.Z)({},e.leaders,l)),u=ai()(h),d=ce()(u).call(u,(function(e){return e.name&&e.photo||(e.name="Unknown",e.photo=""),e}));ri()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case li:n.isRequesting=!1,n.type=hi.type,n.limit=hi.limit,n.offset=hi.offset,n.leaders=hi.leaders,n.leaderboardId=hi.leaderboardId}}}))},zt),di="missions",pi="MISSIONS_DATA_REQUEST",gi="MISSIONS_DATA_RECEIVE",fi="MISSION_UPDATE",mi="MISSION_COMPLETED",vi={mission:null,missions:null,isRequesting:!1},Ei=(Kt={},Kt[di]=function(e,t){return void 0===e&&(e=vi),(0,Ft.ZP)(e,(function(n){var i,a,s=t.payload;if(s){var r=s.name,o=s.type,c=s.value,l=s.missions;switch(t.type){case pi:n.isRequesting=!0;break;case gi:if(n.isRequesting=!1,l.length<1)return;n.missions={},l.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var h=e.missions[r];n.mission={name:r,process:{},require:h.require,reward:h.reward},B()(h.require).forEach((function(e){n.mission.process[e]=0}));break;case fi:if((null==(i=e.mission)?void 0:i.name)!==r)break;n.mission.process[o]+=c;break;case mi:if((null==(a=e.mission)?void 0:a.name)!==r)break;n.mission=null}}}))},Kt),Si="dailyTasks",Ai="DAILY_TASKS_DATA_REQUEST",Ti="DAILY_TASKS_DATA_RECEIVE",yi="DAILY_TASKS_PROCESS_UPDATE",Ii="DAILY_TASK_VALUE_ADD",Ci="DAILY_TASK_FINISHED",bi={tasks:[],process:[],isRequesting:!1,isNotice:!1},Oi=(jt={},jt[Si]=function(e,t){return void 0===e&&(e=bi),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.id,s=i.type,r=i.value,o=i.tasks,c=i.process;switch(t.type){case Ai:n.isRequesting=!0;break;case Ti:n.isRequesting=!1,n.tasks=o;break;case yi:n.process=c;break;case Ii:if(!e.process[a])break;n.process[a][s]+=r;break;case"DAILY_TASK_REWARDED":if(!e.process[a])break;n.process[a].rewarded=!0;break;case"DAILY_TASKS_SEEN":n.isNotice=!1;break;case Ci:n.isNotice=!0}}}))},jt),Pi={rewards:[],isRequesting:!1},Ri=(Xt={},Xt.dailyRewards=function(e,t){return void 0===e&&(e=Pi),(0,Ft.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.rewards;switch(t.type){case"DAILY_REWARDS_REQUEST":e.isRequesting=!0;break;case"DAILY_REWARDS_RECEIVE":e.isRequesting=!1,e.rewards=i}}}))},Xt),wi="dailyChallenge",xi="DAILY_CHALLENGE_REQUEST",ki="DAILY_CHALLENGE_UPDATE",_i="DAILY_CHALLENGE_TIME_PLAY_UPDATE",Li={leaders:{},isRequesting:!1,time:0},Mi=(Jt={},Jt[wi]=function(e,t){return void 0===e&&(e=Li),(0,Ft.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.leaders,a=n.time;switch(t.type){case xi:e.isRequesting=!0;break;case ki:e.isRequesting=!1,e.leaders=i;break;case _i:(e.time>a||0==e.time)&&(e.time=a)}}}))},Jt),Di="lives",Ni="LIVES_REQUEST",Bi="LIVES_UPDATED",Gi="LIVES_RESET",Fi="LIVES_COUNT_DOWN_START",Ui={isRequesting:!1,lives:0,lastBonusLifeTime:0,countDownStartAt:0},Hi=(qt={},qt[Di]=function(e,t){return void 0===e&&(e=Ui),(0,Ft.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.data;switch(t.type){case Ni:e.isRequesting=!0;break;case Bi:e.isRequesting=!1,e.lives=i.lives,e.lastBonusLifeTime=i.lastBonusLifeTime;break;case Gi:e.isRequesting=!1,e.lives=Ui.lives,e.lastBonusLifeTime=Ui.lastBonusLifeTime,e.countDownStartAt=0;break;case Fi:e.countDownStartAt=(new Date).getTime()}}}))},qt),Zi=(0,Nt.UY)((0,s.Z)({scene:function(e,t){return void 0===e&&(e=Ut),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Gt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=Qt),(0,Ft.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,s=n.contextType,r=n.entryPointData;switch(t.type){case Gt.kL:e.contextId=a,e.contextType=s,e.entryPointData=r;break;case Gt.fJ:e.contextId=a,e.contextType=s,e.processed=!0;break;case Gt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=en),(0,Ft.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Gt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Gt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},nn,rn,hn,Jn,ti,ui,Ei,Oi,Ri,Mi,Hi)),Yi=Zi,Wi=window,Vi=Wi.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,zi=Nt.qC,Ki=function(e){Vi&&(zi=Vi({trace:!0,traceLimit:25})||Nt.qC);var t=zi((0,Nt.md)(Bt.Z));return(0,Nt.MT)(Yi,e,t)},ji=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Dt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Ki({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Xi=ji,Ji=n(609),qi=n.n(Ji),Qi=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,o.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}qi().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var s=a.sheet;if(s){var r='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+("opentype"===i?".otf":".ttf")+'") format("'+i+'"); }';s.insertRule(r,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),$i=Qi,ea=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.addFont=function(e){var t=new $i(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),ta=ea,na=n(199),ia=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),aa=ia,sa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,na.D)((function(){n.previousLayout=""+n.currentLayout,n.initWorldSize(),n.resize()}),300),n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new aa;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,s=e.landscapeWidth,r=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,l=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=l,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=s,this.landscapeHeight=r,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),s=a.width,r=a.height;n.setZoom(i),n.centerOn(s/2,r/2)}}));var s={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(s.isLayoutChanged=!0,s.newLayout=this.currentLayout),this.resizeEventData=s,this.events.emit(Rt.Z.RESIZE,s)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),ra=sa,oa=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||$t.contextId,this.contextType=t||$t.contextType,this.entryPointData=n||$t.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ca=oa,la=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),ha=la,ua="share_invite",da="journey_invite",pa="challenge_friend_match",ga="matching_group_match",fa=n(201),ma=new ke.Z("10","Your Friend",fa.Z.AVATAR.FILE).toObject(),va="single",Ea="challenge-friends",Sa="matching-group",Aa="tournaments",Ta="journey",ya=(0,j.P1)([function(e){return e.context}],(function(e){return e})),Ia=(0,j.P1)([function(e){return e.context.currentGameMode}],(function(e){return e})),Ca=function(e,t){return{type:Gt.fJ,payload:{contextId:e,contextType:t}}},ba=function(e){return function(t){t({type:Gt.EH,payload:{gameMode:e}}),(0,i.sw)("game-mode",e)}},Oa={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},Pa=GameCore.Configs.SyncProfileFromAPI,Ra=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ca(e,n,i).toObject(),s=a.contextId,r=a.contextType,o=a.entryPointData;t.game.storage.dispatch(function(e,t,n){return{type:Gt.kL,payload:{contextId:e,contextType:t,entryPointData:n}}}(s,r,o))},this.initPlayer=(0,r.Z)(u().mark((function e(){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=ai()(Oa),e.next=5,FBInstant.player.getDataAsync(a);case 5:return s=e.sent,console.info("\ud83d\ude80 > rawData",s),r=new Ae(s),console.info("\ud83d\ude80 > playerData",r),e.next=11,t.maintainDataStructure(r);case 11:return r=e.sent,!0===r.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,r.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Pa){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(a=t.convertToPlayerData()).customFields=i,r=new Ae({}).convertToFacebookData(a),e.next=20,FBInstant.player.setDataAsync((0,s.Z)({},r,{isSynced:!0}));case 20:return e.abrupt("return",new Ae(r));case 23:return e.prev=23,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new ha(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new ke.Z(e,t,n,i).toObject()}catch(a){return new ke.Z("123","You").toObject()}},this.game=e},wa=n(202),xa=[Pt._.SCREEN_OPEN],ka=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,s.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var a=n.trackingId;i.game=t;var r=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!r,i.trackingId=a,i}(0,o.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(gt()(xa).call(xa,e)>=0)){var i=this.formatEventName(e),a=t?(0,s.Z)({},t):{};a=n?(0,s.Z)({},a,{value:n}):a,a=(0,s.Z)({},a,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,a)}},n.processLevelStart=function(e,t,n){this.processEvent(Pt._.LEVEL_START,{level:e,score:t,level_name:n})},n.processLevelRescue=function(e,t,n){this.processEvent(Pt._.LEVEL_RESCUE,{level:e,score:t,level_name:n})},n.processLevelFail=function(e,t,n){this.processEvent(Pt._.LEVEL_END,{level:e,score:t,level_name:n,success:!1})},n.processLevelComplete=function(e,t,n){this.processEvent(Pt._.LEVEL_END,{level:e,score:t,level_name:n,success:!0})},n.processShowPreRollAd=function(e){this.processEvent(Pt._.AD_SHOW,{ad_type:"pre_roll",screen_name:""+e}),this.processEvent(Pt._.AD_IMPRESSION,{ad_format:"pre_roll"})},n.processShowInterstitialAd=function(e){this.processEvent(Pt._.AD_SHOW,{ad_type:"interstitial",screen_name:""+e}),this.processEvent(Pt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processShowRewardedVideoAd=function(e){this.processEvent(Pt._.AD_SHOW,{ad_type:"rewarded_video",screen_name:""+e}),this.processEvent(Pt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processShowAdFail=function(e,t){var n=e===GameCore.Ads.Types.REWARDED?"rewarded_video":"interstitial";this.processEvent(Pt._.AD_SHOW_FAILED,{ad_type:n,screen_name:""+t})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return Ia(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).startGame=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureSentry(),n.configureRollbar(),e.next=9,n.detectGameMode();case 9:n.initGoogleAnalytics(),n.analytics.event(Pt._.LOAD_START),n.scene.launch(wa.Co.GLOBAL_SCENE),n.scene.start(wa.Co.LOAD_SCENE),n.analytics.pageview(wa.Co.LOAD_SCENE),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,i.tO)(e.t0);case 19:return e.prev=19,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(wa.Co.BOOT_SCENE),e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[0,16,19,23]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureSentry=function(){var e=this.player.getPlayer();(0,i.Tv)({id:e.playerId,username:e.name})},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l,h,d,p,g,f,m,v,S,A,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=ya(a),r=window.game.player,o=r.getPlayerId(),c=s.contextId,l=s.entryPointData,d=(h=l||{}).type,p=h.matchId,g=h.playerId,f=h.opponentId,m=void 0===f?ma.playerId:f,v=o===g,S=m===ma.playerId,A=S||E()(i=[m,g]).call(i,o),T=va,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:T=Aa,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:c&&d===ua&&!v&&(T=Ea),p&&c&&A&&d===pa&&(T=Ea),c&&d===ga&&(T=Sa),t(ba(T));case 22:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),_a=ka,La=n(50),Ma=n(129),Da=n.n(Ma),Na=n(85),Ba=n.n(Na),Ga=n(466),Fa=n.n(Ga),Ua=n(101),Ha=n(100),Za=n(451),Ya=n(203),Wa=n(458),Va=n(452),za={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},Ka={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}},ja=Ka.STATUS,Xa=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(ja.READY)},t.start=function(){this.isRunning()||this.setState(ja.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(ja.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===ja.READY},t.isRunning=function(){return this.state===ja.RUNNING},t.isStopped=function(){return this.state===ja.STOPPED},e}(),Ja=Xa,qa=n(460),Qa=n(456),$a=n(461),es=n(457),ts=Ha.Z.DEFAULT,ns=ts.KEY,is=ts.FRAME,as=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.contents=void 0,s.buttonPlay=void 0,s.messageText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.onPlay=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.setVisible(!0);var n=s.getData(["onPlay"])[0];s.onPlay=n,s.runOpenAnimation()},s.handlePlay=function(){s.onPlay&&s.onPlay(),s.close()},s.setVisible(!1),s.setDepth(Za.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.messageText.setScale(0).setAlpha(0)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,325,260),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createPopupContent=function(){this.createMessage(),this.createButtonPlay(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.messageText,this.buttonPlay])},n.createButtonPlay=function(){this.buttonPlay=new Wa.Z(this.scene,ns,is.BUTTON_GREEN_LARGE,170,55),this.buttonPlay.setName("Play");var e=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.PLAY,origin:{x:.5,y:.5}});this.buttonPlay.add(e),Phaser.Display.Align.In.Center(e,this.buttonPlay),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,50),this.buttonPlay.onClick=this.handlePlay},n.createMessage=function(){this.messageText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5},text:"The game will end when there s no\nmore space for your given blocks."}),this.messageText.align=1,this.popup.add(this.messageText),Phaser.Display.Align.In.Center(this.messageText,this.popup,0,-45),this.messageText.setScale(0).setAlpha(0)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{y:250,scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=n.y,a=n.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:{from:350,to:i},alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:a}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},t}(GameCore.Screen),ss=as,rs=[{minCol:0,minRow:0,cols:4,rows:4},{minCol:4,minRow:0,cols:4,rows:4},{minCol:0,minRow:4,cols:4,rows:4},{minCol:4,minRow:4,cols:4,rows:4}],os=[{minCol:0,minRow:0,cols:5,rows:5},{minCol:3,minRow:0,cols:5,rows:5},{minCol:0,minRow:3,cols:5,rows:5},{minCol:3,minRow:3,cols:5,rows:5}],cs=[{minCol:0,minRow:0,cols:6,rows:6},{minCol:3,minRow:0,cols:6,rows:6},{minCol:0,minRow:3,cols:6,rows:6},{minCol:3,minRow:3,cols:6,rows:6}],ls="vertical",hs="horizontal",us="left",ds="right",ps="top",gs="bottom",fs="vertical_left",ms="vertical_right",vs="horizontal_left",Es="horizontal_right",Ss="gem/gem",As="gem/gem",Ts="gem/gem",ys="gem/gem",Is="gem/gem",Cs="gem/gem",bs="gem/gem",Os="gem/gem",Ps="gem/gem",Rs=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Ha.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Ha.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],ws=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],xs="l",ks="l_1",_s="l_3",Ls="line_2",Ms="line_3",Ds="line_4",Ns="line_5",Bs="square_1",Gs="square_2",Fs="square_3",Us="trapezoid",Hs="triangle",Zs="t_piece",Ys="plus_piece",Ws="cross_piece_2",Vs="cross_piece_3",zs="cross_piece_4",Ks="cross_piece_5",js="u_piece",Xs=[xs,ks,_s,Ls,Ms,Ds,Ns,Bs,Gs,Fs,Hs,Us,Zs,Ys,Ws,Vs,zs,js],Js=[{type:xs,rate:2},{type:ks,rate:8},{type:_s,rate:6},{type:Ls,rate:9},{type:Ms,rate:9},{type:Ds,rate:8},{type:Ns,rate:8},{type:Bs,rate:9},{type:Gs,rate:8},{type:Hs,rate:2},{type:Us,rate:2},{type:Zs,rate:1},{type:Ys,rate:1},{type:Ws,rate:2},{type:Vs,rate:1},{type:zs,rate:1},{type:js,rate:1}],qs=[[1,0],[1,0],[1,1]],Qs=[[0,1],[0,1],[1,1]],$s=[[1,0],[1,1]],er=[[1,0,0],[1,0,0],[1,1,1]],tr=[[1,1,1],[1,0,0]],nr=[[1,1,1],[0,0,1]],ir=[[1,1],[1,0]],ar=[[1,1,1],[1,0,0],[1,0,0]],sr=[[1,1],[0,1],[0,1]],rr=[[1,1],[1,0],[1,0]],or=[[1,1],[0,1]],cr=[[1,1,1],[0,0,1],[0,0,1]],lr=[[0,0,1],[1,1,1]],hr=[[1,0,0],[1,1,1]],ur=[[0,1],[1,1]],dr=[[0,0,1],[0,0,1],[1,1,1]],pr=[[1],[1]],gr=[[1,1]],fr=[[1],[1],[1]],mr=[[1,1,1]],vr=[[1],[1],[1],[1]],Er=[[1,1,1,1]],Sr=[[1],[1],[1],[1],[1]],Ar=[[1,1,1,1,1]],Tr=[[1]],yr=[[1,1],[1,1]],Ir=[[1,1,1],[1,1,1],[1,1,1]],Cr=[[1,0],[1,1],[0,1]],br=[[0,1],[1,1],[1,0]],Or=[[1,1,0],[0,1,1]],Pr=[[0,1,1],[1,1,0]],Rr=[[0,1],[1,1],[0,1]],wr=[[1,0],[1,1],[1,0]],xr=[[0,1,0],[1,1,1]],kr=[[1,1,1],[0,1,0]],_r=[[0,0,1],[1,1,1],[0,0,1]],Lr=[[1,0,0],[1,1,1],[1,0,0]],Mr=[[0,1,0],[0,1,0],[1,1,1]],Dr=[[1,1,1],[0,1,0],[0,1,0]],Nr=[[0,1,0],[1,1,1],[0,1,0]],Br=[[1,0],[0,1]],Gr=[[0,1],[1,0]],Fr=[[1,0,0],[0,1,0],[0,0,1]],Ur=[[0,0,1],[0,1,0],[1,0,0]],Hr=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Zr=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],Yr=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],Wr=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],Vr=[[1,1],[0,1],[1,1]],zr=[[1,0],[1,1],[1,0]],Kr=[[1,0,1],[1,1,1]],jr=[[1,1,1],[1,0,1]],Xr=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"4bb3/4bb3/4bb3/3bb4/bbbb2bbb/bbbb1bbbb/4bb3/4bb3/4bb3 l tz-vr,b",piece:Bs,position:{x:4,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=[{x:5,y:3},{x:5,y:4},{x:4,y:4},{x:4,y:5}],t=this.scene.layoutManager.objects.main,n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;t.board.dataBoard[s][a].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),t.board.dataBoard[s][a].cell.stopAnimShaking()}},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),Jr=Xr,qr=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/x/bbbb1ryry/x/x/x/x l s1,b",piece:Bs,position:{x:4,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i/2,l=n[4][4].cell.getWorldPosition().x+i/2,h=n[4][4].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<1;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),Qr=qr,$r=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"x/x/x/4bb3/4bb3/5b3/x/x/x l l-dt,b",piece:Bs,position:{x:3,y:3}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[4][3].cell.getWorldPosition().x+i/2,h=n[4][3].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking();i.board.dataBoard[5][4].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[5][4].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),eo=$r,to=function(){function e(e){this.scene=void 0,this.manager=void 0,this.tweenHand=void 0,this.dataInit={fen:"2r/2r/2r/2r/x/x/x/2r/2r l e3-v,r",piece:Ms,position:{x:2,y:4}},this.scene=e.scene,this.manager=e}var t=e.prototype;return t.start=function(){this.initBoardData(),this.handleHighlight(),this.createTweenHand()},t.initBoardData=function(){this.manager.handleGuidePlayStep(this.dataInit.fen)},t.createTweenHand=function(){var e,t=this.scene.layoutManager.objects.main.board,n=t.dataBoard,i=t.cellSize,a=this.scene.layoutManager.objects.footer.pieces,s=a.allPieces,r=a.piecesActive,o=s[r[0].position].getWorldPosition().x+i/2,c=s[r[0].position].getWorldPosition().y+i,l=n[5][2].cell.getWorldPosition().x+i/2,h=n[5][2].cell.getWorldPosition().y+i/2;this.manager.handFrame.setVisible(!0),this.manager.handFrame.setPosition(o,c),null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({repeatDelay:500,targets:this.manager.handFrame,repeat:-1,x:{from:o,to:l},y:{from:c,to:h},duration:1500,ease:Phaser.Math.Easing.Sine.InOut})},t.handleHighlight=function(){for(var e=this.dataInit.position,t=e.x,n=e.y,i=this.scene.layoutManager.objects.main,a=0;a<3;a++)for(var s=0;s<1;s++)i.board.dataBoard[n+a][t+s].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),i.board.dataBoard[n+a][t+s].cell.stopAnimShaking()},t.dragStart=function(){this.tweenHand.stop(),this.manager.handFrame.setVisible(!1)},t.invalidMove=function(){this.manager.handFrame.setVisible(!0),this.tweenHand.play(),this.handleHighlight()},t.nextLevel=function(){this.tweenHand.stop().remove()},e}(),no=to,io=za.STATUS,ao=Ha.Z.DEFAULT,so=ao.KEY,ro=ao.FRAME,oo=Ha.Z.GAMEPLAY,co=oo.KEY,lo=oo.FRAME,ho=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.currentLevel=1,n.tutorialId=void 0,n.inputType=void 0,n.handFrame=void 0,n.background=void 0,n.headerContainer=void 0,n.maskGraphics=void 0,n.textTutorial=void 0,n.skipButton=void 0,n.stepOne=void 0,n.stepTwo=void 0,n.stepThree=void 0,n.stepFour=void 0,n.showTutorialWhenStart=function(){var e=n.scene.lang;switch(n.scene.analytics.event(Pt._.TUTORIAL_STEP,{tutorial_step:n.currentLevel}),n.currentLevel){case 1:n.stepOne.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_1);break;case 2:n.stepTwo.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_2);break;case 3:n.stepThree.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_3);break;case 4:n.stepFour.start(),n.setTextTutorial(e.Text.MESS_TUTORIAL_4);break;default:n.handleCompleteTutorial()}},n.nextTutorial=function(){switch(n.currentLevel){case 1:n.stepOne.nextLevel();break;case 2:n.stepTwo.nextLevel();break;case 3:n.stepThree.nextLevel();break;case 4:n.stepFour.nextLevel()}n.currentLevel++,n.showTutorialWhenStart()},n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.currentLevel){case 1:t=n.stepOne.dataInit.position;break;case 2:t=n.stepTwo.dataInit.position;break;case 3:t=n.stepThree.dataInit.position;break;case 4:t=n.stepFour.dataInit.position}return t.x===e.x&&t.y===e.y},n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createHand(),this.createTutorialPlayScreen(),this.createHeader(),this.createSkipButton(),this.initTutorialStep(),this.registerEvents()},n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this;this.isRunning()&&(Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10),this.scene.time.delayedCall(50,(function(){switch(e.currentLevel){case 1:e.stepOne.createTweenHand();break;case 2:e.stepTwo.createTweenHand();break;case 3:e.stepThree.createTweenHand();break;case 4:e.stepFour.createTweenHand()}})))},n.createTutorialPlayScreen=function(){this.scene.screen.add(Za.o4.TUTORIAL_PLAY_SCREEN,ss)},n.createHeader=function(){this.headerContainer=this.scene.add.container(),this.headerContainer.setVisible(!1),this.headerContainer.setSize(355,100);var e=this.scene.add.graphics();e.fillRoundedRect(-177.5,-50,355,100,12),e.fillStyle(0,.5),e.lineStyle(2,0,.55),e.strokeRoundedRect(-177.5,-50,355,100,12),this.headerContainer.add(e),this.textTutorial=this.scene.make.text({style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700",align:"center"}}),this.textTutorial.setHighQuality(),this.textTutorial.setTint(16442297),this.headerContainer.add(this.textTutorial),Phaser.Display.Align.In.TopCenter(this.headerContainer,this.scene.gameZone,0,-10)},n.createSkipButton=function(){var e=50,t=30;"ru"===this.scene.facebook.getLocale()&&(e=100,t=30),this.skipButton=new Wa.Z(this.scene,so,ro.BUTTON_SKIP,e,t),this.headerContainer.add(this.skipButton),this.skipButton.onClick=this.handleSkip.bind(this),Phaser.Display.Align.In.BottomRight(this.skipButton,this.headerContainer,-this.scene.gameZone.width/2-5,-60)},n.handleSkip=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.ALERT_SCREEN,{message:n.Text.MESS_SKIP_TUTORIAL,onHandleYes:this.handleCompleteTutorial.bind(this)})},n.initTutorialStep=function(){this.stepOne=new Qr(this),this.stepTwo=new no(this),this.stepThree=new eo(this),this.stepFour=new Jr(this)},n.start=function(){this.isRunning()||(this.scene.analytics.pageview("tutorial-screen"),this.setState(io.RUNNING),this.headerContainer.setVisible(!0),this.showTutorialWhenStart())},n.setTextTutorial=function(e){var t=this,n=e.split(""),i="";this.scene.time.addEvent({repeat:n.length,delay:10,callback:function(){var e=n.shift()||"";i+=e,t.textTutorial.setText(i),Phaser.Display.Align.In.Center(t.textTutorial,t.headerContainer,-t.scene.gameZone.width/2,-60)}})},n.stop=function(){this.isRunning()&&(this.scene.tweens.killTweensOf([this.background]),this.background.setVisible(!1),this.maskGraphics.setVisible(!1),this.setState(io.STOPPED))},n.handleCompleteTutorial=function(){this.scene.analytics.pageview("game-scene"),this.scene.analytics.event(Pt._.TUTORIAL_COMPLETE);var e=this.scene.layoutManager.objects.main;this.setState(io.STOPPED),e.praise.tweenShowScoreText.stop().remove(),this.scene.startGame(),this.handFrame.setVisible(!1),this.headerContainer.setVisible(!1)},n.createHand=function(){this.handFrame=this.scene.make.image({key:co,frame:lo.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Ua.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.isValidForTutorial=function(){return this.scene.game.player.getPlayerIsNew()},n.dragStart=function(){switch(this.currentLevel){case 1:this.stepOne.dragStart();break;case 2:this.stepTwo.dragStart();break;case 3:this.stepThree.dragStart();break;case 4:this.stepFour.dragStart()}},n.skipTutorial=function(){this.isRunning()&&(this.handFrame.setVisible(!1),this.setState(io.STOPPED))},n.invalidMove=function(){switch(this.currentLevel){case 1:this.stepOne.invalidMove();break;case 2:this.stepTwo.invalidMove();break;case 3:this.stepThree.invalidMove();break;case 4:this.stepFour.invalidMove()}},n.handleGuidePlayStep=function(e){try{var t=this.scene.layoutManager.objects,n=t.main,i=t.footer;n.board.clearBoard(),i.pieces.clearPieces();var a=null,s=null;if(e){var r=n.board.getBoardByFen(e);a=this.scene.handleDynamicFenSize(r),s=i.pieces.getPiecesByFen(e)}n.board.startGame(a),i.pieces.showAvailablePieces(s)}catch(o){console.log(o)}},t}(Ja),uo=ho,po={START_GAME:"start-game",REPLAY:"replay",RESCUE:"rescue",RECEIVE_DIAMONDS:"receive-diamonds",GAME_OVER:"game-over"},go=n(462),fo=n(128),mo=n.n(fo),vo=n(104),Eo=n.n(vo),So=n(205),Ao=n.n(So),To=n(125),yo="global",Io="friend",Co=GameCore.Configs,bo=Co.ApiHost,Oo=Co.OtherHost,Po=Co.LeadersBoard,Ro=Po.Prefix,wo=Po.LeaderboardId,xo=Po.Name,ko=Ro+"/"+wo+"/leaders",_o=Ro+"/"+wo+"/players",Lo=function(e){var t="";return wo?(e===yo?t=ko:e===Io&&(t=_o),t):t},Mo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r,o,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce()(t).call(t,(function(e){return e.playerId})),a=GameCore.Utils.Object.keyBy(t,"playerId"),r=GameCore.Utils.String.params({playerIds:i}),e.next=5,(0,Te.U)("players?"+r,{},bo);case 5:return o=e.sent,c=ce()(n=o.data).call(n,(function(e){var t=a[e.playerId];return(0,s.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Do=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==wo){e.next=3;break}return e.abrupt("return",No(t));case 3:return e.abrupt("return",Bo(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),No=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Lo(yo)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,Te.U)(i+"?"+a,{},Oo);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Mo(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(xo);case 4:return s=e.sent,e.next=7,s.getEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Go=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==wo){e.next=3;break}return e.abrupt("return",Fo(t));case 3:return e.abrupt("return",Uo(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=Lo(Io)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,Te.U)(i+"?"+a,{},Oo);case 8:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=r,e.abrupt("return",Mo(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(xo);case 4:return s=e.sent,e.next=7,s.getConnectedPlayerEntriesAsync(i,a);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ho=function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==wo){e.next=2;break}return e.abrupt("return",Zo(t));case 2:return e.abrupt("return",Yo());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zo=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=Lo(Io)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,Te.U)(i+"?"+a,{},Oo);case 9:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,Mo(r);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yo=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(xo);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wo=function(){var e=(0,r.Z)(u().mark((function e(t,n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n),null==wo){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",Vo(t,n));case 5:return e.abrupt("return",zo(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vo=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.v)("leaderboards/"+wo+"/players/"+t,{score:n},{},Oo);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zo=function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(xo);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ko(e,t){var n="undefined"!==typeof Eo()&&Ao()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return jo(e,t);var i=Me()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return mo()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jo(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Xo=GameCore.Configs.LeadersBoard,Jo=Xo.UseMock,qo=Xo.Limit,Qo=function(e,t,n,a){return void 0===n&&(n=qo),void 0===a&&(a=0),function(){var s=(0,r.Z)(u().mark((function s(r){var o,c,l,h,d,p,g,f,m,v,E,S,A,T,y,I,C,b;return u().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,o=window.game.player,c=o.getPlayerId(),r(ec()),r({type:oi,payload:{leaderboardId:e,type:t,limit:n,offset:a}}),!Jo){s.next=12;break}return s.next=8,(0,To.qZ)(1e3);case 8:return 145,d=ce()(l=Ba()(h=new Array(n)).call(h,null)).call(l,(function(e,t){var n=(t+1)*(a+1);return{playerId:145===t?c:"0"+n,name:145===t?"Current Player":"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(1e5/n)}})),r($o(d,t)),s.abrupt("return");case 12:if(p=[],t!==yo){s.next=19;break}return s.next=16,Do({limit:n,offset:a});case 16:p=s.sent,s.next=27;break;case 19:if(t!==Io){s.next=27;break}return(g=o.getConnectedPlayerIds(n,a)).push(c),f=GameCore.Utils.Array.unique(g),s.next=25,Go({playerIds:f,limit:f.length});case 25:p=s.sent,f.forEach((function(e){var t=re()(p).call(p,(function(t){return t.playerId===e}));t&&0!==t.length||p.push({playerId:e,score:0})}));case 27:for(m={},v=Ko(p);!(E=v()).done;)S=E.value,A=S.playerId,T=S.score,y=S.rank,I=S.getPlayer(),C=I.getPhoto(),b=I.getName(),m[A]={playerId:A,name:b,photo:C,score:T,rank:y};console.log("Request leaderboard data",m),r($o(m,t)),s.next=37;break;case 33:s.prev=33,s.t0=s.catch(0),r($o([],t)),(0,i.tO)(s.t0);case 37:case"end":return s.stop()}}),s,null,[[0,33]])})));return function(e){return s.apply(this,arguments)}}()},$o=function(e,t){return{type:ci,payload:{leaders:e,type:t}}},ec=function(){return{type:li,payload:{}}},tc=function(e){return e[ni]},nc=((0,j.P1)([function(e){return tc(e).leaderboardId}],(function(e){return e})),(0,j.P1)([function(e){return tc(e).leaders}],(function(e){return e}))),ic=(0,j.P1)([function(e){return tc(e).isRequesting}],(function(e){return e})),ac=n(45),sc={targets:[],props:{alpha:{duration:500,value:{start:0,from:0,to:1},ease:Phaser.Math.Easing.Cubic.Out},scale:{duration:1e3,value:{start:.8,from:.8,to:1},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}},rc=function(e){function t(t){return e.call(this,sc,t)||this}return(0,o.Z)(t,e),t}(ac.Z),oc=rc,cc={targets:[],props:{alpha:{start:0,to:1,duration:500,ease:Phaser.Math.Easing.Cubic.Out},scale:{start:.8,to:1,duration:1e3,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]},y:{start:0,to:0,duration:500,ease:Phaser.Math.Easing.Back.Out}},delay:0},lc=function(e){function t(t){return e.call(this,cc,t)||this}return(0,o.Z)(t,e),t}(ac.Z),hc=lc,uc=n(454),dc=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,s=void 0===a?0:a;if(n&&n===e){var r=n+"_bordered_"+s,o=s>0?r:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=s&&s<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:r,radius:s}))return void i.showLoading(!1);i.setPhoto(r)}else if(100==s){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:r}))return void i.showLoading(!1);i.setPhoto(r)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,La.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var a=i.payload,s=a.id,r=a.url,o=a.radius;return s&&r&&i.loadPhoto(s,r,o),i.addDefaultListeners(),i}(0,o.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var s=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(s,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(fa.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,fa.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background,i=e.borderWidth,a=void 0===i?0:i;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width-a,this.height-a),this.add(this.background)},n.createLoading=function(){this.loading=new uc.Z(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-(this.payload.borderWidth||8);this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},t}(Phaser.GameObjects.Container),pc=dc,gc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),fc=gc,mc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),vc=mc,Ec=function(e){return e[un]},Sc=(0,j.P1)([function(e){return Ec(e).gameplay.mode}],(function(e){return e})),Ac=((0,j.P1)([function(e){return Ec(e).gameplay.status}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).gameplay.rescued}],(function(e){return e}))),Tc=(0,j.P1)([function(e){return Ec(e).gameplay.startAt}],(function(e){return e})),yc=(0,j.P1)([function(e){return Ec(e).gameplay.finishAt}],(function(e){return e})),Ic=(0,j.P1)([function(e){return Ec(e).gameplay.showMiniJourney}],(function(e){return e})),Cc=n(625),bc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="CurrentTournamentScoreIsNotBest",i.message=t||"The new score is not best",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Oc=bc,Pc=GameCore.Configs.Tournament.UseLeaderboard,Rc=function(e){return{type:qn,payload:{tournamentId:e}}},wc=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l,h,d,p;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game.facebook,s=e.playerId,r=e.playerName,o=e.score,c=e.autoStartGame,l=r+"'s Tournament",h=GameCore.Utils.String.generateObjectId(),t.next=7,a.tournament.createAsync({initialScore:o,config:{title:l,tournamentTitle:l},data:{playerId:s,playerName:r,leaderboardId:h}});case 7:return d=t.sent,p=d.getID(),c&&(n(Rc(p)),n(Lh())),t.next=12,(0,Cc.Z5)({_id:h,createdBy:s,name:p,description:l,expireTime:6048e5});case 12:if(t.sent._id!==h){t.next=16;break}return t.next=16,(0,Cc.aV)(h,s,o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,i.tO)(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()},xc=function(e){return(0,r.Z)(u().mark((function t(){var n,i,a,s,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.leaderboardId,r=e.score,s&&(0,Cc.aV)(s,i,r),t.next=5,n.tournament.shareAsync({score:r,data:{type:"tournament",playerId:i,playerName:a}});case 5:(0,Cc.aV)(s,i,r);case 6:case"end":return t.stop()}}),t)})))},kc=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return n=e.sent,i=JSON.parse(n.getPayload()||"{}"),e.abrupt("return",i.leaderboardId);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),_c=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.game.facebook,e.next=4,t.getTournamentAsync();case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(0),console.warn("getCurrentTournament ~ error",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Lc=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,i){var a,s,r,o,c,l,h,d,p,g,f,m,v,S;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,s=window.game,r=s.player,o=s.facebook,c=s.analytics,t.prev=2,h=i(),d=Sc(h),E()(l=[va,Aa]).call(l,d)){t.next=7;break}return t.abrupt("return");case 7:return n({type:Qn,payload:{}}),p=r.getPlayer(),g=p.playerId,f=p.name,t.next=11,_c();case 11:if(!t.sent){t.next=23;break}if(a=Pt._.TOURNAMENT_SHARE,!Pc){t.next=21;break}return t.next=17,kc();case 17:return m=t.sent,v={playerId:g,playerName:f,score:e,leaderboardId:m},t.next=21,n(xc(v));case 21:t.next=28;break;case 23:if(a=Pt._.TOURNAMENT_CREATE,!Pc){t.next=28;break}return S={playerId:g,playerName:f,score:e,autoStartGame:!1},t.next=28,n(wc(S));case 28:if(c.event(a,{success:!0}),!1!==Pc){t.next=32;break}return t.next=32,o.requestTournamentAsync(e);case 32:n(Mc(e)),t.next=40;break;case 35:if(t.prev=35,t.t0=t.catch(2),!(t.t0 instanceof Oc)){t.next=39;break}return t.abrupt("return");case 39:a&&c.event(a,{success:!1});case 40:case"end":return t.stop()}}),t,null,[[2,35]])})));return function(e,n){return t.apply(this,arguments)}}()},Mc=function(e){return{type:$n,payload:{score:e}}},Dc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"This opponentId is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Nc=Dc,Bc=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Gc=Bc,Fc={PASS_LEVELS:{ID:"pass-levels",EVENTS:{PASS_LEVEL:"pass-level"}},COLLECT_DIAMONDS:{ID:"collect-diamonds",EVENTS:{COLLECT_DIAMONDS:"collect-diamonds"}},INVITE_FRIENDS:{ID:"invite-friends",EVENTS:{INVITED_FRIEND:"INVITED_FRIEND"}},REACH_SCORE:{ID:"reach-score",EVENTS:{ADD_SCORE:"add-score"}},EVENTS:{TASKS_RESET:"tasks-reset",NOTICE_UPDATE:"notice-update"}},Uc=function(e,t){return t.playerId},Hc=((0,j.P1)([function(e){return Ec(e).match.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).match.single}],(function(e){return e}))),Zc=(0,j.P1)([function(e){return Ec(e).match.single._id}],(function(e){return e})),Yc=(0,j.P1)([function(e){return Ec(e).match.single.score}],(function(e){return e||0})),Wc=((0,j.P1)([function(e){return Ec(e).match.single.level}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=Ec(e).match.single.data)?void 0:t.diamond}],(function(e){return e||0})),(0,j.P1)([function(e){var t;return null==(t=Ec(e).match.single.data)?void 0:t.fen}],(function(e){return e||null})),(0,j.P1)([function(e){return Ec(e).match.single.status}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).match.single.playerId}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).match.challenge}],(function(e){return e}))),Vc=(0,j.P1)([function(e){return Ec(e).match.challenge._id}],(function(e){return e})),zc=(0,j.P1)([function(e){return Ec(e).match.challenge.status}],(function(e){return e})),Kc=(0,j.P1)([function(e){return Ec(e).match.challenge.opponentInfo}],(function(e){return e})),jc=((0,j.P1)([function(e){return Ec(e).match.challenge.whitePlayerId}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).match.challenge.blackPlayerId}],(function(e){return e})),(0,j.P1)([Wc,Uc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n!==t&&i===t?n:i!==t&&n===t?i:""})),(0,j.P1)([Wc,Uc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId;return n===t?n:i===t?i:ma.playerId}))),Xc=(0,j.P1)([Wc,Uc],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),Jc=(0,j.P1)([Wc,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,s=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&s})),qc=(0,j.P1)([function(e){return Ec(e).match.group.opponentInfo}],(function(e){return e})),Qc=((0,j.P1)([function(e){return Ec(e).match.online.players}],(function(e){return e})),(0,j.P1)([function(e){return Ec(e).match.journey}],(function(e){return e}))),$c=(0,j.P1)([function(e){return Ec(e).match.journey._id}],(function(e){return e})),el=(0,j.P1)([function(e){return Ec(e).match.journey.level}],(function(e){return e})),tl=(0,j.P1)([function(e){return Ec(e).match.journey.challengeMode}],(function(e){return e})),nl=(0,j.P1)([function(e){return Ec(e).match.journey.score}],(function(e){return e})),il=(0,j.P1)([function(e){return Ec(e).stats.data}],(function(e){return e})),al=(0,j.P1)([function(e){return Ec(e).stats.current}],(function(e){return e})),sl=((0,j.P1)([function(e){return Ec(e).stats.isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return e.messages.data}],(function(e){return e}))),rl=(0,j.P1)([sl,function(e,t){return t.opponentId}],(function(e,t){return!!GameCore.Utils.Valid.isString(t)&&(!!GameCore.Utils.Object.hasOwn(e,t)&&e[t].sent)})),ol=n(412),cl=new(n.n(ol)()),ll=n(350),hl=n.n(ll),ul=function(e){if("string"!==typeof e||!e)throw new Gc(null,{imageShare:e})},dl=function(){return(0,r.Z)(u().mark((function e(){var t,n,a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,pl();case 5:return c=e.sent,ul(c),l=n.getPlayer(),h=l.playerId,d=l.name,p=l.photo,e.next=10,s.shareAsync({text:o.Text.SHARE_BEST_SCORE,intent:"SHARE",image:c||"",data:{playerId:h,playerName:d,playerPhoto:p,type:ua}});case 10:a.event(Pt._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Pt._.SHARE,{share_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(Za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},pl=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=a.data,c=(o||{}).score,l=fl({playerId:s,playerPhoto:r,playerScore:c})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return h={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=al(t),r=il(t),o=i.getPlayer(),c=o.playerId,l=o.photo,h=r[c]||{},d=h.score,s.bestScore>d&&(d=s.bestScore),p=fl({playerId:c,playerPhoto:l,playerScore:d})){e.next=10;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 10:return g={name:"share-current-score",width:952,height:492,renderOptions:p},e.next=13,a.frameCapture.capture(g);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:fa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},ml=(function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l,h,d,p,g,f,m,v,E,S,A,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,s=n.getPlayer(),r=s.playerId,o=s.name,c=s.photo,(l=n.getConnectedPlayerIds(99,0)).push(r),h=[],e.next=7,Go({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,p=GameCore.Utils.Object.keyBy(d,"playerId"),g={playerId:r,name:o,photo:c,score:0},GameCore.Utils.Object.hasOwn(p,r)&&(g=p[r]),h.push(g),e.t0=hl()(u()).call(u(),p);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(f=e.t1.value,!GameCore.Utils.Object.hasOwn(p,f)){e.next=25;break}if(m=p[f],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==r){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(g.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(E=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(E,n)){var i=E[n],a=i.name,s=i.photo;h[t].name=a,h[t].photo=s}})),h.length<3)for(S=0;S<=3-h.length;)h.push({playerId:"bot"+S,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),S++;if(A=ml({playerId:r,playerName:o,playerPhoto:c,listLeaders:h})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return T={name:"share-leaderboard",width:1500,height:2e3,renderOptions:A},e.next=40,a.frameCapture.capture(T);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.listLeaders,r=void 0===s?[]:s;if(!Array.isArray(r))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:490,y:250,image:a,width:525,height:525,fallbackWithImage:fa.Z.AVATAR.KEY}};return r.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:475,y:1215+385*t,image:i,width:150,height:150,fallbackWithImage:fa.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},r.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:690,y:1312+193*t,font:"600 60px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1070,y:1312+193*t,font:"600 55px",text:a,fillStyle:"#b18151"}})),o}),vl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g,f,m,v,E,S,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=il(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=Kc(t),h=l.playerId,d=l.photo,p=Xc(t,{playerId:c}),g=Jc(t,{opponentId:h}),f=s[c]||{},m=f.score,v=s[h]||{},E=v.score,S=Sl({playerId:c,playerPhoto:o,playerScore:m,opponentId:h,opponentPhoto:d,opponentScore:E,isPlayerFinished:p,isOpponentFinished:g})){e.next=12;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 12:return A={name:"share-game-result",width:952,height:492,renderOptions:S},e.next=15,a.frameCapture.capture(A);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),El=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d,p,g,f,m,v;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,s=il(t),r=i.getPlayer(),o=r.photo,c=r.playerId,l=qc(t),h=l.playerId,d=l.photo,p=l.score,g=s[c]||{},f=g.score,m=Sl({playerId:c,playerPhoto:o,playerScore:f,opponentId:h,opponentPhoto:d,opponentScore:p})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s,o=e.opponentId,c=void 0===o?"20":o,l=e.opponentPhoto,h=void 0===l?"":l,u=e.opponentScore,d=void 0===u?0:u,p=e.isPlayerFinished,g=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof r)return null;if("string"!==typeof c)return null;if("string"!==typeof h)return null;if("number"!==typeof d)return null;if("boolean"!==typeof p)return null;if("boolean"!==typeof g)return null;var f=r===d,m=r>d,v=p||g,E=p&&g,S={leftPhoto:{name:""+n,type:"image",x:55,y:162,image:a,width:200,height:200,fallbackWithImage:fa.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:702,y:162,image:h,width:200,height:200,fallbackWithImage:fa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(S.leftScoreShadow={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#c4683f",text:p?""+r:"???",textAlign:"center"},S.leftScore={type:"text",x:148,y:443,font:"600 70px",fillStyle:"#f2a62e",text:p?""+r:"???",textAlign:"center"},S.rightScoreShadow={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#c4683f",text:g?""+d:"???",textAlign:"center"},S.rightScore={type:"text",x:795,y:443,font:"600 70px",fillStyle:"#f2a62e",text:g?""+d:"???",textAlign:"center"}),!f&&E&&(m?S.leftCrown={name:"crown-icon",type:"image",x:12,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}:S.rightCrown={name:"crown-icon",type:"image",x:665,y:122,image:"./assets/images/others/crown-icon.png",width:106,height:78}),S},Al=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,a=n.player,s=n.analytics,r=n.facebook,o=n.globalScene,c=n.lang,e.prev=1,o.screen.open(Za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),e.next=5,Tl();case 5:return l=e.sent,ul(l),h=a.getPlayer(),d=h.playerId,p=h.name,g=h.photo,e.next=10,r.shareAsync({text:"Great! I have a score!",intent:"SHARE",image:l||"",data:{playerId:d,playerName:p,playerPhoto:g,type:ua}});case 10:s.event(Pt._.SHARE,{share_content_type:"Score",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s.event(Pt._.SHARE,{share_content_type:"Score",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,o.screen.close(Za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})));return function(t){return e.apply(this,arguments)}}()},Tl=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),s=a.playerId,r=a.photo,o=n.getBestScore(),c=yl({playerId:s,playerPhoto:r,playerScore:o})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return l={name:"share-score",width:952,height:492,renderOptions:c},e.next=10,i.frameCapture.capture(l);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yl=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,s=e.playerScore,r=void 0===s?0:s;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof r?null:{avatar:{name:""+n,type:"image",x:635,y:122,image:a,width:210,height:210,fallbackWithImage:fa.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#c4683f",text:""+r,textAlign:"center"},playerScore:{type:"text",x:740,y:437,font:"600 70px",fillStyle:"#f2a62e",text:""+r,textAlign:"center"}}},Il=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new fc(null,{contextId:t})},Cl=function(e){var t=e.opponentId,n=e.contextId;if(""===t||"string"!==typeof t)throw new Nc(null,{opponentId:t});if(""===n||"string"!==typeof n)throw new fc(null,{contextId:n})},bl=function(e){if(null===e.imageShare)throw new Gc},Ol=function(e,t){return void 0===t&&(t=!0),function(n,i){var a,s=i(),r=sl(s);if(t){var o;if(null!=(o=r[e])&&o.sent)return;n(Pl(e))}null!=(a=r[e])&&a.sent&&n(Rl(e))}},Pl=function(e){return{type:Gt.qj,payload:{opponentId:e}}},Rl=function(e){return{type:Gt.rh,payload:{opponentId:e}}},wl=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game.facebook,Cl({opponentId:t,contextId:n}),(s=window.game.facebook.getContextID())!==n||""===n){e.next=6;break}return e.abrupt("return",s);case 6:if("10"!==t||""===n){e.next=8;break}return e.abrupt("return",n);case 8:if(!n){e.next=12;break}return e.next=11,a.switchAsync(n);case 11:return e.abrupt("return",window.game.facebook.getContextID());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,i.tO)(e.t0);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),xl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,v,E,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,wl(e,d);case 5:return p=n.sent,Il({contextId:p}),g=s(),n.next=10,vl(g);case 10:return f=n.sent,bl({imageShare:f}),m=o.getPlayer(),v=m.name,E=m.playerId,S=window.game.lang.getText({key:"MESSAGE_INVITE",variables:[v]}),n.next=16,l.sendMessage({cta:"Play",text:S,image:f||"",template:"challenge",data:{type:pa,matchId:h,playerId:E,opponentId:e,status:Vn}});case 16:a(Ol(e)),c.event(Pt._.MESSAGE,{message_content_type:"Invite",success:!0}),cl.emit(Fc.INVITE_FRIENDS.EVENTS.INVITED_FRIEND,{type:"friend",value:1,opponentId:e}),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(1),c.event(Pt._.MESSAGE,{message_content_type:"Invite",success:!1}),(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[1,21]])})));return function(e,t){return n.apply(this,arguments)}}()},kl=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,v,E,S;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,wl(e,d);case 5:return p=n.sent,Il({contextId:p}),g=s(),n.next=10,vl(g);case 10:return f=n.sent,bl({imageShare:f}),m=o.getPlayer(),v=m.name,E=m.playerId,S=window.game.lang.getText({key:"MESSAGE_FINISH_MATCH",variables:[v]}),n.next=16,l.sendMessage({cta:"See result",text:S,image:f||"",template:"finished",data:{type:pa,matchId:h,playerId:E,opponentId:e,status:zn}});case 16:a(Ol(e)),c.event(Pt._.MESSAGE,{message_content_type:"FinishMatch",success:!0}),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(1),c.event(Pt._.MESSAGE,{message_content_type:"FinishMatch",success:!1}),(0,i.tO)(n.t0);case 24:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},_l=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,v,E,S,A,T,y,I;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,n.next=5,wl(e,d);case 5:return p=n.sent,Il({contextId:p}),g=s(),n.next=10,vl(g);case 10:return f=n.sent,bl({imageShare:f}),m=o.getPlayer(),v=m.name,E=m.playerId,S=il(g),A=S[E]||{},T=A.score,y=void 0===T?0:T,I=window.game.lang.getText({key:"MESSAGE_BEST_SCORE",variables:[v,y]}),n.next=18,l.sendMessage({cta:"See result",text:I,image:f||"",template:"pass_score",data:{type:pa,matchId:h,playerId:E,opponentId:e,status:zn}});case 18:a(Ol(e)),c.event(Pt._.MESSAGE,{message_content_type:"BestScore",success:!0}),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(1),c.event(Pt._.MESSAGE,{message_content_type:"BestScore",success:!1}),(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,22]])})));return function(e,t){return n.apply(this,arguments)}}()},Ll=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,v,E,S,A;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=window.game,o=r.player,c=r.analytics,l=r.facebook,n.prev=1,h=t.matchId,d=t.contextId,p=t.score,n.next=5,wl(e,d);case 5:return g=n.sent,Il({contextId:g}),f=s(),n.next=10,vl(f);case 10:return m=n.sent,bl({imageShare:m}),v=o.getPlayer(),E=v.name,S=v.playerId,A=window.game.lang.getText({key:"MESSAGE_FINISH_TURN",variables:[E,p]}),n.next=16,l.sendMessage({cta:"Play",text:A,image:m||"",template:"play_turn",data:{type:pa,matchId:h,playerId:S,opponentId:e,status:Vn}});case 16:a(Ol(e)),c.event(Pt._.MESSAGE,{message_content_type:"FinishTurn",success:!0}),n.next=26;break;case 20:if(n.prev=20,n.t0=n.catch(1),c.event(Pt._.MESSAGE,{message_content_type:"FinishTurn",success:!1}),!(n.t0 instanceof fc)){n.next=25;break}return n.abrupt("return");case 25:(0,i.tO)(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,20]])})));return function(e,t){return n.apply(this,arguments)}}()},Ml=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.player,r=a.facebook,o=s.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=al(n),p=d.score,g={type:ga,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i"}},text:{default:l+" beats your high score. Their score: "+p+".",localizations:{en_US:l+" beats your high score. Their score: "+p+".",vi_VN:l+" v\u1eeba v\u01b0\u1ee3t \u0111i\u1ec3m s\u1ed1 cao nh\u1ea5t c\u1ee7a b\u1ea1n! Ch\u01a1i l\u1ea7n n\u1eefa ch\u1ee9?"}},image:t||"",template:"play_turn",data:g});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Dl=function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.facebook,e.prev=1,o=s.getPlayer(),c=o.playerId,l=o.name,h=o.photo,d=al(n),p=d.score,g={type:ga,playerId:c,playerName:l,playerPhoto:h,playerScore:p},e.next=7,r.sendMessage({cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:l+" got "+p+" scores. So easy! Can you?",localizations:{en_US:l+" got "+p+" scores. So easy! Can you?",vi_VN:l+" \u0111\xe3 \u0111\u1ea1t "+p+" \u0111i\u1ec3m! Qu\xe1 d\u1ec5 lu\xf4n. Ch\u01a1i l\u1ea1i n\xe0o!"}},image:t||"",template:"play_turn",data:g});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Nl=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},Bl=function(e,t){try{var n=Nl(e),i={};GameCore.Utils.Valid.isObject(n)&&(i=n);var a=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(a))return!1;var s=GameCore.Utils.Object.clear(a),r=(0,an.TS)(i,s),o=GameCore.Utils.Json.encode(r);return localStorage.setItem(e,o),!0}catch(c){return!1}},Gl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Fl=GameCore.Configs.ApiHost,Ul=(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches",e.next=3,(0,Te.v)("single-matches",t,{},Fl);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"single-matches/active",e.next=3,(0,Te.U)("single-matches/active",{},Fl);case 3:return t=e.sent,e.abrupt("return",(null==t?void 0:t.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="single-matches/"+t+"/move",e.next=3,(0,Te.v)(i,n,{},Fl);case 3:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="single-matches/"+t+"/finish",e.next=3,(0,Te.v)(n,{},{},Fl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,Te.v)("matches",{opponentPlayerId:t},{},Fl);case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Hl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,Te.v)(n,{},{},Fl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zl=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,Te.U)(n,{},Fl);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yl=function(){var e=(0,r.Z)(u().mark((function e(t,n,i,a){var s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="matches/"+t+"/finish",e.next=3,(0,Te.v)(s,{matchId:t,score:n,level:i,extraData:a},{},Fl);case 3:return r=e.sent,e.abrupt("return",(null==r?void 0:r.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),Wl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Vl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),zl=Vl,Kl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),jl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Xl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidScore",i.message=t||"The score is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),Jl=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),ql=function(e){var t=e.matchId,n=e.score;if(""===t||"string"!==typeof t)throw new Gl(null,{matchId:t});if("number"!==typeof n)throw new Xl(null,{score:n})},Ql=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Gl(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Gl(null,{currentMatchId:n});if(t!==n)throw new jl(null,{matchId:t,currentMatchId:n})},$l=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new Gl(null,{matchId:t});if(""===n||"string"!==typeof n)throw new Gl(null,{currentMatchId:n});if(t!==n)throw new jl(null,{matchId:t,currentMatchId:n})},eh=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,s=n.status;if(""===i||"string"!==typeof i)throw new Gl(null,{matchId:i});if("finished"===s||"string"!==typeof s)throw new Wl("This match is finished",{status:s});if(a!==t)throw new ha(null,{playerId:a,currentPlayerId:t})},th=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new zl(null,{opponentId:t})},nh=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new Gl(null,{matchId:t})},ih=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new Gl(null,{matchId:n});if(""===i||"string"!==typeof i)throw new Jl(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new Kl(null,{blackPlayerId:a})},ah=GameCore.Configs.Match,sh=function(e){try{return GameCore.Utils.Hash.stringToHash(dt()(e))}catch(t){return""}},rh=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},oh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game,a=n.player,r=n.globalScene,o=n.lang,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),t({type:yn,payload:{}}),c=a.getPlayerId(),l=(0,s.Z)({},ah.LocalSingleMatchDefault,{status:"active",playerId:c,startedAt:Date.now(),rescued:0}),eh({playerId:c,match:l}),t(hh(l)),Bl(ah.SingleMatchStore,l),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(0),t(hh(null)),!(e.t0 instanceof Gl)){e.next=16;break}return e.abrupt("return");case 16:if(!(e.t0 instanceof Wl)){e.next=18;break}return e.abrupt("return");case 18:(0,i.tO)(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ch=function(e,t){return function(n,a){try{ql((0,s.Z)({matchId:e},t));var r=a(),o=$c(r);Ql({matchId:e,currentMatchId:o}),n({type:Rn,payload:{match:t}});var c=t.data;t.data=sh(c),t.challengeMode=!1;var l=window.game.player;Bl(ah.JourneyMatchStore+"-"+l.getPlayerId(),t)}catch(h){if(h instanceof Gl)return;(0,i.tO)(h)}}},lh=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n,a){var r,o,c,l,h,d,p,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,nh({matchId:e}),o=a(),c=Zc(o),l=r.getPlayerId(),$l({matchId:e,currentMatchId:c}),n({type:"MATCH_SINGLE_FINISH_REQUEST",payload:{matchId:e}}),h=Hc(o),eh({playerId:l,match:h}),d=(0,s.Z)({},ah.LocalSingleMatchDefault,h,{_id:e,status:"finished",playerId:l,finishAt:Date.now()}),n(hh(d)),p=d.data,(g=(0,s.Z)({},d)).data=sh(p),Bl(ah.SingleMatchStore,g),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(hh(null)),!(t.t0 instanceof Gl)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof Wl)){t.next=25;break}return t.abrupt("return");case 25:(0,i.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},hh=function(e){return{type:bn,payload:{match:e}}},uh=function(e){return{type:wn,payload:{match:e}}},dh=function(){return{type:On,payload:{}}},ph=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.profile,r=a.globalScene,o=a.lang,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=e.playerId,th({opponentId:c}),n({type:Dn,payload:{opponentInfo:e}}),t.next=8,Ul(c);case 8:return l=t.sent,ih({match:l}),t.next=12,s.requestProfiles([c]);case 12:n(vh(l)),t.next=23;break;case 15:if(t.prev=15,t.t0=t.catch(0),n(vh(null)),!(t.t0 instanceof Gl)){t.next=20;break}return t.abrupt("return");case 20:if(!(t.t0 instanceof zl)){t.next=22;break}return t.abrupt("return");case 22:(0,i.tO)(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},gh=function(e,t){return void 0===t&&(t=!0),function(){var n=(0,r.Z)(u().mark((function n(a){var s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.profile,c=s.globalScene,l=s.lang,t&&c.screen.open(Za.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),nh({matchId:e}),a({type:Mn,payload:{matchId:e}}),n.next=7,Hl(e);case 7:if(h=n.sent,ih({match:h}),d=h.status,p=h.whitePlayerId,g=h.blackPlayerId,d!==Vn){n.next=16;break}return f=r.getPlayerId(),m=f===p?g:p,n.next=16,o.requestProfiles([m]);case 16:a(vh(h)),n.next=25;break;case 19:if(n.prev=19,n.t0=n.catch(0),a(vh(null)),!(n.t0 instanceof Gl)){n.next=24;break}return n.abrupt("return");case 24:(0,i.tO)(n.t0);case 25:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(e){return n.apply(this,arguments)}}()},fh=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a){var s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=window.game,r=s.player,o=s.globalScene,c=s.lang,o.screen.open(Za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),nh({matchId:e}),a({type:Bn,payload:{matchId:e,opponentInfo:t}}),n.next=7,Zl(e);case 7:l=n.sent,ih({match:l}),h=l.whitePlayerId,d=l.whitePlayerScore,p=l.blackPlayerScore,g=r.getPlayerId(),f=r.getPlayerData(),m=f.score,a(vh(l,{score:g===h?d:p,bestScore:m})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),a(vh(null)),!(n.t0 instanceof Gl)){n.next=22;break}return n.abrupt("return");case 22:(0,i.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},mh=function(e,t,n){return function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,l,h;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=window.game,o=r.globalScene,c=r.lang,o.screen.open(Za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),nh({matchId:e}),s({type:Nn,payload:{matchId:e,score:t,extraData:n}}),l=n.level,a.next=8,Yl(e,t,l,n);case 8:return h=a.sent,ih({match:h}),a.next=12,s(vh(h));case 12:a.next=20;break;case 14:if(a.prev=14,a.t0=a.catch(0),s(vh(null)),!(a.t0 instanceof Gl)){a.next=19;break}return a.abrupt("return");case 19:(0,i.tO)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},vh=function(e,t,n){return void 0===n&&(n=null),{type:Gn,payload:{match:e,opponentInfo:t,current:n}}},Eh=function(e){return{type:Un,payload:{opponentInfo:e}}},Sh=function(e,t){return{type:Yn,payload:{matchId:e,players:t}}},Ah=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:In,payload:{}}),e.next=6,window.FBInstant.player.getDataAsync(["level"]);case 6:r=e.sent,o=r.level,c=Nl(ah.JourneyMatchStore+"-"+a)||{},l=c.data,h=c.level,c.data=rh(l),o!==h&&(c.data={}),d=o||1,p=(0,s.Z)({},c,{level:d,playerId:a}),t({type:Rn,payload:{match:p}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.log("Erorrrrr = ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()},Th=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:kn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},yh=function(e){return{type:Ln,payload:{level:e}}},Ih=function(e){return{type:Sn,payload:{playerId:e}}},Ch=function(e,t){return{type:An,payload:{playerId:e,stats:t}}},bh=function(e){return{type:Tn,payload:{stats:e}}},Oh=GameCore.Configs.Match,Ph=[],Rh=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new fc(null,{contextId:t})},wh=null,xh=function(e){clearTimeout(wh),wh=setTimeout((function(){window.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)}),e)},kh=function(){return{type:dn,payload:{}}},_h=function(e){return{type:En,payload:{stateShowMiniJourney:e}}},Lh=function(){return function(e){try{e(dh()),e(Zh(Aa))}catch(t){(0,i.tO)(t)}}},Mh=function(){return function(e){try{e(dh()),e(Zh(va))}catch(t){(0,i.tO)(t)}}},Dh=function(){return function(e){try{e(Yh())}catch(t){(0,i.tO)(t)}}},Nh=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(Bh("reset",e,t))}catch(a){(0,i.tO)(a)}}},Bh=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var a=(0,r.Z)(u().mark((function a(s){var r,o,c,l,h,d,p,g,f,m,v,E,S,A,T,y,I,C;return u().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r=window.game,o=r.player,c=r.facebook,l=r.globalScene,h=r.lang,l.screen.open(Za.o4.NOTIFY_SCREEN,{message:h.Text.LOADING,loading:!0}),d=e,p=c.contextType,t||(g=GameCore.Configs.PlayerIdMock,f=GameCore.Configs.PlayerIdMock2,t=o.getPlayerId()===g?f:g),e){a.next=15;break}return a.next=9,c.chooseAsync();case 9:if(!1!==(d=a.sent)){a.next=13;break}return n&&l.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE),a.abrupt("return");case 13:a.next=25;break;case 15:if(!t||t===ma.playerId){a.next=23;break}return a.next=18,c.createAsync(t);case 18:if(!1!==(d=a.sent)){a.next=22;break}return n&&l.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE),a.abrupt("return");case 22:d||"reset"===e||(d=e);case 23:p=c.contextType,s(Ca(d,p));case 25:return Rh({contextId:d}),m=o.getPlayerId(),v=o.getConnectedPlayers(),a.next=30,c.getContextPlayers(m);case 30:return E=a.sent,t!==(S=ma).playerId&&v[t]?S=v[t]:1===E.length&&(S=E[0]),s(Ih()),T=(A=S).playerId,y=A.name,I=A.photo,C={playerId:T,name:y,photo:I},a.next=38,s(Zh(Ea,C));case 38:s(Ca(d,p)),cl.emit(po.START_GAME),a.next=51;break;case 42:if(a.prev=42,a.t0=a.catch(0),!(a.t0 instanceof fc)){a.next=46;break}return a.abrupt("return");case 46:if("USER_INPUT"!==(null==a.t0?void 0:a.t0.code)){a.next=48;break}return a.abrupt("return");case 48:if("INVALID_OPERATION"!==(null==a.t0?void 0:a.t0.code)){a.next=50;break}return a.abrupt("return");case 50:(0,i.tO)(a.t0);case 51:return a.prev=51,xh(1e3),a.finish(51);case 54:case"end":return a.stop()}}),a,null,[[0,42,51,54]])})));return function(e){return a.apply(this,arguments)}}()},Gh=function(e){var t=window.game.player.getConnectedPlayerIds(20,0);if(!e||0===e.length)return t;for(var n=[],i=0;i<t.length;i++)E()(e).call(e,t[i])||n.push(t[i]);return n},Fh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t){var n,a,s,r,o,c,l,h,d,p,g,f,m,v,E,S,A;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,a=n.player,s=n.facebook,r=n.globalScene,o=n.lang,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=Gh(Ph),l="",h="",d=s.contextType,console.log("listPlayerIds === ",Ph,c),c.length>0&&(p=Phaser.Math.RND.between(0,c.length-1),l=c[p],Ph.push(l),console.log("listPlayerIds === ",Ph)),!l||"string"!==typeof l){e.next=13;break}return e.next=12,s.createAsync(l);case 12:h=e.sent;case 13:return Rh({contextId:h}),g=a.getPlayerId(),e.next=17,s.getContextPlayers(g);case 17:return f=e.sent,m=ma,l||1!==f.length||(m=f[0]||ma),t(Ih()),E=(v=m).name,S=v.photo,A={playerId:l,name:E,photo:S},e.next=25,t(Zh(Ea,A));case 25:t(Ca(h,d)),e.next=35;break;case 28:if(e.prev=28,e.t0=e.catch(0),!(e.t0 instanceof fc)){e.next=34;break}return t(Vh({mode:va,status:Wn})),t(Mh()),e.abrupt("return");case 34:(0,i.tO)(e.t0);case 35:return e.prev=35,xh(1e3),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,28,35,38]])})));return function(t){return e.apply(this,arguments)}}()},Uh=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(a,s){var r,o,c,l,h,d,p,g,f,m,v,E,S,A,T,y;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,o=r.player,c=r.profile,l=r.facebook,h=r.globalScene,d=r.lang,h.screen.open(Za.o4.NOTIFY_SCREEN,{message:d.Text.LOADING,loading:!0}),p=s(),g=o.getPlayerId(p),!((f=o.getConnectedPlayers(p)).length>0)||f[t]){n.next=9;break}return h.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE),n.abrupt("return");case 9:return m=ma,n.next=12,l.getContextPlayers(g);case 12:if(v=n.sent,t===g||t===m.playerId||!f[t]){n.next=17;break}m=f[t],n.next=25;break;case 17:if(1!==v.length){n.next=21;break}m=v[0],n.next=25;break;case 21:return n.next=23,c.requestProfiles([t]);case 23:(E=c.getProfiles())[t]&&(m=E[t]);case 25:return n.next=27,a(fh(e,m));case 27:if(p=s(),jc(p,{playerId:g})!==ma.playerId){n.next=32;break}return n.next=32,a(gh(e));case 32:if(p=s(),jc(p,{playerId:g})===g||!f[t]){n.next=37;break}return a(Nh(t,!0)),n.abrupt("return");case 37:if(Vc(p)===e){n.next=41;break}return h.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE),n.abrupt("return");case 41:if(S=zc(p),A=Xc(p,{playerId:g}),a(Vh({mode:Ea,status:S})),T=l.getContextID(),y=l.contextType,a(Ca(T,y)),!A){n.next=52;break}return n.next=50,o.requestConnectedPlayers();case 50:return h.events.emit(wa.K5.SWITCH,wa.Co.GAME_SCENE),n.abrupt("return");case 52:h.events.emit(wa.K5.SWITCH,wa.Co.GAME_SCENE),n.next=58;break;case 55:n.prev=55,n.t0=n.catch(0),(0,i.tO)(n.t0);case 58:return n.prev=58,xh(1e3),n.finish(58);case 61:case"end":return n.stop()}}),n,null,[[0,55,58,61]])})));return function(e,t){return n.apply(this,arguments)}}()},Hh=function(e){return function(t){try{var n=window.game.player,a=n.getPlayerId();Wo(a,e).catch((function(e){(0,i.tO)(new Error(e))}));var s=n.getPlayerData(),r=s.score,o=void 0===r?0:r,c=s.level;o<e&&n.setBestScore(e);var l={score:e,level:c};t(Ch(a,l)),t(bh(l))}catch(h){if(h instanceof vc)return;(0,i.tO)(h)}}},Zh=function(e,t){return void 0===t&&(t=null),function(){var n=(0,r.Z)(u().mark((function n(a,s){var o,c,l,h,d,p,g,f,m,v,S,A,T,y,I,C,b,O,P,R,w,x;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,c=window.game,l=c.player,h=c.analytics,d=c.facebook,p=c.globalScene,g=d.getContextID(),f=0,m=s(),h.event(Pt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),a(kh()),!E()(o=[va,Aa]).call(o,e)){n.next=16;break}return n.next=10,a((function(e){try{var t=window.game.player;e({type:In,payload:{}});var n=t.getPlayerId(),a=Nl(ah.SingleMatchStore)||{},s=a.data;a.data=rh(s),eh({playerId:n,match:a}),e(hh(a))}catch(r){if(e(hh(null)),r instanceof Gl)return;if(r instanceof ha)return;if(r instanceof Wl)return;(0,i.tO)(r)}}));case 10:if(m=s(),Zc(m)){n.next=15;break}return n.next=15,a(oh());case 15:f=Yc(m);case 16:if(e===Sa&&a(Eh(t)),e!==Ea){n.next=26;break}return n.next=20,a(ph(t));case 20:m=s(),v=Vc(m),S=Kc(m),A=S.playerId,g||(g=window.game.facebook.getContextID()),T=rl(m,{opponentId:A}),g&&A&&!T&&a(xl(A,{contextId:g,matchId:v}));case 26:"online"===e&&a(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,s=a.getPlayer(),r=s.playerId,o=s.name,c=s.photo,t({type:Zn,payload:{playerId:r}}),l={},ce()(n=Ba()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);l[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),l[r]={playerId:r,name:o,photo:c},t(Sh("mock",l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=s(),y=l.getPlayerData(m),I=y.score,C=void 0===I?0:I,b=Hc(m),O=b.rescued,P=void 0===O?0:O,a(bh({score:f,bestScore:C})),a({type:pn,payload:{mode:e,contextId:g,rescued:P}}),a(ba(e)),p.events.emit(wa.K5.SWITCH,wa.Co.GAME_SCENE),n.next=44;break;case 37:if(n.prev=37,n.t0=n.catch(0),!(n.t0 instanceof Gl)){n.next=43;break}return R=window.game,w=R.globalScene,x=R.lang,w.screen.open(Za.o4.NOTIFY_SCREEN,{message:x.Text.NO_REWARDS+"\n"+x.Text.CANCELLED_AD,duration:2500,loading:!1}),n.abrupt("return");case 43:(0,i.tO)(n.t0);case 44:return n.prev=44,xh(0),n.finish(44);case 47:case"end":return n.stop()}}),n,null,[[0,37,44,47]])})));return function(e,t){return n.apply(this,arguments)}}()},Yh=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=window.game,o=a.analytics,c=a.facebook,l=a.globalScene,h=c.getContextID(),d=n(),p=el(d)||1,o.event(Pt._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(Ta),level:p}),t(kh()),d=n(),$c(d)){e.next=12;break}return e.next=12,t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,r,o,c,l,h,d,p,g;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=window.game,r=a.player,o=a.globalScene,c=a.lang,o.screen.open(Za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),t({type:Pn,payload:{}}),l=n(),h=el(l)||1,d=tl(l),p=r.getPlayerId(),g=(0,s.Z)({},ah.LocalSingleMatchDefault,{level:h,status:"active",playerId:p,challengeMode:d,startedAt:Date.now(),updateAt:Date.now()}),eh({playerId:p,match:g}),t(uh(g)),Bl(ah.JourneyMatchStore+"-"+p,g),e.next=22;break;case 14:if(e.prev=14,e.t0=e.catch(0),t(uh(null)),!(e.t0 instanceof Gl)){e.next=19;break}return e.abrupt("return");case 19:if(!(e.t0 instanceof Wl)){e.next=21;break}return e.abrupt("return");case 21:(0,i.tO)(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 12:t({type:pn,payload:{mode:Ta,contextId:h}}),l.events.emit(wa.K5.SWITCH,wa.Co.JOURNEY_SCENE),e.next=23;break;case 16:if(e.prev=16,e.t0=e.catch(0),!(e.t0 instanceof Gl)){e.next=22;break}return window.game.globalScene.screen.open(Za.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),e.abrupt("return");case 22:(0,i.tO)(e.t0);case 23:return e.prev=23,xh(0),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[0,16,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},Wh=function(e,t){return function(){var n=(0,r.Z)(u().mark((function n(i,a){var s,r,o,c,l,h,d,p,g,f;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=window.game.player,o=t.score,c=void 0===o?0:o,l=t.level,h=void 0===l?0:l,d=a(),!E()(s=[va,Aa]).call(s,e)){n.next=7;break}return p=Zc(d),n.next=7,i(lh(p));case 7:if(e===Sa&&(i({type:Hn,payload:{}}),g=r.getPlayerId(),i(Ch(g,t))),e!==Ea){n.next=12;break}return f=Vc(d),n.next=12,i(mh(f,c,{level:h}));case 12:i({type:gn,payload:{mode:e}}),cl.emit(po.GAME_OVER);case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Vh=function(e){return function(t){var n=e.mode,a=e.status;t({type:fn,payload:{mode:n,status:a}}),(0,i.sw)("game-mode",n)}},zh=function(){return function(e,t){var n=t(),i=al(n).level,a=void 0===i?0:i,s=Sc(n);window.game.analytics.event(Pt._.MATCH_RESCUE,{game_mode:GameCore.Utils.String.toUpperCamelCase(s),level:a,level_name:"level_"+a}),e({type:mn,payload:{}})}},Kh=Ha.Z.DEFAULT,jh=Kh.KEY,Xh=Kh.FRAME,Jh=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).buttonPlay=void 0,i.buttonShare=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.score=void 0,i.scoreText=void 0,i.background=void 0,i.showPopUp=void 0,i.showItems=void 0,i.payload=void 0,i.handleChallengeFriend=function(){var e=i.payload.playerId;i.scene.storage.dispatch(Nh(e))},i.handleShare=function(){i.scene.storage.dispatch(Al())},i.createBackground(),i.updateSize(),i.createAvatar(),i.createRank(),i.createUsername(),i.createScore(),i.createButtonShare(),i.createButtonPlay(),n&&i.updateInfo(n),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({scoreRight:!0,isHighlight:!1,useChallenge:!1,backgroundFrame:"",rank:-1},e),this.updateBackground(),this.updateAvatar(),this.updateRank(),this.updateUsername(),this.updateScore(),this.updateButton(),this.alignScoreAndButton()},n.createBackground=function(){this.background=this.scene.make.image({key:jh,frame:Xh.LEADERBOARD_BG_ITEM}),this.background.setWorldSize(312,60),this.background.setVisible(!1),this.add(this.background)},n.updateBackground=function(){this.payload.backgroundFrame?(this.background.setVisible(!0),this.background.setFrame(this.payload.backgroundFrame||Xh.LEADERBOARD_BG_ITEM),this.background.setWorldSize(312,60)):this.background.setVisible(!1)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createAvatar=function(){this.avatar=new pc(this.scene,{key:jh,frame:Xh.AVATAR_BORDER,background:Xh.AVATAR_BACKGROUND,width:40,height:40,radius:30,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.LeftCenter(this.avatar,this,-40)},n.updateAvatar=function(){var e=this.payload,t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.getRankIconFrame=function(e){var t=Xh.ICON_CUP_GOLD;switch(e){case 1:t=Xh.ICON_CUP_GOLD;break;case 2:t=Xh.ICON_CUP_SILVER;break;case 3:t=Xh.ICON_CUP_COPPER}return t},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:jh,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-6)},n.updateRankIcon=function(e){if(e>3)this.rankIcon.setVisible(!1);else{this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setWorldSize(28,24),this.rankIcon.setFrame(t)}},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(Va.Z.NUMBER_DARK.KEY))},n.updateRankUndefined=function(){this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),this.rankText.setText("?"),this.payload.isHighlight?this.rankText.setFont(Va.Z.NUMBER_LIGHT.KEY):this.rankText.setFont(Va.Z.NUMBER_DARK.KEY)},n.getShortName=function(e){return e.length>15?e.substring(0,12)+"...":e},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("FRIEND NAME"),style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"}}),this.username.setTint(7485207),this.username.setHighQuality(),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,10,0),this.add(this.username)},n.updateUsername=function(){var e=this.payload.name,t=this.scene.game.lang,n="Anonymous"!=e?e:t.Text.Anonymous;this.username.setText(this.getShortName(n)),this.username.setTint(7551258)},n.createScore=function(){this.score=this.scene.add.container(),this.scoreText=this.scene.make.text({text:"132500",style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(36)+"px",fontStyle:"500"}}),this.scoreText.setOrigin(.5),this.score.add([this.scoreText]),this.add(this.score),Phaser.Display.Align.In.Center(this.score,this.avatar,160,0)},n.updateScore=function(){var e=this.payload.score;this.scoreText.setText(e),this.scoreText.setTint(7551258)},n.createButtonPlay=function(){this.buttonPlay=new Wa.Z(this.scene,jh,Xh.BUTTON_CHALLENGE_LIGHT,54,36),this.buttonPlay.setName("ChallengeFriend"),Phaser.Display.Align.In.RightCenter(this.buttonPlay,this,-18,2),this.buttonPlay.onClick=this.handleChallengeFriend,this.add(this.buttonPlay)},n.createButtonShare=function(){this.buttonShare=new Wa.Z(this.scene,jh,Xh.BUTTON_SHARE_DARK,54,36),this.buttonShare.setName("Share"),Phaser.Display.Align.In.RightCenter(this.buttonShare,this,-18,2),this.buttonShare.onClick=this.handleShare,this.add(this.buttonShare)},n.updateButton=function(){var e=this.payload,t=e.isHighlight;if(!e.useChallenge)return this.buttonShare.setVisible(!1),void this.buttonPlay.setVisible(!1);t?(this.buttonShare.setVisible(!0),this.buttonPlay.setVisible(!1)):(this.buttonShare.setVisible(!1),this.buttonPlay.setVisible(!0))},n.alignScoreAndButton=function(){this.payload.useChallenge?Phaser.Display.Align.In.Center(this.score,this.avatar,150,0):Phaser.Display.Align.In.Center(this.score,this.avatar,200,0)},n.runShowPopUpAnimation=function(e,t){this.scene.tweens.killTweensOf(this),this.showPopUp=new hc({targets:[this],delay:e,duration:t,props:{y:{start:this.y+70,to:this.y}}}),this.showPopUp.play()},n.runShowItemAnimation=function(e,t){var n=this.getAll();this.scene.tweens.killTweensOf(n),this.showItems=new oc({targets:n,duration:t,delay:this.scene.tweens.stagger(50,{start:e+50}),props:{scale:{duration:1e3,getStart:function(e){return.8*e.scale},getEnd:function(e){return e.scale},ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45]}}}),this.showItems.play()},n.runShowUpAnimation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=300);var n=100*e;this.runShowPopUpAnimation(n,t),this.runShowItemAnimation(n,t)},n.setFrameBackground=function(e){this.background.setFrame(e)},n.setUserNameLight=function(){this.username.setTint(16640200)},n.setRankLight=function(){this.rankText.setFont(Va.Z.NUMBER_LIGHT.KEY)},n.setScoreLight=function(){this.scoreText.setTint(16640200)},t}(Phaser.GameObjects.Container),qh=Jh,Qh=Ha.Z.DEFAULT.FRAME,$h=function(e){function t(t){var n;return(n=e.call(this,t)||this).myScoreBlock=void 0,n.scene=t,n.setName("FooterBar"),n.createMyScoreBlock(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createMyScoreBlock=function(){this.myScoreBlock=new qh(this.scene),this.myScoreBlock.setFrameBackground(Qh.LEADERBOARD_BG_ITEM),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock),Phaser.Display.Align.In.Center(this.myScoreBlock,this)},n.updateMyScoreBlock=function(e){this.myScoreBlock.setVisible(!0),this.myScoreBlock.updateInfo(e),this.myScoreBlock.setRankLight(),this.myScoreBlock.setScoreLight(),this.myScoreBlock.setUserNameLight(),this.myScoreBlock.runShowUpAnimation(0,1e3)},t}(Phaser.GameObjects.Container),eu=$h,tu=n(627),nu=n(626),iu=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,o.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,o.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return re()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=Ba()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&(ce()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)})),this.objects.getChildren().forEach((function(e){return t.objects.killAndHide(e)})))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxHeight=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(e){this.objects.incY(e);var t=this.getStartObjectIndex(),n=this.getEndObjectIndex();t!=this.startObjectIndex&&(t>this.startObjectIndex?this.killObjectIndex(this.startObjectIndex,t-1):this.addObjectIndex(t,this.startObjectIndex-1),this.startObjectIndex=t),n!=this.endObjectIndex&&(n<this.endObjectIndex?this.killObjectIndex(n+1,this.endObjectIndex):this.addObjectIndex(this.endObjectIndex+1,n),this.endObjectIndex=n)},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var s=this.objects.getFirstDead(!0),r=s.height,o=r/2+(r+i)*n+this.value-this.height/2;s.updateInfo(a[n]),s.setPosition(0,o),s.setActive(!0),s.setVisible(!0),this.addAt(s),this.listObjects[n]=s}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,W.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxHeight=0:e[0].height}}]),t}(nu.Z));function au(e,t){var n="undefined"!==typeof Eo()&&Ao()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return su(e,t);var i=Me()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return mo()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return su(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function su(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var ru=Ha.Z.DEFAULT.FRAME,ou=function(e){function t(t){var n;(n=e.call(this,t)||this).currentPlayerId=void 0,n.scroller=void 0;var i=n.scene.player;return n.currentPlayerId=i.getPlayerId(),n.createReuseScroller(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){var e=335,t=0;this.scene.world.isLandscape()&&(e=290,t=-20),this.scroller=new iu(this.scene,{classType:qh,listConfigs:[],width:310,height:e,padding:0,marginTop:t,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ha.Z.DEFAULT.KEY,Ha.Z.DEFAULT.FRAME.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.updateData=function(e,t){var n=ai()(e)||[];if(!(n.length<1)){for(var i,a=ri()(n).call(n,(function(e,t){return+t.score-+e.score})),s=[],r=0,o=(this.scene.game.lang,au(a));!(i=o()).done;){var c=i.value,l=c.playerId,h=c.photo,u=c.score,d=c.name,p=c.rank;if(l){this.currentPlayerId;var g={playerId:l,photo:h,name:d,rank:p,score:u,scoreRight:t===yo,useChallenge:t===Io,isHighlight:!1,backgroundFrame:""+ru.PREFIX_LEADERBOARD_BG_ITEM+r};s.push(g),++r>=2&&(r=0)}}this.scroller.updateConfig(s),this.showLeaders()}},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&(a.setVisible(!0),a.runShowUpAnimation(i,300))}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},t}(Phaser.GameObjects.Container),cu=ou,lu=Ha.Z.DEFAULT,hu=lu.KEY,uu=lu.FRAME,du=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaders=void 0,n.loading=void 0,n.message=void 0,n.textMessage=void 0,n.messageAnimation=void 0,n.setSize(310,430),n.createLoading(),n.createMessage(),n.createText(),n.createContents(),n.createAnimation(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.showLoading=function(e){this.loading.setVisible(e),this.showMessage(!1)},n.showMessage=function(e,t){this.message.setVisible(e),t&&(this.message.setText(t),this.textMessage.setText(t),this.messageAnimation.play()),"ar"==this.scene.facebook.getLocale()&&(this.textMessage.setVisible(!0),this.message.setVisible(!1))},n.createLoading=function(){this.loading=new uc.Z(this.scene),this.loading.setVisible(!1),this.add(this.loading)},n.createMessage=function(){this.message=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.message.setTint(10317116),this.add(this.message),Phaser.Display.Align.In.Center(this.message,this)},n.createText=function(){this.textMessage=this.scene.make.text({style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textMessage.setTint(7551258),this.textMessage.setVisible(!1),this.add(this.textMessage),Phaser.Display.Align.In.Center(this.textMessage,this)},n.createContents=function(){this.createLeaders(),this.createContentBackground()},n.createLeaders=function(){this.leaders=new cu(this.scene),this.add(this.leaders),Phaser.Display.Align.In.Center(this.leaders,this,0,-11)},n.createContentBackground=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:hu,frame:uu.LEADERBOARD_BG_BOTTOM});t.setFlipY(!0),t.setWorldSize(315,22);var n=this.scene.make.image({key:hu,frame:uu.LEADERBOARD_BG_MIDDLE});n.setWorldSize(315,300);var i=this.scene.make.image({key:hu,frame:uu.LEADERBOARD_BG_BOTTOM});i.setWorldSize(315,22),e.add(t),e.add(n),e.add(i),Phaser.Display.Align.In.Center(n,e),Phaser.Display.Align.In.Center(t,n,0,-n.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,n,0,n.displayHeight/2+i.displayHeight/2),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-10)},n.createAnimation=function(){this.messageAnimation=new tu.Z({targets:[this.message],duration:60,repeat:2})},t}(Phaser.GameObjects.Container),pu=du,gu=GameCore.Configs.LeadersBoard,fu=Ha.Z.DEFAULT,mu=fu.KEY,vu=fu.FRAME,Eu=function(e){function t(t,n,a,s){var r;return(r=e.call(this,t,n,a,s)||this).popup=void 0,r.popupShowUpAnimation=void 0,r.popupFadeOutAnimation=void 0,r.popupFadeInMaskAnimation=void 0,r.popupFadeOutMaskAnimation=void 0,r.board=void 0,r.footerBar=void 0,r.isRequesting=void 0,r.isSwitchable=void 0,r.tabId=void 0,r.offset=void 0,r.isStateChanged=void 0,r.open=function(t){e.prototype.open.call((0,La.Z)(r),t),r.setVisible(!0),r.selectWorldTab(),r.runOpenAnimation(),r.board.showLoading(!0);var n=[{selector:ic,callback:function(e){if(r.isRequesting=e,r.board.showLoading(e),!1===e){if(!r.scene)return;if(!r.visible||!r.scene.scene.isActive)return;var t=r.scene.game.storage.getState(),n=nc(t);r.isSwitchable=!0,n&&0!==B()(n).length?r.board.leaders.updateData(n,r.tabId):r.board.showMessage(!0,r.scene.lang.Text.LEADERBOARD_EMPTY),r.updatePlayerEntryAsync().catch(i.tO)}}}];r.handleStateChange(n)},r.handleSelectFriendTab=function(){r.isRequesting||r.isSwitchable&&r.selectFriendTab()},r.handleSelectWorldTab=function(){r.isRequesting||r.isSwitchable&&r.selectWorldTab()},r.clickClose=function(){r.runCloseAnimation()},r.setVisible(!1),r.createPopup(),r.createTitle(),r.createBoard(),r.createFooterBar(),r.setDepth(Za.Ks.POPUP),r.background.setAlpha(.5),r.scene.world.isLandscape()&&r.popup.setScale(r.popup.scale-.15),r}(0,o.Z)(t,e);var n=t.prototype;return n.handleStateChange=function(e){var t=this;this.isStateChanged||(e.forEach((function(e){var n=e.selector,i=e.callback;t.scene.storage.watch(n,i)})),this.isStateChanged=!0)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-5,340,510,{forceHeightTop:60}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-2)},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:mu,frame:vu.TEXT_LEADER_BOARD}),i=n.width,a=n.height;n.setWorldSize(i/t,a/t);var s=new Wa.Z(this.scene,mu,vu.BUTTON_CLOSE,35,35);s.setName("Close"),s.onClick=this.clickClose,e.add([n,s]),Phaser.Display.Align.In.Center(n,e,0,9),Phaser.Display.Align.In.Center(s,e,160,-15),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup)},n.createBoard=function(){this.board=new pu(this.scene),this.popup.add(this.board),Phaser.Display.Align.In.Center(this.board,this.popup,0,-25)},n.createFooterBar=function(){this.footerBar=new eu(this.scene),this.popup.add(this.footerBar),Phaser.Display.Align.In.Center(this.footerBar,this.popup,0,178)},n.selectFriendTab=function(){this.tabId=Io,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.scene.storage.dispatch(ec()),this.scene.storage.dispatch(Qo(gu.LeaderboardId,Io,gu.Limit,this.offset))},n.selectWorldTab=function(){this.tabId=yo,this.offset=0,this.board.showLoading(!0),this.board.leaders.removeLeaders(),this.footerBar.myScoreBlock.setVisible(!1),this.scene.storage.dispatch(ec()),this.scene.storage.dispatch(Qo(gu.LeaderboardId,yo,gu.Limit,this.offset))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0),i.board.showLoading(!1),i.close()}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.updatePlayerEntryAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.player.getPlayerId(),n=this.scene.player.getPlayer(),i=null,e.prev=3,e.next=6,Ho(t);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i=null;case 12:a={playerId:t,name:n.name,photo:n.photo,score:""+(n.data.score||0),rank:-1},i&&(a={playerId:t,name:n.name,photo:n.photo,score:""+i.getScore(),rank:i.getRank()}),this.footerBar.updateMyScoreBlock({playerId:a.playerId,rank:a.rank,photo:a.photo,name:a.name,score:a.score,backgroundFrame:vu.LEADERBOARD_BG_ITEM,isHighlight:!0});case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Su=Eu,Au=n(463),Tu={LOGO:{KEY:"spine-logo",JSON:"./assets/spine/logo/logo.json",ATLAS:"./assets/spine/logo/logo.atlas",ANIMATIONS:{START_GROW:"start_grow",IDLE_GROW:"idle_grow"}},BEST_SCORE:{KEY:"best-score",JSON:"./assets/spine/best-score{langcode}/newbest-trim.json",ATLAS:"./assets/spine/best-score{langcode}/newbest-trim.atlas",ANIMATIONS:{ANIM:"anim5"}}},yu=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bestScoreSpine=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createSpineEffect=function(){var e=this,t=this.scene.world.getPixelRatio();this.bestScoreSpine=this.scene.add.spine(0,630,Tu.BEST_SCORE.KEY,Tu.BEST_SCORE.ANIMATIONS.ANIM),this.bestScoreSpine.preMultipliedAlpha=!0,this.bestScoreSpine.scale=1/t,this.add(this.bestScoreSpine),this.bestScoreSpine.on("complete",(function(){e.bestScoreSpine.setVisible(!1)}))},n.playEffect=function(){this.bestScoreSpine?(this.bestScoreSpine.setVisible(!0),this.bestScoreSpine.play(Tu.BEST_SCORE.ANIMATIONS.ANIM)):this.createSpineEffect()},t}(Phaser.GameObjects.Container),Iu=n(611),Cu=n.n(Iu),bu=GameCore.Configs,Ou=bu.Gameplay,Pu=bu.Match.Levels,Ru=function(){function e(){this.levelIndex=0,this.levels=Pu,this.recentLevel=void 0}var t=e.prototype;return t.increaseLevel=function(){this.levelIndex++},t.getCurrentTargetScore=function(){return this.levels[this.levelIndex]},t.getNextTargetScoreLevel=function(){return this.levels[this.levelIndex+1]},t.getCurrentIndex=function(){return this.levelIndex},t.updateCurrentLevelByScore=function(e){var t,n=Cu()(t=this.levels).call(t,(function(t){return t>e}));if(-1===n)return this.handleAutoGrantNewLevel(e);this.levelIndex=n;var i=this.levels[n-1];return i&&(this.recentLevel=i),this.levels[n]},t.restart=function(){this.levelIndex=0,this.recentLevel=0},t.handleAutoGrantNewLevel=function(e){var t=Ou.Progress.BonusScore,n=this.levels[this.levels.length-1]+t;return this.levels.push(n),n<=e?this.handleAutoGrantNewLevel(e):(this.levelIndex=this.levels.length-1,this.recentLevel=this.levels[this.levelIndex],n)},e}(),wu=n(465),xu=function(){var e,t=window.game.facebook;return t?(null==(e=t.platform)?void 0:e.toLowerCase())||"":null},ku=function(){return"web"==xu()},_u=Math.sin,Lu=Math.cos,Mu=function(e,t,n){return e*Lu(t)*n},Du=function(e,t,n,i){return void 0===i&&(i=10),e*_u(t)*n-.5*i*Math.pow(n,2)},Nu=Ha.Z.GAMEPLAY_32,Bu=Nu.KEY,Gu=Nu.FRAME,Fu=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:Bu,frame:Gu.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.scale0=this.imageCell.scale,this.add(this.imageCell)},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:Bu,frame:Gu.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:Bu,frame:Gu.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:Bu,frame:Gu.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:Bu,frame:Gu.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Mu(this.v0,this.alpha0,t),i=Du(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,console.log("this.imageBreak.y === ",t,this.t0,this.imageBreak.y),this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),Uu=Fu,Hu=n(103),Zu=n.n(Hu),Yu=GameCore.Configs.Board,Wu=(Yu.cols,Yu.rows),Vu=void 0===Wu?8:Wu,zu=0,Ku=function(){return zu},ju=function(e,t){zu=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(e){n.some((function(n){return n.x===e&&n.y===t}))||n.push({x:e,y:t})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(e){n.some((function(n){return n.x===t&&n.y===e}))||n.push({x:t,y:e})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=qu(e,t);if(u&&u.length>0)for(var d=function(){var e=u[p],t=e.x,i=e.y;n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i})},p=0;p<u.length;p++)d();return zu+=s.length,zu+=r.length,zu+=Math.floor(u.length/9),n},Xu=function(e,t){if(0===e.length)return!1;var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},Ju=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},qu=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});Xu(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=Ju(e,s);n.push.apply(n,r)}return n},Qu=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},$u=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},ed=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(td(e,s,a,t[r]))return!1;return!0},td=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},nd=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(td(e,s,a,t))return!0;return!1},id=0,ad=function(){return id++,18+10*(sd()-1)},sd=function(){return id+1},rd=function(e){var t=e;switch(e){case Ss:t="b";break;case As:t="c";break;case Ts:t="d";break;case ys:t="g";break;case Is:t="o";break;case Cs:t="p";break;case bs:t="q";break;case Os:t="r";break;case Ps:t="y";break;case xs:t="l";break;case ks:t="l1";break;case _s:t="l3";break;case Ls:t="e2";break;case Ms:t="e3";break;case Ds:t="e4";break;case Ns:t="e5";break;case Bs:t="s1";break;case Gs:t="s2";break;case Fs:t="s3";break;case Us:t="tz";break;case Hs:t="ta";break;case ps:t="dt";break;case us:t="dl";break;case ds:t="dr";break;case gs:t="db";break;case ls:t="v";break;case hs:t="h";break;case fs:t="vl";break;case ms:t="vr";break;case vs:t="hl";break;case Es:t="hr"}return t},od=function(e){var t=e;switch(e){case"b":t=Ss;break;case"c":t=As;break;case"d":t=Ts;break;case"g":t=ys;break;case"o":t=Is;break;case"p":t=Cs;break;case"q":t=bs;break;case"r":t=Os;break;case"y":t=Ps;break;case"l":t=xs;break;case"l1":t=ks;break;case"l3":t=_s;break;case"e2":t=Ls;break;case"e3":t=Ms;break;case"e4":t=Ds;break;case"e5":t=Ns;break;case"s1":t=Bs;break;case"s2":t=Gs;break;case"s3":t=Fs;break;case"tz":t=Us;break;case"ta":t=Hs;break;case"dt":t=ps;break;case"dl":t=us;break;case"dr":t=ds;break;case"db":t=gs;break;case"v":t=ls;break;case"h":t=hs;break;case"vl":t=fs;break;case"vr":t=ms;break;case"hl":t=vs;break;case"hr":t=Es}return t},cd=function(e){for(var t=[],n="12345678x",i=e.split(""),a=0;a<i.length;a++)if(gt()(n).call(n,i[a])>=0)for(var s="x"===i[a]?Vu:Number(i[a]),r=0;r<s;r++)t.push({value:0,frame:"gem/gem_transparent"});else t.push({value:1,frame:od(i[a])});return t},ld=function(e){var t=e.split(","),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:od(n[0]),direction:od(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,frame:od(t[1])}},hd=Ha.Z.GAMEPLAY_32,ud=hd.KEY,dd=hd.FRAME,pd=GameCore.Configs.Board,gd=pd.cols,fd=pd.rows,md=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.wrapPiece=void 0,s.type=void 0,s.frame=void 0,s.direction=void 0,s.data=[],s.isReverse=!1,s.matrixData=void 0,s.cellItems=[],s.cells=[],s.isSetDrag=!1,s.isCreateCell=!1,s.isDragEnd=!1,s.isCanMove=void 0,s.index=void 0,s.distancePY=void 0,s.backupPx=void 0,s.backupPy=void 0,s.moveTopNumber=30,s.correctAlpha=1,s.props=void 0,s.parent=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,La.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:ud,frame:dd.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.wrapPiece.removeAllListeners(),this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updateSize=function(){this.scene.world.isLandscape()?this.setSize(this.parent.width,this.parent.height/3):this.setSize(this.parent.width/3,this.parent.height),this.wrapPiece.setWorldSize(this.width,this.height)},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive().input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(Ua.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.dragStart(),this.scene.audio.playSound(Ya.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(ku()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(wu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=gd,r=fd,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=re()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=re()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[v],t=re()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return 1;var s=t[0];a.checkItemInArray(o,s)||o.push(s)},v=0;v<n.length;v++)m();for(var E=function(){var e,t=o[S],n=t.x,i=t.y,c=re()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return 1;c[0].cell.setFrameImageCell(dd.GEM_LIGHT)},S=0;S<o.length;S++)E()},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++)this.cellItems[e].cell.setFrameImageCell(dd.GEM)},n.checkItemInArray=function(e,t){var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Ua.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(Ya.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Ua.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.scene.layoutManager.objects.main,n=this.getPositionTopLeftInBoard();if(n){var i=this.calcScore()||0;this.scene.tutorialManager.isRunning()||(this.scene.handleUpdateScore(i),this.scene.handleAddScoreAnim(i));var a=n.x,s=n.y,r=t.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,v=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),t.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),t.board.handleMove(v,e.onBoardHandleMoveCompleted.bind(e))}})}else t.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.scene.tutorialManager.isRunning()||(this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces())},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(td(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this,t=this.scene.layoutManager.objects.main;this.scene.audio.playSound(Ya.Z.PIECE_INVALID_MOVE),t.board.handleRemoveHighlight(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.invalidMove(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}})},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()&&!this.scene.tutorialManager.validTargetPosition(n))return t;for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=fd||s>=gd||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<fd;p++)for(var g=0;g<gd;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,v=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&v-h/2<=l&&v+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>gd-1||d<0||d>fd-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?dd.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell||this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Sine.Out})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new Uu(this.scene,r);o.setFrameImageCell(dd.GEM),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.resetPiece=function(){this.cellItems.forEach((function(e){e.cell.destroy()})),this.cells=[],this.cellItems=[],this.createCells(.5)},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive()},t}(Phaser.GameObjects.Container),vd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case us:n?i=hr:(i=lr,e===ks&&(i=ur),e===_s&&(i=dr));break;case ds:n?i=nr:(i=tr,e===ks&&(i=ir),e===_s&&(i=ar));break;case ps:if(n){i=Qs;break}i=qs,e===ks&&(i=$s),e===_s&&(i=er);break;case gs:n?i=rr:(i=sr,e===ks&&(i=or),e===_s&&(i=cr))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(md),Ed=vd,Sd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case Ns:n=t===ls?Sr:Ar;break;case Ds:n=t===ls?vr:Er;break;case Ls:n=t===ls?pr:gr;break;case Ms:n=t===ls?fr:mr}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(md),Ad=Sd,Td=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Bs:t=Tr;break;case Gs:t=yr;break;case Fs:t=Ir}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(md),yd=Td,Id=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Rr;break;case"right":t=wr;break;case"top":t=xr;break;case"bottom":t=kr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(md),Cd=Id,bd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case"left":default:t=Br;break;case"right":t=Gr}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case"left":default:t=Fr;break;case"right":t=Ur}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case"left":default:t=Hr;break;case"right":t=Zr}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case"left":default:t=Yr;break;case"right":t=Wr}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case Ws:i=t.getDataByDirectionCross2(n);break;case Vs:i=t.getDataByDirectionCross3(n);break;case zs:i=t.getDataByDirectionCross4(n);break;case Ks:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(md),Od=bd,Pd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"vertical_left":default:t=Cr;break;case"vertical_right":t=br;break;case"horizontal_right":t=Pr;break;case"horizontal_left":t=Or}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(md),Rd=Pd,wd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return Nr},t.getData=function(){return t.buildData(t.getMatrixData())},t}(md),xd=wd,kd=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=_r;break;case"right":t=Lr;break;case"top":t=Mr;break;case"bottom":t=Dr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(md),_d=kd,Ld=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case"left":default:t=Vr;break;case"right":t=zr;break;case"top":t=Kr;break;case"bottom":t=jr}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(md),Md=Ld,Dd=Ha.Z.DEFAULT,Nd=Dd.KEY,Bd=Dd.FRAME,Gd=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:Nd,frame:Bd.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),Fd=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new Gd(this.scene)},e}(),Ud=Ha.Z.DEFAULT,Hd=Ud.KEY,Zd=Ud.FRAME,Yd=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.iconCrown=void 0,n.bestScoreText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createIconCrown(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:Hd,frame:Zd.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(26),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,25)},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:Hd,frame:Zd.ICON_CROWN}),this.iconCrown.setWorldSize(20,18),this.add(this.iconCrown),Phaser.Display.Align.In.Center(this.iconCrown,this.background,0,5)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.updateBestScoreText=function(e){var t=this.scene.storage.getState();e>al(t).bestScore&&this.setScoreText(e)},t}(Phaser.GameObjects.Container),Wd=Yd,Vd=Ha.Z.GAMEPLAY,zd=Vd.KEY,Kd=Vd.FRAME,jd=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=void 0,n.currentScore=0,n.scene=t,n.scene.add.existing((0,La.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:zd,frame:Kd.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background,0,3)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,ease:Phaser.Math.Easing.Sine.Out,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScoreText(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.scene.tutorialManager.isRunning()?t.scene.tutorialManager.nextTutorial():(t.scene.handleNextTargetScore(),t.scene.bestScoreReached())}})},t}(Phaser.GameObjects.Container),Xd=jd,Jd=Ha.Z.GAMEPLAY,qd=Jd.KEY,Qd=Jd.FRAME,$d=function(e){function t(t){var n;return(n=e.call(this,t)||this).titleSprite=void 0,n.background=void 0,n.textScore=void 0,n.avatar=void 0,n.score=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.initScoreBlockAvatar=function(){this.createAvatar(),this.createBackgroundScore(),this.createScoreText(),this.setScore(0),this.setScoreText(0)},n.createAvatar=function(){this.avatar=new pc(this.scene,{key:qd,frame:Qd.AVATAR_BORDER,background:Qd.AVATAR_BACKGROUND,width:32,height:32,radius:32,borderWidth:5}),this.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this,0,-10)},n.createBackgroundScore=function(){this.background=this.scene.make.image({key:qd,frame:Qd.BG_SCORE}),this.background.setWorldSize(92,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,25)},n.createScoreText=function(){this.textScore=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(35),text:"0",origin:{x:.5,y:.5}}),this.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.textScore.setText(String(e))},t}(Phaser.GameObjects.Container),ep=$d,tp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.addScore=void 0,n.currentScore=0,n.scene=t,n.initScoreBlockAvatar(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;if(this.avatar.loadPhoto(t,n),this.scene.gamePlayMode===Ea){var i=this.scene.storage.getState(),a=(al(i)[t]||{}).score,s=void 0===a?0:a;this.textScore.setText(String(s))}},n.animAddScore=function(e){var t=this,n=this.scene.layoutManager.objects.header,i=this.score+e;this.currentScore=i,this.setScore(i),this.addScore&&this.addScore.isPlaying()&&(this.addScore.remove(),this.setScoreText(i)),this.addScore=this.scene.tweens.addCounter({from:this.score-e,to:this.score,duration:100,onUpdate:function(e){var i=Math.floor(e.getValue());t.setScoreText(i),n.bestScoreBlock.updateBestScoreText(i),t.scene.updateProgressTargetScore(i)},onComplete:function(){t.setScore(t.score),n.bestScoreBlock.updateBestScoreText(t.score),t.setScoreText(i),t.scene.handleNextTargetScore(),t.scene.bestScoreReached()}})},t}(ep),np=tp,ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).initScoreBlockAvatar(),n.scene.add.existing((0,La.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.updateInfo=function(){var e=this.scene.storage.getState(),t=il(e),n=Kc(e),i=n.playerId,a=n.photo,s=(t[i]||{}).score,r=void 0===s?0:s;this.textScore.setText(String(r)),this.avatar.loadPhoto(i,a)},t}(ep),ap=ip,sp=n(455),rp=Ha.Z.EFFECTS,op=rp.KEY,cp=rp.FRAME,lp=function(e){function t(t){var n;return(n=e.call(this,t,op,cp.FX_STAR_WHITE)||this).emitZone=void 0,n.emitter=void 0,n._isPlaying=!1,n.frequency=void 0,n.count=void 0,n.createEmitZone(),n.createEmitters(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitZone=function(){this.emitZone=new Phaser.Geom.Rectangle},n.createEmitters=function(){var e=1/this.scene.world.getPixelRatio();this.emitter=this.createEmitter({frame:cp.DUST_YELLOW,tint:16710522,emitZone:{source:this.emitZone,type:"random"},frequency:16,speedX:{min:-25,max:-10},speedY:{min:-7,max:7},lifespan:{min:500,max:1500},alpha:{start:.7,end:.3},scale:{min:1*e,max:1.5*e},delay:300})},n.run=function(e,t,n,i,a,s){console.log(n+"-"+i+"-"+a+"-"+s),this.emitZone.setSize(a,s),this.emitZone.setPosition(n-a/2,i-s/2),t!=this.frequency&&(this.emitter.setFrequency(t),this.frequency=t),e!=this.count&&(this.emitter.setQuantity(e),this.count=e),this._isPlaying||(this.emitter.start(),this._isPlaying=!0)},n.stop=function(){var e;null==(e=this.emitter)||e.stop(),this._isPlaying=!1},n.isPlaying=function(){return this._isPlaying},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),hp=lp,up=Ha.Z.GAMEPLAY,dp=up.KEY,pp=up.FRAME,gp=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.rightWhiteProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.sparkling=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup(),this.createSparkling()},n.initBg=function(){this.leftBg=this.scene.make.image({key:dp,frame:pp.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:dp,frame:pp.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:dp,frame:pp.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:dp,frame:pp.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:dp,frame:pp.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:dp,frame:pp.PROGRESS_BAR_RIGHT}),this.rightWhiteProgress=this.scene.make.image({key:dp,frame:pp.PROGRESS_BAR_RIGHT_WHITE});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.rightWhiteProgress,l=c.width,h=c.height,u=l*this.height/h;this.rightWhiteProgress.setWorldSize(u,this.height);var d=this.width-(i+o)+2;this.midProgress.setWorldSize(d,this.height),this.add(this.rightWhiteProgress),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0),Phaser.Display.Align.In.Center(this.rightWhiteProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:dp,frame:pp.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:dp,frame:pp.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new sp.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(dp),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:pp.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createSparkling=function(){this.sparkling=new hp(this.scene),this.add(this.sparkling)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:dp,frame:pp.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=re()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth,s=this.leftBg.width+this.midBg.width+this.rightBg.width;if(this.sparkling.setPosition(),0===e)return this.rightWhiteProgress.setVisible(!1),this.sparkling.stop(),this.stopAnimGlare(),void this.stopEmitter();var r=s*(e>1?1:e),o=this.leftBg.x+r-this.leftBg.width/2+this.rightWhiteProgress.width/2-1;if(this.scene.isNextTarget?(this.runSparklingEmitZone(o-2),this.scene.isNextTarget=!1):this.sparkling.run(2,50,o,this.leftBg.y-.5,4,4),this.rightWhiteProgress.setVisible(!0),this.rightWhiteProgress.x=t-s/2+this.rightWhiteProgress.width/2-3,e>=1){this.rightWhiteProgress.x=s-this.rightProgress.x-a;var c=s-this.rightProgress.x-a;if(this.sparkling.run(2,50,c,this.leftBg.y-.5,4,4),this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}if(this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n)return this.leftProgress.setVisible(!0),e<=.01?(this.leftProgress.setCrop(0,0,5,2*this.height),void(this.rightWhiteProgress.x+=2)):void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height);if(t>n+i){this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height),this.rightWhiteProgress.x=this.rightProgress.x-2;var l=this.rightProgress.x-2;this.sparkling.run(2,50,l,this.leftBg.y-.5,4,4)}else this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height)},n.runSparklingEmitZone=function(e){this.scene.tweens.add({targets:this.sparkling.emitZone,x:e,duration:400})},t}(Phaser.GameObjects.Container),fp=Ha.Z.GAMEPLAY,mp=fp.KEY,vp=fp.FRAME,Ep=function(e){function t(t){var n;return(n=e.call(this,t,mp,vp.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:mp,frame:vp.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(Wa.Z),Sp=Ep,Ap=Ha.Z.GAMEPLAY,Tp=Ap.KEY,yp=Ap.FRAME,Ip=Ha.Z.DEFAULT,Cp=Ip.KEY,bp=Ip.FRAME,Op=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.myScoreBlock=void 0,n.opponentScoreBlock=void 0,n.iconBattle=void 0,n.progressBar=void 0,n.textScore=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),n.createIconBattle(),n.createBestScoreBlock(),n.createSettingButton(),n.createMainScoreBlock(),n.createMyScoreBlock(),n.createOpponentScoreBlock(),n.createProgressBar(),n.addTextScore(),t.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBestScoreBlock=function(){this.bestScoreBlock=new Wd(this.scene),this.add(this.bestScoreBlock)},n.createMainScoreBlock=function(){this.mainScoreBlock=new Xd(this.scene),this.add(this.mainScoreBlock)},n.createMyScoreBlock=function(){this.myScoreBlock=new np(this.scene),this.myScoreBlock.setVisible(!1),this.add(this.myScoreBlock)},n.createOpponentScoreBlock=function(){this.opponentScoreBlock=new ap(this.scene),this.opponentScoreBlock.setVisible(!1),this.add(this.opponentScoreBlock)},n.createSettingButton=function(){this.buttonSetting=new Sp(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new gp(this.scene,315,13),this.add(this.progressBar)},n.createIconBattle=function(){this.iconBattle=this.scene.make.image({key:Tp,frame:yp.ICON_BATTLE}),this.iconBattle.setWorldSize(30,27),this.iconBattle.setVisible(!1),this.add(this.iconBattle)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!1),this.iconBattle.setVisible(!1),this.bestScoreBlock.setVisible(!0),this.textScore.setVisible(!1),this.scene.world.isLandscape()&&(this.textScore.setVisible(!0),this.progressBar.setPosition(0,0))},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1),this.opponentScoreBlock.setVisible(!0),this.myScoreBlock.setVisible(!0),this.iconBattle.setVisible(!0),this.scene.world.isLandscape()&&(this.bestScoreBlock.setVisible(!1),this.textScore.setVisible(!1),this.progressBar.setPosition(0,-33))},n.updateUIPortrait=function(){this.buttonSetting.setVisible(!0),this.textScore.setVisible(!1),this.myScoreBlock.setPosition(-52,35),this.opponentScoreBlock.setPosition(52,35),this.iconBattle.setPosition(0,24),this.updateUIMainScorePortrait(),this.mainScoreBlock.setPosition(0,52),this.bestScoreBlock.setPosition(-132,-12.5),this.progressBar.setPosition(-19,92)},n.updateUIMainScorePortrait=function(){this.mainScoreBlock.background.setTexture(Tp),this.mainScoreBlock.background.setFrame(yp.BG_MAIN_SCORE),this.mainScoreBlock.background.setWorldSize(187,48)},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textScore=this.scene.make.image({key:Cp,frame:bp.TEXT_SCORE});var t=this.textScore,n=t.width,i=t.height;this.textScore.setVisible(!1),this.textScore.setWorldSize(n/e,i/e),this.add(this.textScore)},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textScore.setVisible(!0),this.textScore.setPosition(-this.width/2,8),this.opponentScoreBlock.setPosition(100,0).setScale(.8),this.myScoreBlock.setPosition(-100,0).setScale(.8),this.iconBattle.setPosition(0,0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIBestScore()},n.calcSize=function(){this.setSize(575,110)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(Cp),this.mainScoreBlock.background.setFrame(bp.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.mainScoreBlock.setPosition(-this.width/2,56)},n.updateUIProgress=function(){this.progressBar.setPosition(0,0),this.opponentScoreBlock.visible&&this.progressBar.setPosition(0,-33)},n.updateUIBestScore=function(){this.bestScoreBlock.setPosition(-this.width/2,63)},t}(Phaser.GameObjects.Container),Pp=Op,Rp=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case xs:case ks:case _s:i=new Ed(e,t,n);break;case Ls:case Ms:case Ds:case Ns:i=new Ad(e,t,n);break;case Bs:case Gs:case Fs:i=new yd(e,t,n);break;case Hs:i=new Cd(e,t,n);break;case Zs:i=new _d(e,t,n);break;case js:i=new Md(e,t,n);break;case Ys:i=new xd(e,t,n);break;case Ws:case Vs:case zs:case Ks:i=new Od(e,t,n);break;case Us:i=new Rd(e,t,n);break;default:i=new yd(e,t,n)}return i},e}(),wp=Rp,xp=Ha.Z.GAMEPLAY_32,kp=xp.KEY,_p=xp.FRAME,Lp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.scene=t,n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n.setSizeAndPositionPiece(),t.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeAndPositionPiece=function(){this.scene.world.isLandscape()?this.setSize(101,300):this.setSize(375,140);var e=this.scene.gameZone,t=e.width,n=(e.height/2-176-27+100)/-2;console.log("pieceY",n),this.positionPiece=[{x:-t/3,y:n},{x:0,y:n},{x:t/3,y:n}]},n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps()},n.registerEvents=function(){},n.handleResize=function(){this.initCellSize(),this.resetAllPieces();for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.resetAllPieces=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e];t.resetPiece(),t.updateSize(),t.listenEvents()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([Bs,Gs,Fs].some((function(t){return t===e})))return[];var t=[];switch(e){case xs:case ks:case _s:t=[ps,us,ds,gs];break;case Ls:case Ms:case Ds:case Ns:t=[ls,hs];break;case Hs:t=[ps,us,ds,gs];break;case Us:t=[fs,ms,vs,Es];break;case Zs:case js:t=[ps,us,ds,gs];break;case Ys:t=[];break;case Ws:case Vs:case zs:case Ks:t=[us,ds]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<Xs.length;n++){var i=this.getDirectionsByType(Xs[n]);if(i.length<=0)t.push({type:Xs[n]});else{for(var a=0;a<i.length;a++)t.push({type:Xs[n],direction:i[a]});if(xs===Xs[n])for(var r=0;r<i.length;r++)t.push({type:Xs[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:kp,frame:_p.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=wp.create(this.scene,this,c);l.hide(),this.add(l),this.allPieces.push(l)}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e];this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(wu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return 1;var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[Ds,Ns].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c];if(e.allPieces[l]&&e.allPieces[l].direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r];a.push({position:r,texture:kp,frame:_p.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=this.scene.layoutManager.objects.main,n=[],i=0;i<Js.length;i++)n.push((0,s.Z)({},Js[i]));if(e){var a=t.board.dataBoard,r=5;if(this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<n.length;o++)n[o].type===Ns&&(n[o].rate=8);else if(r=4,this.canCaptureLines=t.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<n.length;c++)n[c].type===Ds&&(n[c].rate=8)}for(var l=[],h=0;h<n.length;h++)for(var u=n[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position],n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition(),t.setIndex(e),t.drawPiece(),this.allPieces[this.piecesActive[e].position]=t}},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=re()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].reset();this.randomPieces(),this.setActivePieces(),this.drawPieces()},n.calculatePieceInfo=function(){for(var e=0,t=0,n=this.cellSize,i=0;i<this.piecesActive.length;i++){var a=this.allPieces[this.piecesActive[i].position].data;e+=a[0].length,a.length>t&&(t=a.length)}return{cellLength:n/2,cols:e}},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=nd(e,this.allPieces[n]);this.allPieces[n].setCanMove(i)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=Da()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==Zu()(s=i[a]).call(s)){var o=ld(Zu()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.frame;if(!n.used){var o=rd(i);a&&""!==a&&(o+="-"+rd(a)),s&&(o+="-r"),e+=" "+o+","+rd(r)}}return e},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].hide()}this.piecesActive=[]},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){for(var t=[],n=0;n<e.length;n++)for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=0;c<this.allPieces.length;c++){var l=this.allPieces[c];if(a===l.type&&s===l.direction&&r===l.isReverse){t.push({position:c,texture:kp,frame:o,type:l.type,direction:l.direction,isReverse:l.isReverse});break}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].wrapPiece.setVisible(!1);this.showNewPieces()},t}(Phaser.GameObjects.Container),Mp=Ha.Z.GAMEPLAY,Dp=Mp.KEY,Np=Mp.FRAME,Bp=function(e){function t(t){var n;return(n=e.call(this,t,Dp,Np.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Dp,frame:Np.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(Wa.Z),Gp=Bp,Fp=Ha.Z.DEFAULT,Up=Fp.KEY,Hp=Fp.FRAME,Zp=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,76),t.add.existing((0,La.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:Up,frame:Hp.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new Lp(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new Wa.Z(this.scene,Up,Hp.BUTTON_DARK_BLUE,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUIPortrait=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.pieces.setPosition(0,30),this.panelNextBlock.setVisible(!1),this.textNextBlock.setVisible(!1),this.buttonSetting.setVisible(!1),null==(e=this.debugButton)||e.setVisible(!0),null==(t=this.textExist)||t.setVisible(!0),this.pieces.handleResize()},n.updateUILandscape=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.initPosition(),this.scene.tutorialManager.isRunning()||this.buttonSetting.setVisible(!0),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5),this.pieces.handleResize()},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:Up,frame:Hp.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:Up,frame:Hp.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new Gp(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(Ua.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),Yp=Zp,Wp=Ha.Z.GAMEPLAY_32.FRAME,Vp=[""+Wp.BLOCK_GRADIENT_PREFIX+10,""+Wp.BLOCK_GRADIENT_PREFIX+9],zp=[],Kp=1;Kp<=10;Kp++)zp.push(""+Wp.BLOCK_GRADIENT_PREFIX+Kp);var jp=function(){var e=GameCore.Utils.Device,t=window.navigator.vibrate;return e.isAndroid()&&"function"===typeof t||e.isMobileWeb()&&"function"===typeof t||e.isIOS()},Xp=(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Math.round(t/80),i=0,a=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.performHapticFeedbackAsync();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("can not haptic");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();case 3:if(!(i<n)){e.next=11;break}return s=a(),o=(0,To.qZ)(80),i+=1,e.next=9,l().all([s,o]);case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e)})))}(),function(e){window.navigator.vibrate(0),window.navigator.vibrate(e)}),Jp=function(e){try{if(!jp())return!1;var t=GameCore.Utils.Device;(t.isAndroid()||t.isMobileWeb())&&Xp(e)}catch(n){}},qp=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){var e=this.scene.layoutManager.objects.main;if(this.captureCells&&e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setFrame(Ha.Z.GAMEPLAY_32.FRAME.GEM),c.imageBreak.setVisible(!0),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Mu(o.v0,o.alpha0,u),p=Du(o.v0,o.alpha0,u);c.setVisible(!0),c.x=d,c.y=-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),Qp=qp,$p=Ha.Z.GAMEPLAY,eg=$p.KEY,tg=$p.FRAME,ng=Ha.Z.GAMEPLAY_32,ig=ng.KEY,ag=ng.FRAME,sg=Ha.Z.DEFAULT.FRAME,rg=GameCore.Configs.Board,og=rg.cols,cg=rg.rows,lg=GameCore.Configs.Gameplay.VibrateValue,hg=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,v={x:-1,y:-1},E=0;E<a.length;E++)if(0!==E){if(a[E].x===v.x+1&&a[E].y===v.y?(v.x=a[E].x,v.y=a[E].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else v.x=a[E].x,v.y=a[E].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new Qp(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:eg,frame:tg.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*(og+1))/og},n.initDataBoard=function(){for(var e=this.boardFrame.x-this.boardFrame.displayWidth/2+this.cellSize/2+this.borderLeftSize,t=this.boardFrame.y-this.boardFrame.displayHeight/2+this.cellSize/2+this.borderTopSize,n=0;n<cg;n++){this.dataBoard[n]=[];for(var i=0;i<og;i++){var a=e+i*this.cellSize+this.cellPadding*i,s=t+n*this.cellSize+this.cellPadding*n,r={x:a,y:s,width:this.cellSize,height:this.cellSize,texture:ig,frame:ag.GEM_TRANSPARENT,depth:Ua.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},o=new Uu(this.scene,r);this.add(o),this.dataBoard[n][i]={x:a,y:s,width:this.cellSize,height:this.cellSize,frame:ag.GEM_TRANSPARENT,value:0,cell:o}}}},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<cg;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<og;a++)i()},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var r=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=ag.GEM,r.setFrameImageCell(ag.GEM),r.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw id=0,new Error("Invalid Capture");for(var n=300,i=0,a=Qu(this.dataBoard),s=$u(this.dataBoard),r=Ku(),o=function(){var o=e[c],l=o.x,h=o.y,u=t.dataBoard[h][l].cell,d=0,p=0,g=0;if(a.length>0&&s.length>0){var f=0,m=0;i=n/og,-1!==gt()(a).call(a,h)&&-1===gt()(s).call(s,l)&&(f=i*l,m=0,p=gt()(a).call(a,h)),-1===gt()(a).call(a,h)&&-1!==gt()(s).call(s,l)&&(f=0,m=i*h,p=gt()(s).call(s,l)),-1!==gt()(a).call(a,h)&&-1!==gt()(s).call(s,l)&&(f=i*l,m=i*h,p=Math.max(gt()(s).call(s,l),gt()(a).call(a,h),0)),-1===gt()(a).call(a,h)&&-1===gt()(s).call(s,l)&&(f=i*l,m=i*h),d=Math.max(f,m,0)}else if(s.length>0)d=(i=n/og)*h,p=gt()(s).call(s,l),g=h;else if(a.length>0)d=(i=n/cg)*l,p=gt()(a).call(a,h),g=l;else{i=100;var v=e[0].x;d=i*(l-v),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){var e="";r>2&&(s.length>=3||a.length>=3)?(e=zp[g]||zp[0],u.imageBreak.setFrame(e)):(e=Vp[p]||Vp[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown(),0==t.dataBoard[h][l].value&&u.setFrameImageCell(ag.GEM_TRANSPARENT)})),t.dataBoard[h][l].frame=ag.GEM_TRANSPARENT,t.dataBoard[h][l].value=0},c=0;c<e.length;c++)o()}catch(l){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=re()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){if(t&&0!==t.length){var n=ad(),i=Ku();i>1&&(n=18*zu+10*(sd()-1));for(var a=[],s=0;s<e.length;s++){var r=e[s];this.checkPositionCellOnCaptureCell(r,t)&&a.push(this.dataBoard[r.y][r.x])}if(0!==a.length){for(var o=a[0].cell.getWorldPosition(),c=o.x,l=0,h=o.y,u=0,d=0;d<a.length;d++){var p=a[d].cell.getWorldPosition();p.x<c&&(c=p.x),p.x>l&&(l=p.x),p.y<h&&(h=p.y),p.y>u&&(u=p.y)}var g=c+(l-c)/2,f=h+(u-h)/2;this.scene.layoutManager.objects.main.praise.handlePraise(g,f,n,i),this.handleStreakBreak(g,f),this.playEatSound(i)}}},n.handleStreakBreak=function(e,t){if(!this.scene.tutorialManager.isRunning()){var n=Ku(),i=sd()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&Jp(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(sg.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}}},n.getVibrateByLevel=function(e){return lg[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(Ya.Z.EAT_BLOCK,{volume:1}),e){case 1:default:break;case 2:this.scene.audio.playSound(Ya.Z.GOOD);break;case 3:this.scene.audio.playSound(Ya.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(Ya.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=ag.GEM_TRANSPARENT,a.setFrameImageCell(ag.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){console.log(s)}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=ju(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,v=f.y,E=this.dataBoard[v][m].cell;E.isHighlight()||E.showImageHighlight()}t(Qu(a),$u(a),qu(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=Qu(e),a=$u(e),s=qu(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==gt()(i).call(i,r)||-1!==gt()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return 1;c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(ag.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){console.log(r)}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(ag.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){console.log(s)}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=ag.GEM,this.dataBoard[s][a].value=1;var r=this.dataBoard[s][a].cell;r.setFrameImageCell(ag.GEM),r.setAlphaImageCell(1)}}var o=ju(this.dataBoard,e);this.handleCapturePiece(o),this.checkIsGameOver()&&this.scene.setIsGameOver(!0),this.handlePraise(e,o),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(c){console.log(c)}},n.handleResetFrameBoard=function(){for(var e=0;e<cg;e++)for(var t=0;t<og;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setFrameImageCell(a)}},n.checkIsGameOver=function(){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r];t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}return!!ed(this.dataBoard,t)},n.handleGameOver=function(){this.checkIsGameOver()&&(this.scene.disableInput(),this.runAnimationGameOver())},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(Ya.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<og;a++)i(a)},i=0;i<cg;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){console.log(a)}},n.rescue=function(){for(var e=0;e<this.dataBoard.length;e++)for(var t=0;t<this.dataBoard[e].length;t++)if(this.dataBoard[e]){var n=this.dataBoard[e][t];n&&1===n.value&&(this.dataBoard[e][t].cell.setFrameImageCell(ag.GEM),this.dataBoard[e][t].cell.resetImageGameOver())}this.handleUseBomb()},n.hasPieceL5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return re()(e).call(e,(function(e){return e.type===Ns})).length>0},n.hasPieceCross5=function(){var e=this.scene.layoutManager.objects.footer.pieces.piecesActive;return re()(e).call(e,(function(e){return e.type===Ks})).length>0},n.handleUseBomb=function(){try{var e=this.hasPieceL5(),t=this.hasPieceCross5(),n=Math.floor(Math.random()*rs.length),i=rs[n];e&&(i=os[n]),t&&(i=cs[n]);for(var a=[],s=i.minRow;s<i.minRow+i.rows;s++)for(var r=i.minCol;r<i.minCol+i.cols;r++)this.dataBoard[s][r].frame!==ag.GEM_TRANSPARENT&&a.push({x:r,y:s});for(var o=0;o<a.length;o++){var c=a[o],l=c.x,h=c.y,u=this.dataBoard[h][l];u.frame=ag.GEM_TRANSPARENT,u.value=0,u.cell.setFrameImageCell(ag.GEM_TRANSPARENT)}this.woodenEffect.handleShowEffect(a),this.scene.layoutManager.objects.footer.pieces.setActivePieces(),this.scene.updateMatchData()}catch(d){console.log(d)}},n.getBoardByFen=function(e){try{var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=cd(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t}catch(c){return this.clearBoard(),this.dataBoard}},n.getFenByBoard=function(){for(var e="",t=0;t<cg;t++){for(var n=0,i="",a=0;a<og;a++){if(0===this.dataBoard[t][a].value&&n++,1===this.dataBoard[t][a].value)n>0&&(i+=n>=cg?"x":""+n,n=0),i+=""+rd(this.dataBoard[t][a].frame);a===this.dataBoard[t].length-1&&n>0&&(i+=n>=cg?"x":""+n)}e+=t===this.dataBoard.length-1?""+i:i+"/"}return e},n.startGame=function(e){if(e)for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var i=e[t][n],a=i.value,s=i.frame,r=this.dataBoard[t][n];1===a&&(r.value=1,r.frame=s,r.cell.setFrameImageCell(ag.GEM))}},n.clearBoard=function(){for(var e=0;e<cg;e++)for(var t=0;t<og;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=ag.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(ag.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=re()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},t}(Phaser.GameObjects.Container),ug=GameCore.Configs.Gameplay.VibrateValue,dg=Ha.Z.EFFECTS,pg=dg.KEY,gg=dg.FRAME,fg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(pg),this.particle.setDepth(Ua.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:gg.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(Ua.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e,t=this,n=this.scene.storage.getState(),i=Sc(n),a=this.scene.layoutManager.objects.header.mainScoreBlock.scoreText.getWorldPosition(),s=a.x,r=a.y;if(gt()(e=[Sa,Ea,Aa]).call(e,i)>=0){var o=this.scene.layoutManager.objects.header.myScoreBlock.textScore.getWorldPosition(),c=o.x,l=o.y;s=c,r=l}this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){t.tweenHideScoreText=t.scene.tweens.add({targets:t.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:s,y:r,delay:600,duration:210,onComplete:function(){t.scoreText.setVisible(!1),t.scoreText.setAlpha(0),t.scoreText.setScale(0),t.scene.handleAddScoreAnim(t.score||0)}})}})},n.playAnimShowScoreText=function(){var e=this.scene.layoutManager.objects.header;if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){var t;this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var n=this.scene.storage.getState(),i=Sc(n),a=0;i===va?(a=e.mainScoreBlock.score,e.mainScoreBlock.setScore(a+(this.score||0)),e.mainScoreBlock.setScoreText(a+(this.score||0))):gt()(t=[Sa,Ea,Aa]).call(t,i)>=0&&(a=e.myScoreBlock.score,e.myScoreBlock.setScore(a+(this.score||0)),e.myScoreBlock.setScoreText(a+(this.score||0)))}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:pg}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(Ua.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(Ua.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i);var s=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&Jp(s),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return ug[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){switch(a){case gg.TEXT_COOL:case gg.TEXT_GOOD:case gg.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var s=this.praiseFrame,r=s.width/i,o=s.height/i;this.praiseFrame.setWorldSize(r,o);var c=this.praiseFrame.displayWidth,l=e,h=this.scene.gameZone.width;l=e-c/2<0?c/2+5:e+c/2>h?h-c/2-5:e,this.praiseFrame.setPosition(l,t-40),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return ws[e-1]||ws[0]||null},n.getMainFrameByLevel=function(e){if(e>6)return Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT;var t=Rs[e-1]||Rs[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),mg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new hg(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new fg(this.scene)},t}(Phaser.GameObjects.Container),vg=mg,Eg=function(){function e(e){this.scene=void 0,this.group=void 0,this.scene=e,this.createGroup()}var t=e.prototype;return t.getAll=function(){return this.group.getChildren()},t.createGroup=function(){this.group=this.scene.add.group()},e}(),Sg=Eg,Ag=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new Pp(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new vg(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new Yp(this.scene),this.group.add(this.footer)},t}(Sg),Tg=Ag,yg=function(){function e(e){this.scene=void 0,this.objects=void 0,this.allUI=void 0,this.groups=void 0,this.scene=e,this.objects=null,this.createGroups()}var t=e.prototype;return t.setUIObjects=function(e){this.objects=e,this.allUI.addMultiple(this.objects.getAll())},t.createGroups=function(){this.groups={},this.allUI=this.scene.add.group(),this.groups.allUI=this.allUI},t.killAllUI=function(){this.allUI.killGroup()},t.reviveAllUI=function(){this.allUI.reviveGroup()},e}(),Ig=yg,Cg=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.header.setSize(e.width,0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,-27),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e),this.objects.header.updateUIPortrait(),this.objects.footer.updateUIPortrait()}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ig),bg=Cg,Og=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.Center(this.objects.header,e,0,-195),Phaser.Display.Align.In.Center(this.objects.main,e,0,20),Phaser.Display.Align.In.Center(this.objects.footer,e,300,0),this.objects.header.updateUILandscape(),this.objects.footer.updateUILandscape()}},t}(bg),Pg=Og,Rg=n(464),wg=Ka.STATUS,xg=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.layout=void 0,n.objects=void 0,n.changeLayout=function(){n.scene.world.getResizeEventData().isLayoutChanged?(n.createLayouts(),n.layout.setUIObjects(n.objects),n.layout.alignUI()):n.layout.alignUI()},n.scene=t,n.createObjects(),n.createLayouts(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.events.on(Rg.Z.LAYOUT_UPDATE,this.changeLayout)},n.init=function(){this.initUILogic(),this.layout.alignUI(),this.setState(wg.READY)},n.start=function(){this.isRunning()||(this.updateUIState(),this.setState(wg.RUNNING))},n.stop=function(){this.isRunning()&&this.setState(wg.STOPPED)},t}(Ja),kg=xg,_g=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Tg(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Pg(this.scene):this.layout=new bg(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init()},n.updateUIState=function(){},t}(kg),Lg=_g,Mg=n(628),Dg=Ha.Z.DEFAULT,Ng=Dg.KEY,Bg=Dg.FRAME,Gg=function(e){function t(t){var n;return(n=e.call(this,t,Ng,Bg.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Ng,frame:Bg.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(Wa.Z),Fg=Gg,Ug=Ha.Z.DEFAULT,Hg=Ug.KEY,Zg=Ug.FRAME,Yg=function(e){function t(t){var n;return(n=e.call(this,t,Hg,Zg.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Share"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:Hg,frame:Zg.ICON_SHARE});e.setWorldSize(24,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(Wa.Z),Wg=Yg,Vg=Ha.Z.DEFAULT,zg=Vg.KEY,Kg=Vg.FRAME,jg=function(e){function t(t){var n;return(n=e.call(this,t,zg,Kg.BUTTON_DARK_BLUE_BIG)||this).button.setWorldSize(120,55),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:zg,frame:Kg.ICON_SWORD_BLUE});e.setWorldSize(22,20),this.add(e),Phaser.Display.Align.In.Center(e,this,-40)},n.createText=function(){var e=this.scene.make.image({key:zg,frame:Kg.TEXT_PLAY_WITH_BLUE});e.setWorldSize(159.5,15.5),this.add(e),Phaser.Display.Align.In.Center(e,this,12)},t}(Wa.Z),Xg=jg,Jg=Ha.Z.DEFAULT,qg=Jg.KEY,Qg=Jg.FRAME,$g=function(e){function t(t){var n;return(n=e.call(this,t,qg,Qg.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(120,55),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:qg,frame:Qg.ICON_I_PLAY}),this.icon.setWorldSize(22,27),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-35,-2)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:qg,frame:Qg.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,15,-2)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),ef=$g,tf=Ha.Z.DEFAULT,nf=tf.KEY,af=tf.FRAME,sf=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.avatarMe=void 0,n.textScoreMe=void 0,n.avatarOpponent=void 0,n.textScoreOpponent=void 0,n.title=void 0,n.titleFrame=void 0,n.contents=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.myInfoBlock=void 0,n.tweenMyInfoBlock=void 0,n.opponentInfoBlock=void 0,n.tweenOpponentInfoBlock=void 0,n.icon=void 0,n.tweenIcon=void 0,n.iconCrown=void 0,n.tweenIconCrown=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.shareButton=void 0,n.buttonClose=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Fh());case 2:cl.emit(po.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Mh());case 2:cl.emit(po.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickShare=function(){var e=n.scene.storage.getState();Sc(e)!==Aa?n.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p,g,f,m;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.game,s=a.player,r=a.analytics,o=a.facebook,c=a.globalScene,l=a.lang,e.prev=1,c.screen.open(Za.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),h=n(),e.next=6,vl(h);case 6:return d=e.sent,console.log("imageShare === ",d),ul(d),p=s.getPlayer(),g=p.playerId,f=p.name,m=p.photo,e.next=12,o.shareAsync({text:l.Text.SHARE_GAME_RESULTS,intent:"SHARE",image:d||"",data:{playerId:g,playerName:f,playerPhoto:m,type:ua}});case 12:r.event(Pt._.SHARE,{share_content_type:"MatchResult",success:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),r.event(Pt._.SHARE,{share_content_type:"MatchResult",success:!1}),(0,i.tO)(e.t0);case 19:return e.prev=19,c.screen.close(Za.o4.NOTIFY_SCREEN),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()):n.scene.storage.dispatch(Al())},n.handleShareBestScore=function(){n.scene.storage.dispatch(dl())},n.createPopup(),n.createPopupContent(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createContentBackground(),this.createMyInfoBlock(),this.createOpponentInfoBlock(),this.createIcon(),this.createIconCrown(),this.createButtons(),this.popup.add([this.title]),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.shareButton])},n.updateButtons=function(){try{this.checkExistConnectedPlayerId()?(this.playWithFriendsButton.setVisible(!0),this.playButton.setVisible(!1)):(this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0))}catch(e){console.log(e)}},n.createTitle=function(){this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:nf,frame:af.TEXT_WAITING_OPPONENT}),this.titleFrame.setWorldSize(238,25),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,10),this.buttonClose=new Wa.Z(this.scene,nf,af.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([this.titleFrame,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createContentBackground=function(){var e=this.scene.make.image({key:nf,frame:af.POPUP_CONTENT_BACKGROUND});e.setWorldSize(263,140),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-30)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new Fg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.popup,-100,80)},n.clickHome=function(){this.scene.scene.switch(wa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Xg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.popup,0,80)},n.createButtonPlay=function(){this.playButton=new ef(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.popup,0,80)},n.createButtonShare=function(){this.shareButton=new Wg(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.popup,100,80)},n.createMyInfoBlock=function(){this.myInfoBlock=this.scene.add.container(),this.avatarMe=new pc(this.scene,{key:nf,frame:af.AVATAR_BORDER_BIG,background:af.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.myInfoBlock.add(this.avatarMe),Phaser.Display.Align.In.Center(this.avatarMe,this.myInfoBlock,0,0);var e=this.scene.make.image({key:nf,frame:af.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.myInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarMe,0,10),this.textScoreMe=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.myInfoBlock.add(this.textScoreMe),Phaser.Display.Align.In.Center(this.textScoreMe,e),this.popup.add(this.myInfoBlock),Phaser.Display.Align.In.Center(this.myInfoBlock,this.popup,-72,-38),this.myInfoBlock.setAlpha(0),this.tweenMyInfoBlock=this.scene.tweens.add({targets:this.myInfoBlock,paused:!0,duration:200,delay:400,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createOpponentInfoBlock=function(){this.opponentInfoBlock=this.scene.add.container(),this.avatarOpponent=new pc(this.scene,{key:nf,frame:af.AVATAR_BORDER_BIG,background:af.AVATAR_BACKGROUND,width:87,height:87,borderWidth:8}),this.opponentInfoBlock.add(this.avatarOpponent),Phaser.Display.Align.In.Center(this.avatarOpponent,this.opponentInfoBlock,0,0);var e=this.scene.make.image({key:nf,frame:af.SCORE_PANEL_DARK});e.setWorldSize(95,26),this.opponentInfoBlock.add(e),Phaser.Display.Align.In.BottomCenter(e,this.avatarOpponent,0,10),this.textScoreOpponent=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(42),text:"0",origin:{x:.5,y:.5}}),this.opponentInfoBlock.add(this.textScoreOpponent),Phaser.Display.Align.In.Center(this.textScoreOpponent,e),this.popup.add(this.opponentInfoBlock),Phaser.Display.Align.In.Center(this.opponentInfoBlock,this.popup,72,-38),this.opponentInfoBlock.setAlpha(0),this.tweenOpponentInfoBlock=this.scene.tweens.add({targets:this.opponentInfoBlock,paused:!0,duration:200,delay:500,scale:{from:1.5,to:1},alpha:{from:0,to:1},ease:Phaser.Math.Easing.Bounce.Out})},n.createIcon=function(){this.icon=this.scene.make.image({key:nf,frame:af.TEXT_VS}),this.icon.setWorldSize(86,16.5);var e=this.icon.scale;this.popup.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this.popup,0,-30),this.icon.setAlpha(0),this.tweenIcon=this.scene.tweens.add({targets:this.icon,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.createIconCrown=function(){this.iconCrown=this.scene.make.image({key:nf,frame:af.ICON_CROWN_BIG}),this.iconCrown.setWorldSize(50,46),this.iconCrown.setVisible(!1);var e=this.iconCrown.scale;this.popup.add(this.iconCrown),this.iconCrown.setScale(0),this.tweenIconCrown=this.scene.tweens.add({targets:this.iconCrown,paused:!0,duration:200,delay:300,scale:{from:1.5,to:e},alpha:{from:0,to:1},ease:"Power1"})},n.runCloseAnimation=function(){console.log("CLose popup result"),this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.runOpenAnimation=function(){this.scene.audio.playSound(Ya.Z.POPUP_SHOW),console.log("WWWWWWWW ",this.popup.scale,this.popup.visible),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.updateInfo=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.storage.getState(),n=il(t),i=this.scene.player.getPlayer().playerId,a=Kc(t).playerId,s=Xc(t,{playerId:i}),r=Jc(t,{opponentId:a}),o=(n[i]||{}).score,c=void 0===o?0:o,l=(n[a]||{}).score,h=void 0===l?0:l;return this.textScoreMe.setText(String(c)),this.textScoreOpponent.setText(String(h)),s&&r?c===h?(this.titleFrame.setFrame(af.TEXT_DRAW),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(Ya.Z.DRAW)):c>h?(this.titleFrame.setFrame(af.TEXT_WIN),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarMe,-110,-80),void this.scene.audio.playSound(Ya.Z.WIN)):c<h?(this.titleFrame.setFrame(af.TEXT_LOSE),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),this.iconCrown.setVisible(!0),Phaser.Display.Align.In.Center(this.iconCrown,this.avatarOpponent,35,-80),void this.scene.audio.playSound(Ya.Z.LOSE)):void 0:(this.titleFrame.setFrame(af.TEXT_WAITING_OPPONENT),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.width/e),void this.scene.audio.playSound(Ya.Z.WAIT_OPPONENT))},n.loadAvatars=function(){var e=this.scene.storage.getState(),t=this.scene.player.getPlayer(),n=t.photo,i=t.playerId,a=Kc(e),s=a.playerId,r=a.photo;this.avatarMe.loadPhoto(i,n,5),this.avatarOpponent.loadPhoto(s,r,5)},n.runAnim=function(){this.icon.setVisible(!0),this.myInfoBlock.setVisible(!0),this.opponentInfoBlock.setVisible(!0),this.iconCrown.setScale(0),this.tweenIconCrown.play(),this.tweenIcon.play(),this.tweenMyInfoBlock.play(),this.tweenOpponentInfoBlock.play()},n.checkExistConnectedPlayerId=function(){var e=this,t=this.scene.player.getConnectedPlayerIds(20,0),n=re()(t).call(t,(function(t){return t!==e.scene.player.getPlayerId()}));return console.log("players === ",n,Ph),!(n.length<=Ph.length)},t}(Phaser.GameObjects.Container),rf=sf,of={targets:[],yoyo:!0,duration:120,ease:Phaser.Math.Easing.Circular.Out,props:{scale:{from:1,to:1.3}}},cf=function(e){function t(t){return e.call(this,of,t)||this}return(0,o.Z)(t,e),t}(ac.Z),lf=Ha.Z.DEFAULT,hf=lf.KEY,uf=lf.FRAME,df=function(e){function t(t){var n;return(n=e.call(this,t,hf,uf.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("JourneyIcon"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:hf,frame:uf.ICON_BROWN_JOURNEY});e.setWorldSize(28,26),this.add(e),Phaser.Display.Align.In.Center(e,this)},t}(Wa.Z),pf=df,gf=Ha.Z.DEFAULT,ff=gf.KEY,mf=gf.FRAME,vf=function(e){function t(t){var n;return(n=e.call(this,t)||this).popup=void 0,n.title=void 0,n.contents=void 0,n.scoreText=void 0,n.bestScoreText=void 0,n.tweenScoreText=void 0,n.popupShowUpAnimation=void 0,n.contentShowUpAnimation=void 0,n.popupFadeOutAnimation=void 0,n.scoreBlock=void 0,n.bestScoreBlock=void 0,n.playWithFriendsButton=void 0,n.playButton=void 0,n.homeButton=void 0,n.journeyButton=void 0,n.bestScore=void 0,n.currentScore=void 0,n.payload=void 0,n.buttonClose=void 0,n.counterAnimation=void 0,n.scoreAnimation=void 0,n.clickPlayWithFriends=function(){n.runCloseAnimation(),n.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.scene.storage.dispatch(Fh());case 2:cl.emit(po.REPLAY);case 3:case"end":return e.stop()}}),e)}))))},n.clickPlay=function(){n.runCloseAnimation(),n.scene.storage.dispatch(Mh()),cl.emit(po.REPLAY)},n.clickJourney1=function(){n.scene.scene.switch(wa.Co.LEVEL_SCENE)},n.initScore(),n.scene=t,n.createPopup(),n.createPopupContent(),n.createScoreAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,290,{forceHeightTop:54}),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.playButton,this.journeyButton])},n.updateButtons=function(){try{this.playWithFriendsButton.setVisible(!1),this.playButton.setVisible(!0)}catch(e){console.log(e)}},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:ff,frame:mf.TEXT_YOUR_SCORE});t.setWorldSize(t.width/e,t.height/e),Phaser.Display.Align.In.Center(t,this.title,0,10),this.buttonClose=new Wa.Z(this.scene,ff,mf.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),Phaser.Display.Align.In.RightCenter(this.buttonClose,this.title,155,-12),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:ff,frame:mf.SCORE_PANEL});e.setWorldSize(263,70),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(85),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.scoreBlock,0,4),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-78)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:ff,frame:mf.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(44),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonPlay(),this.createButtonJourney()},n.createButtonHome=function(){this.homeButton=new Fg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(wa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Xg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.playWithFriendsButton.setVisible(!1),this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonPlay=function(){this.playButton=new ef(this.scene),this.playButton.onClick=this.clickPlay,this.playButton.setVisible(!1),this.popup.add(this.playButton),Phaser.Display.Align.In.Center(this.playButton,this.bestScoreBlock,0,80)},n.createButtonJourney=function(){this.journeyButton=new pf(this.scene),this.journeyButton.onClick=this.clickJourney1,this.popup.add(this.journeyButton),Phaser.Display.Align.In.Center(this.journeyButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){console.log("Close popup your score"),this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ya.Z.POPUP_SHOW),console.log("WWWWWWWW ",this.popup.scale,this.popup.visible),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){this.popupShowUpAnimation||(this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:1}}})),this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=al(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=il(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(0),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter()},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new cf({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(Ya.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(Phaser.GameObjects.Container),Ef=vf,Sf=(GameCore.Configs.LeadersBoard,Ha.Z.DEFAULT),Af=(Sf.KEY,Sf.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).bestScore=void 0,s.currentScore=void 0,s.confettiLeftEffect=void 0,s.confettiRightEffect=void 0,s.queueScreens=[],s.popupYourScore=void 0,s.popupResult=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.open=function(){e.prototype.open.call((0,La.Z)(s)),s.popupYourScore.setVisible(!1),s.popupResult.setVisible(!1),s.runFadeInMaskAnimation(100,300),s.initScore(),s.updateScore(),s.showPopupYourScore(),s.scene.audio.playSound(Ya.Z.GAME_OVER_SCENE)},s.onPopupClose=function(){var e,t;null==(e=s.popupYourScore)||e.runCloseAnimation(),null==(t=s.popupResult)||t.runCloseAnimation(),s.runFadeOutMaskAnimation(0,200),s.scene.time.delayedCall(300,(function(){s.close(),s.scene.screen.open(Za.o4.MINI_JOURNEY_SCREEN,{onClose:function(){s.scene.storage.dispatch(Mh()),cl.emit(po.START_GAME)}})}))},s.createConfettiSmallAnimation(),s.createPopups(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.showQueueScreens=function(){var e=this.queueScreens.pop();if(e&&e===Za.o4.RESULT_SCREEN)this.showPopupResult()},n.showPopupBestScore=function(){},n.showPopupYourScore=function(){this.popupYourScore.setVisible(!0),this.popupYourScore.runOpenAnimation(),this.popupYourScore.updateButtons(),this.popupYourScore.updateScore()},n.showPopupResult=function(){this.popupResult.setVisible(!0),this.popupResult.runOpenAnimation(),this.popupResult.updateInfo(),this.popupResult.loadAvatars(),this.popupResult.updateButtons(),this.popupResult.runAnim()},n.updateQueueScreens=function(){this.updateQueueResultScreen()},n.updateQueueResultScreen=function(){var e,t=this.scene.storage.getState(),n=Sc(t);if(-1!==gt()(e=[Ea,Sa,Aa]).call(e,n)&&Vc(t)){var i=Kc(t).playerId;n===Sa&&i===ma.playerId||this.queueScreens.push(Za.o4.RESULT_SCREEN)}},n.createPopups=function(){this.createPopupYourScore(),this.createPopupResult()},n.createPopupYourScore=function(){this.popupYourScore=new Ef(this.scene),this.popupYourScore.setVisible(!1),this.popupYourScore.buttonClose.onClick=this.onPopupClose,this.add(this.popupYourScore),Phaser.Display.Align.In.Center(this.popupYourScore,this,0,0)},n.createPopupResult=function(){this.popupResult=new rf(this.scene),this.popupResult.setVisible(!1),this.popupResult.buttonClose.onClick=this.onPopupClose,this.add(this.popupResult),Phaser.Display.Align.In.Center(this.popupResult,this,0,-61)},n.createConfettiSmallAnimation=function(){this.confettiLeftEffect=new Mg.Z(this.scene,{speedX:{min:-20,max:100},rotate:{start:-1080,end:0}}),this.confettiRightEffect=new Mg.Z(this.scene,{speedX:{min:20,max:-100},rotate:{start:0,end:1080}}),this.confettiLeftEffect.setDepth(Ua.Z.ON_TOP),this.confettiRightEffect.setDepth(Ua.Z.ON_TOP)},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=al(e),n=t.score,i=t.bestScore;if(this.bestScore=i,void 0===n||void 0===i){var a=il(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen)),Tf=Af,yf=n(468),If=n.n(yf),Cf=GameCore.Utils.Valid.isDebugger();console.log("WWWWWWWWWWWWWWWW ",Cf);for(var bf=[{key:"level-0",mapJson:"./assets/json/levels/level-0.json"}],Of=1;Of<=200;Of++)bf.push({key:"level-"+Of,mapJson:"./assets/json/levels/level-"+Of+".json"});var Pf=bf,Rf=function(e){return e[Di]},wf=(0,j.P1)([function(e){return Rf(e).lives}],(function(e){return e})),xf=(0,j.P1)([function(e){return Rf(e).lastBonusLifeTime}],(function(e){return e})),kf=(0,j.P1)([function(e){return Rf(e).countDownStartAt}],(function(e){return e})),_f=n(204),Lf=Ha.Z.GAMEPLAY_32.FRAME,Mf="vertical",Df="horizontal",Nf="left",Bf="right",Gf="top",Ff="bottom",Uf="vertical_left",Hf="vertical_right",Zf="horizontal_left",Yf="horizontal_right",Wf="gem/gem",Vf="gem/diamond/diamond-10",zf="gem/diamond/diamond-11",Kf="gem/diamond/diamond-12",jf="gem/diamond/diamond-13",Xf="gem/diamond/diamond-14",Jf="gem/diamond/diamond-15",qf="gem/ruby/ruby-20",Qf="gem/sapphire/sapphire-30",$f=[{level:1,frames:[],width:480,height:189},{level:2,frames:[Ha.Z.EFFECTS.FRAME.TEXT_COOL],width:480,height:189},{level:3,frames:[Ha.Z.EFFECTS.FRAME.TEXT_GOOD],width:579,height:189},{level:4,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:5,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189},{level:6,frames:[Ha.Z.EFFECTS.FRAME.TEXT_EXCELLENT],width:906,height:189}],em=[{level:1,scale:.5,speed:.5,quantity:.5},{level:2,scale:.6,speed:.6,quantity:.6},{level:3,scale:.7,speed:.7,quantity:.7},{level:4,scale:.8,speed:.8,quantity:.8},{level:5,scale:.9,speed:.9,quantity:.9},{level:6,scale:1,speed:1,quantity:1}],tm="l",nm="l_1",im="l_3",am="line_2",sm="line_3",rm="line_4",om="line_5",cm="square_1",lm="square_2",hm="square_3",um="trapezoid",dm="triangle",pm="t_piece",gm="plus_piece",fm="cross_piece_2",mm="cross_piece_3",vm="cross_piece_4",Em="cross_piece_5",Sm="u_piece",Am=[tm,nm,im,am,sm,rm,om,cm,lm,hm,dm,um,pm,gm,fm,mm,vm,Em,Sm],Tm=[{type:tm,rate:3},{type:nm,rate:4},{type:im,rate:2},{type:am,rate:16},{type:sm,rate:12},{type:rm,rate:8},{type:om,rate:4},{type:cm,rate:16},{type:lm,rate:8},{type:dm,rate:4},{type:um,rate:4},{type:pm,rate:2},{type:gm,rate:1},{type:fm,rate:4},{type:mm,rate:2},{type:vm,rate:1},{type:Sm,rate:2}],ym=[[1,0],[1,0],[1,1]],Im=[[0,1],[0,1],[1,1]],Cm=[[1,0],[1,1]],bm=[[1,0,0],[1,0,0],[1,1,1]],Om=[[1,1,1],[1,0,0]],Pm=[[1,1,1],[0,0,1]],Rm=[[1,1],[1,0]],wm=[[1,1,1],[1,0,0],[1,0,0]],xm=[[1,1],[0,1],[0,1]],km=[[1,1],[1,0],[1,0]],_m=[[1,1],[0,1]],Lm=[[1,1,1],[0,0,1],[0,0,1]],Mm=[[0,0,1],[1,1,1]],Dm=[[1,0,0],[1,1,1]],Nm=[[0,1],[1,1]],Bm=[[0,0,1],[0,0,1],[1,1,1]],Gm=[[1],[1]],Fm=[[1,1]],Um=[[1],[1],[1]],Hm=[[1,1,1]],Zm=[[1],[1],[1],[1]],Ym=[[1,1,1,1]],Wm=[[1],[1],[1],[1],[1]],Vm=[[1,1,1,1,1]],zm=[[1]],Km=[[1,1],[1,1]],jm=[[1,1,1],[1,1,1],[1,1,1]],Xm=[[1,0],[1,1],[0,1]],Jm=[[0,1],[1,1],[1,0]],qm=[[1,1,0],[0,1,1]],Qm=[[0,1,1],[1,1,0]],$m=[[0,1],[1,1],[0,1]],ev=[[1,0],[1,1],[1,0]],tv=[[0,1,0],[1,1,1]],nv=[[1,1,1],[0,1,0]],iv=[[0,0,1],[1,1,1],[0,0,1]],av=[[1,0,0],[1,1,1],[1,0,0]],sv=[[0,1,0],[0,1,0],[1,1,1]],rv=[[1,1,1],[0,1,0],[0,1,0]],ov=[[0,1,0],[1,1,1],[0,1,0]],cv=[[1,0],[0,1]],lv=[[0,1],[1,0]],hv=[[1,0,0],[0,1,0],[0,0,1]],uv=[[0,0,1],[0,1,0],[1,0,0]],dv=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],pv=[[0,0,0,1],[0,0,1,0],[0,1,0,0],[1,0,0,0]],gv=[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],fv=[[0,0,0,0,1],[0,0,0,1,0],[0,0,1,0,0],[0,1,0,0,0],[1,0,0,0,0]],mv=[[1,1],[0,1],[1,1]],vv=[[1,1],[1,0],[1,1]],Ev=[[1,0,1],[1,1,1]],Sv=[[1,1,1],[1,0,1]],Av={1:Lf.GEM,10:Lf.GEM_DIAMOND_10,11:Lf.GEM_DIAMOND_11,12:Lf.GEM_DIAMOND_12,13:Lf.GEM_DIAMOND_13,14:Lf.GEM_DIAMOND_14,15:Lf.GEM_DIAMOND_15},Tv={1:{type:cm,direction:null,isReverse:!1,data:zm},I2:{type:am,direction:Mf,isReverse:!1,data:Gm},I3:{type:sm,direction:Mf,isReverse:!1,data:Um},I4:{type:rm,direction:Mf,isReverse:!1,data:Zm},I5:{type:om,direction:Mf,isReverse:!1,data:Wm},II2:{type:am,direction:Df,isReverse:!1,data:Fm},II3:{type:sm,direction:Df,isReverse:!1,data:Hm},II4:{type:rm,direction:Df,isReverse:!1,data:Ym},II5:{type:om,direction:Df,isReverse:!1,data:Vm},J1:{type:tm,direction:Gf,isReverse:!0,data:ym},J2:{type:tm,direction:Nf,isReverse:!0,data:Dm},J3:{type:tm,direction:Ff,isReverse:!0,data:km},J4:{type:tm,direction:Bf,isReverse:!0,data:Pm},L1:{type:tm,direction:Gf,isReverse:!1,data:ym},L2:{type:tm,direction:Bf,isReverse:!1,data:Om},L3:{type:tm,direction:Ff,isReverse:!1,data:xm},L4:{type:tm,direction:Nf,isReverse:!1,data:Mm},O:{type:lm,direction:null,isReverse:!1,data:Km},"polyplet-left-2":{type:fm,direction:Nf,isReverse:!1,data:cv},"polyplet-left-3":{type:mm,direction:Nf,isReverse:!1,data:hv},"polyplet-left-4":{type:vm,direction:Nf,isReverse:!1,data:dv},"polyplet-left-5":{type:Em,direction:Nf,isReverse:!1,data:gv},"polyplet-right-2":{type:fm,direction:Bf,isReverse:!1,data:lv},"polyplet-right-3":{type:mm,direction:Bf,isReverse:!1,data:uv},"polyplet-right-4":{type:vm,direction:Bf,isReverse:!1,data:pv},"polyplet-right-5":{type:Em,direction:Bf,isReverse:!1,data:fv},S1:{type:um,direction:Yf,isReverse:!1,data:Qm},S2:{type:um,direction:Uf,isReverse:!1,data:Xm},T1:{type:dm,direction:Gf,isReverse:!1,data:tv},T2:{type:dm,direction:Bf,isReverse:!1,data:ev},T3:{type:dm,direction:Ff,isReverse:!1,data:nv},T4:{type:dm,direction:Nf,isReverse:!1,data:$m},TT1:{type:pm,direction:Ff,isReverse:!1,data:rv},TT2:{type:pm,direction:Nf,isReverse:!1,data:iv},TT3:{type:pm,direction:Gf,isReverse:!1,data:sv},TT4:{type:pm,direction:Bf,isReverse:!1,data:av},U1:{type:Sm,direction:Gf,isReverse:!1,data:Ev},U2:{type:Sm,direction:Bf,isReverse:!1,data:vv},U3:{type:Sm,direction:Ff,isReverse:!1,data:Sv},U4:{type:Sm,direction:Nf,isReverse:!1,data:mv},V1:{type:nm,direction:Bf,isReverse:!1,data:Rm},V2:{type:nm,direction:Ff,isReverse:!1,data:_m},V3:{type:nm,direction:Gf,isReverse:!1,data:Cm},V4:{type:nm,direction:Nf,isReverse:!1,data:Nm},VV1:{type:im,direction:Bf,isReverse:!1,data:wm},VV2:{type:im,direction:Ff,isReverse:!1,data:Lm},VV3:{type:im,direction:Gf,isReverse:!1,data:bm},VV4:{type:im,direction:Nf,isReverse:!1,data:Bm},X:{type:gm,direction:null,isReverse:!1,data:ov},Z1:{type:um,direction:Zf,isReverse:!1,data:qm},Z2:{type:um,direction:Hf,isReverse:!1,data:Jm}},yv=GameCore.Configs.Board,Iv=(yv.cols,yv.rows,0),Cv=function(){return Iv},bv=function(e,t){Iv=0;for(var n=[],i=e.length,a=e[0].length,s=[],r=[],o=function(t){for(var i=!0,r=0;r<a;r++)0===e[t][r].value&&(i=!1);if(i){s.push(t);for(var o=function(i){n.some((function(e){return e.x===i&&e.y===t}))||n.push({x:i,y:t,frame:e[t][i].frame})},c=0;c<a;c++)o(c)}},c=0;c<i;c++)o(c);for(var l=function(t){for(var a=!0,s=0;s<i;s++)0===e[s][t].value&&(a=!1);if(a){r.push(t);for(var o=function(i){n.some((function(e){return e.x===t&&e.y===i}))||n.push({x:t,y:i,frame:e[i][t].frame})},c=0;c<i;c++)o(c)}},h=0;h<a;h++)l(h);var u=Rv(e,t);if(u&&u.length>0)for(var d=function(){var t=u[p],i=t.x,a=t.y;n.some((function(e){return e.x===i&&e.y===a}))||n.push({x:i,y:a,frame:e[a][i].frame})},p=0;p<u.length;p++)d();return Iv+=s.length,Iv+=r.length,Iv+=Math.floor(u.length/9),n},Ov=function(e,t){if(0===e.length)return!1;var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||n.length<=0)},Pv=function(e,t){for(var n=t.x,i=t.y,a=[],s=n;s<n+3;s++)for(var r=i;r<i+3;r++){if(0===e[r][s].value)return[];a.push({x:s,y:r})}return a},Rv=function(e,t){for(var n=[],i=function(e){for(var t,n=[],i=0;i<e.length;i++){var a=(t=e[i],{x:3*Math.floor(t.x/3),y:3*Math.floor(t.y/3)});Ov(n,a)||n.push(a)}return n}(t),a=0;a<i.length;a++){var s=i[a],r=Pv(e,s);n.push.apply(n,r)}return n},wv=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<t;a++){for(var s=!0,r=0;r<n;r++)0===e[a][r].value&&(s=!1);s&&i.push(a)}return i},xv=function(e){for(var t=e.length,n=e[0].length,i=[],a=0;a<n;a++){for(var s=!0,r=0;r<t;r++)0===e[r][a].value&&(s=!1);s&&i.push(a)}return i},kv=function(e,t){var n=e.length,i=e[0].length;if(0===t.length)return!1;for(var a=0;a<n;a++)for(var s=0;s<i;s++)for(var r=0;r<t.length;r++)if(_v(e,s,a,t[r]))return!1;return!0},_v=function(e,t,n,i){for(var a=!0,s=0;s<i.data.length;s++)for(var r=0;r<i.data[s].length;r++)i.data[s][r].texture&&(e[n+s]&&e[n+s][t+r]&&0===e[n+s][t+r].value||(a=!1));return a},Lv=function(e,t){for(var n=e.length,i=e[0].length,a=0;a<n;a++)for(var s=0;s<i;s++)if(_v(e,s,a,t))return!0;return!1},Mv=0,Dv=function(){return Mv++,18+10*(Nv()-1)},Nv=function(){return Mv+1},Bv=function(e){var t=e;switch(e){case Wf:t="g";break;case Vf:t="d10";break;case zf:t="d11";break;case Kf:t="d12";break;case jf:t="d13";break;case Xf:t="d14";break;case Jf:t="d15";break;case qf:t="r20";break;case Qf:t="s30";break;case tm:t="l";break;case nm:t="l1";break;case im:t="l3";break;case am:t="e2";break;case sm:t="e3";break;case rm:t="e4";break;case om:t="e5";break;case cm:t="s1";break;case lm:t="s2";break;case hm:t="s3";break;case um:t="tz";break;case dm:t="ta";break;case gm:t="pl";break;case pm:t="tp";break;case fm:t="cr2";break;case mm:t="cr3";break;case vm:t="cr4";break;case Em:t="cr5";break;case Sm:t="up";break;case Gf:t="dt";break;case Nf:t="dl";break;case Bf:t="dr";break;case Ff:t="db";break;case Mf:t="v";break;case Df:t="h";break;case Uf:t="vl";break;case Hf:t="vr";break;case Zf:t="hl";break;case Yf:t="hr"}return t},Gv=function(e){var t=e;switch(e){case"g":t=Wf;break;case"d10":t=Vf;break;case"d11":t=zf;break;case"d12":t=Kf;break;case"d13":t=jf;break;case"d14":t=Xf;break;case"d15":t=Jf;break;case"r20":t=qf;break;case"s30":t=Qf;break;case"b":case"c":case"d":case"g":case"o":case"p":case"q":case"r":case"y":t="gem/gem";break;case"l":t=tm;break;case"l1":t=nm;break;case"l3":t=im;break;case"e2":t=am;break;case"e3":t=sm;break;case"e4":t=rm;break;case"e5":t=om;break;case"s1":t=cm;break;case"s2":t=lm;break;case"s3":t=hm;break;case"tz":t=um;break;case"ta":t=dm;break;case"pl":t=gm;break;case"tp":t=pm;break;case"cr2":t=fm;break;case"cr3":t=mm;break;case"cr4":t=vm;break;case"cr5":t=Em;break;case"up":t=Sm;break;case"dt":t=Gf;break;case"dl":t=Nf;break;case"dr":t=Bf;break;case"db":t=Ff;break;case"v":t=Mf;break;case"h":t=Df;break;case"vl":t=Uf;break;case"vr":t=Hf;break;case"hl":t=Zf;break;case"hr":t=Yf}return t},Fv=function(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var a=n[i],s=Gv(a);"x"===a?t.push({value:0,frame:"gem/gem_transparent"}):t.push({value:1,frame:s})}return t},Uv=function(e){var t=e.split("|"),n=t[0].split("-");if(n.length<=0)throw new Error("Invalid piece");return{type:Gv(n[0]),direction:Gv(n[1])||null,isReverse:n[2]&&"r"===n[2]||!1,fenPiece:t[1]}},Hv=Ha.Z.DEFAULT,Zv=Hv.KEY,Yv=Hv.FRAME,Wv=function(e){function t(t){var n;return(n=e.call(this,t,Zv,Yv.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Zv,frame:Yv.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Zv,frame:Yv.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),Vv=Wv,zv=Ha.Z.DEFAULT,Kv=zv.KEY,jv=zv.FRAME,Xv=Ha.Z.GAMEPLAY,Jv=Xv.KEY,qv=Xv.FRAME,Qv=Ha.Z.GAMEPLAY_32,$v=Qv.KEY,eE=Qv.FRAME,tE=GameCore.Configs,nE=tE.Network,iE=tE.Board,aE=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){console.log("ex === ",r)}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=el(e),n=Pf[t];n||(n=Pf[Pf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Ah());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:nE.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Kv,frame:jv.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,Kv,jv.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Kv,frame:jv.TEXT_COLLECT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e);var a=this.scene.make.image({key:Kv,frame:jv.WOOD_PANEL});a.setWorldSize(200,37),this.popup.add([t,a]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(a,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=el(n),a=Pf[i];a||(a=Pf[Pf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,_f.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=If()(e=If()(t=If()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=Av[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:$v,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:Jv,frame:qv.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<iE.rows;e++){this.boardCellData[e]=[];for(var t=0;t<iE.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=eE.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=Qc(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<iE.rows;e++)for(var t=0;t<iE.cols;t++){this.boardCellData[e][t].setFrame(eE.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Zu()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Gv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=el(e),n=Pf[t],i=this.scene.make.tilemap({key:n.key}).layers;if((0,_f.isArray)(i)){var a=i[0].data;if((0,_f.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=Av[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:$v,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new Vv(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();wf(t)<1?this.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=el(t);n>Pf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Dh()))})))},n.getLevelName=function(e){var t;return"journey_"+Fa()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),sE=Ha.Z.DEFAULT,rE=sE.KEY,oE=sE.FRAME,cE=function(e){function t(t){var n;return(n=e.call(this,t,rE,oE.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:rE,frame:oE.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:rE,frame:oE.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),lE=cE,hE=Ha.Z.DEFAULT,uE=hE.KEY,dE=hE.FRAME,pE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this);var t=this.scene.levelManager.getCurrentTargetScore();this.textScore.setText(""+t),this.runOpenAnimation()},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:uE,frame:dE.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:uE,frame:dE.TEXT_NEXT_MILESTONE});t.setWorldSize(t.width/e,t.height/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextTargetScore(),this.createTextScore()},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.popup,0,-60)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-15)},n.createButtons=function(){this.createButtonContinue()},n.createButtonContinue=function(){this.buttonContinue=new lE(this.scene),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,0,55)},n.clickButtonContinue=function(){this.scene.nextLevel(),this.runCloseAnimation()},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.scene.layoutManager.objects.main.board.handleTweenStartMission(),n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),gE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=e.font,n=e.size,i=e.text;this.textMain=this.scene.make.bitmapText({font:t,size:n,origin:{x:.5,y:.5},text:i}).setVisible(!1),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=e.font,i=e.size;if(t){this.chars=t.split("");var a=t.length,s=0;a>15&&(s=a-15);for(var r=0,o=0;o<this.chars.length;o++){var c=this.chars[o],l=this.scene.make.bitmapText({font:n,size:i-s,origin:{x:.5,y:.5},text:c});this.listText.push(l),r+=l.width}for(var h=-r/2,u=0;u<this.chars.length;u++){var d=this.listText[u],p=d.width/2;d.setX(h+p),d.setAlpha(0),h+=d.width}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.resetListText(),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),fE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).textMain=void 0,i.payload=void 0,i.chars=void 0,i.listText=[],i.tweenText=void 0,i.payload=n,i.createTextMain(),i.initListText(),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createTextMain=function(){var e=this.payload,t=(e.font,e.size),n=e.text;this.textMain=this.scene.make.text({style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(t)+"px"},origin:{x:.5,y:.5},text:n}).setAlpha(0),this.textMain.setTint(15651762),this.add(this.textMain)},n.initListText=function(){var e=this.payload,t=e.text,n=(e.font,e.size);if(t){this.chars=t.split("");for(var i=0,a=0;a<this.chars.length;a++){var s=this.chars[a],r=this.scene.make.text({style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(n)+"px"},origin:{x:.5,y:.5},text:s});r.setTint(15651762),this.listText.push(r),i+=r.width}for(var o=-i/2,c=0;c<this.chars.length;c++){var l=this.listText[c];l.setX(o),l.setAlpha(0),o+=l.width+1}this.add(this.listText)}},n.createAnim=function(){if(!this.tweenText){var e=this.payload.text;this.tweenText=this.scene.tweens.add({targets:this.listText,paused:!0,duration:150,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Back.easeOut",delay:this.scene.tweens.stagger(1700/e.length,{})})}},n.runAnim=function(){this.textMain.setScale(0).setAlpha(0),this.tweenText.play()},n.resetListText=function(){for(var e=0;e<this.listText.length;e++)this.listText[e].setScale(0).setAlpha(0)},n.restart=function(){this.resetListText()},n.start=function(e){var t=this;void 0===e&&(e=0),this.createAnim(),e?this.scene.time.addEvent({delay:e,callback:function(){t.runAnim()}}):this.runAnim()},t}(Phaser.GameObjects.Container),mE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,La.Z)(s))},s.scene=t,s.setDepth(Za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new fE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new gE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen),vE=n(127),EE=Ha.Z.DEFAULT,SE=EE.KEY,AE=EE.FRAME,TE=function(e){function t(t){var n;return(n=e.call(this,t,SE,AE.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(160,54),n.setName("Continue"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:SE,frame:AE.ICON_ADS}),this.icon.setWorldSize(30,27),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:SE,frame:this.scene.lang.Texture.CONTINUE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-5-t-n)/2+t/2,s=a+5+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),yE=TE,IE=Ha.Z.DEFAULT.KEY,CE=function(e){function t(t){var n;(n=e.call(this,t,IE,t.lang.Texture.NO_THANKS)||this).scene=void 0,n.scene=t;var i=n.scene.world.getPixelRatio(),a=(0,La.Z)(n),s=a.width,r=a.height;return n.button.setWorldSize(s/i,r/i),n.setName("NoThanks"),n}return(0,o.Z)(t,e),t}(Wa.Z),bE=CE,OE=Ha.Z.DEFAULT,PE=OE.KEY,RE=OE.FRAME,wE=GameCore.Configs,xE=wE.Network,kE=wE.Match,_E=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.isUseRescue=void 0,s.countdownCount=void 0,s.popup=void 0,s.skipText=void 0,s.continueButton=void 0,s.tweenContinueButton=void 0,s.continueButtonAnimation=void 0,s.textRescueTime=void 0,s.tweenTextRescueTime=void 0,s.progressCircle=void 0,s.skipTextTween=void 0,s.countdownTimer=void 0,s.bgProgress=void 0,s.popupShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.adsTimer=void 0,s.open=function(){e.prototype.open.call((0,La.Z)(s)),s.scene.audio.playSound(Ya.Z.RESCUE_TIME),s.runOpenAnimation()},s.close=function(){e.prototype.close.call((0,La.Z)(s)),s.scene.audio.stopSound(Ya.Z.RESCUE_TIME),s.bgProgress.setVisible(!1),s.progressCircle.setVisible(!1),s.continueButton.setVisible(!1),s.skipText.setVisible(!1),s.textRescueTime.setScale(0).setAlpha(0)},s.handleShowRewardedVideoAd=(0,r.Z)(u().mark((function e(){var t,n,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.scene.game,n=t.globalScene,i=t.lang,a=t.audio,s.countdownTimer.remove(),e.prev=2,!s.isUseRescue){e.next=5;break}return e.abrupt("return");case 5:return s.isUseRescue=!0,n.screen.open(Za.o4.NOTIFY_SCREEN,{message:i.Text.LOADING_AD,duration:0,loading:!0}),a.pauseMusic(),a.muteAll(),a.stopSound(Ya.Z.RESCUE_TIME),e.next=12,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(xE.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 12:return e.next=14,s.scene.ads.showRewardedVideoAsync();case 14:a.unmuteAll(),a.playMusic(),s.scene.storage.dispatch(zh()),s.scene.analytics.showRewardedVideoAd(s.scene.getSceneName()),n.screen.close(Za.o4.NOTIFY_SCREEN),cl.emit(po.RESCUE),s.scene.screen.close(s.name),s.scene.audio.playSound(Ya.Z.DAILY_REWARD),n.screen.close(Za.o4.NOTIFY_SCREEN),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(2),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=31;break}if("USER_INPUT"!==e.t0.code){e.next=31;break}return s.showNotifySkipAds(),e.abrupt("return");case 31:s.showNotifyNoAds();case 32:return e.prev=32,null==(r=s.adsTimer)||r.destroy(),a.unmuteAll(),a.playMusic(),s.scene.ads.preloadRewardedVideoAsync().catch((function(e){return console.log(e)})),e.finish(32);case 38:case"end":return e.stop()}}),e,null,[[2,25,32,38]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===Za.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open(Za.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==Za.o4.NOTIFY_SCREEN||(s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame())},s.handleSkip=function(){s.countdownTimer.remove(),s.scene.screen.close(s.name),s.scene.endGame()},s.handleRunCountdown=function(){s.countdownCount-=1,s.countdownCount<=0?s.rescueTimeout():s.setTime(s.countdownCount)},s.scene=t,s.countdownCount=kE.MaxRescueCount,s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s.createPopup(),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runAnim=function(){this.tweenTextRescueTime.play(),this.skipText.setVisible(!0),this.skipTextTween.play(),this.tweenContinueButton.play()},n.updateInfo=function(){var e=this.scene.storage.getState(),t=al(e);this.textRescueTime.setText(String(t.score||0))},n.setTime=function(e){this.textRescueTime.setText(""+e),Phaser.Display.Align.In.Center(this.textRescueTime,this.zone,0,-42)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-5,290,310),this.add(this.popup)},n.createContent=function(){this.createTitle(),this.createTextRescueTime(),this.createBgProgressCircle(),this.createProgressCircle(),this.createContinueButton(),this.createSkipText()},n.createTitle=function(){var e=this.scene.add.container(),t=this.scene.world.getPixelRatio(),n=this.scene.make.image({key:PE,frame:RE.TEXT_SECOND_CHANGE});n.setWorldSize(n.width/t,n.height/t),Phaser.Display.Align.In.Center(n,e,0,12),e.add([n]),this.popup.add(e),Phaser.Display.Align.In.TopCenter(e,this.popup,0,-2)},n.createTextRescueTime=function(){this.textRescueTime=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(140),origin:{x:.5,y:.5}}),this.textRescueTime.setOrigin(.5).setScale(0).setAlpha(0),this.add(this.textRescueTime),Phaser.Display.Align.In.Center(this.textRescueTime,this,0,-40),this.tweenTextRescueTime=this.scene.tweens.add({delay:100,targets:this.textRescueTime,paused:!0,duration:200,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Power1"})},n.createProgressCircle=function(){this.progressCircle=this.scene.add.graphics(),this.add(this.progressCircle)},n.setProgressCircle=function(e){var t=Phaser.Math.DegToRad(-90),n=Phaser.Math.DegToRad(e-360-90);this.progressCircle.clear(),this.progressCircle.beginPath(),this.progressCircle.lineStyle(7,16762368),this.progressCircle.arc(0,-44,54,t,n,!0,.02),this.progressCircle.strokePath(),this.progressCircle.closePath()},n.runCountdown=function(){this.startProgressCircle();var e={delay:1e3,loop:!0,callback:this.handleRunCountdown};this.countdownTimer=this.scene.time.addEvent(e)},n.startProgressCircle=function(){var e=this;this.scene.tweens.addCounter({from:0,to:360,duration:1e3*kE.RescueGamePopupTimeout,onUpdate:function(t){var n=+t.getValue().toFixed(2);e.setProgressCircle(n)},onComplete:function(){e.setProgressCircle(0),e.progressCircle.setAlpha(1)}})},n.createBgProgressCircle=function(){this.bgProgress=this.scene.make.image({key:PE,frame:RE.BG_PROGRESS_CIRCLE}),this.bgProgress.setWorldSize(115,115),this.popup.add(this.bgProgress),Phaser.Display.Align.In.Center(this.bgProgress,this.popup,0,-38)},n.rescueTimeout=function(){this.countdownTimer.remove(),this.scene.screen.close(this.name),this.scene.endGame()},n.createContinueButton=function(){this.continueButton=new yE(this.scene),this.continueButton.setScale(0).setAlpha(0),this.continueButton.onClick=this.handleShowRewardedVideoAd,this.add(this.continueButton),Phaser.Display.Align.In.Center(this.continueButton,this.textRescueTime,0,115),this.tweenContinueButton=this.scene.tweens.add({paused:!0,targets:this.continueButton,ease:vE.Z,props:{alpha:{from:0,to:1},scale:{from:1.2,to:1}},delay:300,duration:300})},n.createSkipText=function(){this.skipText=new bE(this.scene),this.skipText.setVisible(!1).setAlpha(0),this.skipText.onClick=this.handleSkip,this.add(this.skipText),Phaser.Display.Align.In.BottomCenter(this.skipText,this.continueButton,0,43.5),this.skipTextTween=this.scene.tweens.add({targets:this.skipText,delay:kE.DelayNoThank,paused:!0,alpha:{from:0,to:1},ease:"Power1",duration:500})},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runPopupEntrancesAnimation=function(e,t){var n=this;if(!this.popupShowUpAnimation){var i=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}},onComplete:function(){n.bgProgress.setVisible(!0),n.progressCircle.setVisible(!0),n.continueButton.setVisible(!0),n.skipText.setVisible(!0),n.runAnim(),n.updateInfo(),n.isUseRescue=!1,n.countdownCount=kE.RescueGamePopupTimeout,n.setTime(n.countdownCount),n.runCountdown()}})}this.popupShowUpAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),LE=_E,ME=n(618),DE=n.n(ME),NE=function(e,t,n){return void 0===t&&(t=.1),void 0===n&&(n=.04),t*e+DE()(e)*n*e*e},BE=function(e){function t(n){var i;return(i=e.call(this,n)||this).windX=1,i.airFrictionX=.05,i.airFrictionY=.01,i._lastRotaion=0,i.rotationRate=Math.random()+t.bonusRotationRate<.5?-1:1,i.scaleXNumber=i.getRandomFloat(.1,.2),i.scaleYNumber=i.scaleXNumber,i.scaleRate=-1,i.maxScale=i.getRandomFloat(.5,1),i.deltaAlpha=0,i.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007),i.airFrictionY=.004*Math.random()+(t.bonusAirFrictionY||.006),i.maxScale=Math.max(i.scaleXNumber,i.maxScale),i.alpha=0,(0,La.Z)(i)||(0,La.Z)(i)}(0,o.Z)(t,e);var n=t.prototype;return n.getRandomNumberBetween=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},n.getRandomFloat=function(e,t){return Math.random()*(t-e)+e},n.setValueAirFrictionX=function(e){t.bonusAirFrictionX=e,this.airFrictionX=.01*Math.random()+(t.bonusAirFrictionX||.007)},n.setValueAirFrictionY=function(e){t.bonusAirFrictionY=e},n.setValueRotationRate=function(e){t.bonusRotationRate=e},n.reset=function(){this.scaleXNumber=this.getRandomFloat(.3,.8),this.scaleYNumber=this.scaleXNumber,this.scaleRate=-1,this.alpha=0,this.deltaAlpha=0},n.update=function(t,n,i){for(var a=e.prototype.update.call(this,t,n,i),s=.5,r=t;r>16.67;)this.velocityX-=NE(this.velocityX,s,this.airFrictionX)/60,this.velocityY-=NE(this.velocityY,s,this.airFrictionY)/60,r-=16.67;if(this.velocityX-=NE(this.velocityX,s,this.airFrictionX)*r/1e3,this.velocityY-=NE(this.velocityY,s,this.airFrictionY)*r/1e3,this._lastRotaion=this.rotation,this.lifeCurrent>3*this.life/4)this.scaleX=this.maxScale,this.scaleY=this.maxScale,this.deltaAlpha+=t/(this.life/4),this.alpha=this.deltaAlpha;else if(this.lifeCurrent>0){var o=this.scaleRate>0?this.maxScale:1;this.scaleXNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleYNumber+=o*this.scaleRate*(t/(3*this.life/4)*3),this.scaleX=this.scaleXNumber,this.scaleY=this.scaleYNumber,this.alpha=this.deltaAlpha,this.scaleX<=0&&(this.scaleRate=1),this.scaleX>=this.maxScale&&(this.scaleRate=-1)}else this.reset();return a},t}(Phaser.GameObjects.Particles.Particle);BE.bonusAirFrictionX=0,BE.bonusAirFrictionY=0,BE.bonusRotationRate=0,BE.scaleXNumber=void 0,BE.scaleYNumber=void 0,BE.bonusAirFrictionX=0,BE.bonusAirFrictionY=0,BE.bonusRotationRate=0,BE.scaleXNumber=Math.random(),BE.scaleYNumber=Math.random();var GE=BE,FE=Ha.Z.EFFECTS,UE=FE.KEY,HE=FE.FRAME,ZE=function(e){function t(t){var n;return(n=e.call(this,t,UE)||this).position1={x:-70,y:-180},n.emitterStar1=void 0,n.circleImage1=void 0,n.tweenShowCircle1=void 0,n.tweenHideCircle1=void 0,n.position2={x:-20,y:190},n.emitterStar2=void 0,n.circleImage2=void 0,n.tweenShowCircle2=void 0,n.tweenHideCircle2=void 0,n.position3={x:90,y:0},n.emitterStar3=void 0,n.circleImage3=void 0,n.tweenShowCircle3=void 0,n.tweenHideCircle3=void 0,n.setDepth(Ua.Z.ON_TOP+1),n.createEmitterStars(),n.createTweenCircle(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createEmitterStars=function(){var e=[HE.GLARE_CROSS,HE.DUST],t=[16636263,5289969,15880535];this.emitterStar1=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position1.x,y:this.position1.y,speed:{min:50,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:GE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar2=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position2.x,y:this.position2.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:GE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}}),this.emitterStar3=this.createEmitter({name:"Emitter1",frame:e,tint:t,x:this.position3.x,y:this.position3.y,speed:{min:100,max:200},gravityY:40,lifespan:{min:1e3,max:4e3},maxParticles:0,on:!1,alpha:0,particleClass:GE,emitZone:{type:"edge",source:new Phaser.Geom.Circle(0,0,1)}})},n.createTweenCircle=function(){var e=this;this.circleImage1=this.scene.make.image({x:this.position1.x,y:this.position1.y,key:UE,frame:HE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle1.play()}}),this.tweenHideCircle1=this.scene.add.tween({paused:!0,targets:this.circleImage1,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage1.setVisible(!1),e.emitterStar1.stop()}}),this.circleImage2=this.scene.make.image({x:this.position2.x,y:this.position2.y,key:UE,frame:HE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle2.play()}}),this.tweenHideCircle2=this.scene.add.tween({paused:!0,targets:this.circleImage2,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage2.setVisible(!1),e.emitterStar2.stop()}}),this.circleImage3=this.scene.make.image({x:this.position3.x,y:this.position3.y,key:UE,frame:HE.GLOW_CIRCLE}).setAlpha(0).setVisible(!1).setScale(0),this.tweenShowCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,scale:{from:0,to:1},alpha:{from:0,to:1},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.tweenHideCircle3.play()}}),this.tweenHideCircle3=this.scene.add.tween({paused:!0,targets:this.circleImage3,alpha:{from:1,to:0},ease:"Sine.easeInOut",duration:1e3,onComplete:function(){e.circleImage3.setVisible(!1),e.emitterStar3.stop()}})},n.getImages=function(){return[this.circleImage1,this.circleImage2,this.circleImage3]},n.playConfettiAnimation=function(){var e=this;this.scene.time.addEvent({delay:300,callback:function(){e.emitterStar1.flow(1e4,30),e.circleImage1.setVisible(!0),e.tweenShowCircle1.play()},callbackScope:this}),this.scene.time.addEvent({delay:800,callback:function(){e.emitterStar2.flow(1e4,25),e.circleImage2.setVisible(!0),e.tweenShowCircle2.play()},callbackScope:this}),this.scene.time.addEvent({delay:1300,callback:function(){e.emitterStar3.flow(1e4,30),e.circleImage3.setVisible(!0),e.tweenShowCircle3.play()},callbackScope:this})},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),YE=ZE,WE=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textScoreReached=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.starSuperTwinkle=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.scene.enableInput(),s.runPopupEntrancesAnimation(300,300),s.textScoreReached.restart(),s.scene.audio.playSound(Ya.Z.SCORE_REACHED)},s.close=function(){e.prototype.close.call((0,La.Z)(s))},s.scene=t,s.setDepth(Za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textScoreReached.start(),n.starSuperTwinkle.playConfettiAnimation(),n.handleDelegate(),n.runAnim()}})),this.tweenBackground.play()},n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText(),this.createAnim()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textScoreReached="ar"==e?new fE(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new gE(this.scene,{text:this.scene.lang.Text.SCORE_REACHED,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(70)}),this.add(this.textScoreReached),Phaser.Display.Align.In.Center(this.textScoreReached,this)},n.createAnim=function(){this.starSuperTwinkle=new YE(this.scene),this.add(this.starSuperTwinkle),this.add(this.starSuperTwinkle.getImages())},t}(GameCore.Screen),VE=Ha.Z.DEFAULT,zE=VE.KEY,KE=VE.FRAME,jE=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).onClick=void 0,i.options=void 0,i.text=void 0,i.panel=void 0,i.icon=void 0,i.animOn=void 0,i.animOff=void 0,i.setSize(n.width,n.height),i.options=n,i.createPanel(),i.createIcon(),i.createText(),i.createAnimation(),i.updateStatus(i.options.enable),i.createInput(),i}(0,o.Z)(t,e);var n=t.prototype;return n.createInput=function(){var e=this;this.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){e.options.enable?e.animOff.play():e.animOn.play(),e.onClick&&e.onClick(!e.options.enable)}))},n.createPanel=function(){this.panel=this.scene.make.image({key:zE,frame:KE.BUTTON_TOGGLE_ON}),this.panel.setWorldSize(this.width,this.height),this.add(this.panel),Phaser.Display.Align.In.Center(this.panel,this)},n.createIcon=function(){this.icon=this.scene.make.image({key:zE,frame:KE.BUTTON_CIRCLE}),this.icon.setWorldSize(27,27),this.add(this.icon),Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:zE,frame:KE.TEXT_ON});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.panel,-10)},n.createAnimation=function(){var e=this;this.animOn=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:-this.panel.width/2+this.icon.width/2,to:this.panel.width/2-this.icon.width/2-3},onComplete:function(){var t=e.scene.world.getPixelRatio();Phaser.Display.Align.In.Center(e.text,e.panel,-10),e.text.setFrame(KE.TEXT_ON);var n=e.text,i=n.width,a=n.height;e.text.setWorldSize(i/t,a/t),e.panel.setFrame(KE.BUTTON_TOGGLE_ON),e.panel.setWorldSize(e.width,e.height),e.options.enable=!0}});var t=this.scene.facebook.getLocale();this.animOff=this.scene.add.tween({targets:this.icon,duration:200,paused:!0,x:{from:this.panel.width/2-this.icon.width/2,to:-this.panel.width/2+this.icon.width/2},onComplete:function(){var n=e.scene.world.getPixelRatio();e.text.setFrame(KE.TEXT_OFF);var i=e.text,a=i.width,s=i.height;e.text.setWorldSize(a/n,s/n),e.panel.setFrame(KE.BUTTON_TOGGLE_OFF),e.panel.setWorldSize(e.width,e.height),e.options.enable=!1;var r=0;"it"==t&&(r=3),"pt"==t&&(r=5),Phaser.Display.Align.In.RightCenter(e.text,e.panel,-11+r)}})},n.updateStatus=function(e){this.options.enable=e,e?this.animOn.play():this.animOff.play()},t}(Phaser.GameObjects.Container),XE=jE,JE=Ha.Z.DEFAULT,qE=JE.KEY,QE=JE.FRAME,$E=function(e){function t(t){var n;return(n=e.call(this,t,qE,QE.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:qE,frame:QE.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(Wa.Z),eS=$E,tS=Ha.Z.DEFAULT,nS=tS.KEY,iS=tS.FRAME,aS=function(e){function t(t){var n;return(n=e.call(this,t,nS,iS.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:nS,frame:iS.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(Wa.Z),sS=aS,rS=Ha.Z.DEFAULT,oS=rS.KEY,cS=rS.FRAME,lS=function(e){function t(t){var n;return(n=e.call(this,t,oS,cS.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:oS,frame:cS.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:oS,frame:cS.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(Wa.Z),hS=lS,uS=Ha.Z.DEFAULT,dS=uS.KEY,pS=uS.FRAME,gS=function(e){function t(t){var n;return(n=e.call(this,t,dS,pS.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:dS,frame:pS.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:dS,frame:pS.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(Wa.Z),fS=gS,mS=Ha.Z.DEFAULT,vS=mS.KEY,ES=mS.FRAME,SS=function(e){function t(t,n,a,s){var o;return(o=e.call(this,t,n,a,s)||this).scene=void 0,o.popup=void 0,o.title=void 0,o.buttonClose=void 0,o.contents=void 0,o.backgroundContent=void 0,o.settingMusic=void 0,o.settingSound=void 0,o.settingVibrate=void 0,o.settingSoundContainer=void 0,o.settingMusicContainer=void 0,o.settingVibrateContainer=void 0,o.popupShowUpAnimation=void 0,o.popupFadeOutAnimation=void 0,o.contentShowUpAnimation=void 0,o.buttonReplay=void 0,o.buttonPlayWithFriend=void 0,o.buttonHome=void 0,o.buttonJourney=void 0,o.popupFadeInMaskAnimation=void 0,o.popupFadeOutMaskAnimation=void 0,o.handleClose=function(){o.runCloseAnimation()},o.handleMusicSetting=function(e){o.scene.player.setSetting("music",e),e?o.scene.audio.playMusic():o.scene.audio.pauseMusic()},o.handleSoundSetting=function(e){o.scene.player.setSetting("sound",e)},o.handleVibrateSetting=function(e){e&&Jp(199),o.scene.player.setSetting("vibrate",e)},o.clickReplay=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.scene.usedRescue=!1,o.scene.screen.close(o.name),e.next=4,o.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=window.game,r=s.globalScene,o=s.lang,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),c=n(),l=Sc(c),E()(a=[va,Aa]).call(a,l)&&(t(dh()),t(oh())),h=null,l===Ea&&(h=Kc(c),t({type:Fn,payload:{}})),t(Ih()),e.next=11,t(Zh(l,h));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,i.tO)(e.t0);case 16:return e.prev=16,xh(300),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}());case 4:cl.emit(po.REPLAY);case 5:case"end":return e.stop()}}),e)}))))},o.clickButtonPlayWithFriends=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.scene.storage.dispatch(Bh());case 2:o.scene.startGame(),o.scene.screen.close(o.name);case 4:case"end":return e.stop()}}),e)}))),o.clickButtonHome=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.scene.switch(wa.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},o.clickButtonLeaderboard=function(){o.scene.screen.open(Za.o4.LEADER_BOARD_SCREEN)},o.clickButtonShare=function(){o.runCloseAnimation(),o.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scene.storage.dispatch(Al());case 1:case"end":return e.stop()}}),e)}))))},o.scene=t,o.createPopup(),o.createTitle(),o.createContentBackground(),o.createSwitchButtons(),o.createButtons(),o.addItem(),o.arrangeItems(),o.createInput(),o.setDepth(Za.Ks.POPUP),o.background.setAlpha(.5),o.scene.world.isLandscape()&&o.popup.setScale(o.popup.scale-.1),o}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:vS,frame:ES.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:vS,frame:ES.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new Wa.Z(this.scene,vS,ES.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new fS(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new hS(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new eS(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new sS(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(wa.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),jp()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:vS,frame:ES.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new XE(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:vS,frame:ES.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new XE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:vS,frame:ES.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new XE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),AS=SS,TS=Ha.Z.DEFAULT,yS=TS.KEY,IS=TS.FRAME,CS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.levelManager.getCurrentTargetScore(),a=this.scene.levelManager.getCurrentIndex(),s=this.scene.world.getPixelRatio();this.textScore.setText(""+i),0===a?this.titleFrame.setFrame(IS.TEXT_FIRST_MILESTONE):this.titleFrame.setFrame(IS.TEXT_NEXT_MILESTONE),this.titleFrame.setWorldSize(this.titleFrame.width/s,this.titleFrame.height/s);var r=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(r,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:yS,frame:IS.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){var e=this.scene.world.getPixelRatio();this.title=this.scene.add.container(),this.titleFrame=this.scene.make.image({key:yS,frame:IS.TEXT_FIRST_MILESTONE}),this.titleFrame.setWorldSize(this.titleFrame.width/e,this.titleFrame.height/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterTargetScoreScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),bS=CS,OS=Ha.Z.DEFAULT,PS=OS.KEY,RS=OS.FRAME,wS=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.scoreText=void 0,s.bestScoreText=void 0,s.tweenScoreText=void 0,s.popupShowUpAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.scoreBlock=void 0,s.bestScoreBlock=void 0,s.playWithFriendsButton=void 0,s.homeButton=void 0,s.shareButton=void 0,s.bestScore=void 0,s.currentScore=void 0,s.payload=void 0,s.counterAnimation=void 0,s.scoreAnimation=void 0,s.scene=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.initScore(),s.updateScore(),s.setVisible(!0),s.runOpenAnimation()},s.clickPlayWithFriends=function(){s.scene.storage.dispatch(Bh())},s.clickShare=function(){s.scene.storage.dispatch(dl())},s.handleClosePopup=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){}))},s.setVisible(!1),s.scene=t,s.setDepth(Za.Ks.POPUP),s.createPopup(),s.createPopupContent(),s.createScoreAnimation(),Phaser.Display.Align.In.Center(s.popup,s.zone,0,-100),s.background.setVisible(!1),s}(0,o.Z)(t,e);var n=t.prototype;return n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,300,310),this.add(this.popup)},n.createPopupContent=function(){this.createTitle(),this.createScoreBlock(),this.createBestScoreBlock(),this.createButtons(),this.contents=this.scene.make.group({}),this.contents.addMultiple([this.homeButton,this.playWithFriendsButton,this.shareButton])},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:PS,frame:RS.TEXT_YOUR_SCORE}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),Phaser.Display.Align.In.Center(t,this.title,0,10);var a=new Wa.Z(this.scene,PS,RS.BUTTON_CLOSE,35,35);a.onClick=this.handleClosePopup,a.setName("Close"),Phaser.Display.Align.In.RightCenter(a,this.title,165,-15),this.title.add([t,a]),this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-2)},n.createScoreBlock=function(){this.scoreBlock=this.scene.add.container();var e=this.scene.make.image({key:PS,frame:RS.SCORE_PANEL});e.setWorldSize(263,76),this.scoreBlock.add(e),this.scoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(55),text:"0",origin:{x:.5,y:.5}}),this.scoreBlock.add(this.scoreText),this.popup.add(this.scoreBlock),Phaser.Display.Align.In.TopCenter(this.scoreBlock,this.popup,0,-90)},n.createBestScoreBlock=function(){this.bestScoreBlock=this.scene.add.container();var e=this.scene.make.image({key:PS,frame:RS.BEST_SCORE_FRAME_LONG});e.setWorldSize(193,77),this.bestScoreBlock.add(e),this.bestScoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(48),text:"0",origin:{x:.5,y:.5}}),this.bestScoreBlock.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.bestScoreBlock,0,16),this.popup.add(this.bestScoreBlock),Phaser.Display.Align.In.Center(this.bestScoreBlock,this.scoreBlock,0,65)},n.createButtons=function(){this.createButtonHome(),this.createButtonPlayWithFriend(),this.createButtonShare()},n.createButtonHome=function(){this.homeButton=new Fg(this.scene),this.homeButton.onClick=this.clickHome.bind(this),this.popup.add(this.homeButton),Phaser.Display.Align.In.Center(this.homeButton,this.bestScoreBlock,-100,80)},n.clickHome=function(){this.scene.scene.switch(wa.Co.DASHBOARD_SCENE)},n.createButtonPlayWithFriend=function(){this.playWithFriendsButton=new Xg(this.scene),this.playWithFriendsButton.onClick=this.clickPlayWithFriends,this.popup.add(this.playWithFriendsButton),Phaser.Display.Align.In.Center(this.playWithFriendsButton,this.bestScoreBlock,0,80)},n.createButtonShare=function(){this.shareButton=new Wg(this.scene),this.shareButton.onClick=this.clickShare,this.popup.add(this.shareButton),Phaser.Display.Align.In.Center(this.shareButton,this.bestScoreBlock,100,80)},n.runCloseAnimation=function(){this.runPopupExitsAnimation(0,200)},n.runPopupExitsAnimation=function(e,t){var n,i=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){i.popup.setY(0)}})),null==(n=this.popupFadeOutAnimation)||n.play()},n.setBestScore=function(e){this.bestScoreText.setText(""+e)},n.runOpenAnimation=function(){this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runPopupContentEntrancesAnimation(200,300)},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){this.contentShowUpAnimation||(this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:this.scene.tweens.stagger(80,{start:e}),props:{alpha:{start:0,from:0,to:1}}})),this.contentShowUpAnimation.play()},n.initScore=function(){var e=this.scene.player.getBestScore();this.bestScore=e,this.currentScore=0},n.updateScore=function(){var e=this.scene.storage.getState(),t=al(e),n=t.score,i=t.bestScore;if(void 0===n&&void 0===i){var a=il(e)[this.scene.player.getPlayerId()];n=(null==a?void 0:a.score)||0,i=this.scene.player.getBestScore()}this.bestScore=(i||0)<this.bestScore?this.bestScore:i||0,this.currentScore=n,this.updateData({bestScore:this.bestScore,currentScore:this.currentScore})},n.updateData=function(e){this.payload=e;var t=e.bestScore,n=e.currentScore;if(this.setBestScore(t),n<=t)return this.setCurrentScore(n),this.runScoreAnimation(),void(n>0?this.runScoreCounter():this.counterAnimation=null);this.runAnimation()},n.runAnimation=function(){this.runScoreCounter(),this.scene.time.delayedCall(1300,(function(){}))},n.runScoreAnimation=function(){this.scoreAnimation.play()},n.createScoreAnimation=function(){this.scoreAnimation=new cf({targets:[this.scoreText],props:{scale:{from:1,to:1.3}}})},n.runScoreCounter=function(){var e,t=this,n=this.payload,i=n.bestScore,a=n.currentScore;null==(e=this.counterAnimation)||e.remove(),this.counterAnimation=this.scene.tweens.addCounter({from:0,to:a,delay:700,duration:2e3,completeDelay:300,onUpdate:function(e){t.scene.audio.playSound(Ya.Z.SCORE_COUNT);var n=Math.floor(e.getValue());t.runScoreAnimation(),t.setCurrentScore(n)},onComplete:function(){t.setBestScore(i<a?a:i),t.setCurrentScore(a),t.scene.audio.playSound(Ya.Z.GAME_OVER)}})},n.setCurrentScore=function(e){this.scoreText.setText(""+e)},t}(GameCore.Screen),xS=wS,kS=GameCore.Configs,_S=kS.Match,LS=kS.Network,MS=kS.Tutorial,DS=kS.Board,NS=kS.Ads,BS=Ha.Z.GAMEPLAY_32.FRAME,GS=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.usedRescue=!1,n.bestScoreGlareEffect=void 0,n.bestScore=0,n.isBestScoreScreenShowed=void 0,n.isGameOver=void 0,n.isShowedNextTargetScreen=void 0,n.piecesByFen=void 0,n.isGameError=void 0,n.gamePlayMode=void 0,n.isNextTarget=!1,n.layoutManager=void 0,n.tutorialManager=void 0,n.effectManager=void 0,n.levelManager=void 0,n.run=function(){try{var e;n.initManager();var t=n.storage.getState();if(null===Ic(t)&&n.storage.dispatch(_h(!1)),n.checkAndAddShortcut(),n.tutorialManager.isValidForTutorial()||MS.ForceUseTutorial)return n.handleStartTutorial(),n.layoutManager.objects.main.praise.reset(),void n.player.incUserGuideDisplays();var i=Sc(t);if(gt()(e=[Sa,Ea,Aa]).call(e,i)>=0){var a=n.player.getPlayerId(),s=Kc(t).playerId,r=Xc(t,{playerId:a}),o=Jc(t,{opponentId:s});if(r&&o)return void n.screen.open(Za.o4.GAME_OVER_SCREEN)}n.startGame()}catch(c){}},n.create=function(){e.prototype.create.call((0,La.Z)(n)),n.createBackground(fa.Z.BACKGROUND.KEY);var t=n.player.getBestScore();n.bestScore=t,n.createManager(),n.createScreens(),n.createBestScoreGlareEffect(),n.createInput(),n.listenEvents(),n.input.setTopOnly(!0),n.preLoadAds()},n.closeSettingScreen=function(){(0,La.Z)(n).screen.close(Za.o4.SETTINGS_SCREEN)},n.closeGameOverScreen=function(){(0,La.Z)(n).screen.close(Za.o4.GAME_OVER_SCREEN)},n.handlePauseGame=function(){n.isGameOver||n.checkReachTargetScore()||(0,La.Z)(n).screen.open(Za.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=function(){var e=(0,r.Z)(u().mark((function e(t){var a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!0),a=n.game,s=a.globalScene,r=a.lang,e.prev=2,n.audio.muteAll(),n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=7;break}return e.abrupt("return");case 7:return s.screen.open(Za.o4.NOTIFY_SCREEN,{message:r.Text.LOADING_AD,duration:LS.Timeout,loading:!0}),e.next=10,n.ads.showInterstitialAdAsync();case 10:n.analytics.showInterstitialAd(n.getSceneName()),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return");case 16:return e.prev=16,s.screen.close(Za.o4.NOTIFY_SCREEN),t&&n.postSessionScore(),n.audio.unmuteAll(),n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),e.finish(16);case 23:case"end":return e.stop()}}),e,null,[[2,13,16,23]])})));return function(t){return e.apply(this,arguments)}}(),n.rescued=function(){try{var e=n.layoutManager.objects.main,t=n.getLevelLogInfo(),i=t.level,a=t.score,s=t.levelName;n.analytics.levelRescue(i,a,s),e.board.rescue(),n.nextLevel(),n.usedRescue=!0}catch(r){}},n.replay=function(){n.restartGame(),n.startGame()},n.handleCloseBannerAds=function(){n.ads.hideBannerAdAsync().catch((function(e){console.warn(e)}))},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){return console.log(e)})),this.ads.preloadRewardedVideoAsync().catch((function(e){return console.log(e)}))},n.createBestScoreGlareEffect=function(){this.bestScoreGlareEffect=new yu(this),this.bestScoreGlareEffect.setDepth(Ua.Z.ON_TOP),Phaser.Display.Align.In.Center(this.bestScoreGlareEffect,this.gameZone)},n.createManager=function(){this.layoutManager=new Lg(this),this.tutorialManager=new uo(this),this.effectManager=new Fd(this),this.levelManager=new Ru},n.initManager=function(){this.layoutManager.init(),this.tutorialManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createSettingScreen(),this.createRescueScreen(),this.createGameOverScreen(),this.createYourScoreScreen(),this.createScoreReachedScreen(),this.createNextTargetScoreScreen(),this.createNoSpaceLeftScreen(),this.createTargetScoreScreen(),this.createLeaderboardScreen(),this.createMiniJourneyScreen()},n.createLeaderboardScreen=function(){this.screen.add(Za.o4.LEADER_BOARD_SCREEN,Su)},n.createMiniJourneyScreen=function(){this.screen.add(Za.o4.MINI_JOURNEY_SCREEN,aE)},n.createTargetScoreScreen=function(){this.screen.add(Za.o4.TARGET_SCORE_SCREEN,bS)},n.createNoSpaceLeftScreen=function(){this.screen.add(Za.o4.NO_SPACE_LEFT_SCREEN,mE)},n.createNextTargetScoreScreen=function(){this.screen.add(Za.o4.NEXT_TARGET_SCORE_SCREEN,pE)},n.createScoreReachedScreen=function(){this.screen.add(Za.o4.SCORE_REACHED_SCREEN,WE)},n.createYourScoreScreen=function(){this.screen.add(Za.o4.YOUR_SCORE_SCREEN,xS)},n.createSettingScreen=function(){this.screen.add(Za.o4.SETTINGS_SCREEN,AS)},n.startGame=function(){try{var e=this.layoutManager.objects,t=e.header,n=e.footer;this.isGameOver=!1,this.isBestScoreScreenShowed=!1,this.tutorialManager.skipTutorial(),this.closeSettingScreen(),this.closeGameOverScreen(),this.handleUsedRescue(),this.restartGame(),t.setVisible(!0),this.world.isLandscape()&&n.buttonSetting.setVisible(!0),t.progressBar.reset(),this.handleGameModeUI(),this.updateCurrentBestScore(),this.updateLevelManager(),this.updateProgressBar(),t.buttonSetting.setDisabled(!0),this.time.delayedCall(300,(function(){t.buttonSetting.setDisabled(!1)})),this.openTargetScoreScreen(),this.handleGameModeChange()}catch(a){this.isGameError||(this.isGameError=!0,this.replay()),(0,i.R0)(new Error("Start game scene"),{error:a,scene:"GameScene"})}},n.handleGameModeChange=function(){var e=this,t=[{selector:Sc,callback:function(t){t!==e.gamePlayMode&&e.handleGameModeUI()}}];this.handleStateChange(t)},n.handleGameModeUI=function(){var e,t=this.storage.getState();this.gamePlayMode=Sc(t),this.gamePlayMode&&this.gamePlayMode!==va&&gt()(e=[Sa,Ea,Aa]).call(e,this.gamePlayMode)>=0?this.handleStartGameFriendMode():this.handleStartGameSingleMode()},n.startGameAfterTargetScoreScreenClose=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=Sc(a),r=this.getLevelLogInfo(),o=r.level,c=r.score,l=r.levelName;this.analytics.levelStart(o,c,l),this.levelManager.getCurrentIndex()>0&&n.board.handleTweenStartMission(),gt()(e=[Sa,Ea,Aa]).call(e,s)>=0?i.pieces.showNewPieces():this.piecesByFen?i.pieces.showAvailablePieces(this.piecesByFen):i.pieces.showNewPieces()},n.openTargetScoreScreen=function(){var e=this;this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(Za.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.handleUsedRescue=function(){this.usedRescue&&this.storage.dispatch(zh())},n.handleStartTutorial=function(){var e=this.layoutManager.objects,t=e.header,n=e.footer;this.analytics.event(Pt._.TUTORIAL_BEGIN),this.tutorialManager.start(),t.setVisible(!1),n.buttonSetting.setVisible(!1)},n.handleStartGameSingleMode=function(){var e,t,n=this.layoutManager.objects,i=n.main,a=n.footer,s=n.header,r=this.storage.getState(),o=(null==(e=Hc(r))?void 0:e.data)||{},c=(null==(t=Hc(r))?void 0:t.score)||0;if(o){var l=o.fen,h=null;if(this.piecesByFen=null,l){var u=i.board.getBoardByFen(l);h=this.handleDynamicFenSize(u),this.piecesByFen=a.pieces.getPiecesByFen(l),this.isFenGameOver(h,this.piecesByFen)&&(h=null,this.piecesByFen=null,this.storage.dispatch(Ih()),r=this.storage.getState(),c=0,this.resetRescuedGame())}i.board.clearBoard(),h&&i.board.startGame(h),a.pieces.clearPieces(),s.showItemSingleMode(),s.mainScoreBlock.setScore(c),s.mainScoreBlock.setScoreText(c),i.praise.reset()}},n.handleStartGameFriendMode=function(){var e=this.layoutManager.objects,t=e.header,n=e.main,i=e.footer;t.showItemPlayWithFriendsMode(),t.myScoreBlock.updateInfo(),t.opponentScoreBlock.updateInfo(),n.praise.reset(),n.board.clearBoard(),i.pieces.clearPieces()},n.listenEvents=function(){var e=this;cl.on(po.START_GAME,(function(){e.startGame()})),cl.on(po.RESCUE,this.rescued),cl.on(po.REPLAY,this.replay),cl.on(po.GAME_OVER,this.handleGameOver.bind(this)),cl.on("handle_state_change",this.handleStateChange.bind(this))},n.postSessionScore=function(){var e=this.storage.getState(),t=al(e).score,n=void 0===t?0:t;this.storage.dispatch(Lc(n))},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.createRescueScreen=function(){this.screen.add(Za.o4.RESCUE_SCREEN,LE)},n.createGameOverScreen=function(){this.screen.add(Za.o4.GAME_OVER_SCREEN,Tf)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore()||0,n=this.storage.getState(),i=al(n),a=i.score,s=void 0===a?0:a,r=i.bestScore,o=void 0===r?0:r,c=t>o?t:o;c=c>s?c:s,this.player.setBestScore(c),e.bestScoreBlock.setScoreText(c)},n.updateLevelManager=function(){var e=this.getCurrentScoreByMode();this.levelManager.updateCurrentLevelByScore(e)},n.updateProgressBar=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n)},n.setIsGameOver=function(e){this.isGameOver=e},n.handleGameOver=function(){this.isGameOver=!0;var e=this.getLevelLogInfo(),t=e.level,n=e.score,i=e.levelName;this.analytics.levelFail(t,n,i),this.screen.open(Za.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0;var t=this.storage.getState(),n=Ac(t);n<_S.MaxRescueCount&&this.ads.preloadRewardedVideoAsync().catch((function(e){return console.log(e)})),this.screen.open(Za.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){if(e.enableInput(),n<_S.MaxRescueCount&&NS.Enabled)return e.screen.open(Za.o4.RESCUE_SCREEN),void(e.isGameOver=!1);e.usedRescue=!1,e.endGame()}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.restartGame=function(){var e,t=this.layoutManager.objects,n=t.header,i=t.main;this.usedRescue=!1,null==(e=n.mainScoreBlock.addScore)||e.stop().remove(),n.mainScoreBlock.setScore(0),n.mainScoreBlock.setScoreText(0),n.myScoreBlock.setScore(0),n.myScoreBlock.setScoreText(0),n.progressBar.hideProgressBar(),n.progressBar.setPercent(0),this.levelManager.restart(),i.praise.listScore=[]},n.endGame=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleShowInterstitialAd(!1).catch(i.tO);case 2:this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,o,c,l,h,d,p,g,f,m,v,E,S,A,T,y,I,C,b,O,P,R,w,x,k;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=window.game,s=a.analytics,o=a.facebook,c=a.globalScene,l=a.lang,c.screen.open(Za.o4.NOTIFY_SCREEN,{message:l.Text.LOADING,loading:!0}),h=n(),d=Sc(h),p=al(h),g=p.score,f=void 0===g?0:g,m=p.level,v=void 0===m?0:m,t(Lc(f)),t(Hh(f)),e.next=10,t(Wh(d,{score:f}));case 10:if(h=n(),E=Tc(h),S=yc(h),A=Math.floor((S-E)/1e3),s.event(Pt._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(d),level:v,level_name:"level_"+v,time_played:A}),T=o.getContextID(),d===Sa&&T&&t(function(){var e=(0,r.Z)(u().mark((function e(t,n){var a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=window.game.analytics,e.prev=1,s=window.game.facebook.getContextID(),Il({contextId:s}),r=n(),o=qc(r),c=o.playerId,l=o.score,h=al(r),d=h.score,!c||c===ma.playerId){e.next=25;break}if(!(d>l)){e.next=18;break}return e.next=13,El(r);case 13:return p=e.sent,e.next=16,Ml(p,r);case 16:e.next=23;break;case 18:return e.next=20,gl(r);case 20:return p=e.sent,e.next=23,Dl(p,r);case 23:e.next=30;break;case 25:return e.next=27,gl(r);case 27:return p=e.sent,e.next=30,Dl(p,r);case 30:bl({imageShare:p}),a.event(Pt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(1),a.event(Pt._.MESSAGE,{message_content_type:"InviteGroup",success:!0}),(0,i.tO)(e.t0);case 38:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,n){return e.apply(this,arguments)}}()),!T||d!==Ea){e.next=26;break}if(y=Kc(h),(I=y.playerId)&&I!==ma.playerId){e.next=21;break}return e.abrupt("return");case 21:C=il(h),b=C[I]||{},O=b.score,P=void 0===O?0:O,R=Wc(h),w=R._id,x=R.whitePlayerFinish,k=R.blackPlayerFinish,t(x&&k?f>P?_l(I,{matchId:w,contextId:T}):kl(I,{matchId:w,contextId:T}):Ll(I,{matchId:w,contextId:T,score:f}));case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),(0,i.tO)(e.t0);case 31:return e.prev=31,xh(300),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[0,28,31,34]])})));return function(t,n){return e.apply(this,arguments)}}()),this.resetRescuedGame();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.handleUpdateScore=function(e){if(!this.tutorialManager.isRunning()){var t=this.getCurrentScoreByMode()+e;this.storage.dispatch(bh({score:t})),this.updateMatchData()}},n.handleAddScoreAnim=function(e){var t,n=this.layoutManager.objects.header,i=this.storage.getState(),a=Sc(i);this.tutorialManager.isRunning()?n.mainScoreBlock.animAddScore(e):a&&a!==va&&gt()(t=[Sa,Ea,Aa]).call(t,a)>=0?n.myScoreBlock.animAddScore(e):n.mainScoreBlock.animAddScore(e)},n.getBestScore=function(){var e=this.storage.getState();return al(e).bestScore},n.bestScoreReached=function(){if(!this.isBestScoreScreenShowed&&!this.isGameOver){var e=this.getBestScore(),t=this.getCurrentScoreByMode();!e||e>=t||(this.player.setBestScore(t),this.isBestScoreScreenShowed=!0,this.audio.playSound(Ya.Z.CONGRATULATION),this.bestScoreGlareEffect.playEffect())}},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=e/t.progressBar.getTargetScore();t.progressBar.setPercent(n)},n.checkReachTargetScore=function(){var e=this.layoutManager.objects.header;return this.getCurrentScoreByMode()>=e.progressBar.getTargetScore()},n.handleNextTargetScore=function(){var e=this;if(!this.isGameOver&&(this.checkReachTargetScore()&&!this.isShowedNextTargetScreen)){this.isShowedNextTargetScreen=!0,this.disableInput();var t=this.getLevelLogInfo(),n=t.level,a=t.score,s=t.levelName;this.analytics.levelComplete(n,a,s),this.screen.open(Za.o4.SCORE_REACHED_SCREEN,{duration:4e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isShowedNextTargetScreen=!1,t.next=3,e.handleShowInterstitialAd(!1).catch(i.tO);case 3:e.showNextTargetScreen();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.getCurrentScoreByMode=function(){var e,t=this.storage.getState(),n=Sc(t),i=this.layoutManager.objects.header;return n&&n!==va&&gt()(e=[Sa,Ea,Aa]).call(e,n)>=0?i.myScoreBlock.score:i.mainScoreBlock.score},n.showNextTargetScreen=function(){var e=this.getCurrentScoreByMode(),t=this.levelManager.updateCurrentLevelByScore(e);console.log("wwwwwwwwwwww ",e,t),this.screen.open(Za.o4.NEXT_TARGET_SCORE_SCREEN)},n.updateMatchData=function(){if(!this.tutorialManager.isRunning()){var e=this.getFen(),t=this.storage.getState(),n=Hc(t).data||{},a=Sc(t),r=Ac(t);if(!a||a===va){var o,c,l=Zc(t),h=al(t).score,u=void 0===h?0:h;this.storage.dispatch((o=l,c={score:u,rescued:r,data:(0,s.Z)({},n,{fen:e}),updateAt:Date.now()},function(e,t){try{ql((0,s.Z)({matchId:o},c));var n=t(),a=Zc(n);Ql({matchId:o,currentMatchId:a}),e({type:Cn,payload:{match:c}});var r=c.data;c.data=sh(r),Bl(ah.SingleMatchStore,c)}catch(l){if(l instanceof Gl)return;(0,i.tO)(l)}}))}}},n.nextLevel=function(){var e=this.layoutManager.objects.header,t=this.getCurrentScoreByMode(),n=this.levelManager.updateCurrentLevelByScore(t);console.log("wwwwwwwwwwww ",t,n),this.isNextTarget=!0,e.progressBar.hideProgressBar(),e.progressBar.setTargetScore(n),e.progressBar.setPercent(t/n);var i=this.getLevelLogInfo(),a=i.level,s=i.levelName;this.analytics.levelStart(a,t,s)},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case xs:case ks:case _s:n.push({data:Ed.getData(s,r,o)});break;case Ls:case Ms:case Ds:case Ns:n.push({data:Ad.getData(s,r)});break;case Bs:case Gs:case Fs:n.push({data:yd.getData(s)});break;case Hs:n.push({data:Cd.getData(r)});break;case Zs:n.push({data:_d.getData(r)});break;case js:n.push({data:Md.getData(r)});break;case Ws:case Vs:case zs:case Ks:n.push({data:Od.getData(s,r)});break;case Us:n.push({data:Rd.getData(r)});break;case Ys:n.push({data:xd.getData()})}}return ed(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=m()(t=[]).call(t,e);if(n>DS.rows)Da()(a).call(a,DS.rows,n-DS.rows);else if(i<DS.rows)for(var s=0;s<DS.rows-n;s++){var r;a.push(Ba()(r=new Array(n)).call(r,{value:0,frame:BS.GEM_TRANSPARENT}))}return i>DS.cols?a.forEach((function(e){Da()(e).call(e,DS.cols,i-DS.cols)})):i<DS.cols&&a.forEach((function(e){for(var t=0;t<DS.cols-i;t++)e.push({value:0,frame:BS.GEM_TRANSPARENT})})),a},n.checkAndAddShortcut=function(){if(!this.game.player.getPlayer().isUserNew){var e=this.storage.getState();Ia(e)!=Aa&&this.facebook.attemptToAddShortcut()}},n.getLevelName=function(){var e,t=this.levelManager.getCurrentIndex()+1;return"target_"+Fa()(e=GameCore.Utils.Number).call(e,t,4,"0")},n.getLevelLogInfo=function(){return{level:this.levelManager.getCurrentIndex()+1,score:this.getCurrentScoreByMode(),levelName:this.getLevelName()}},n.resetRescuedGame=function(){this.storage.dispatch((function(e){e({type:vn,payload:{}}),Bl(Oh.SingleMatchStore,{rescued:0})}))},t}(Au.Z);for(var FS=GS,US=n(453),HS=GameCore.Configs.Notification.ApiUrl,ZS=function(){var e=(0,r.Z)(u().mark((function e(t){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,Te.v)("players/"+n,t,{},HS,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YS=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),WS=[{id:"pass-levels",title:"PASS_10_LEVELS",require:{level:10},reward:{diamond:100}},{id:"collect-diamonds",title:"COLLECT_300_DIAMONDS",require:{diamond:300},reward:{diamond:100}},{id:"reach-score",title:"REACH_TOTAL_SCORES",require:{score:1e5},reward:{diamond:200}}],VS=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WS);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zS=(0,j.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.tasks}],(function(e){return e})),KS=(0,j.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.process}],(function(e){return e})),jS=(0,j.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.isRequesting}],(function(e){return e})),XS=((0,j.P1)([function(e){var t;return null==(t=e[Si])?void 0:t.isNotice}],(function(e){return e})),GameCore.Configs.DailyTasks),JS=function(e){return function(t){t({type:Ti,payload:{tasks:e}});var n=window.game.player.getCustomData("dailyTasks")||{},i=n.startedTime,a=void 0===i?0:i,s=n.logTasks,r=void 0===s?{}:s;t((Date.now()-a)/1e3>XS.Duration?qS(e):QS(r))}},qS=function(e){return function(t){var n={};e.forEach((function(e){var t=e.id,i=e.require;n[t]={},B()(i).forEach((function(e){var i;n[t]=((i={})[e]=0,i.rewarded=!1,i)}))})),window.game.player.setCustomData("dailyTasks",{logTasks:n,startedTime:Date.now()}),t(QS(n)),cl.emit(Fc.EVENTS.TASKS_RESET)}},QS=function(e){return{type:yi,payload:{process:e}}},$S=n(209),eA=n.n($S),tA=function(){var e=(window.game.player.getCustomData("dailyTasks")||{}).logTasks;return GameCore.Utils.Json.clone(e)},nA=function(){function e(e,t){var n=this;this.game=void 0,this.id=void 0,this.taskData=void 0,this.requireTypes=void 0,this.process=function(e,t){var i;void 0===t&&(t=!0);var a=e.type,s=e.value;if(!(s<1)&&(-1!==gt()(i=n.requireTypes).call(i,a)&&!n.isPassRequiredTarget(a)&&n.processMore(e))){a=e.type,s=e.value;var r=n.getCorrectValue(a,s);n.game.storage.dispatch(function(e,t,n,i){return void 0===i&&(i=!0),function(a){var s=tA();if(GameCore.Utils.Valid.isObject(s)){var r=s;GameCore.Utils.Object.hasOwn(r,e)&&!r[e].rewarded&&(i&&(r[e][t]+=n,window.game.player.setCustomData("dailyTasks",{logTasks:r})),a({type:Ii,payload:{id:e,type:t,value:n}}))}}}(n.id,a,r,t)),n.isTaskFinished(a)&&n.game.storage.dispatch(function(e){return function(t){t({type:Ci,payload:{id:e}}),cl.emit(Fc.EVENTS.NOTICE_UPDATE)}}(n.id))}},this.game=e,this.id=t,this.init()}var t=e.prototype;return t.init=function(){var e=this,t=this.game.storage.getState(),n=zS(t)||[];if(!((null==n?void 0:n.length)<1)){var i=null==n?void 0:eA()(n).call(n,(function(t){return t.id===e.id}));i&&(this.taskData=i,this.requireTypes=B()(this.taskData.require),this.initEvents())}},t.getDataByType=function(e){var t=this.game.storage.getState(),n=KS(t),i={value:0,target:0};if(!n)return i;if(!GameCore.Utils.Object.hasOwn(n,this.taskData.id))return i;var a=n[this.taskData.id];if(GameCore.Utils.Valid.isObject(a)&&GameCore.Utils.Object.hasOwn(a,e)){var s=a[e];"number"===typeof s&&(i.value=s)}return i.target=this.taskData.require[e]||0,i},t.getCorrectValue=function(e,t){var n=this.getDataByType(e),i=n.value,a=n.target,s=t;return i+t>a&&(s=a-i),Math.round(s)},t.isPassRequiredTarget=function(e){var t=this.getDataByType(e);return t.value>=t.target},t.isTaskFinished=function(e){var t=this.getDataByType(e);return t.value>=t.target},e}(),iA=nA,aA=Fc.COLLECT_DIAMONDS,sA=aA.ID,rA=aA.EVENTS,oA=function(e){function t(t){return e.call(this,t,sA)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(rA.COLLECT_DIAMONDS,this.process),cl.on(rA.COLLECT_DIAMONDS,this.process)},n.processMore=function(){return!0},t}(iA),cA=oA,lA=Fc.PASS_LEVELS,hA=lA.ID,uA=lA.EVENTS,dA=function(e){function t(t){return e.call(this,t,hA)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(uA.PASS_LEVEL,this.process),cl.on(uA.PASS_LEVEL,this.process)},n.processMore=function(){return!0},t}(iA),pA=dA,gA=Fc.REACH_SCORE,fA=gA.ID,mA=gA.EVENTS,vA=function(e){function t(t){var n;return(n=e.call(this,t,fA)||this).totalScore=void 0,n.lastUpdate=void 0,n.totalScore=0,n.lastUpdate=Date.now(),n}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(mA.ADD_SCORE,this.process),cl.on(mA.ADD_SCORE,this.process)},n.processMore=function(e){var t=e.value,n=Date.now();return n-this.lastUpdate<3e3?(this.totalScore+=t,!1):(e.value+=this.totalScore,this.totalScore=0,this.lastUpdate=n,!0)},t}(iA),EA=vA,SA=function(){function e(e){var t=this;this.game=void 0,this.eventsListener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.eventsListener={},e.next=3,t.initData();case 3:t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!jS(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:Ai,payload:{}}),e.next=7,VS();case 7:a=e.sent,t(JS(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.game=e,this.init()}var t=e.prototype;return t.getEventListener=function(e){return this.eventsListener[e]},t.initEvents=function(){this.eventsListener[Fc.PASS_LEVELS.ID]=new pA(this.game),this.eventsListener[Fc.REACH_SCORE.ID]=new EA(this.game),this.eventsListener[Fc.COLLECT_DIAMONDS.ID]=new cA(this.game)},e}(),AA=SA,TA=GameCore.Configs,yA=TA.Match,IA=TA.Lives,CA=function(e){return function(t){setTimeout((function(){t(PA()),t(OA()),t(bA())}),e)}},bA=function(){return function(e){var t=60*IA.bonusDurationMins*1e3;setInterval((function(){e(PA()),e(OA())}),t)}},OA=function(){return function(e){e({type:Fi,payload:{}})}},PA=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=wf(r),(c=IA.bonusLife+o)>IA.livesCapacity&&(c=IA.livesCapacity),l={lives:c,lastBonusLifeTime:(new Date).getTime()},t({type:Bi,payload:{data:l}}),e.next=11,window.FBInstant.player.setDataAsync({lives:l});case 11:Bl(yA.LivesStore+"-"+s,l),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}()},RA=function(){return function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=n(),a=wf(i)||0,s=xf(i)){e.next=8;break}return e.next=7,t(wA({lives:a,lastBonusLifeTime:(new Date).getTime()}));case 7:return e.abrupt("return");case 8:return r=(new Date).getTime(),o=Math.floor((r-s)/1e3/(60*IA.bonusDurationMins)),(c=o+a)>IA.livesCapacity&&(c=IA.livesCapacity),l={lives:c,lastBonusLifeTime:c===a?s:(new Date).getTime()},e.next=15,t(wA(l));case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}()},wA=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var i,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=window.game.player,a=i.getPlayer(),s=a.playerId,n({type:Bi,payload:{data:e}}),t.next=5,window.FBInstant.player.setDataAsync({lives:e});case 5:Bl(yA.LivesStore+"-"+s,e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xA=[{name:"collect-red-gems",id:"collect-gems",require:{red:5},reward:50},{name:"collect-blue-gems",id:"collect-gems",require:{blue:5},reward:50},{name:"collect-pink-gems",id:"collect-gems",require:{pink:5},reward:50},{name:"collect-green-gems",id:"collect-gems",require:{green:5},reward:50},{name:"collect-yellow-gems",id:"collect-gems",require:{yellow:5},reward:50},{name:"collect-red-blue-gems",id:"collect-gems",require:{red:5,blue:5},reward:120},{name:"collect-red-pink-gems",id:"collect-gems",require:{red:5,pink:5},reward:120},{name:"collect-red-green-gems",id:"collect-gems",require:{red:5,green:5},reward:120},{name:"collect-red-yellow-gems",id:"collect-gems",require:{red:5,yellow:5},reward:120},{name:"collect-blue-pink-gems",id:"collect-gems",require:{blue:5,pink:5},reward:120},{name:"collect-blue-green-gems",id:"collect-gems",require:{blue:5,green:5},reward:120},{name:"collect-blue-yellow-gems",id:"collect-gems",require:{blue:5,yellow:5},reward:120},{name:"collect-pink-green-gems",id:"collect-gems",require:{pink:5,green:5},reward:120},{name:"collect-pink-yellow-gems",id:"collect-gems",require:{pink:5,yellow:5},reward:120},{name:"collect-green-yellow-gems",id:"collect-gems",require:{green:5,yellow:5},reward:120},{name:"collect-red-blue-pink-gems",id:"collect-gems",require:{red:5,blue:5,pink:5},reward:210},{name:"collect-red-blue-green-gems",id:"collect-gems",require:{red:5,blue:5,green:5},reward:210},{name:"collect-red-blue-yellow-gems",id:"collect-gems",require:{red:5,blue:5,yellow:5},reward:210},{name:"collect-red-pink-green-gems",id:"collect-gems",require:{red:5,pink:5,green:5},reward:210},{name:"collect-red-pink-yellow-gems",id:"collect-gems",require:{red:5,pink:5,yellow:5},reward:210},{name:"collect-red-green-yellow-gems",id:"collect-gems",require:{red:5,green:5,yellow:5},reward:210},{name:"collect-blue-pink-green-gems",id:"collect-gems",require:{blue:5,pink:5,green:5},reward:210},{name:"collect-blue-pink-yellow-gems",id:"collect-gems",require:{blue:5,pink:5,yellow:5},reward:210},{name:"collect-blue-green-yellow-gems",id:"collect-gems",require:{blue:5,green:5,yellow:5},reward:210},{name:"collect-pink-green-yellow-gems",id:"collect-gems",require:{pink:5,green:5,yellow:5},reward:210}],kA=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xA);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_A=(0,j.P1)([function(e){var t;return null==(t=e[di])?void 0:t.missions}],(function(e){return e})),LA=(0,j.P1)([function(e){var t;return null==(t=e[di])?void 0:t.isRequesting}],(function(e){return e})),MA=((0,j.P1)([_A,function(e,t){return t.name}],(function(e,t){return e?"string"!==typeof t?null:GameCore.Utils.Object.hasOwn(e,t)?e[t]:null:null})),function(e){return{type:gi,payload:{missions:e}}}),DA={TYPES:{COLLECT_GEMS:"collect-gems",USE_ITEM:"use-item",COMBO:"combo"},EVENTS:{MISSION_START:"mission-start",MISSION_UPDATE:"mission-update",MISSION_FAILED:"mission-failed",MISSION_COMPLETED:"mission-completed"}},NA=(0,j.P1)([function(e){var t;return null==(t=e[di])?void 0:t.mission}],(function(e){return e})),BA=((0,j.P1)([NA],(function(e){return e?e.name:null})),function(){function e(e,t,n){var i=this;this.game=void 0,this.id=void 0,this.name=void 0,this.reward=void 0,this.process=function(e){var t=e.id,n=e.type,a=e.value;a<1||i.id===t&&i.isTypeRequired(n)&&i.processMore(e)&&(i.game.storage.dispatch(function(e,t,n){return{type:fi,payload:{name:e,type:t,value:n}}}(i.name,n,a)),i.isMissionComplete()&&(cl.emit(DA.EVENTS.MISSION_COMPLETED,{name:i.name,reward:i.reward}),i.game.storage.dispatch(function(e){return{type:mi,payload:{name:e}}}(i.name))))},this.id=t,this.name=n,this.game=e}var t=e.prototype;return t.start=function(){var e=this.game.storage.getState(),t=NA(e);t&&t.name===this.name&&(this.reward=t.reward,this.initEvents())},t.getMissionData=function(){var e=this.game.storage.getState(),t=NA(e);return t?t.name!==this.name?null:t:null},t.getDataByType=function(e){var t=this.getMissionData();if(!t)return null;var n=t.require[e];return{value:t.process[e],target:n}},t.isTypeRequired=function(e){var t=this.getDataByType(e);return!!t&&t.target>0},t.isMissionComplete=function(){var e=this.getMissionData();if(!e)return!0;var t=e.require,n=e.process,i=!0;return B()(t).forEach((function(e){if(i){var a=t[e];n[e]<a&&(i=!1)}})),i},e}()),GA=BA,FA=DA.EVENTS,UA=DA.TYPES,HA=function(e){function t(t,n){return e.call(this,t,UA.COLLECT_GEMS,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(FA.MISSION_UPDATE,this.process),cl.on(FA.MISSION_UPDATE,this.process)},n.processMore=function(){return!0},t}(GA),ZA=HA,YA=DA.EVENTS,WA=DA.TYPES,VA=function(e){function t(t,n){return e.call(this,t,WA.COMBO,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(YA.MISSION_UPDATE,this.process),cl.on(YA.MISSION_UPDATE,this.process)},n.processMore=function(e){var t=this.getMissionData();if(!t)return!1;var n=e.type;return e.value>=t.require[n]},t}(GA),zA=VA,KA=DA.EVENTS,jA=DA.TYPES,XA=function(e){function t(t,n){return e.call(this,t,jA.USE_ITEM,n)||this}(0,o.Z)(t,e);var n=t.prototype;return n.initEvents=function(){cl.off(KA.MISSION_UPDATE,this.process),cl.on(KA.MISSION_UPDATE,this.process)},n.processMore=function(e){return console.log("UseItem",{payload:e}),!0},t}(GA),JA=XA,qA=function(){function e(e){var t=this;this.game=void 0,this.listener=void 0,this.init=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initData();case 2:t.initListeners(),t.initEvents();case 4:case"end":return e.stop()}}),e)}))),this.initData=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.game.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n(),!LA(i)){e.next=4;break}return e.abrupt("return");case 4:return t({type:pi,payload:{}}),e.next=7,kA();case 7:a=e.sent,t(MA(a));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),this.startListener=function(e){t.listener[e]&&t.listener[e].start()},this.game=e,this.init()}var t=e.prototype;return t.initListeners=function(){var e=this;this.listener={};var t=this.game.storage.getState(),n=_A(t);n&&B()(n).forEach((function(t){switch(n[t].id){case DA.TYPES.COLLECT_GEMS:e.listener[t]=new ZA(e.game,t);break;case DA.TYPES.COMBO:e.listener[t]=new zA(e.game,t);break;case DA.TYPES.USE_ITEM:e.listener[t]=new JA(e.game,t)}}))},t.initEvents=function(){cl.off(DA.EVENTS.MISSION_START,this.startListener),cl.on(DA.EVENTS.MISSION_START,this.startListener)},e}(),QA=qA,$A=function(e){try{var t=ya(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,s=i.playerName,r=i.playerPhoto;return n.getPlayer().playerId===a?ma:new ke.Z(a,s,r).toObject()}catch(o){return console.warn(o),ma}},eT=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){var n=t.getID().toString();e(Rc(n))})).catch((function(e){console.warn(e)})),e(Lh())}catch(t){console.warn(t)}}},tT=function(){return function(e,t){try{var n=t(),i=ya(n),a=window.game.player,s=a.getPlayer(),r=i.contextId,o=(i.entryPointData||{}).playerId,c=s.playerId===o,l=$A(n);c||a.updateConnectedPlayers([l]);var h=l.playerId;e(Bh(r,h,!0))}catch(u){throw new Error("processInviteMode: "+u)}}},nT=function(){return function(e,t){try{var n=t(),i=ya(n),a=window.game.player.getPlayer(),s=i.entryPointData||{},r=s.matchId,o=s.opponentId,c=s.playerId,l=a.playerId===c;e(Uh(r,l?o:c))}catch(h){throw new Error("processChallengeFriendMode: "+h)}}},iT=function(){return function(e,t){try{var n=t(),a=ya(n).entryPointData||{},o=a.playerId,c=a.playerScore;e(Ch(o,{score:c,level:0}));var l=$A(n);e(function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=window.game,s=a.facebook,r=a.globalScene,o=a.analytics,c=a.lang,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:c.Text.LOADING,loading:!0}),l=s.getContextID(),Rh({contextId:l}),o.event(Pt._.JOIN_GROUP,{group_id:l}),t.next=8,n(Zh(Sa,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof fc)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,i.tO)(t.t0);case 17:return t.prev=17,xh(1e3),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()}((0,s.Z)({},l,{score:c})))}catch(h){throw new Error("processMatchingGroupMode: "+h)}}},aT=function(){return function(e){try{e(Mh())}catch(t){throw new Error("processNewUserMode: "+t)}}},sT=n(450),rT={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{button_click:"./assets/sounds/button_click.mp3",congratulation:"./assets/sounds/congratulation.mp3",daily_reward:"./assets/sounds/daily_reward.mp3",game_over_scene:"./assets/sounds/game_over_scene.mp3",game_over:"./assets/sounds/game_over.mp3",popup_off:"./assets/sounds/popup_off.mp3",popup_show:"./assets/sounds/popup_show.mp3",score_count:"./assets/sounds/score_count.mp3",piece_pick:"./assets/sounds/piece_pick.mp3",piece_drop:"./assets/sounds/piece_drop.mp3",piece_invalid_move:"./assets/sounds/piece_invalid_move.mp3",board_end:"./assets/sounds/board_end.mp3",rescue_timer:"./assets/sounds/rescue_timer.mp3",eat_block:"./assets/sounds/eat_block.mp3",good:"./assets/sounds/good.mp3",cool:"./assets/sounds/cool.mp3",excellent:"./assets/sounds/excellent.mp3",reach_score:"./assets/sounds/reach_score.mp3",reach_goal:"./assets/sounds/reach_goal.mp3",wait_opponent:"./assets/sounds/wait_opponent.mp3",win:"./assets/sounds/win.mp3",lose:"./assets/sounds/lose.mp3",draw:"./assets/sounds/win.mp3",fireworks_big:"./assets/sounds/fireworks_big.mp3",fireworks_soar:"./assets/sounds/fireworks_soar.mp3",fireworks_small:"./assets/sounds/fireworks_small.mp3"}},oT=GameCore.Configs,cT=oT.AppId,lT=oT.Notification,hT=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).isMusicLoaded=!1,n.handleFBInstantGameStarted=function(){window.__fbGameReady=!0,n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){lT.Enable&&(n.updatePlayerProfileToNotificationService(),lT.DisableSendNotification||n.sendNotificationForNewUser())},n.startGame=function(){n.analytics.event(Pt._.APP_READY),n.storage.dispatch((0,sT.I)(wa.Co.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,s=n.globalScene;try{var r=t(),o=ya(r),c=Ia(r),l=i.getPlayer(),h=(o.entryPointData||{}).type;if(l.isUserNew&&a.event(Pt._.NEW_USER),c===Aa)return void e(eT());if(c===Ea){if(h===ua)return void e(tT());if(h===pa)return void e(nT())}if(c===Sa)return void e(iT());if(l.isUserNew)return void e(aT());s.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE)}catch(u){s.events.emit(wa.K5.SWITCH,wa.Co.DASHBOARD_SCENE),console.warn(u)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(rT.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this,t=this.getLangCode();this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Pt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new YS("Load resources at LoadScene failed.");(0,i.R0)(t,{file:null==e?void 0:e.url})})),this.load.multiatlas(Ha.Z.DEFAULT.KEY,Ha.Z.DEFAULT.JSON.replace(/{\w+}/g,t),Ha.Z.DEFAULT.URL.replace(/{\w+}/g,t)),this.load.bitmapFont(Va.Z.PRIMARY.KEY,Va.Z.PRIMARY.TEXTURE.replace(/(fonts)/g,"fonts"+t),Va.Z.PRIMARY.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Va.Z.PRIMARY_LIGHT.KEY,Va.Z.PRIMARY_LIGHT.TEXTURE.replace(/(fonts)/g,"fonts"+t),Va.Z.PRIMARY_LIGHT.DATA.replace(/(fonts)/g,"fonts"+t)),this.load.bitmapFont(Va.Z.NUMBER_LIGHT.KEY,Va.Z.NUMBER_LIGHT.TEXTURE,Va.Z.NUMBER_LIGHT.DATA),this.load.bitmapFont(Va.Z.NUMBER_DARK.KEY,Va.Z.NUMBER_DARK.TEXTURE,Va.Z.NUMBER_DARK.DATA),this.load.atlas({key:Ha.Z.EFFECTS.KEY,textureURL:Ha.Z.EFFECTS.PATH.replace(/{\w+}/g,t),atlasURL:Ha.Z.EFFECTS.JSON.replace(/{\w+}/g,t)}),this.load.atlas({key:Ha.Z.GAMEPLAY_32.KEY,textureURL:Ha.Z.GAMEPLAY_32.TEXTURE,atlasURL:Ha.Z.GAMEPLAY_32.JSON}),this.load.atlas({key:Ha.Z.GAMEPLAY.KEY,textureURL:Ha.Z.GAMEPLAY.TEXTURE,atlasURL:Ha.Z.GAMEPLAY.JSON}),this.world.isLandscape()?this.load.image(fa.Z.BACKGROUND.KEY,fa.Z.BACKGROUND.FILE_LANDSCAPE):this.load.image(fa.Z.BACKGROUND.KEY,fa.Z.BACKGROUND.FILE_PORTRAIT),this.load.image(fa.Z.AVATAR.KEY,fa.Z.AVATAR.FILE),this.load.spine(Tu.BEST_SCORE.KEY,Tu.BEST_SCORE.JSON.replace(/{\w+}/g,t),Tu.BEST_SCORE.ATLAS.replace(/{\w+}/g,t)),this.load.spine(Tu.LOGO.KEY,Tu.LOGO.JSON,[Tu.LOGO.ATLAS],!0),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch(i.tO)},n.create=function(){this.audio.initSound(),this.audio.importSoundEffectKeys(rT.EFFECTS),this.analytics.event(Pt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.initModules(),this.setupGlobalScene(),this.lazyLoadResource(),this.startGame()},n.getLangCode=function(){var e="";switch(this.facebook.getLocale()){case"ru":e="/ru";break;case"pt":e="/pt";break;case"fr":e="/fr";break;case"hi":e="/hi";break;case"it":e="/it";break;case"id":e="/id";break;case"de":e="/de";break;case"ja":e="/ja";break;case"es":e="/es";break;case"zh":e="/zh";break;case"ar":e="/ar";break;case"tr":e="/tr"}return e},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,s=e.ASID,r={appId:cT,playerId:t,name:n,photo:i,locale:a,ASID:s};console.info("\ud83d\ude80 > profileData",r),ZS(r)},n.sendNotificationForNewUser=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.getPlayerIsNew()){e.next=4;break}return e.abrupt("return");case 4:if(t=this.player.getPlayerASID()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:if(n=e.t0,!0!==n.isNotificationFirstSent){e.next=16;break}return e.abrupt("return");case 16:this.facebook.sendNotificationAsync({message:"Hi @["+t+"] your friends are waiting to play with you, play now!",delayTime:14400}),FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.warn("\ud83d\ude80 > sendNotificationForNewUser",e.t1);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),n.setupGlobalScene=function(){var e=this.scene.get(wa.Co.GLOBAL_SCENE);e instanceof US.Z&&e.setup()},n.initModules=function(){new QA(this.game),new AA(this.game)},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadSounds(),e.lazyLoadLevel(),e.lazyLoadLives(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),1500)},n.lazyLoadLevel=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.storage.dispatch(Ah());case 7:this.loadLevelConfig(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.lazyLoadLives=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n,i,a,s,r,o,c,l,h,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game.player,i=n.getPlayer(),a=i.playerId,e.prev=2,t({type:Ni,payload:{}}),e.next=6,null==(s=window.FBInstant.player.getDataAsync(["lives"]))?void 0:s.lives;case 6:return r=e.sent,o=Nl(yA.LivesStore+"-"+a)||{},c=o.lives,l=void 0===c?IA.livesCapacity:c,h=o.lastBonusLifeTime,d=void 0===h?0:h,r&&(l=r.lives||0,d=r.lastBonusLifeTime||0),t({type:Bi,payload:{data:{lives:l,lastBonusLifeTime:d}}}),t((function(e,t){e(OA());var n=t(),i=60*IA.bonusDurationMins*1e3,a=(new Date).getTime(),s=xf(n),r=a-s;console.log(";remainingTime === ",r),e(r<i?CA(i-(a-s)):bA())})),e.next=15,t(RA());case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t({type:Gi,payload:{}});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,i.tO)(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=el(e),n=Pf[t];n||(n=Pf[Pf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return;this.load.tilemapTiledJSON(s,r),this.load.start()}catch(o){(0,i.tO)(o)}},n.loadSounds=function(){this.loadSoundEffects()},n.loadSoundEffects=function(){var e=this;B()(rT.EFFECTS).forEach((function(t){e.load.audio(t,rT.EFFECTS[t])}))},n.loadMusic=function(){if(!this.isMusicLoaded){this.isMusicLoaded=!0;var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+rT.BACKGROUND.KEY,this.handleLoadMusicCompleted),this.load.audio(rT.BACKGROUND.KEY,rT.BACKGROUND.FILE),this.load.start()}},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t=this.time.now,n=GameCore.Utils.Device.isDesktop()?4e3:7e3,a=Math.max(n-t,10),s={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",o=document.createElement("div");o.id="wait-ads-mask";var c=document.createElement("div");c.id="wait-ads-content",o.appendChild(c);var l=document.createElement("div");l.id="wait-ads-dual-ring",c.appendChild(l);var h=document.createElement("div");h.id="wait-ads-text",h.innerHTML=s,c.appendChild(h),document.body.appendChild(o),this.audio.muteAll(),setTimeout((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadPreRollAdAsync();case 5:return t.next=7,e.ads.showPreRollAdAsync();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,i.tO)(t.t0);case 12:return t.prev=12,o.remove(),e.ads.preloadInterstitialAdAsync().catch((function(){})),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(12);case 18:case"end":return t.stop()}}),t,null,[[0,9,12,18]])}))),a)}},n.loadTexture32Bit=function(e,t){var n=this,i=[];t.forEach((function(e){var t=GameCore.Utils.String.generateObjectId();n.load.image(t,e),i.push(t)})),this.load.start();this.textures.on(Phaser.Textures.Events.ADD,(function(t){var a=gt()(i).call(i,t);if(-1!==a){console.log("loadTexture32Bit",e);var s=n.textures.get(t),r=n.textures.get(e);r.source[a].glTexture=s.source[0].glTexture,r.source[a].glIndex=s.source[0].glIndex,r.source[a].glIndexCounter=s.source[0].glIndexCounter}}))},t}(Phaser.Scene),uT=hT,dT=n(191),pT={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n.n(dT)()(.55,.47,.43,.91),easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},gT=function(e){function t(t){return e.call(this,pT,t)||this}return(0,o.Z)(t,e),t}(ac.Z),fT=Ha.Z.DEFAULT,mT=fT.KEY,vT=fT.FRAME,ET=GameCore.Configs.Lives,ST=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.circle=void 0,n.icon=void 0,n.textLives=void 0,n.textTimer=void 0,n.textFull=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.iconBeat=void 0,n.intervalTimer=void 0,n.scene.add.existing((0,La.Z)(n)),n.createBackgroundLives(),n.createTextLives(),n.createTextTimer(),n.createTextFull(),n.createIconPlus(),n.createHeartBeatAnimation(),n.setSize(140,27),n.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(function(){n.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN)})),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackgroundLives=function(){this.background=this.scene.make.image({key:mT,frame:vT.LIVES_TIME_BLOCK}),this.background.setWorldSize(111,27),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.setFrameLivesTimeBlock2=function(){this.background.setFrame(vT.LIVES_TIME_BLOCK_2)},n.createIconPlus=function(){this.icon=this.scene.make.image({key:mT,frame:vT.ICON_PLUS}),this.icon.setWorldSize(14,14),this.add(this.icon),Phaser.Display.Align.In.Center(this.icon,this,-62,11)},n.createTextLives=function(){this.circle=this.scene.make.image({key:mT,frame:vT.LIVES_HEART}),this.circle.setWorldSize(38,31),this.add(this.circle),Phaser.Display.Align.In.Center(this.circle,this,-51,0);var e=this.scene.storage.getState(),t=wf(e);this.textLives=this.scene.make.text({text:""+t,style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.circle)},n.createTextTimer=function(){this.textTimer=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:"00:00",origin:{x:.2,y:.5}}),this.add(this.textTimer),Phaser.Display.Align.In.Center(this.textTimer,this,6,2)},n.createTextFull=function(){this.textFull=this.scene.make.text({text:this.scene.lang.Text.FULL,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textFull.setTint(15651762),this.textFull.setVisible(!1),this.add(this.textFull),Phaser.Display.Align.In.Center(this.textTimer,this,6,0)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=wf(e);this.textLives.setText(t)},n.startIntervalTimer=function(){var e=this;this.runHeartBeatAnimation();var t=60*ET.bonusDurationMins*1e3,n=this.scene.lang;this.intervalTimer=setInterval((function(){var i,a,s=e.scene.storage.getState(),r=wf(s)||0;if(r===ET.livesCapacity)return e.textTimer.setText(n.Text.FULL),e.textLives.setText(String(ET.livesCapacity)),void("ar"==e.scene.facebook.getLocale()&&(e.textTimer.setVisible(!1),e.textFull.setVisible(!0)));var o=kf(s),c=xf(s),l=(new Date).getTime();l-c<t&&(o=c);var h=(0,To.ne)(t-(l-o)),u=Me()(i="0"+h.minutes).call(i,-2),d=Me()(a="0"+h.seconds).call(a,-2);parseInt(e.textLives.text)!==r&&e.updateTextLives(),e.textTimer.setText(u+":"+d)}),1e3)},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setLives=function(e){this.textLives.setText(String(e))},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play(),this.iconBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new gT({targets:[this.circle],props:{scale:"+=0.005"}}),this.textLivesBeat=new gT({targets:[this.textLives],props:{scale:"+=0.05"}}),this.iconBeat=new gT({targets:[this.icon],props:{scale:"+=0.025"}})},t}(Phaser.GameObjects.Container),AT=ST,TT=Ha.Z.DEFAULT,yT=TT.KEY,IT=TT.FRAME,CT=GameCore.Configs.Lives,bT=function(e){function t(t){var n;return(n=e.call(this,t,yT,IT.BUTTON_GREEN)||this).heart=void 0,n.textLives=void 0,n.groupHeartBeat=void 0,n.heartBeat=void 0,n.textLivesBeat=void 0,n.icon=void 0,n.text=void 0,n.button.setWorldSize(251,63),n.setName("RefillLives"),n.createText(),n.createIcon(),n.alignItem(),n.createHeart(),n.createHeartBeatAnimation(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:yT,frame:IT.TEXT_REFILL_LIVES}),this.text.setWorldSize(this.text.width/e,this.text.height/e),this.add(this.text)},n.createIcon=function(){this.icon=this.scene.make.image({key:yT,frame:IT.ICON_ADS}),this.icon.setWorldSize(33,32),this.add(this.icon)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+n/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,s-i,-2),Phaser.Display.Align.In.Center(this.text,this,a-i,-2)},n.createHeart=function(){this.heart=this.scene.make.image({key:yT,frame:IT.LIVES_HEART}),this.heart.setAngle(-30),this.heart.setWorldSize(46,36),this.add(this.heart),Phaser.Display.Align.In.Center(this.heart,this,-120,-25),this.textLives=this.scene.make.text({text:"+"+CT.livesCapacity,style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(40)+"px",fontStyle:"700"},origin:{x:.5,y:.5}}),this.textLives.setAngle(-30),this.add(this.textLives),Phaser.Display.Align.In.Center(this.textLives,this.heart)},n.runHeartBeatAnimation=function(){this.heartBeat.play(),this.textLivesBeat.play()},n.createHeartBeatAnimation=function(){this.heartBeat=new gT({targets:[this.heart],props:{scale:"+=0.005"}}),this.textLivesBeat=new gT({targets:[this.textLives],props:{scale:"+=0.025"}})},t}(Wa.Z),OT=bT,PT=Ha.Z.DEFAULT,RT=PT.KEY,wT=PT.FRAME,xT=GameCore.Configs,kT=xT.Network,_T=xT.Lives,LT=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.currentScreen=void 0,s.refillLivesButton=void 0,s.textTitle=void 0,s.livesContent=void 0,s.textContent=void 0,s.textContent2=void 0,s.adsTimer=void 0,s.livesTimer=void 0,s.intervalTimer=void 0,s.textBlock=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.clickPlayWithFriend=function(){s.scene.storage.dispatch(Bh()),s.currentScreen&&s.currentScreen.setVisible(!1),s.close()},s.handleShowRewardedVideoAd=(0,r.Z)(u().mark((function e(){var t,n,i,a,o,c,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.scene.game,n=t.globalScene,i=t.audio,a=t.lang,e.prev=1,n.screen.open(Za.o4.NOTIFY_SCREEN,{message:a.Text.LOADING_AD+"...",duration:kT.Timeout,loading:!0}),i.pauseMusic(),i.muteAll(),e.next=7,new(l())((function(e,t){var n;null==(n=s.adsTimer)||n.remove(),s.adsTimer=s.scene.time.delayedCall(kT.Timeout,t),s.scene.ads.getAdStatus(GameCore.Ads.Types.REWARDED)===GameCore.Ads.Status.LOADING?s.scene.ads.events.once(GameCore.Ads.Events.LOADED,e):s.scene.ads.preloadRewardedVideoAsync().then(e).catch(t)}));case 7:return e.next=9,s.scene.ads.showRewardedVideoAsync();case 9:s.scene.ads.preloadRewardedVideoAsync().catch((function(e){})),n.screen.events.off(GameCore.Screens.Events.CLOSE),i.playSound(Ya.Z.DAILY_REWARD),n.screen.close(Za.o4.NOTIFY_SCREEN),s.scene.analytics.showRewardedVideoAd(s.getScreenName()),s.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={lives:IA.livesCapacity,lastBonusLifeTime:(new Date).getTime()},e.next=4,t(wA(n));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),s.close(),e.next=25;break;case 18:if(e.prev=18,e.t0=e.catch(1),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=24;break}if("USER_INPUT"!==e.t0.code){e.next=24;break}return s.showNotifySkipAds(),e.abrupt("return");case 24:s.showNotifyNoAds();case 25:return e.prev=25,null==(o=s.adsTimer)||o.destroy(),i.unmuteAll(),i.playMusic(),s.scene.screen.close(s.name),c=s.getData(["onClose"]),(h=c[0])&&h(),e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[1,18,25,33]])}))),s.showNotifyNoAds=function(e){if(!e||e.name===Za.o4.NOTIFY_SCREEN){var t=s.scene.game,n=t.globalScene,i=t.lang;n.screen.events.off(GameCore.Screens.Events.CLOSE),n.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),n.screen.open(Za.o4.NOTIFY_SCREEN,{message:i.Text.NO_ADS_TO_DISPLAY,duration:2e3,loading:!1})}},s.showNotifySkipAds=function(){var e=s.scene.game,t=e.globalScene,n=e.lang;t.screen.events.off(GameCore.Screens.Events.CLOSE),t.screen.events.once(GameCore.Screens.Events.CLOSE,s.showGameOver),t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.NO_REWARDS+"\n"+n.Text.CANCELLED_AD,duration:3e3,loading:!1})},s.showGameOver=function(e){e&&e.name!==Za.o4.NOTIFY_SCREEN||s.scene.screen.close(s.name)},s.createPopup(),s.createLivesTimer(),s.createTitle(),s.createContentBackground(),s.createLiveContent(),s.createTextContent(),s.createButtons(),s.addItem(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.updateIntervalTimer(),this.startIntervalTimer(),this.runOpenAnimation(),null!=t&&t.currentScreen&&(this.currentScreen=t.currentScreen),this.showLivesTimer()},n.showLivesTimer=function(){var e=this.getData(["showLivesTimer"])[0];this.livesTimer.setVisible(e),e&&this.livesTimer.startIntervalTimer()},n.createLivesTimer=function(){this.livesTimer=new AT(this.scene),this.popup.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this.popup,0,-270)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:RT,frame:wT.LIVES_HEART}),this.backgroundContent.setWorldSize(114,93),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createLiveContent=function(){var e=this.scene.storage.getState(),t=wf(e);this.livesContent=this.scene.make.text({text:""+t,style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(150)+"px",fontStyle:"700",align:"center"}}),this.livesContent.setTint(16777215),this.popup.add(this.livesContent),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)},n.createTextContent=function(){this.textBlock=this.scene.make.image({key:RT,frame:wT.LIVES_TIME_BLOCK}),this.popup.add(this.textBlock),this.textBlock.setWorldSize(227,40),Phaser.Display.Align.In.Center(this.textBlock,this.backgroundContent,0,80),this.textContent=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),origin:{x:.5,y:.5}}),this.popup.add(this.textContent),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2),this.textContent2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textContent2.setTint(15651762),this.textContent2.setVisible(!1),this.popup.add(this.textContent2),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2)},n.startIntervalTimer=function(){var e=this;this.intervalTimer=setInterval((function(){e.updateIntervalTimer()}),1e3)},n.updateIntervalTimer=function(){var e,t,n=60*_T.bonusDurationMins*1e3,i=this.scene.storage.getState(),a=wf(i),s=kf(i),r=xf(i),o=(new Date).getTime();o-r<n&&(s=r);var c=(0,To.ne)(n-(o-s)),l=Me()(e="0"+c.minutes).call(e,-2),h=Me()(t="0"+c.seconds).call(t,-2);this.setTextContent(this.scene.lang.Text.Next_life+": "+l+":"+h);var u=this.scene.world.getPixelRatio();a>0?this.textTitle.setFrame(wT.TEXT_KEEP_PLAYING):this.textTitle.setFrame(wT.TEXT_OUT_OF_LIVE);var d=this.textTitle,p=d.width,g=d.height;this.textTitle.setWorldSize(p/u,g/u),parseInt(this.livesContent.text)!=a&&(this.livesContent.setText(""+a),Phaser.Display.Align.In.Center(this.livesContent,this.backgroundContent,0,0)),a===_T.livesCapacity?(this.setTextContent(this.scene.lang.Text.FULL),this.refillLivesButton.setVisible(!1)):(this.refillLivesButton.setVisible(!0),this.refillLivesButton.runHeartBeatAnimation())},n.stopIntervalTimer=function(){clearInterval(this.intervalTimer)},n.setTextContent=function(e){this.textContent.setText(e),Phaser.Display.Align.In.Center(this.textContent,this.textBlock,0,2);var t=this.scene.facebook.getLocale();"id"==t&&this.textContent.setFontSize(this.scene.fontSize(35)),"ar"==t&&(this.textContent2.setText(e),this.textContent2.setVisible(!0),this.textContent.setVisible(!1),Phaser.Display.Align.In.Center(this.textContent2,this.textBlock,0,2))},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-30,290,323),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-30)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.textTitle=this.scene.make.image({key:RT,frame:wT.TEXT_OUT_OF_LIVE});var t=this.textTitle,n=t.width,i=t.height;this.textTitle.setWorldSize(n/e,i/e),this.buttonClose=new Wa.Z(this.scene,RT,wT.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.handleClose,this.title.add([this.textTitle,this.buttonClose]),this.popup.add([this.title]),Phaser.Display.Align.In.Center(this.textTitle,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createButtons=function(){this.createRefillLivesButton()},n.createRefillLivesButton=function(){this.refillLivesButton=new OT(this.scene),this.popup.add(this.refillLivesButton),this.refillLivesButton.onClick=this.handleShowRewardedVideoAd,Phaser.Display.Align.In.Center(this.refillLivesButton,this.popup,0,85)},n.addItem=function(){this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){var n=this;if(!this.popupFadeOutMaskAnimation){var i=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:i,from:i,to:0}},onComplete:function(){var e=n.getData(["onClose"])[0];e&&e()}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),MT=LT,DT=Ha.Z.DEFAULT,NT=DT.KEY,BT=DT.FRAME,GT=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.scene.add.existing((0,La.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createBackground=function(){this.background=this.scene.make.image({key:NT,frame:BT.FOOTER,origin:{x:.5,y:1}}),this.background.setWorldSize(375,85),this.add(this.background)},t}(Phaser.GameObjects.Container),FT=GT,UT=Ha.Z.DEFAULT,HT=UT.KEY,ZT=UT.FRAME,YT=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,HT,ZT.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,La.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),WT=YT,VT=function(e){function t(t){var n;return(n=e.call(this,t)||this).leaf=void 0,n.scene.add.existing((0,La.Z)(n)),n}return(0,o.Z)(t,e),t.prototype.createLeaf=function(){this.leaf=new WT(this.scene),this.add(this.leaf),Phaser.Display.Align.In.Center(this.leaf,this,0,this.leaf.displayHeight/2)},t}(Phaser.GameObjects.Container),zT=VT,KT=Ha.Z.DEFAULT,jT=KT.KEY,XT=KT.FRAME,JT=GameCore.Configs.Match,qT=function(e){function t(t){var n;return(n=e.call(this,t,jT,XT.BUTTON_MINOR)||this).suggestDailyMode=void 0,n.button.setWorldSize(62,53),n.setName("DailyChallenge"),n.createIcon(),n.createSuggestDailyMode(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:jT,frame:XT.ICON_DAILY});e.setWorldSize(35,35),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2.5)},n.createSuggestDailyMode=function(){this.suggestDailyMode=this.scene.make.image({key:jT,frame:XT.ICON_DOT_RED}),this.suggestDailyMode.setWorldSize(17,17),this.suggestDailyMode.setVisible(!1),this.add(this.suggestDailyMode),Phaser.Display.Align.In.Center(this.suggestDailyMode,this,28,-25)},n.checkSuggestDailyMode=function(){var e=window.game.player.getPlayer().playerId,t=Nl(JT.JourneyMatchStore+"-"+e)||{},n=Object(t).updateAt||0;(0,To.Gm)(n)?this.suggestDailyMode.setVisible(!1):this.suggestDailyMode.setVisible(!0)},t}(Wa.Z),QT=qT,$T=Ha.Z.DEFAULT,ey=$T.KEY,ty=$T.FRAME,ny=function(e){function t(t){var n;return(n=e.call(this,t,ey,ty.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,54),n.setName("Journey"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:ey,frame:ty.ICON_JOURNEY}),this.icon.setWorldSize(35,29),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:ey,frame:ty.TEXT_JOURNEY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),iy=ny,ay=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).logo=void 0,a.drawLogo(),t.add.existing((0,La.Z)(a)),a}return(0,o.Z)(t,e),t.prototype.drawLogo=function(){var e=this;this.logo=this.scene.add.spine(0,0,Tu.LOGO.KEY,Tu.LOGO.ANIMATIONS.START_GROW),this.add(this.logo),this.logo.on("complete",(function(t){t.animation.name===Tu.LOGO.ANIMATIONS.START_GROW&&e.logo.play(Tu.LOGO.ANIMATIONS.IDLE_GROW,!0)}))},t}(Phaser.GameObjects.Container),sy=ay,ry=Ha.Z.DEFAULT,oy=ry.KEY,cy=ry.FRAME,ly=function(e){function t(t){var n;return(n=e.call(this,t,oy,cy.BUTTON_GREEN_LARGE)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(242,70),n.setName("PlaySingle"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:oy,frame:cy.ICON_PLAY_GREEN}),this.icon.setWorldSize(31,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:oy,frame:cy.TEXT_SINGLE});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),hy=ly,uy=Ha.Z.DEFAULT,dy=uy.KEY,py=uy.FRAME,gy=function(e){function t(t){var n;return(n=e.call(this,t,dy,py.BUTTON_MINOR)||this).button.setWorldSize(62,53),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:dy,frame:py.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-1.5)},t}(Wa.Z),fy=gy,my=function(e){function t(t){var n;return(n=e.call(this,t)||this).logo=void 0,n.playSingleButton=void 0,n.journeyButton=void 0,n.dailyChallengeButton=void 0,n.settingButton=void 0,n.playSingleButtonAnimation=void 0,n.createLogo(),n.createPlaySingleButton(),n.createJourneyButton(),n.createDailyChallengeButton(),n.createSettingButton(),n.alignButton(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createLogo=function(){this.logo=new sy(this.scene,0,0),this.logo.setDepth(Ua.Z.ON_TOP),this.add(this.logo),Phaser.Display.Align.In.Center(this.logo,this,0,-140)},n.createPlaySingleButton=function(){this.playSingleButton=new hy(this.scene),this.add(this.playSingleButton)},n.runPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation.play()},n.createPlaySingleButtonAnimation=function(){this.playSingleButtonAnimation=new gT({targets:[this.playSingleButton],props:{scale:{from:1,to:1.05}}})},n.createJourneyButton=function(){this.journeyButton=new iy(this.scene),this.add(this.journeyButton)},n.createDailyChallengeButton=function(){this.dailyChallengeButton=new QT(this.scene),this.add(this.dailyChallengeButton)},n.createSettingButton=function(){this.settingButton=new fy(this.scene),this.add(this.settingButton)},n.alignButton=function(){Phaser.Display.Align.In.Center(this.playSingleButton,this,0,44),Phaser.Display.Align.In.Center(this.journeyButton,this,0,118),Phaser.Display.Align.In.Center(this.dailyChallengeButton,this,-60,192),Phaser.Display.Align.In.Center(this.settingButton,this,60,192)},t}(Phaser.GameObjects.Container),vy=my,Ey=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.main=void 0,n.header=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new zT(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new vy(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new FT(this.scene),this.group.add(this.footer)},t}(Sg),Sy=Ey,Ay=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.footer.setVisible(!0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ig),Ty=Ay,yy=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.main.setPosition(0,0),this.objects.main.setScale(.95),this.objects.footer.setVisible(!1),Phaser.Display.Align.In.Center(this.objects.main.logo,this.objects.main,0,-150),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e)}},t}(Ty),Iy=yy,Cy=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new Sy(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new Iy(this.scene):this.layout=new Ty(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){},n.updateUIState=function(){},t}(kg),by=Cy,Oy=[{key:"daily-level-0",mapJson:"./assets/json/daily-levels/level-0.json"}],Py=1;Py<=57;Py++)Oy.push({key:"daily-level-"+Py,mapJson:"./assets/json/daily-levels/level-"+Py+".json"});var Ry=function(){var e=new Date("01/01/2022"),t=(new Date).getTime()-e.getTime();return Math.floor(t/864e5)%Oy.length},wy=function(){var e=Ry();return Oy[e]},xy=Ha.Z.DEFAULT,ky=xy.KEY,_y=xy.FRAME,Ly=function(e){function t(t){var n;return(n=e.call(this,t,ky,_y.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:ky,frame:_y.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:ky,frame:_y.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),My=Ly,Dy="score",Ny="collect",By=Ha.Z.DEFAULT,Gy=By.KEY,Fy=By.FRAME,Uy=Ha.Z.GAMEPLAY,Hy=Uy.KEY,Zy=Uy.FRAME,Yy=Ha.Z.GAMEPLAY_32,Wy=Yy.KEY,Vy=Yy.FRAME,zy=GameCore.Configs,Ky=zy.Network,jy=zy.Board,Xy=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.panelCollection=void 0,s.tileCollection=void 0,s.textScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTextScore(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){console.log("ex === ",r)}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.showLoadingScreen(),this.loadLevelConfig();case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=wy(),t=e.key,n=e.mapJson;if(this.scene.cache.tilemap.exists(t))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(t,n),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(a){(0,i.tO)(a)}},n.handleLoadCurrentMapComplete=function(){this.startGame(),this.hideLoadingScreen()},n.updateContent=function(){this.resetTarget(),this.updateTargetType(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.scene.storage.dispatch(Ah());case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,i.tO)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:Ky.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Gy,frame:Fy.TEXT_DAILY_CHALLENGE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,Gy,Fy.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-26),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Va.Z.NUMBER_DARK.KEY,size:this.scene.fontSize(54),origin:{x:.5,y:.5},text:"0"}),this.popup.add(this.textScore)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio();this.tileCollection=this.scene.make.image({key:Gy,frame:Fy.TEXT_COLLECT});var t=this.tileCollection,n=t.width,i=t.height;this.tileCollection.setWorldSize(n/e,i/e),this.panelCollection=this.scene.make.image({key:Gy,frame:Fy.WOOD_PANEL}),this.panelCollection.setWorldSize(200,37),this.popup.add([this.tileCollection,this.panelCollection]),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),Phaser.Display.Align.In.Center(this.panelCollection,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=wy().key,i=this.scene.make.tilemap({key:n}).properties;if(i&&(0,_f.isArray)(i)&&!(i.length<2))for(var a=i[0].value,s=If()(e=If()(t=If()(a).call(a,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),r=JSON.parse(s),o=B()(r),c=this.calcPosition(o.length),l=0;l<o.length;l++){var h=o[l],u=Av[h],d=r[h],p=this.targetData[l];p||(p=this.spawnTargetItem(u,d));var g=p,f=g.container,m=g.text,v=g.gem;f.setVisible(!0),m.setText("x"+d),v.setFrame(u),this.targetData.push(p),Phaser.Display.Align.In.Center(f,this.popup,c[l],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:Wy,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:Hy,frame:Zy.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<jy.rows;e++){this.boardCellData[e]=[];for(var t=0;t<jy.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=Vy.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.updateTargetType=function(){var e=wy().key,t=this.scene.make.tilemap({key:e}).properties;if(t&&(0,_f.isArray)(t)&&!(t.length<2)){var n=t[0].value,i=t[1].value,a=this.scene.world.getPixelRatio();if(i===Dy){this.panelCollection.setVisible(!1),this.tileCollection.setFrame(Fy.TEXT_TARGET_SCORE);var s=this.tileCollection,r=s.width,o=s.height;return this.tileCollection.setWorldSize(r/a,o/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-150),this.textScore.setText(""+n).setVisible(!0),void Phaser.Display.Align.In.Center(this.textScore,this.popup,0,-125)}this.panelCollection.setVisible(!0),this.tileCollection.setFrame(Fy.TEXT_COLLECT);var c=this.tileCollection,l=c.width,h=c.height;this.tileCollection.setWorldSize(l/a,h/a),Phaser.Display.Align.In.Center(this.tileCollection,this.popup,0,-155),this.textScore.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<jy.rows;e++)for(var t=0;t<jy.cols;t++){this.boardCellData[e][t].setFrame(Vy.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Zu()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Gv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=wy().key,t=this.scene.make.tilemap({key:e}).layers;if((0,_f.isArray)(t)){var n=t[0].data;if((0,_f.isArray)(n))for(var i=0;i<n.length;i++)for(var a=n[i],s=0;s<a.length;s++){var r=a[s];if(!(r.index<0)){var o=Av[r.index-1];this.boardCellData[i][s].setFrame(o)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:Wy,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new My(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState();el(t)>Pf.length||(e.scene.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:xn,payload:{}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.scene.storage.dispatch(Dh()),e.scene.analytics.event(Pt._.DAILY_CHALLENGE_BEGIN))}))},n.getLevelName=function(e){var t;return"journey_"+Fa()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),Jy=Ha.Z.DEFAULT,qy=Jy.KEY,Qy=Jy.FRAME,$y=Ha.Z.GAMEPLAY,eI=$y.KEY,tI=$y.FRAME,nI=Ha.Z.GAMEPLAY_32,iI=nI.KEY,aI=nI.FRAME,sI=GameCore.Configs,rI=sI.Network,oI=sI.Board,cI=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}};try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){console.log("ex === ",r)}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=el(e),n=Pf[t];n||(n=Pf[Pf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.scene.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(s,r),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Ah());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:rI.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:qy,frame:Qy.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,qy,Qy.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:qy,frame:Qy.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:qy,frame:Qy.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=el(n),a=Pf[i];a||(a=Pf[Pf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,_f.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=If()(e=If()(t=If()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=Av[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:iI,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:eI,frame:tI.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<oI.rows;e++){this.boardCellData[e]=[];for(var t=0;t<oI.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=aI.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=Qc(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<oI.rows;e++)for(var t=0;t<oI.cols;t++){this.boardCellData[e][t].setFrame(aI.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Zu()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Gv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=el(e),n=Pf[t];n||(n=Pf[Pf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,_f.isArray)(i)){var a=i[0].data;if((0,_f.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=Av[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:iI,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new My(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this,t=this.scene.storage.getState();wf(t)<1?this.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN):(this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=el(t);n>Pf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Dh()))})))},n.getLevelName=function(e){var t;return"journey_"+Fa()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),lI=Ha.Z.DEFAULT,hI=lI.KEY,uI=lI.FRAME,dI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Jp(199),s.scene.player.setSetting("vibrate",e)},s.createPopup(),s.createContentBackground(),s.createTitle(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){var e=this.scene.make.image({key:hI,frame:uI.POPUP_CONTENT_BACKGROUND});e.setWorldSize(260,145),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-4)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,286,226),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:hI,frame:uI.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new Wa.Z(this.scene,hI,uI.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-18)},n.createButtons=function(){var e=this.scene.player.getPlayerSettings(),t=e.sound,n=e.vibrate;this.createSoundButton(t),jp()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.popup,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,0)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:hI,frame:uI.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new XE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:hI,frame:uI.ICON_SOUND});t.setWorldSize(40,35),this.settingSound=new XE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.popup,0,-33)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),pI=dI,gI=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).layoutManager=void 0,n.run=function(){n.initManager(),n.checkAndAddShortcut(),n.layoutManager.objects.main.dailyChallengeButton.checkSuggestDailyMode()},n.onCreate=function(){var e=n.storage.getState(),t=Ic(e);null===t?n.storage.dispatch(_h(!1)):!1===t&&n.showMiniJourneyScreen(),n.run()},n.onResume=function(){n.run()},n.onWake=function(){n.run();var e=n.storage.getState();Ic(e)||n.showMiniJourneyScreen()},n.clickPlayWithFriend=function(){n.storage.dispatch(Bh())},n.clickPlaySolo=function(){n.storage.dispatch(Mh())},n.clickJourney=function(){console.log("Click journey"),n.storage.dispatch(Dh())},n.clickLevelScene=function(){console.log("Click Level Scene"),n.scene.switch(wa.Co.LEVEL_SCENE)},n.clickLeaderBoard=function(){n.screen.open(Za.o4.LEADER_BOARD_SCREEN)},n.clickJourney1=function(){console.log("Click journey 1"),n.scene.switch(wa.Co.LEVEL_SCENE)},n.clickSetting=function(){n.screen.open(Za.o4.SETTINGS_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.showDailyChallengeScreen=function(){this.storage.dispatch(_h(!0)),this.screen.open(Za.o4.DAILY_CHALLENGE_SCREEN)},n.checkAndAddShortcut=function(){var e=this.storage.getState();Ia(e)===va&&this.facebook.attemptToAddShortcut()},n.preload=function(){this.events.on("wake",this.onWake),this.events.on("resume",this.onResume),this.events.on("create",this.onCreate)},n.create=function(){e.prototype.create.call(this),this.createBackground(fa.Z.BACKGROUND.KEY),this.createManager(),this.createScreens(),this.listenEvents()},n.createBg=function(){var e=this.make.image({key:fa.Z.BACKGROUND.KEY}),t=this.make.image({key:fa.Z.BACKGROUND.KEY});t.setFlipY(!0),Phaser.Display.Align.In.Center(e,this.gameZone),Phaser.Display.Align.In.Center(t,this.gameZone)},n.createManager=function(){this.layoutManager=new by(this)},n.initManager=function(){this.layoutManager.init()},n.listenEvents=function(){var e=this.layoutManager.objects.main;e.setDepth(Ua.Z.LOGO),e.playSingleButton.onClick=this.clickPlaySolo,e.journeyButton.onClick=this.clickLevelScene,e.dailyChallengeButton.onClick=this.showDailyChallengeScreen.bind(this),e.settingButton.onClick=this.clickSetting},n.createScreens=function(){this.createSettingsScreen(),this.createLeaderBoardScreen(),this.createDailyChallengeScreen(),this.createMiniJourneyScreen(),this.createClaimHeartScreen()},n.createSettingsScreen=function(){this.screen.add(Za.o4.SETTINGS_SCREEN,pI)},n.createLeaderBoardScreen=function(){this.screen.add(Za.o4.LEADER_BOARD_SCREEN,Su)},n.createDailyChallengeScreen=function(){this.screen.add(Za.o4.DAILY_CHALLENGE_SCREEN,Xy)},n.createMiniJourneyScreen=function(){this.screen.add(Za.o4.MINI_JOURNEY_SCREEN,cI)},n.createClaimHeartScreen=function(){this.screen.add(Za.o4.CLAIM_HEART_SCREEN,MT)},n.showMiniJourneyScreen=function(){this.storage.dispatch(_h(!0)),this.screen.open(Za.o4.MINI_JOURNEY_SCREEN)},t}(Au.Z);var fI=gI,mI=Ha.Z.GAMEPLAY_32,vI=mI.KEY,EI=mI.FRAME,SI=function(e){function t(t,n){var i;return(i=e.call(this,t,n.x+(n.padding||0),n.y+(n.padding||0))||this).canCapture={direction:"bottom",angle:0},i.status=void 0,i.rateShaking=1,i.t0=0,i.x0=void 0,i.y0=void 0,i.v0=void 0,i.alpha0=void 0,i.scale0=void 0,i.maxScale0=void 0,i.scaleRate0=void 0,i.imageBreak=void 0,i.imageCell=void 0,i.imageGameOver=void 0,i.imageGameStart=void 0,i.imageHighlight=void 0,i.tweenImageGameOver=void 0,i.tweenImageHighlight=void 0,i.tweenScaleDown=void 0,i.tweenAlphaImageBreak=void 0,i.tweenStartMission=void 0,i.setSize(n.width,n.height),i.x0=n.x+(n.padding||0),i.y0=n.y+(n.padding||0),i.createImageCell(),i.createImageGameStart(),i.createImageBreak(),i.createImageGameOver(),i.createImageHighlight(),i.createTweenImageGameOver(),i.createTweenImageGHighlight(),i.createTweenScaleDown(),i.createTweenAlphaImageBreak(),i.createTweenStartMission(),t.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.createImageCell=function(){this.imageCell=this.scene.make.image({key:vI,frame:EI.GEM_TRANSPARENT}),this.imageCell.setWorldSize(this.width,this.height),this.add(this.imageCell),this.scale0=this.imageCell.scale},n.createImageBreak=function(){this.imageBreak=this.scene.make.image({key:vI,frame:EI.GEM_WHITE}),this.imageBreak.setVisible(!1),this.imageBreak.setWorldSize(this.width,this.height),this.add(this.imageBreak)},n.createImageGameStart=function(){this.imageGameStart=this.scene.make.image({key:vI,frame:EI.GEM_GLARE}),this.imageGameStart.setVisible(!1),this.imageGameStart.setWorldSize(this.width,this.height),this.add(this.imageGameStart)},n.createImageGameOver=function(){this.imageGameOver=this.scene.make.image({key:vI,frame:EI.GEM_SILVER}),this.imageGameOver.setVisible(!1),this.imageGameOver.setWorldSize(this.width,this.height),this.add(this.imageGameOver)},n.createTweenImageGameOver=function(){this.tweenImageGameOver=this.scene.add.tween({targets:[this.imageGameOver],duration:1200,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createImageHighlight=function(){this.imageHighlight=this.scene.make.image({key:vI,frame:EI.GEM_LIGHT}),this.imageHighlight.setVisible(!1),this.imageHighlight.setWorldSize(this.width,this.height),this.add(this.imageHighlight)},n.createTweenImageGHighlight=function(){this.tweenImageHighlight=this.scene.add.tween({targets:[this.imageHighlight],duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1,start:0},paused:!0})},n.createTweenStartMission=function(){this.tweenStartMission=this.scene.add.tween({targets:[this.imageGameStart],duration:200,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:0,to:this.scale0,start:0},alpha:{from:0,to:1,start:0},yoyo:!0,paused:!0})},n.createTweenScaleDown=function(){var e=this.imageBreak.scale;this.tweenScaleDown=this.scene.add.tween({delay:100,targets:[this.imageBreak],duration:600,ease:Phaser.Math.Easing.Quadratic.InOut,scale:{from:e,to:0,start:e},paused:!0})},n.createTweenAlphaImageBreak=function(){this.tweenAlphaImageBreak=this.scene.add.tween({targets:[this.imageBreak],duration:150,ease:Phaser.Math.Easing.Sine.InOut,alpha:{from:.2,to:.68},paused:!0})},n.showImageHighlight=function(){var e=this.imageCell.frame.name+"_light";this.imageHighlight.setFrame(e),this.imageHighlight.setVisible(!0).setAlpha(1)},n.hideImageHighlight=function(){this.imageHighlight.setVisible(!1)},n.isHighlight=function(){return this.imageHighlight.visible},n.isShaking=function(){return"SHAKING"===this.status},n.playAnimShaking=function(){this.status="SHAKING"},n.playTweenBreaking=function(){this.status="BREAKING"},n.setRateShaking=function(e){this.rateShaking=e},n.stopAnimShaking=function(){this.rotation=0,this.status=""},n.reset=function(){this.scale=1,this.alpha=1,this.imageCell.setAlpha(1)},n.resetImageBreak=function(){this.imageBreak.rotation=0,this.imageBreak.scale=this.scale0,this.imageBreak.setVisible(!1)},n.resetImageGameOver=function(){this.imageGameOver.setVisible(!1)},n.playAnimImageGameOver=function(){this.resetImageGameOver(),this.imageGameOver.setVisible(!0).setAlpha(0),this.tweenImageGameOver.play()},n.playTweenScaleDown=function(){this.resetImageBreak(),this.imageBreak.setVisible(!0).setScale(this.scale0).setAlpha(0),this.tweenAlphaImageBreak.play(),this.tweenScaleDown.play()},n.playTweenStartMission=function(){this.imageGameStart.setVisible(!0).setAlpha(0),this.tweenStartMission.play()},n.preUpdate=function(){if("SHAKING"===this.status)this.rotation+=.015*this.rateShaking,this.rotation>.1&&(this.rateShaking=-1),this.rotation<-.1&&(this.rateShaking=1)},n.handleTweenBreaking=function(){var e=this.alpha0<90?1:-1;this.t0+=3e3/1900;var t=.016*this.t0,n=Mu(this.v0,this.alpha0,t),i=Du(this.v0,this.alpha0,t);this.imageBreak.x=this.x0+n,this.imageBreak.y=this.y0-i,console.log("this.imageBreak.y === ",t,this.t0,this.imageBreak.y),this.imageBreak.rotation+=.04*e,this.imageBreak.scale>.4?this.imageBreak.scale-=this.scale0:this.imageBreak.scale=.4;var a=this.scene.gameZone,s=a.width,r=a.height;(this.imageBreak.x-this.imageBreak.displayWidth/2<0||this.imageBreak.x+this.imageBreak.displayWidth/2>s||this.imageBreak.y-this.imageBreak.displayHeight/2>r)&&(this.status="")},n.setFrameImageCell=function(e){this.imageCell.setFrame(e)},n.setAlphaImageCell=function(e){this.imageCell.setAlpha(e)},n.setScaleImageCell=function(e){this.imageCell.setScale(e)},n.getFrameImageCell=function(){return this.imageCell.frame.name},t}(Phaser.GameObjects.Container),AI=SI,TI=Ha.Z.GAMEPLAY_32,yI=TI.KEY,II=TI.FRAME,CI=GameCore.Configs.Board,bI=CI.cols,OI=CI.rows,PI=function(e){function t(n,i,a){var s;return(s=e.call(this,n)||this).scene=void 0,s.type=void 0,s.direction=void 0,s.isReverse=!1,s.data=[],s.matrixData=void 0,s.texture=void 0,s.frame=void 0,s.maxHeight=void 0,s.cellItems=[],s.originalData=void 0,s.isSetDrag=!1,s.isCreateCell=!1,s.wrap=void 0,s.wrapPiece=void 0,s.isDragEnd=!1,s.isActive=!0,s.isVisible=!0,s.pointerY=void 0,s.parentHeight=void 0,s.index=void 0,s.props=void 0,s.cells=[],s.parent=void 0,s.moveTopNumber=30,s.backupPx=void 0,s.backupPy=void 0,s.animMoveTopAndScaleUp=void 0,s.animMoveDownAndScaleDown=void 0,s.animScaleUp=void 0,s.animScaleDown=void 0,s.distancePY=void 0,s.isCanMove=void 0,s.correctAlpha=1,s.props=a,s.type=a.type,s.matrixData=a.matrixData,s.data=t.buildData(s.matrixData),s.direction=a.direction||null,s.parentHeight=a.parentHeight||0,s.isReverse=a.isReverse||!1,s.parent=i,s.scene=n,s.scene.world.isLandscape()?s.setSize(i.width,i.height/3):s.setSize(i.width/3,i.height),s.scene.add.existing((0,La.Z)(s)),s.createWrapPiece(),s.listenEvents(),s}(0,o.Z)(t,e);var n=t.prototype;return n.createWrapPiece=function(){this.wrapPiece=this.scene.make.image({key:yI,frame:II.GEM_TRANSPARENT}),this.wrapPiece.setWorldSize(this.width,this.height)},n.listenEvents=function(){var e=this;this.wrapPiece.removeAllListeners(),this.setInteractiveContainer(),this.wrapPiece.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.parent.playTweenToEnableMaxFps()})),this.wrapPiece.on(Phaser.Input.Events.DRAG_START,(function(t){e.handleDragStart(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG,(function(t){e.handleDrag(t)})),this.wrapPiece.on(Phaser.Input.Events.DRAG_END,(function(){e.handleDragEnd(),e.parent.stopTweenToEnableMaxFps()}))},n.updateSize=function(){this.scene.world.isLandscape()?this.setSize(this.parent.width,this.parent.height/3):this.setSize(this.parent.width/3,this.parent.height),this.wrapPiece.setWorldSize(this.width,this.height)},n.updatePosition=function(e,t){this.setPosition(e,t),this.backupPx=this.x,this.backupPy=this.y},n.updateWrapPiecePosition=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.wrapPiece.setPosition(t,n)},n.setIndex=function(e){this.index=e},n.updateDataPiece=function(e){this.data=e},n.setInteractiveContainer=function(){this.wrapPiece.setInteractive().input.hitArea.setTo(0,0,this.width/this.wrapPiece.scaleX,this.height/this.wrapPiece.scaleY),this.scene.input.setDraggable(this.wrapPiece)},n.handleDragStart=function(e){var t,n,i=this;if(!this.scene.isGameOver&&this.isCanMove){null==(t=this.animScaleUp)||t.stop(),null==(n=this.animScaleDown)||n.stop(),this.setAlpha(this.correctAlpha).setScale(1).setPosition(this.x,this.y),this.isDragEnd=!1,this.isSetDrag=!0,this.setDepth(Ua.Z.PIECE+1),this.parent.bringToTop(this),this.animMoveDownAndScaleDown&&this.animMoveDownAndScaleDown.isPlaying()&&(this.animMoveDownAndScaleDown.stop(),this.setScale(1)),this.scene.audio.playSound(Ya.Z.PIECE_PICK);var a=this.scene.layoutManager.objects.main,s=a.board.cellSize/this.parent.cellSize,r=this.getContainerSize().height,o=e.worldX-this.getWorldPosition().x+this.x,c=0;if(ku()||this.scene.world.isLandscape())c=e.worldY-this.getWorldPosition().y+this.y-r*s/2;else{var l=this.scene.gameZone.height/2+a.board.width/2-2*this.parent.cellSize+this.moveTopNumber,h=this.y+r*s-l+r;h=this.scene.gameZone.width/this.scene.gameZone.height>=375/619?44+r*s/2:53+r*s/2,c=e.worldY-this.getWorldPosition().y+this.y-h}this.distancePY=e.worldY-c;var u=41*a.board.cellPadding/100;this.updateCellsWithPadding(u),this.animMoveTopAndScaleUp=this.scene.tweens.add({x:o,y:c,scale:s,duration:150,targets:this,ease:Phaser.Math.Easing.Sine.InOut,delay:20,onComplete:function(){if(!i.isDragEnd){i.setPosition(o,c);var e=i.getCellsHighlight();a.board.handleRemoveHighlight(),a.board.handleHighlight(e,i.highlightCellCanCapture.bind(i))}}}),this.drawSuggestCells()}},n.getPX=function(e,t){var n=this.scene.gameZone.width,i=this.getContainerSize().width;return e<i?i/2:e>n-i?n-2*i:t},n.handleDrag=function(e){if(!this.scene.isGameOver&&this.isCanMove&&this.isSetDrag)try{var t=this.scene.layoutManager.objects.main;if(this.animMoveTopAndScaleUp&&this.animMoveTopAndScaleUp.isPlaying()){var n=t.board.cellSize/this.parent.cellSize;this.animMoveTopAndScaleUp.complete(),this.animMoveTopAndScaleUp.stop(),this.setScale(n)}var i=this.checkOutOfThePage(e),a=i.lockX,s=i.lockY;if(a&&s)return;this.resetCellItems(),this.scene.game.updateFps(wu.Z.max);var r=e.worldX-this.getWorldPosition().x+this.x,o=e.worldY-this.distancePY;a?this.setY(o):s?this.setX(r):this.setPosition(r,o),this.canMove();var c=this.getCellsHighlight();t.board.handleRemoveHighlight(),t.board.handleHighlight(c,this.highlightCellCanCapture.bind(this))}catch(l){this.handleDragPieceInvalidMove()}},n.checkOutOfThePage=function(e){var t=this.getContainerSize(),n=t.width,i=t.height,a=this.scene.gameZone,s=a.width,r=a.height,o=e.worldX,c=e.worldY,l=this.distancePY-this.getWorldPosition().y+this.y,h=!1,u=!1;return(o<n/2||o>s-n/2)&&(h=!0),(c-l<i/2||c-l>r)&&(u=!0),{lockX:h,lockY:u}},n.highlightCellCanCapture=function(e,t,n,i){for(var a=this,s=bI,r=OI,o=[],c=0;c<i.length;c++){var l=i[c],h=l.x,u=l.y;s>h&&(s=h),r>u&&(r=u)}for(var d=function(){var t=e[p],n=re()(i).call(i,(function(e){return e.y===t}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},p=0;p<e.length;p++)d();for(var g=function(){var e=t[f],n=re()(i).call(i,(function(t){return t.x===e}));if(!n||0===n.length)return 1;for(var s=0;s<n.length;s++){var r=n[s];a.checkItemInArray(o,r)||o.push(r)}},f=0;f<t.length;f++)g();for(var m=function(){var e=n[v],t=re()(i).call(i,(function(t){return t.x===e.x&&t.y===e.y}));if(!t||0===t.length)return 1;var s=t[0];a.checkItemInArray(o,s)||o.push(s)},v=0;v<n.length;v++)m();for(var E=function(){var e,t=o[S],n=t.x,i=t.y,c=re()(e=a.cellItems).call(e,(function(e){return e.x===n-s&&e.y===i-r}));if(!c||0===c.length)return 1;var l=a.getFrameLight(c[0].cell.getFrameImageCell());c[0].cell.setFrameImageCell(l)},S=0;S<o.length;S++)E()},n.getFrameLight=function(e){var t=e;switch(e){case II.GEM:t=II.GEM_LIGHT;break;case II.GEM_DIAMOND_10:t=II.GEM_DIAMOND_10_LIGHT;break;case II.GEM_DIAMOND_11:t=II.GEM_DIAMOND_11_LIGHT;break;case II.GEM_DIAMOND_12:t=II.GEM_DIAMOND_12_LIGHT;break;case II.GEM_DIAMOND_13:t=II.GEM_DIAMOND_13_LIGHT;break;case II.GEM_DIAMOND_14:t=II.GEM_DIAMOND_14_LIGHT;break;case II.GEM_DIAMOND_15:t=II.GEM_DIAMOND_15_LIGHT}return t},n.resetCellItems=function(){for(var e=0;e<this.cellItems.length;e++){var t=this.cellItems[e].cell.getFrameImageCell().replace("_light","");this.cellItems[e].cell.setFrameImageCell(t)}},n.checkItemInArray=function(e,t){var n=re()(e).call(e,(function(e){return e.x===t.x&&e.y===t.y}));return!(!n||0===n.length)},n.handleDragPieceInvalidMove=function(){var e=this.scene.layoutManager.objects.main;e.board.handleRemoveHighlight(),e.board.removeAllCanCaptureCells()},n.handleDragEnd=function(){if(!this.isDragEnd&&this.isSetDrag&&this.isCanMove){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Ua.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems();try{this.canMove(),this.scene.audio.playSound(Ya.Z.PIECE_DROP),this.handleBoardMoveCompleted(),this.wrapPiece.disableInteractive()}catch(t){this.handleInvalidMove()}}},n.cancelDrag=function(){if(!this.isDragEnd&&this.isSetDrag){this.isDragEnd=!0,this.isSetDrag=!1;var e=this.scene.layoutManager.objects.main;this.setDepth(Ua.Z.PIECE),e.board.handleRemoveSuggestMove(),e.board.removeAllCanCaptureCells(),this.resetCellItems(),e.board.handleRemoveHighlight(),this.handleInvalidMove()}},n.handleBoardMoveCompleted=function(){var e=this,t=this.getPositionTopLeftInBoard(),n=this.scene.layoutManager.objects.main;if(t){if(this.scene.targetMissionManager.getTargetType()===Dy){var i=this.calcScore();this.scene.handleUpdateScore(i||0),this.scene.handleAddScoreAnim(i||0)}var a=t.x,s=t.y,r=n.board.dataBoard[s][a].cell.getWorldPosition(),o=r.x,c=r.y,l=this.getWorldPosition(),h=l.x,u=l.y,d=this.x+o-h,p=this.y+c-u,g=this.getContainerSizeOrigin(),f=d+g.width/2,m=p+g.height/2,v=this.getCellsHighlight();this.scene.add.tween({targets:this,x:f,y:m,duration:50,onComplete:function(){e.updateCellsWithPadding(.5),n.board.handleRemoveHighlight(),e.hide(),e.setScale(1),e.parent.removeActivePiece(e.index),n.board.handleMove(v,e.onBoardHandleMoveCompleted.bind(e))}})}else n.board.handleRemoveHighlight()},n.getContainerSizeOrigin=function(){var e=this.data[0].length-1,t=this.data.length-1,n=this.parent.cellSize;return{width:e*n*this.scale,height:t*n*this.scale}},n.calcScore=function(){var e;if(!this.matrixData)return 0;var t=this.matrixData.length||0;if(0===t)return 0;for(var n=(null==(e=this.matrixData[0])?void 0:e.length)||0,i=0,a=0;a<t;a++)for(var s=0;s<n;s++)1===this.matrixData[a][s]&&i++;return i},n.hide=function(){this.setVisible(!1),this.wrapPiece.setVisible(!1)},n.show=function(){this.setVisible(!0),this.wrapPiece.setVisible(!0)},n.playAnimShow=function(){this.setAlpha(0).setScale(0),this.show(),this.animScaleUp.play()},n.onBoardHandleMoveCompleted=function(){this.parent.setActivePieces(),this.parent.existPiecesActive()||this.parent.showNewPieces(),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.nextStep()},n.drawSuggestCells=function(){var e=this.scene.layoutManager.objects.main,t=function(e,t){for(var n=e.length,i=e[0].length,a=0,s=0,r=0,o=0;o<n;o++)for(var c=0;c<i;c++)if(_v(e,c,o,t)&&(s=c,r=o,++a>1))return null;if(0===a)return null;for(var l=[],h=0;h<t.data.length;h++)for(var u=0;u<t.data[h].length;u++)t.data[h][u].texture&&l.push({x:s+u,y:r+h});return l&&l.length>0?l:null}(e.board.dataBoard,{data:this.data});t&&e.board.handleSuggestMove(t)},n.handleInvalidMove=function(){var e=this;this.scene.audio.playSound(Ya.Z.PIECE_INVALID_MOVE),this.scene.layoutManager.objects.main.board.handleRemoveHighlight(),this.animMoveDownAndScaleDown=this.scene.tweens.add({x:this.backupPx,y:this.backupPy,scaleX:1,scaleY:1,duration:300,targets:this,ease:"Sine.easeInOut",delay:20,onComplete:function(){e.updateCellsWithPadding(.5)}}),this.scene.tutorialManager.isRunning()&&this.scene.tutorialManager.handleStep()},n.canMove=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=this.getCellsHighlight();if(0===t.length)throw new Error("Invalid Move");for(var n=!0,i=0;i<t.length;i++){var a=t[i],s=a.x,r=a.y;if(!e[r]||!e[r][s]||0!==e[r][s].value){n=!1;break}}if(!n||0===t.length)throw new Error("Invalid Move");return n},n.getCellsHighlight=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard,t=[],n=this.getPositionTopLeftInBoard();if(null===n)return t;if(this.scene.tutorialManager.isRunning()){if(1==this.index&&0==this.scene.tutorialManager.step)return t;if(!this.scene.tutorialManager.validTargetPosition(n))return t}for(var i=0;i<this.data.length;i++)for(var a=0;a<this.data[i].length;a++)if(this.data[i][a].texture){var s=a+n.x,r=i+n.y,o=e[r]&&e[r][s]?e[r][s].x:0,c=e[r]&&e[r][s]?e[r][s].y:0;if(r>=OI||s>=bI||!e[r][s]||1===e[r][s].value)return[];t.push({x:s,y:r,pX:o,pY:c,frame:this.data[i][a].texture})}return t},n.getPositionTopLeftInBoard=function(){for(var e=this.scene.layoutManager.objects.main,t=this.getContainerSize(),n=t.width,i=t.height,a=this.getWorldPosition(),s=a.x,r=a.y,o=e.board.dataBoard,c=s+this.parent.cellSize*this.scale-n/2,l=r+this.parent.cellSize*this.scale-i/2,h=e.board.cellPadding,u=-1,d=-1,p=0;p<OI;p++)for(var g=0;g<bI;g++){var f=o[p][g].cell.getWorldPosition(),m=f.x,v=f.y;if(m-h/2<=c&&m+o[p][g].width+h/2>=c&&v-h/2<=l&&v+o[p][g].height+h/2>=l){u=g,d=p;break}}return u<0||u>bI-1||d<0||d>OI-1?null:{x:u,y:d}},t.buildData=function(e){for(var t=[],n=0;n<e.length;n++){t[n]=[];for(var i=0;i<e[n].length;i++){var a=1===e[n][i]?II.GEM:null;t[n][i]={x:i,y:n,texture:a}}}return t},n.drawPiece=function(){return this.isCreateCell?this.updateCells():this.createCells(.5),this.createAnimShow(),this.playAnimShow(),this.wrapPiece.setInteractive(),this},n.createAnimShow=function(){var e=this,t=140*this.index;this.animScaleUp=this.scene.tweens.add({delay:t,paused:!0,duration:163,targets:this,alpha:{from:0,to:this.alpha},scale:{from:0,to:1.2},ease:Phaser.Math.Easing.Linear,onComplete:function(){e.animScaleDown.play()}}),this.animScaleDown=this.scene.tweens.add({delay:83,paused:!0,duration:150,targets:this,scale:1,ease:Phaser.Math.Easing.Linear})},n.createCells=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++){this.cells[a]=[];for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture&&"x"!==this.data[a][s].texture){var r={x:(s-(i-1)/2)*(t+e),y:(a-(n-1)/2)*(t+e),width:t-2*e,height:t-2*e},o=new AI(this.scene,r);o.setFrameImageCell(this.data[a][s].texture),this.cells[a][s]=o,this.cellItems.push({x:s,y:a,cell:o}),this.add(o)}}this.isCreateCell=!0},n.resetPiece=function(){this.cellItems.forEach((function(e){e.cell.destroy()})),this.cells=[],this.cellItems=[],this.createCells(.5)},n.updateCells=function(){for(var e=0;e<this.data.length;e++)for(var t=0;t<this.data[e].length;t++)if(this.data[e][t].texture&&"x"!==this.data[e][t].texture){var n=this.cells[e][t];n.setFrameImageCell(this.data[e][t].texture),this.cells[e][t]=n}},n.updateCellsWithPadding=function(e){for(var t=this.parent.cellSize,n=this.data.length,i=this.data[0].length,a=0;a<this.data.length;a++)for(var s=0;s<this.data[a].length;s++)if(this.data[a][s].texture){var r=(s-(i-1)/2)*(t+e),o=(a-(n-1)/2)*(t+e);this.cells[a][s].setPosition(r,o)}},n.getContainerSize=function(){for(var e=0,t=this.data.length,n=0;n<this.data.length;n++)this.data[n].length>e&&(e=this.data[n].length);var i=this.parent.cellSize;return{width:e*i*this.scale,height:t*i*this.scale}},n.setCanMove=function(e){this.isCanMove=e,this.correctAlpha=e?1:.4,this.setAlpha(this.correctAlpha)},n.reset=function(){this.setVisible(!1),this.setScale(1),this.wrapPiece.disableInteractive(),this.data=t.buildData(this.matrixData)},n.getScore=function(){if(!this.matrixData)return 0;for(var e=0,t=0;t<this.matrixData.length;t++)for(var n=0;n<this.matrixData[0].length;n++)1===this.matrixData[t][n]&&e++;return e},t}(Phaser.GameObjects.Container),RI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction,a.isReverse)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t,n){void 0===n&&(n=!1);var i=[];switch(t){case Nf:n?i=Dm:(i=Mm,e===nm&&(i=Nm),e===im&&(i=Bm));break;case Bf:n?i=Pm:(i=Om,e===nm&&(i=Rm),e===im&&(i=wm));break;case Gf:if(n){i=Im;break}i=ym,e===nm&&(i=Cm),e===im&&(i=bm);break;case Ff:n?i=km:(i=xm,e===nm&&(i=_m),e===im&&(i=Lm))}return i},t.getData=function(e,n,i){return void 0===i&&(i=!1),t.buildData(t.getMatrixData(e,n,i))},t}(PI),wI=RI,xI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e,t){var n=[];switch(e){case om:n=t===Mf?Wm:Vm;break;case rm:n=t===Mf?Zm:Ym;break;case am:n=t===Mf?Gm:Fm;break;case sm:n=t===Mf?Um:Hm}return n},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(PI),kI=xI,_I=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case cm:t=zm;break;case lm:t=Km;break;case hm:t=jm}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(PI),LI=_I,MI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Nf:t=$m;break;case Bf:t=ev;break;case Gf:t=tv;break;case Ff:t=nv;break;default:t=$m}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(PI),DI=MI,NI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.type,a.direction)}))||this}return(0,o.Z)(t,e),t.getDataByDirectionCross2=function(e){var t=[];switch(e){case Nf:t=cv;break;case Bf:t=lv;break;default:t=cv}return t},t.getDataByDirectionCross3=function(e){var t=[];switch(e){case Nf:t=hv;break;case Bf:t=uv;break;default:t=hv}return t},t.getDataByDirectionCross4=function(e){var t=[];switch(e){case Nf:t=dv;break;case Bf:t=pv;break;default:t=dv}return t},t.getDataByDirectionCross5=function(e){var t=[];switch(e){case Nf:t=gv;break;case Bf:t=fv;break;default:t=gv}return t},t.getMatrixData=function(e,n){var i=[];switch(e){case fm:i=t.getDataByDirectionCross2(n);break;case mm:i=t.getDataByDirectionCross3(n);break;case vm:i=t.getDataByDirectionCross4(n);break;case Em:i=t.getDataByDirectionCross5(n)}return i},t.getData=function(e,n){return t.buildData(t.getMatrixData(e,n))},t}(PI),BI=NI,GI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Uf:t=Xm;break;case Hf:t=Jm;break;case Yf:t=Qm;break;case Zf:t=qm;break;default:t=Xm}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(PI),FI=GI,UI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData()}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(){return ov},t.getData=function(){return t.buildData(t.getMatrixData())},t}(PI),HI=UI,ZI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Nf:t=iv;break;case Bf:t=av;break;case Gf:t=sv;break;case Ff:t=rv;break;default:t=iv}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(PI),YI=ZI,WI=function(e){function t(n,i,a){return e.call(this,n,i,(0,s.Z)({},a,{matrixData:t.getMatrixData(a.direction)}))||this}return(0,o.Z)(t,e),t.getMatrixData=function(e){var t=[];switch(e){case Nf:t=mv;break;case Bf:t=vv;break;case Gf:t=Ev;break;case Ff:t=Sv;break;default:t=mv}return t},t.getData=function(e){return t.buildData(t.getMatrixData(e))},t}(PI),VI=WI,zI=function(){function e(e){this.scene=void 0,this.currentLevel=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){var e=this.scene.storage.getState(),t=el(e)||1;this.currentLevel=t},t.setLevel=function(e){this.currentLevel=e},t.getLevel=function(){return this.currentLevel},t.getLevelConfig=function(){var e=this.scene.storage.getState();return tl(e)?wy():Pf[this.currentLevel]},t.getNextLevel=function(){return this.currentLevel+1},t.getNextLevelConfig=function(){return Pf[this.currentLevel+1]},t.increaseLevel=function(){this.currentLevel++},e}(),KI=function(){function e(e){this.scene=void 0,this.map=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.initMap()},t.initMap=function(){var e=this.scene.levelManager.getLevelConfig();this.map=this.scene.make.tilemap({key:e.key})},t.getTileMap=function(){return ce()(this)},t.reloadMap=function(){var e,t=this.scene.storage.getState();0===el(t)&&this.scene.levelManager.setLevel(1);var n=this.scene.levelManager.getLevelConfig();console.log("reloadMap === ",n),null==(e=ce()(this))||e.destroy(),this.map=this.scene.make.tilemap({key:n.key})},e}(),jI=function(){function e(){this.targetType=void 0,this.targetValue=void 0,this.init()}var t=e.prototype;return t.init=function(){},t.setTargetType=function(e){this.targetType=e},t.setTargetValue=function(e){this.targetValue=e},t.getTargetType=function(){return this.targetType},t.getTargetValue=function(){return this.targetValue},e}(),XI=Ha.Z.GAMEPLAY_32.KEY,JI=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textWellDone=void 0,s.listTargetFrame=[],s.listAnim=[],s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.runPopupEntrancesAnimation(0,300)},s.close=function(){e.prototype.close.call((0,La.Z)(s))},s.scene=t,s.setDepth(Za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textWellDone="ar"==e?new fE(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new gE(this.scene,{text:this.scene.lang.Text.WELL_DONE,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(80)}),this.add(this.textWellDone),Phaser.Display.Align.In.Center(this.textWellDone,this)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=0;t<3;t++){var n=this.scene.make.image({key:XI});n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0),this.listTargetFrame.push(n)}this.add(this.listTargetFrame)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length)for(var t=0;t<3;t++){var n=this.listTargetFrame[t];n.setWorldSize(30,30),n.setFrame(e[t]||e[0]),n.setVisible(!1).setAlpha(0)}},n.createAnimTargetItems=function(){var e=[100,500,700],t=[-120,0,120],n=[-100,-150,-100],i=[.7,1,.7];if(this.scene.targetMissionManager.getTargetType()!=Dy)for(var a=0;a<3;a++){this.listTargetFrame[a].setAlpha(0).setVisible(!0);var s=this.scene.add.tween({targets:this.listTargetFrame[a],delay:e[a],x:{from:0,to:t[a]},y:{from:300,to:n[a]},alpha:{from:0,to:1},scale:{from:0,to:i[a]},rotation:{from:-180,to:0},duration:500});this.listAnim.push(s)}},n.playAnimTargetItems=function(){if(this.scene.targetMissionManager.getTargetType()!=Dy)for(var e=0;e<3;e++){this.listTargetFrame[e].setAlpha(0).setVisible(!0),this.listAnim[e].play()}},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.listTargetFrame.forEach((function(e){e.setAlpha(0)})),this.textWellDone.restart(),this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.textWellDone.start(),0===n.listTargetFrame.length?(n.createTargetItems(),n.createAnimTargetItems()):(n.updateTargetItems(),n.playAnimTargetItems()),n.handleDelegate(),n.runAnim()}})),this.background.setAlpha(0),this.tweenBackground.play()},t}(GameCore.Screen),qI=Ha.Z.DEFAULT,QI=qI.KEY,$I=qI.FRAME,eC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textNextLevel=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.checkFinishAllLevel=function(){var e=s.scene.storage.getState();return el(e)>=Pf.length},s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1))},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,310,300),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:QI,frame:$I.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(280,200),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-55)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:QI,frame:$I.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,QI,$I.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,150,-15),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-60)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(60),text:this.scene.lang.Text.COMPLETED,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,-20)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Ha.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Ha.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:QI,frame:$I.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new Wa.Z(this.scene,QI,$I.BUTTON_MINOR,70,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-88,55)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:QI,frame:$I.TEXT_NEXT_LEVEL}),this.checkFinishAllLevel()&&this.textNextLevel.setFrame($I.TEXT_START_OVER),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new Wa.Z(this.scene,QI,$I.BUTTON_GREEN,172,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,37,55)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(wf(t)<1)return this.setVisible(!1),void this.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN);el(t)>=Pf.length-1?this.scene.handleClickStartOver():(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.startGame()})))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),tC=Ha.Z.DEFAULT,nC=tC.KEY,iC=tC.FRAME,aC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonContinue=void 0,s.contents=void 0,s.textLevel=void 0,s.textLevel2=void 0,s.textLevelComplete=void 0,s.textLevelComplete2=void 0,s.backgroundContent=void 0,s.textNextLevel=void 0,s.livesTimer=void 0,s.listTargets=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.updateInfo(),this.runOpenAnimation()},n.updateInfo=function(){var e=this.scene.levelManager.getLevel();e<Pf.length-1&&(e-=1),e>Pf.length-1&&(e=Pf.length-1),this.textLevel.setText(this.scene.lang.Text.Level+" "+e),this.textLevel2.setText(this.scene.lang.Text.Level+" "+e),"ar"==this.scene.facebook.getLocale()&&(this.textLevel2.setVisible(!0),this.textLevel.setVisible(!1)),this.updateTextNextLevel()},n.updateTextNextLevel=function(){var e=this.scene.levelManager.getLevel(),t=this.scene.world.getPixelRatio();if(e>Pf.length-1)return this.textNextLevel.setFrame(iC.TEXT_START_OVER),void this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t);this.textNextLevel.setFrame(iC.TEXT_NEXT_LEVEL),this.textNextLevel.setWorldSize(this.textNextLevel.width/t,this.textNextLevel.height/t)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,234),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:nC,frame:iC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:nC,frame:iC.TEXT_CONGRATULATION});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,nC,iC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevel(),this.createTextLevel2(),this.createTextLevelComplete(),"ar"==this.scene.facebook.getLocale()&&(this.createTextLevelComplete2(),this.textLevelComplete.setVisible(!1))},n.createTextLevel=function(){this.textLevel=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.Level+" 1",origin:{x:.5,y:.5}}),this.popup.add(this.textLevel),Phaser.Display.Align.In.Center(this.textLevel,this.popup,0,-23)},n.createTextLevel2=function(){this.textLevel2=this.scene.make.text({text:this.scene.lang.Text.Level+" 1",style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textLevel2.setTint(7551258),this.textLevel2.setVisible(!1),this.popup.add(this.textLevel2),Phaser.Display.Align.In.Center(this.textLevel2,this.popup,0,-23)},n.createTextLevelComplete=function(){this.textLevelComplete=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(44),text:this.scene.lang.Text.Completed,origin:{x:.5,y:.5}}),this.popup.add(this.textLevelComplete),Phaser.Display.Align.In.Center(this.textLevelComplete,this.popup,0,3)},n.createTextLevelComplete2=function(){this.textLevelComplete2=this.scene.make.text({text:this.scene.lang.Text.Completed,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(44)+"px"},origin:{x:.5,y:.5}}),this.textLevelComplete2.setTint(7551258),this.popup.add(this.textLevelComplete2),Phaser.Display.Align.In.Center(this.textLevelComplete2,this.popup,0,3)},n.createTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.scene.make.image({key:Ha.Z.GAMEPLAY.KEY});i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n]),this.listTargets.push(i)}this.popup.add(this.listTargets)}},n.clickButtonClose=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.updateTargetItems=function(){var e=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(e&&0!==e.length){this.popup.remove(this.listTargets);for(var t=this.calcPosition(e.length),n=0;n<e.length;n++){var i=this.listTargets[n];i||(i=this.scene.make.image({key:Ha.Z.GAMEPLAY.KEY}),this.listTargets.push(i)),i.setWorldSize(50,50),i.setFrame(e[n]||e[0]),i.setX(t[n])}this.popup.add(this.listTargets)}},n.calcPosition=function(e){for(var t=[],n=310/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createButtons=function(){this.createButtonBack(),this.createButtonContinue()},n.createButtonBack=function(){var e=this.scene.make.image({key:nC,frame:iC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new Wa.Z(this.scene,nC,iC.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation();var t=this.scene.layoutManager.objects.header;this.scene.time.delayedCall(300,(function(){t.progressBar.reset(),e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.createButtonContinue=function(){var e=this.scene.world.getPixelRatio();this.textNextLevel=this.scene.make.image({key:nC,frame:iC.TEXT_NEXT_LEVEL}),this.textNextLevel.setWorldSize(this.textNextLevel.width/e,this.textNextLevel.height/e),this.buttonContinue=new Wa.Z(this.scene,nC,iC.BUTTON_GREEN,178,54),this.buttonContinue.setName("Continue"),this.buttonContinue.add(this.textNextLevel),this.popup.add(this.buttonContinue),this.buttonContinue.onClick=this.clickButtonContinue.bind(this),Phaser.Display.Align.In.Center(this.buttonContinue,this.popup,33,52)},n.clickButtonContinue=function(){var e=this,t=this.scene.storage.getState();if(wf(t)<1)return this.runCloseAnimation(),void this.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN,{onClose:function(){e.scene.screen.open(Za.o4.MISSION_COLLECTION_COMPLETE_SCREEN)}});if(el(t)>=Pf.length-1)this.scene.handleClickStartOver();else{this.runCloseAnimation();var n=this.scene.layoutManager.objects,i=n.header,a=n.main;this.scene.time.delayedCall(300,(function(){e.scene.analytics.levelStart(e.scene.levelManager.getLevel(),void 0,e.scene.getLevelName());var t=a.board.fadeOut();t?t.on("complete",(function(){i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame()})):(i.progressBar.reset(),e.scene.clearFen(),e.scene.startGame())}))}},n.createLivesTimer=function(){this.livesTimer=new AT(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,-200)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),sC=Ha.Z.GAMEPLAY,rC=(sC.KEY,sC.FRAME,function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.textNoSpaceLeft=void 0,s.closeTimerEvent=void 0,s.tweenBackground=void 0,s.open=function(t){e.prototype.open.call((0,La.Z)(s),t),s.runPopupEntrancesAnimation(300,300),s.handleDelegate()},s.close=function(){e.prototype.close.call((0,La.Z)(s))},s.scene=t,s.setDepth(Za.Ks.POPUP),s.background.setAlpha(0),s.createContent(),s}(0,o.Z)(t,e);var n=t.prototype;return n.handleDelegate=function(){var e,t=this,n=this.getData(["duration","onClose"]),i=n[0],a=void 0===i?0:i,s=n[1];null==(e=this.closeTimerEvent)||e.remove(),a>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:a,callback:function(){t.textNoSpaceLeft.setVisible(!1),t.textNoSpaceLeft.restart(),t.visible&&t.scene.screen.close(t.name),s&&s()}}))},n.runAnim=function(){this.textNoSpaceLeft.setVisible(!0),this.textNoSpaceLeft.start(300)},n.createContent=function(){this.createText()},n.createText=function(){var e=this.scene.facebook.getLocale();this.textNoSpaceLeft="ar"==e?new fE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(180)}):new gE(this.scene,{text:this.scene.lang.Text.NO_SPACE_LEFT,font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(76)}),this.add(this.textNoSpaceLeft),Phaser.Display.Align.In.Center(this.textNoSpaceLeft,this)},n.runPopupEntrancesAnimation=function(e,t){var n=this;this.tweenBackground||(this.tweenBackground=this.scene.tweens.addCounter({paused:!0,from:0,to:.6,delay:e,duration:t,onUpdate:function(e){var t=e.getValue();n.background.setAlpha(t)},onComplete:function(){n.runAnim()}})),this.tweenBackground.play()},t}(GameCore.Screen)),oC=Ha.Z.DEFAULT,cC=oC.KEY,lC=oC.FRAME,hC=function(e){function t(t){var n;return(n=e.call(this,t,cC,lC.BUTTON_GREEN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(178,54),n.setName("Retry"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:cC,frame:lC.ICON_RETRY}),this.icon.setWorldSize(33,35),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:cC,frame:lC.TEXT_RETRY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),uC=hC,dC=Ha.Z.DEFAULT,pC=dC.KEY,gC=dC.FRAME,fC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonBack=void 0,s.buttonRetry=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textLevelFail=void 0,s.buttonClose=void 0,s.livesTimer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.scene=t,s.createPopup(),s.createContentBackground(),s.createTitle(),s.createTexts(),s.createButtons(),s.createLivesTimer(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){e.prototype.open.call(this),this.scene.enableInput(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,234),this.add(this.popup),this.popup.setFrameTop(gC.POPUP_TOP_DARK),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-20)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:pC,frame:gC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(260,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-66)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:pC,frame:gC.TEXT_LOSE});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,pC,gC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,30),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,5),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.createTexts=function(){this.createTextLevelFail()},n.createTextLevelFail=function(){var e=this.scene.world.getPixelRatio();this.textLevelFail=this.scene.make.image({key:pC,frame:gC.TEXT_LEVEL_FAIL}),this.textLevelFail.setWorldSize(this.textLevelFail.width/e,this.textLevelFail.height/e),this.popup.add(this.textLevelFail),Phaser.Display.Align.In.Center(this.textLevelFail,this.popup,0,-10)},n.createButtons=function(){this.createButtonBack(),this.createButtonRetry()},n.createButtonBack=function(){var e=this.scene.make.image({key:pC,frame:gC.ICON_BACK});e.setWorldSize(30,30),this.buttonBack=new Wa.Z(this.scene,pC,gC.BUTTON_MINOR,62,54),this.buttonBack.setName("Back"),this.buttonBack.add(e),this.popup.add(this.buttonBack),this.buttonBack.onClick=this.clickButtonBack.bind(this),Phaser.Display.Align.In.Center(this.buttonBack,this.popup,-90,52)},n.clickButtonBack=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.createButtonRetry=function(){this.buttonRetry=new uC(this.scene),this.popup.add(this.buttonRetry),this.buttonRetry.onClick=this.clickButtonRetry.bind(this),Phaser.Display.Align.In.Center(this.buttonRetry,this.popup,33,52)},n.clickButtonClose=function(){var e=this;this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.clearFen(),e.scene.scene.switch(wa.Co.LEVEL_SCENE)}))},n.clickButtonRetry=function(){var e=this,t=this.scene.storage.getState();wf(t)<1?this.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN,{currentScreen:this}):(this.runCloseAnimation(),this.scene.time.delayedCall(300,(function(){e.scene.handleRetryLevel()})))},n.createLivesTimer=function(){this.livesTimer=new AT(this.scene),this.livesTimer.startIntervalTimer(),this.livesTimer.setFrameLivesTimeBlock2(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,-200)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.livesTimer.startIntervalTimer(),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.livesTimer.stopIntervalTimer(),this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),mC=Ha.Z.DEFAULT,vC=mC.KEY,EC=mC.FRAME,SC=function(e){function t(t){var n;return(n=e.call(this,t,vC,EC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:vC,frame:EC.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(Wa.Z),AC=SC,TC=Ha.Z.DEFAULT,yC=TC.KEY,IC=TC.FRAME,CC=function(e){function t(t){var n;return(n=e.call(this,t,yC,IC.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Journey"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:yC,frame:IC.ICON_JOURNEY_2});e.setWorldSize(35,28),this.add(e),Phaser.Display.Align.In.Center(e,this,-.25,-1.5)},t}(Wa.Z),bC=CC,OC=Ha.Z.DEFAULT,PC=OC.KEY,RC=OC.FRAME,wC=function(e){function t(t){var n;return(n=e.call(this,t,PC,RC.BUTTON_DARK_BLUE)||this).button.setWorldSize(246,53),n.setName("PlayWithFriends"),n.createIcon(),n.createText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){var e=this.scene.make.image({key:PC,frame:RC.ICON_SWORD_BLUE});e.setWorldSize(31,25),this.add(e),Phaser.Display.Align.In.Center(e,this,-60)},n.createText=function(){var e=this.scene.make.image({key:PC,frame:RC.TEXT_PLAY_WITH_BLUE});e.setWorldSize(102,16),this.add(e),Phaser.Display.Align.In.Center(e,this,20)},t}(Wa.Z),xC=wC,kC=Ha.Z.DEFAULT,_C=kC.KEY,LC=kC.FRAME,MC=function(e){function t(t){var n;return(n=e.call(this,t,_C,LC.BUTTON_BROWN)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(246,53),n.setName("Replay"),n.createIcon(),n.createText(),n.alignItems(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:_C,frame:LC.ICON_REPLAY}),this.icon.setWorldSize(26,31),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:_C,frame:LC.TEXT_REPLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItems=function(){var e=this.icon.width/2+this.text.width/2;Phaser.Display.Align.In.Center(this.icon,this,-e+this.icon.width/2-5,-2),Phaser.Display.Align.In.Center(this.text,this,e-this.text.width/2+5,-1)},t}(Wa.Z),DC=MC,NC=Ha.Z.DEFAULT,BC=NC.KEY,GC=NC.FRAME,FC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.backgroundContent=void 0,s.settingMusic=void 0,s.settingSound=void 0,s.settingVibrate=void 0,s.settingSoundContainer=void 0,s.settingMusicContainer=void 0,s.settingVibrateContainer=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonReplay=void 0,s.buttonPlayWithFriend=void 0,s.buttonHome=void 0,s.buttonJourney=void 0,s.debuggerCurrentLevelText=void 0,s.debuggerCurrentLevel=0,s.handleClose=function(){s.runCloseAnimation()},s.handleMusicSetting=function(e){s.scene.player.setSetting("music",e),e?s.scene.audio.playMusic():s.scene.audio.pauseMusic()},s.handleSoundSetting=function(e){s.scene.player.setSetting("sound",e)},s.handleVibrateSetting=function(e){e&&Jp(199),s.scene.player.setSetting("vibrate",e)},s.clickReplay=function(){var e=s.scene.storage.getState();if(wf(e)<1)return s.setVisible(!1),void s.scene.screen.open(Za.o4.CLAIM_HEART_SCREEN);s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.screen.close(s.name),s.scene.handleRetryLevel();case 2:case"end":return e.stop()}}),e)}))))},s.clickButtonPlayWithFriends=function(){s.scene.storage.dispatch(Bh()),s.scene.screen.close(s.name)},s.clickButtonHome=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.scene.scene.switch(wa.Co.DASHBOARD_SCENE);case 1:case"end":return e.stop()}}),e)}))))},s.clickButtonLeaderboard=function(){s.scene.screen.open(Za.o4.LEADER_BOARD_SCREEN)},s.clickButtonShare=function(){s.scene.storage.dispatch(Al())},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createSwitchButtons(),s.createButtons(),s.addItem(),s.arrangeItems(),s.createInput(),s.createDebuggerInputLevel(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.1),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t;e.prototype.open.call(this);var n=this.scene.player.getPlayerSettings(),i=n.sound,a=n.vibrate;this.settingSound.updateStatus(i),null==(t=this.settingVibrate)||t.updateStatus(a),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:BC,frame:GC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,147),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-48)},n.createInput=function(){this.buttonClose.onClick=this.handleClose,this.settingSound.onClick=this.handleSoundSetting,this.settingVibrate&&(this.settingVibrate.onClick=this.handleVibrateSetting)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,0,290,390),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:BC,frame:GC.TEXT_SETTING}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new Wa.Z(this.scene,BC,GC.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.title.add([t,this.buttonClose]),Phaser.Display.Align.In.Center(t,this.title,0,11),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,-14)},n.createButtons=function(){this.createReplayButton(),this.createHomeButton(),this.createJourneyButton()},n.createReplayButton=function(){this.buttonReplay=new DC(this.scene),this.popup.add(this.buttonReplay),this.buttonReplay.onClick=this.clickReplay,Phaser.Display.Align.In.Center(this.buttonReplay,this.popup,0,43)},n.createPlayWithFriendButton=function(){this.buttonPlayWithFriend=new xC(this.scene),this.popup.add(this.buttonPlayWithFriend),this.buttonPlayWithFriend.onClick=this.clickButtonPlayWithFriends,Phaser.Display.Align.In.Center(this.buttonPlayWithFriend,this.buttonReplay,0,65)},n.createHomeButton=function(){this.buttonHome=new AC(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome,Phaser.Display.Align.In.Center(this.buttonHome,this.buttonReplay,-60,72)},n.createJourneyButton=function(){this.buttonJourney=new bC(this.scene),this.popup.add(this.buttonJourney),this.buttonJourney.onClick=this.clickButtonJourney.bind(this),Phaser.Display.Align.In.Center(this.buttonJourney,this.buttonReplay,60,72)},n.clickButtonJourney=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(wa.Co.LEVEL_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.createSwitchButtons=function(){var e=this.scene.player.getPlayerSettings(),t=(e.music,e.sound),n=e.vibrate;this.createSoundButton(t),jp()&&!GameCore.Utils.Device.isIOS()?(this.createVibrateButton(n),Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,-33),Phaser.Display.Align.In.Center(this.settingVibrateContainer,this.backgroundContent,0,28)):Phaser.Display.Align.In.Center(this.settingSoundContainer,this.backgroundContent,0,0)},n.createMusicButton=function(e){this.settingMusicContainer=this.scene.make.container({});var t=this.scene.make.image({key:BC,frame:GC.ICON_MUSIC});t.setWorldSize(37,40),this.settingMusic=new XE(this.scene,{enable:e,width:89,height:31}),this.settingMusic.setName("Music"),Phaser.Display.Align.In.Center(t,this.settingMusicContainer,-60),Phaser.Display.Align.In.Center(this.settingMusic,this.settingMusicContainer,40),this.settingMusicContainer.add([t,this.settingMusic]),this.popup.add(this.settingMusicContainer),Phaser.Display.Align.In.Center(this.settingMusicContainer,this.backgroundContent,0,60)},n.createVibrateButton=function(e){this.settingVibrateContainer=this.scene.make.container({});var t=this.scene.make.image({key:BC,frame:GC.ICON_VIBRATE});t.setWorldSize(41,48),this.settingVibrate=new XE(this.scene,{enable:e,width:89,height:31}),this.settingVibrate.setName("Vibrate"),this.settingVibrateContainer.add([t,this.settingVibrate]),Phaser.Display.Align.In.Center(t,this.settingVibrateContainer,-60),Phaser.Display.Align.In.Center(this.settingVibrate,this.settingVibrateContainer,35),this.popup.add(this.settingVibrateContainer)},n.createSoundButton=function(e){this.settingSoundContainer=this.scene.make.container({});var t=this.scene.make.image({key:BC,frame:GC.ICON_SOUND});t.setWorldSize(41,36),this.settingSound=new XE(this.scene,{enable:e,width:89,height:31}),this.settingSound.setName("Sound"),this.settingSoundContainer.add([t,this.settingSound]),Phaser.Display.Align.In.Center(t,this.settingSoundContainer,-58),Phaser.Display.Align.In.Center(this.settingSound,this.settingSoundContainer,35),this.popup.add(this.settingSoundContainer)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.arrangeItems=function(){Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.createDebuggerInputLevel=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){for(var t=this.scene.make.container({}),n=function(n){var i=e.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:e.scene.fontSize(34),origin:{x:.5,y:.5},text:""+n});t.add(i),i.setInteractive(),i.on("pointerdown",(function(){e.debuggerHandleClick(n)})),Phaser.Display.Align.In.Center(i,t,20*n)},i=0;i<10;i++)n(i);this.add(t),Phaser.Display.Align.In.Center(t,this.popup,-100,190),this.debuggerCurrentLevelText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Level 0"}),this.add(this.debuggerCurrentLevelText),Phaser.Display.Align.In.Center(this.debuggerCurrentLevelText,this.popup,0,210);var a=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Go"});this.add(a),a.setInteractive(),a.on("pointerdown",(function(){e.close(),e.scene.time.delayedCall(300,(function(){e.scene.levelManager.setLevel(e.debuggerCurrentLevel),e.scene.startGame()}))})),Phaser.Display.Align.In.Center(a,this.popup,-70,210);var s=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(34),origin:{x:.5,y:.5},text:"Clear"});s.setInteractive(),s.on("pointerdown",(function(){e.debuggerCurrentLevel=0,e.debuggerCurrentLevelText.setText("Level "+String(e.debuggerCurrentLevel))})),this.add(s),Phaser.Display.Align.In.Center(s,this.popup,70,210)}},n.debuggerHandleClick=function(e){console.log("index ------\x3e ",e);var t=this.debuggerCurrentLevel+""+e;this.debuggerCurrentLevel=parseInt(t),this.debuggerCurrentLevelText.setText("Level "+String(this.debuggerCurrentLevel))},t}(GameCore.Screen),UC=FC,HC=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidTileMap",i.message=t||"This tile is not valid",i.payload=n,i}return(0,o.Z)(t,e),t}((0,O.Z)(Error)),ZC=n(629),YC=n(459),WC=function(){function e(e){this.scene=void 0,this.tweenScaleUp=void 0,this.tweenScaleDown=void 0,this.tweenMoveTo=void 0,this.target=void 0,this.handleOnComplete=void 0,this.playing=void 0,this.path=void 0,this.scene=e,this.path=new Phaser.Curves.Path}var t=e.prototype;return t.runScaleUpAnimation=function(e,t){var n;null==(n=this.tweenScaleUp)||n.remove(),this.tweenScaleUp||(this.tweenScaleUp=new ZC.Z({targets:[this.target],delay:e,duration:t,props:{scale:"+=0.05"}})),this.tweenScaleUp.play()},t.runScaleDownAnimation=function(e,t){var n;null==(n=this.tweenScaleDown)||n.remove(),this.tweenScaleDown||(this.tweenScaleDown=new YC.Z({targets:[this.target],delay:e,duration:t,props:{scale:"-=0.15"}})),this.tweenScaleDown.play()},t.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=Math.abs(n-r)/2,l=Math.abs(i-o),h=Phaser.Math.Between(1,2),u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=(c-p*Phaser.Math.Between(c/4,c/3))*h,f=o-d*(l/4);u.push(new Phaser.Math.Vector2(g,f))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var m=new Phaser.Curves.Spline(u),v=this.target.x,E=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=m.getPoint(t);a.target.setPosition(n.x-r-v,n.y-o-E)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},t.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(Ua.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.width/2,c=Math.abs(n-s)+o-50,l=Math.abs(i-r),h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=1.5*(c-d*Phaser.Math.Between(c/8,c/7)),g=r-u*(l/4);h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t.setTarget=function(e){this.target=e},(0,W.Z)(e,[{key:"onComplete",set:function(e){this.handleOnComplete=e}},{key:"isPlaying",get:function(){return this.playing}}]),e}(),VC=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var n=t.prototype;return n.runAnimMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0;var s=this.target.getWorldPosition(),r=s.x,o=s.y;this.path.startPoint=new Phaser.Math.Vector2(r,o);for(var c=this.scene.gameZone.height/2,l=Math.abs(n-r),h=Math.abs(i-o)+c-50,u=[],d=1;d<4;d++){var p=-1;d%2==0&&(p=1);var g=Phaser.Math.Between(h/18,h/17),f=r-d*(l/4),m=1.5*(h-p*g);u.push(new Phaser.Math.Vector2(f,m))}u.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(u),this.path.lineTo(n,i);var v=new Phaser.Curves.Spline(u),E=this.target.x,S=this.target.y;this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=v.getPoint(t);a.target.setPosition(n.x-r-E,n.y-o-S)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}})},n.runGemMoveToPosition=function(e,t,n,i){var a=this;this.playing=!0,this.target.setDepth(Ua.Z.ON_TOP);var s=this.target.x,r=this.target.y;this.path.startPoint=new Phaser.Math.Vector2(s,r);for(var o=this.scene.gameZone.height/2,c=Math.abs(n-s),l=Math.abs(i-r)+o-50,h=[],u=1;u<4;u++){var d=-1;u%2==0&&(d=1);var p=s-u*(c/4),g=1.5*(l-d*Phaser.Math.Between(l/18,l/17));h.push(new Phaser.Math.Vector2(p,g))}h.push(new Phaser.Math.Vector2(n,i)),this.path.splineTo(h),this.path.lineTo(n,i);var f=new Phaser.Curves.Spline(h);return this.tweenMoveTo=this.scene.add.tween({delay:e,targets:this.path,t:{from:0,to:1},ease:"Sine.easeInOut",duration:t,onUpdate:function(e){var t=e.getValue(0),n=1-t+.1,i=f.getPoint(t);a.target.setAlpha(n),a.target.setPosition(i.x,i.y)},onComplete:function(){a.playing=!1,a.handleOnComplete&&a.handleOnComplete()}}),this.tweenMoveTo},t}(WC),zC=Ha.Z.DEFAULT,KC=(zC.KEY,zC.FRAME,Ha.Z.GAMEPLAY_32.KEY),jC=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.text=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createText()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:KC}),this.imageGem.setWorldSize(35,35),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-10.5)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(42),origin:{x:.5,y:.5},text:"0"}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this,0,29)},n.updateGem=function(e){this.imageGem.setFrame(e)},n.updateText=function(e){this.text.setText("x"+e)},n.getFrame=function(){return this.imageGem.frame.name},t}(Phaser.GameObjects.Container),XC=Ha.Z.DEFAULT,JC=XC.KEY,qC=XC.FRAME,QC=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.listItems=[],s.targetImages=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.listAnimCollectionItem=[],s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.addItem(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.getData(["duration"])[0];this.hideAllCollectionItems(),this.createCollectionItems(),this.alginCollectionItems(),this.runOpenAnimation(),this.scene.time.delayedCall(i,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:JC,frame:qC.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createCollectionItems=function(){for(var e=this.getData(["jsonTarget"])[0],t=B()(e),n=0;n<t.length;n++){var i=t[n],a=this.getCollectionItemFree(n);console.log("jsonTarget[key] === ",e[i]),a.updateGem(i),a.updateText(e[i])}},n.getCollectionItemFree=function(e){var t=this.listItems[e];return t||(t=new jC(this.scene),this.popup.add(t),this.listItems.push(t)),t.setVisible(!0),t},n.alginCollectionItems=function(){var e;this.targetImages=[];for(var t=re()(e=this.listItems).call(e,(function(e){return e.visible})),n=t.length,i=263/(n+1)+5,a=-i*(n-1)/2,s=0;s<n;s++){var r=t[s];Phaser.Display.Align.In.Center(r,this.backgroundContent,a+i*s);var o=r.getFrame(),c=this.scene.make.image({key:Ha.Z.GAMEPLAY_32.KEY,frame:o});c.setWorldSize(22,22),c.setVisible(!1),this.targetImages.push(c),Phaser.Display.Align.In.Center(c,this.backgroundContent,a+i*s+this.scene.gameZone.width/2,this.scene.gameZone.height/2)}},n.hideAllCollectionItems=function(){for(var e=0;e<this.listItems.length;e++){this.listItems[e].setVisible(!1)}},n.moveGemsToCollectItems=function(){var e=this;console.log("moveGemsToCollectItems"),this.resetPositionTargetImages();for(var t=this.scene.layoutManager.objects,n=t.header,i=t.main,a=n.collectItems,s=a.getTargetKeys(),r=this.scene.gameZone.width/2,o=function(t){var o=s[t],c=a.getPositionCollectionItem(o),l=r+c.x,h=c.y-23;e.scene.world.isLandscape()&&(l=n.collectItems.getWorldPosition().x,h=n.collectItems.getWorldPosition().y+c.y),e.targetImages[t].setAlpha(1),e.targetImages[t].setVisible(!0);var u=e.getFreeAnim(),d=Phaser.Math.Between(500,1e3);u.setTarget(e.targetImages[t]),u.runGemMoveToPosition(0,d,l,h).on(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){n.collectItems.showCollectItemByKey(o),e.targetImages[t].setVisible(!1),t==e.targetImages.length-1&&i.board.handleTweenStartMission()}))},c=0;c<s.length;c++)o(c)},n.resetPositionTargetImages=function(){for(var e,t=re()(e=this.listItems).call(e,(function(e){return e.visible})),n=263/(t.length+1)+5,i=-n*(t.length-1)/2,a=0;a<t.length;a++){var s;this.targetImages[a]&&(null==(s=this.targetImages[a])||s.setVisible(!1),Phaser.Display.Align.In.Center(this.targetImages[a],this.backgroundContent,i+n*a+this.scene.gameZone.width/2,this.scene.gameZone.height/2))}},n.getFreeAnim=function(){if(!this.scene.world.isLandscape()){var e=new WC(this.scene);return this.listAnimCollectionItem.push(e),e}var t=new VC(this.scene);return this.listAnimCollectionItem.push(t),t},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:JC,frame:qC.TEXT_MISSION}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.title.add([t]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e,t=this;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.scene.time.delayedCall(50,(function(){t.moveGemsToCollectItems()})),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup,i=(n.y,n.scale);this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:i}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),$C=QC,eb=za.STATUS,tb=Ha.Z.GAMEPLAY,nb=tb.KEY,ib=tb.FRAME,ab=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.step=void 0,n.listPositionStart=void 0,n.listPositionTo=void 0,n.positionStart=void 0,n.positionTo=void 0,n.handFrame=void 0,n.tweenHand=void 0,n.validTargetPosition=function(e){var t={x:0,y:0};switch(n.step){case 0:case 1:t={x:3,y:3}}return t.x===e.x&&t.y===e.y},n.scene=t,n.step=0,n.createHand(),n.registerEvents(),n}(0,o.Z)(t,e);var n=t.prototype;return n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this;this.isRunning()&&this.scene.time.delayedCall(50,(function(){e.initPosition(),e.positionStart=e.listPositionStart[e.step],e.positionTo=e.listPositionTo[e.step],e.createTweenHand()}))},n.start=function(){this.initPosition(),this.isRunning()||(this.setState(eb.RUNNING),this.handleStep())},n.initPosition=function(){var e=this.scene.layoutManager.objects.main.board,t=e.dataBoard,n=e.cellSize,i=this.scene.layoutManager.objects.footer.pieces,a=i.allPieces,s=i.piecesActive,r=a[s[0].position].piece.getWorldPosition().x+n/2,o=a[s[0].position].piece.getWorldPosition().y+n/2,c=t[3][3].cell.getWorldPosition().x+n/2,l=t[3][3].cell.getWorldPosition().y+n/2,h=a[s[1].position].piece.getWorldPosition().x+n,u=a[s[1].position].piece.getWorldPosition().y+n,d=t[5][5].cell.getWorldPosition().x+n/2,p=t[5][5].cell.getWorldPosition().y+n/2;this.listPositionStart=[{x:r,y:o},{x:h,y:u}],this.listPositionTo=[{x:c,y:l},{x:d,y:p}],console.log("initPosition",this.listPositionStart,this.listPositionTo)},n.createHand=function(){this.handFrame=this.scene.make.image({key:nb,frame:ib.HAND,origin:{x:.5,y:.5}}),this.handFrame.setVisible(!1).setDepth(Ua.Z.ON_TOP),this.handFrame.setWorldSize(64,55)},n.createTweenHand=function(){var e;null==(e=this.tweenHand)||e.remove(),this.tweenHand=this.scene.add.tween({paused:!0,repeatDelay:500,targets:this.handFrame,repeat:-1,x:{from:this.positionStart.x,to:this.positionTo.x},y:{from:this.positionStart.y,to:this.positionTo.y},duration:1500,ease:Phaser.Math.Easing.Sine.InOut}),this.tweenHand.play()},n.handleStep=function(){switch(this.positionStart=this.listPositionStart[this.step],this.positionTo=this.listPositionTo[this.step],console.log("This.stepppp ",this.step),this.handFrame.setVisible(!0),this.handFrame.setPosition(this.positionStart.x,this.positionStart.y),this.createTweenHand(),this.step){case 0:this.handleStep1();break;case 1:this.handleStep2()}},n.handleStep1=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[3][3].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][4].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][3].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleStep2=function(){var e=this.scene.layoutManager.objects.main;e.board.dataBoard[5][3].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][4].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[5][5].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[3][5].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT),e.board.dataBoard[4][5].cell.setFrameImageCell(Ha.Z.GAMEPLAY_32.FRAME.GEM_HIGHT_LIGHT)},n.handleCompleteTutorial=function(){this.setState(eb.STOPPED),this.stopAnimHand()},n.nextStep=function(){this.handFrame.setVisible(!1),this.step++,this.step>=2?this.handleCompleteTutorial():this.handleStep()},n.stopAnimHand=function(){var e;this.handFrame.setVisible(!1),null==(e=this.tweenHand)||e.stop()},n.runAnimHand=function(){this.handFrame.setVisible(!0),this.tweenHand.play()},n.validStep=function(e){return this.step===e},n.reset=function(){this.setState(eb.STOPPED),this.stopAnimHand(),this.step=0},t}(Ja),sb=ab,rb=function(e){return e[wi]},ob=((0,j.P1)([function(e){return rb(e).isRequesting}],(function(e){return e})),(0,j.P1)([function(e){return rb(e).leaders}],(function(e){return e}))),cb=(0,j.P1)([function(e){return rb(e).time}],(function(e){return e})),lb=Ha.Z.DEFAULT,hb=lb.KEY,ub=lb.FRAME,db=function(e){function t(t){var n;return(n=e.call(this,t,hb,ub.BUTTON_MINOR)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:hb,frame:ub.ICON_HOME});e.setWorldSize(31,28),this.add(e),Phaser.Display.Align.In.Center(e,this,.5,-2)},t}(Wa.Z),pb=db,gb=Ha.Z.DEFAULT,fb=gb.KEY,mb=gb.FRAME,vb=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.background=void 0,i.avatar=void 0,i.rankIcon=void 0,i.rankText=void 0,i.username=void 0,i.textTime=void 0,i.createBackground(),i.updateSize(),i.createRank(),i.createUsername(),i.createTimeBlock(),n&&i.updateInfo(n),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.updateInfo=function(e){this.payload=(0,s.Z)({backgroundFrame:""},e),this.updateBackground(),this.updateRank(),this.updateUsername(),this.updateTime()},n.createBackground=function(){this.background=this.scene.make.image({key:fb,frame:mb.DAILY_BG_ITEM_DARK}),this.background.setWorldSize(254,38),this.add(this.background)},n.updateBackground=function(){var e=this.payload.backgroundFrame;this.background.setVisible(!0),this.background.setFrame(e||mb.DAILY_BG_ITEM_DARK),this.background.setWorldSize(254,38)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.createRank=function(){this.createRankIcon(1),this.createRankText(1)},n.updateRank=function(){var e=this.payload.rank;if(e<0)return this.rankIcon.setVisible(!1),this.rankText.setVisible(!0),void this.rankText.setText("99+");this.updateRankIcon(e),this.updateRankText(e)},n.createRankIcon=function(e){var t=this.getRankIconFrame(e);this.rankIcon=this.scene.make.image({key:fb,frame:t}),this.rankIcon.setWorldSize(28,24),this.add(this.rankIcon),Phaser.Display.Align.In.LeftCenter(this.rankIcon,this.background,-15)},n.getRankIconFrame=function(e){var t=mb.ICON_CUP_GOLD;switch(e){case 1:t=mb.ICON_CUP_GOLD;break;case 2:t=mb.ICON_CUP_SILVER;break;case 3:t=mb.ICON_CUP_COPPER}return t},n.updateRankIcon=function(e){if(e<=3){this.rankText.setVisible(!1),this.rankIcon.setVisible(!0);var t=this.getRankIconFrame(e);this.rankIcon.setFrame(t)}else this.rankText.setVisible(!0).setText(String(e)),this.rankIcon.setVisible(!1)},n.createRankText=function(e){this.rankText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),text:""+e,origin:{x:.5,y:.5}}),this.add(this.rankText),Phaser.Display.Align.In.Center(this.rankText,this.rankIcon,0,1)},n.updateRankText=function(e){e<=3?this.rankText.setVisible(!1):(this.rankText.setVisible(!0),this.rankText.setText(""+e),this.rankText.setFont(Va.Z.NUMBER_DARK.KEY))},n.getShortName=function(e){var t=e.substring(0,7);return t.split(" ")[0]||t},n.createUsername=function(){this.username=this.scene.make.text({text:this.getShortName("Sang Le"),style:{fontFamily:Va.Z.FONT_FAMILY_ARIAL,fontSize:this.scene.fontSize(36)+"px",fontStyle:"700"}}),this.username.setTint(7551258),this.add(this.username),Phaser.Display.Align.In.Center(this.username,this.background,-44)},n.updateUsername=function(){var e=this.payload.name;this.username.setText(this.getShortName(e)),this.username.setTint(7551258)},n.createTimeBlock=function(){var e=this.scene.make.container({}),t=this.scene.make.image({key:fb,frame:mb.DAILY_BG_TIME});t.setWorldSize(85,24),e.add(t);var n=this.scene.make.image({key:fb,frame:mb.ICON_CLOCK});n.setWorldSize(17,17),e.add(n),Phaser.Display.Align.In.LeftCenter(n,t,-5),this.textTime=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(27),text:"0",origin:{x:.5,y:.5}}),e.add(this.textTime),Phaser.Display.Align.In.Center(this.textTime,t,10,1.5),this.add(e),Phaser.Display.Align.In.Center(e,this.background,70)},n.updateTime=function(){var e=this.payload.score;this.textTime.setText(this.secondsToHms(e))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return Me()(t="0"+r).call(t,-2)+":"+Me()(n="0"+s).call(n,-2)+":"+Me()(i="0"+a).call(i,-2)},t}(Phaser.GameObjects.Container),Eb=vb;function Sb(e,t){var n="undefined"!==typeof Eo()&&Ao()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Ab(e,t);var i=Me()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return mo()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ab(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Tb=Ha.Z.DEFAULT,yb=Tb.KEY,Ib=Tb.FRAME,Cb=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scroller=void 0,n.scrollerValue=void 0,n.tweenMoveToRank=void 0,n.scene=t,n.createReuseScroller(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createReuseScroller=function(){var e=190,t=0,n=0;this.scene.world.isLandscape()&&(e=150,t=-20,n=-20),this.scroller=new iu(this.scene,{classType:Eb,listConfigs:[],width:260,height:e,padding:0,marginTop:t,marginBottom:n,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(yb,Ib.BLANK,40,16643027),this.scroller.createMask(),this.scroller.setPosition(0,70),this.add(this.scroller)},n.updateData=function(e,t){var n=[],i=0;if(!(e.length<1)){for(var a,s=ri()(e).call(e,(function(e,t){return+e.score-+t.score})),r=window.game.player.getPlayer().playerId,o=0,c=Sb(s);!(a=c()).done;){var l=a.value,h=l.playerId,u=l.score,d=l.name;i++;var p=Ib.DAILY_BG_ITEM_LIGHT;i%2==0&&(p=Ib.DAILY_BG_ITEM_DARK);var g={playerId:h,name:d,score:u,rank:i,backgroundFrame:p};n.push(g),h==r&&(o=i),t&&t==h&&this.runTweenMoveToRank(i)}this.scroller.updateConfig(n);var f=0;if(this.scene.world.isLandscape()&&(f=20),!t){var m=this.scroller.getChildren()[0].height;this.scroller.value=-m*this.showDefaultRank(o)-f}this.showLeaders()}},n.showDefaultRank=function(e){return e<3?0:e-3},n.runTweenMoveToRank=function(e){var t=this,n=this.scroller.getChildren()[0].height;this.scrollerValue=-n*(e-3),this.tweenMoveToRank=this.scene.tweens.addCounter({from:this.scroller.value,to:this.scrollerValue,duration:1e3,onUpdate:function(e){t.scroller.value=e.getValue()}}),this.scene.time.delayedCall(2500,(function(){1!=e&&2!=e||(t.scroller.value=0)}))},n.removeLeaders=function(){this.scroller.updateConfig([])},n.getLeaders=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this,t=this.getLeaders();if(!(t.length<1)){for(var n=Math.min(t.length,6),i=0;i<n;i++){var a=t[i];a&&a.setVisible(!0)}var s=300+100*n+250;this.scene.time.delayedCall(s,(function(){e.scroller.setEnable(!0)}))}},n.getTestData=function(){return[{playerId:"001",name:"A",score:"001",rank:1},{playerId:"002",name:"B",score:"002",rank:2},{playerId:"003",name:"C",score:"003",rank:3},{playerId:"004",name:"D",score:"004",rank:4},{playerId:"005",name:"E",score:"005",rank:5},{playerId:"006",name:"F",score:"006",rank:6},{playerId:"007",name:"G",score:"007",rank:7}]},t}(Phaser.GameObjects.Container),bb=Cb;function Ob(e,t){var n="undefined"!==typeof Eo()&&Ao()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Pb(e,t);var i=Me()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return mo()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Rb=Ha.Z.DEFAULT,wb=Rb.KEY,xb=Rb.FRAME,kb=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonHome=void 0,s.contents=void 0,s.avatar=void 0,s.backgroundContent=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.buttonClose=void 0,s.leaderItems=void 0,s.timeText=void 0,s.scene=t,s.createPopup(),s.createScroller(),s.createContentBackground(),s.createAvatar(),s.createTitle(),s.createTimeText(),s.createButtons(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s.scene.world.isLandscape()&&s.popup.setScale(s.popup.scale-.2),s}(0,o.Z)(t,e);var n=t.prototype;return n.createScroller=function(){this.leaderItems=new bb(this.scene),this.popup.add(this.leaderItems),Phaser.Display.Align.In.Center(this.leaderItems,this.popup,0,36)},n.updateTimeText=function(){var e=this.scene.storage.getState(),t=cb(e);this.timeText.setText(this.secondsToHms(t))},n.secondsToHms=function(e){var t,n,i,a=Math.round(e/1e3%60),s=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return Me()(t="0"+r).call(t,-2)+":"+Me()(n="0"+s).call(n,-2)+":"+Me()(i="0"+a).call(i,-2)},n.getLeadersData=function(){var e=this.scene.game.storage.getState(),t=ob(e),n=[],i=ai()(t)||[],a=ri()(i).call(i,(function(e,t){return+e.score-+t.score}));if(a.length>0)for(var s,r=Ob(a);!(s=r()).done;){var o=s.value;n.push(o)}return n},n.open=function(){e.prototype.open.call(this),this.loadAvatar(),this.updateTimeText(),this.runOpenAnimation()},n.createPopup=function(){this.popup=new es.Z(this.scene,0,20,290,280,{forceHeightTop:54}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,-10)},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:wb,frame:xb.DAILY_BACKGROUND}),this.backgroundContent.setWorldSize(258,132),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-86)},n.createAvatar=function(){this.avatar=new pc(this.scene,{key:wb,frame:xb.AVATAR_BORDER,background:xb.AVATAR_BACKGROUND,width:70,height:70,radius:10,borderWidth:10}),this.popup.add(this.avatar),Phaser.Display.Align.In.Center(this.avatar,this.backgroundContent,71,-10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:wb,frame:xb.TEXT_RESULT}),n=t.width,i=t.height;t.setWorldSize(n/e,i/e),this.buttonClose=new Wa.Z(this.scene,wb,xb.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickButtonClose.bind(this),this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title,0,10),Phaser.Display.Align.In.Center(this.buttonClose,this.title,135,0),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,-30)},n.clickButtonClose=function(){this.runCloseAnimation(),this.scene.storage.dispatch(_h(!0)),this.scene.screen.open(Za.o4.MINI_JOURNEY_SCREEN)},n.createTimeText=function(){this.timeText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(35),text:"00:00:00",origin:{x:.5,y:.5}}),this.popup.add(this.timeText),this.timeText.setPosition(70,50)},n.createButtons=function(){this.createButtonHome()},n.createButtonHome=function(){this.buttonHome=new pb(this.scene),this.popup.add(this.buttonHome),this.buttonHome.onClick=this.clickButtonHome.bind(this),Phaser.Display.Align.In.BottomCenter(this.buttonHome,this.popup,0,5)},n.clickButtonHome=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.scene.switch(wa.Co.DASHBOARD_SCENE);case 1:case"end":return t.stop()}}),t)}))))},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},n.loadAvatar=function(){var e=this.scene.player.getPlayer(),t=e.playerId,n=e.photo;this.avatar.loadPhoto(t,n)},t}(GameCore.Screen),_b=GameCore.Configs,Lb=_b.OtherHost,Mb=_b.DailyChallenge,Db=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.v)("leaderboards/"+Mb.LeaderBoardId+"/players/"+t,{score:n},{},Lb);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nb=function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],a=Mb.Prefix+"/"+Mb.LeaderBoardId+"/leaders"){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,(0,Te.U)(a+"?limit="+t+"&offset="+n,{},Lb);case 6:if(s=e.sent,!((r=(null==s?void 0:s.data)||[]).length<1)){e.next=10;break}return e.abrupt("return",i);case 10:return i=r,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Bb(e,t){var n="undefined"!==typeof Eo()&&Ao()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Gb(e,t);var i=Me()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return mo()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gb(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Fb,Ub=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.time,s=e.limit,r=e.offset,o=window.game.player,c=o.getPlayerId(),n({type:xi,payload:{}}),n(Yb(a)),t.next=8,Db(c,a);case 8:return t.next=10,(0,To.qZ)(500);case 10:n(Hb({limit:s,offset:r})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,i.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},Hb=function(e){return function(){var t=(0,r.Z)(u().mark((function t(n){var a,s,r,o,c,l,h,d,p,g,f,m,v,E,S,A,T,y,I;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:xi,payload:{}}),a=e.limit,s=e.offset,r=window.game,o=r.player,c=r.profile,l=o.getPlayerId(),o.getConnectedPlayerIds(5,0).push(l),t.next=9,Nb(a,s);case 9:return h=t.sent,d=ce()(h).call(h,(function(e){return e.playerId})),d.push(o.getPlayerId()),t.next=14,c.requestProfiles(d);case 14:p=c.getProfiles(),g={},f=Bb(h);case 17:if((m=f()).done){t.next=26;break}if(v=m.value,E=v.playerId,S=v.score,A=v.rank,p[E]){t.next=22;break}return t.abrupt("continue",24);case 22:T=p[E],y=T.name,I=T.photo,g[E]={playerId:E,name:y,photo:I,score:S,rank:A};case 24:t.next=17;break;case 26:n(Zb(g)),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(0),n(Zb([])),(0,i.tO)(t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,29]])})));return function(e){return t.apply(this,arguments)}}()},Zb=function(e){return{type:ki,payload:{leaders:e}}},Yb=function(e){return{type:_i,payload:{time:e}}},Wb=Ha.Z.DEFAULT,Vb=Wb.KEY,zb=Wb.FRAME,Kb=function(e){function t(t){var n;return(n=e.call(this,t,Vb,zb.BUTTON_GREEN_BIG)||this).icon=void 0,n.text=void 0,n.button.setWorldSize(138,50),n.setName("Play"),n.createIcon(),n.createText(),n.alignItem(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createIcon=function(){this.icon=this.scene.make.image({key:Vb,frame:zb.ICON_I_PLAY}),this.icon.setWorldSize(20,26),this.add(this.icon)},n.createText=function(){var e=this.scene.world.getPixelRatio();this.text=this.scene.make.image({key:Vb,frame:zb.TEXT_PLAY});var t=this.text,n=t.width,i=t.height;this.text.setWorldSize(n/e,i/e),this.add(this.text)},n.alignItem=function(){var e=this.width,t=this.icon.width,n=this.text.width,i=e/2,a=(e-10-t-n)/2+t/2,s=a+10+t/2+n/2;Phaser.Display.Align.In.Center(this.icon,this,a-i,-2),Phaser.Display.Align.In.Center(this.text,this,s-i,-2)},t}(Wa.Z),jb=Kb,Xb=Ha.Z.DEFAULT,Jb=Xb.KEY,qb=Xb.FRAME,Qb=Ha.Z.GAMEPLAY,$b=Qb.KEY,eO=Qb.FRAME,tO=Ha.Z.GAMEPLAY_32,nO=tO.KEY,iO=tO.FRAME,aO=GameCore.Configs,sO=aO.Network,rO=aO.Board,oO=function(e){function t(t,n,i,a){var s;(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.buttonClose=void 0,s.contents=void 0,s.buttonPlay=void 0,s.boardCellData=[],s.targetData=[],s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.clickClose=function(){s.runCloseAnimation(),s.popupFadeOutAnimation.next((function(){var e=s.getData(["onClose"])[0];s.scene.screen.close(s.name),s.scene.scene.switch(wa.Co.DASHBOARD_SCENE),e&&e()}))},s.decodeMathData=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}},s.scene=t;try{s.createPopup(),s.createTitle(),s.createTargetItems(),s.createBoard(),s.createButtonPlay(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5)}catch(r){console.log("ex === ",r)}return s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(){var t=(0,r.Z)(u().mark((function t(n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.open.call(this,n),t.next=3,this.checkReceiveLevelFromFb();case 3:this.loadLevelConfig();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.startGame=function(){this.runOpenAnimation(),this.updateContent(),this.popup.setVisible(!0)},n.loadLevelConfig=function(){try{var e=this.scene.storage.getState(),t=el(e),n=Pf[t];if(!n)return void this.handleLoadCurrentMapComplete();var a=n.key,s=n.mapJson;if(this.scene.cache.tilemap.exists(a))return void this.handleLoadCurrentMapComplete();this.scene.load.tilemapTiledJSON(a,s),this.scene.load.start(),this.scene.load.off(Phaser.Loader.Events.COMPLETE),this.scene.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(r){(0,i.tO)(r)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.updateContent=function(){this.resetTarget(),this.drawTargetItems(),this.resetCellBoard(),this.updateCellBoard()},n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.scene.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.scene.storage.dispatch(Ah());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.scene.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:sO.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.scene.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-7,286,373),this.popup.setVisible(!1),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone,0,10)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Jb,frame:qb.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.buttonClose=new Wa.Z(this.scene,Jb,qb.BUTTON_CLOSE,35,35),this.buttonClose.setName("Close"),this.buttonClose.onClick=this.clickClose,this.title.add([t,this.buttonClose]),this.popup.add(this.title),Phaser.Display.Align.In.Center(t,this.title),Phaser.Display.Align.In.Center(this.buttonClose,this.title,138.5,-19.5),Phaser.Display.Align.In.TopCenter(this.title,this.popup,0,7)},n.createTargetItems=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:Jb,frame:qb.TEXT_COLLECT});t.setWorldSize(t.width/e,t.height/e);var n=this.scene.make.image({key:Jb,frame:qb.WOOD_PANEL});n.setWorldSize(200,37),this.popup.add([t,n]),Phaser.Display.Align.In.Center(t,this.popup,0,-155),Phaser.Display.Align.In.Center(n,this.popup,0,-125)},n.drawTargetItems=function(){var e,t,n=this.scene.storage.getState(),i=el(n),a=Pf[i];a||(a=Pf[Pf.length-1]);var s=this.scene.make.tilemap({key:a.key}).properties;if(s&&(0,_f.isArray)(s)&&!(s.length<2))for(var r=s[0].value,o=If()(e=If()(t=If()(r).call(r,"{",'{"')).call(t,", ",', "')).call(e,":",'":'),c=JSON.parse(o),l=B()(c),h=this.calcPosition(l.length),u=0;u<l.length;u++){var d=l[u],p=Av[d],g=c[d],f=this.targetData[u];f||(f=this.spawnTargetItem(p,g));var m=f,v=m.container,E=m.text,S=m.gem;v.setVisible(!0),E.setText("x"+g),S.setFrame(p),this.targetData.push(f),Phaser.Display.Align.In.Center(v,this.popup,h[u],-130)}},n.spawnTargetItem=function(e,t){var n=this.scene.make.container({}),i=this.scene.make.image({key:nO,frame:e});i.setWorldSize(15,15);var a=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"x"+t});return n.add([i,a]),Phaser.Display.Align.In.Center(a,n,0,15),this.popup.add(n),{container:n,gem:i,text:a}},n.calcPosition=function(e){for(var t=[],n=150/(e+1),i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.createBoard=function(){var e=this.scene.make.image({key:$b,frame:eO.BOARD});e.setWorldSize(200,184),this.popup.add(e),Phaser.Display.Align.In.Center(e,this.popup,0,-12),this.initCellBoard()},n.initCellBoard=function(){for(var e=0;e<rO.rows;e++){this.boardCellData[e]=[];for(var t=0;t<rO.cols;t++){var n=20*t-86.5+1.65*t,i=19*e-92+1*e,a=iO.GEM_TRANSPARENT,s=this.spawnCellBoard(a,n,i);this.boardCellData[e].push(s)}}},n.updateCellBoard=function(){var e=this.scene.storage.getState(),t=Qc(e).data.fen;if(t){var n=t.split("l")[0];this.drawBoardByFen(n)}else this.drawBoardByMap()},n.resetTarget=function(){for(var e=0;e<this.targetData.length;e++){var t;null==(t=this.targetData[e])||null==(t=t.container)||t.setVisible(!1)}},n.resetCellBoard=function(){for(var e=0;e<rO.rows;e++)for(var t=0;t<rO.cols;t++){this.boardCellData[e][t].setFrame(iO.GEM_TRANSPARENT)}},n.drawBoardByFen=function(e){for(var t=Zu()(e).call(e).split("/"),n=0;n<t.length;n++)for(var i=t[n].split(","),a=0;a<i.length;a++){var s=i[a];if("x"!==s){var r=Gv(s);this.boardCellData[n][a].setFrame(r)}}},n.drawBoardByMap=function(){var e=this.scene.storage.getState(),t=el(e),n=Pf[t];n||(n=Pf[Pf.length-1]);var i=this.scene.make.tilemap({key:n.key}).layers;if((0,_f.isArray)(i)){var a=i[0].data;if((0,_f.isArray)(a))for(var s=0;s<a.length;s++)for(var r=a[s],o=0;o<r.length;o++){var c=r[o];if(!(c.index<0)){var l=Av[c.index-1];this.boardCellData[s][o].setFrame(l)}}}},n.spawnCellBoard=function(e,t,n){var i=this.scene.make.image({key:nO,frame:e});return i.setWorldSize(20,19),this.popup.add(i),Phaser.Display.Align.In.Center(i,this.popup,t,n),i},n.createButtonPlay=function(){this.buttonPlay=new jb(this.scene),this.buttonPlay.onClick=this.handlePlay.bind(this),this.popup.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this.popup,0,111)},n.handlePlay=function(){var e=this;this.runCloseAnimation(),this.popupFadeOutAnimation.next((function(){e.scene.screen.close(e.name);var t=e.scene.storage.getState(),n=el(t);e.scene.storage.dispatch(Th()),n>Pf.length||(e.scene.analytics.levelStart(n,void 0,e.getLevelName(n)),e.scene.storage.dispatch(Dh()),e.scene.handleRetryLevel())}))},n.getLevelName=function(e){var t;return"journey_"+Fa()(t=GameCore.Utils.Number).call(t,e,4,"0")},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},ease:Phaser.Math.Easing.Back.In,onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.popup.setVisible(!1)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),cO=Ha.Z.DEFAULT,lO=cO.KEY,hO=cO.FRAME,uO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).scene=void 0,s.popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.textScore=void 0,s.titleFrame=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.scene=t,s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createTextScore(),s.addItem(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.scene.targetMissionManager.getTargetValue();this.textScore.setText(""+i);var a=this.getData(["duration"])[0];this.runOpenAnimation(),this.scene.time.delayedCall(a,(function(){n.handleClose()}))},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:lO,frame:hO.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){var e=this.scene.lang.Text;this.textTargetScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(50),text:e.TARGET_SCORE,origin:{x:.5,y:.5}}),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createTextScore=function(){this.textScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(80),text:"0",origin:{x:.5,y:.5}}),this.popup.add(this.textScore),Phaser.Display.Align.In.Center(this.textScore,this.backgroundContent,0,15)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){this.title=this.scene.add.container();var e=this.scene.world.getPixelRatio();this.titleFrame=this.scene.make.image({key:lO,frame:hO.TEXT_MISSION});var t=this.titleFrame,n=t.width,i=t.height;this.titleFrame.setWorldSize(n/e,i/e),this.title.add([this.titleFrame]),this.popup.add(this.title),Phaser.Display.Align.In.Center(this.titleFrame,this.title,0,-10),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name),n.scene.startGameAfterCollectionItemsScreenClose()}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),dO=uO,pO=Ha.Z.DEFAULT,gO=pO.KEY,fO=pO.FRAME,mO=function(){function e(e){this.scene=void 0,this.x=void 0,this.y=void 0,this.background=void 0,this.text=void 0,this.tweenStep1=void 0,this.tweenStep2=void 0,this.tweenStep3=void 0,this.tweenStep4=void 0,this.tweenStep5=void 0,this.tweenStep6=void 0,this.tweenTextStep1=void 0,this.tweenTextStep2=void 0,this.tweenTextStep5=void 0,this.tweenTextStep6=void 0,this.widthText=void 0,this.scene=e,this.init()}var t=e.prototype;return t.init=function(){this.createBackground(),this.createText(),this.createTween()},t.createBackground=function(){this.background=this.scene.make.image({key:gO,frame:fO.BG_STREAK}),this.background.setWorldSize(106,38),this.background.setVisible(!1)},t.createText=function(){this.text=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(50),origin:{x:.5,y:.5},text:"3X "+this.scene.lang.Text.STREAK+"!"}),this.text.setVisible(!1)},t.createTween=function(){var e=this,t=this.background.scale+.3;this.tweenStep1=this.scene.tweens.add({targets:[this.background],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:0,from:0,to:t}},paused:!0,onComplete:function(){e.tweenStep2.play()}}),this.tweenTextStep1=this.scene.tweens.add({targets:[this.text],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{start:.3,from:.3,to:1.4}},paused:!0,onComplete:function(){e.tweenTextStep2.play()}}),this.tweenStep2=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:t-.3}},paused:!0,onComplete:function(){e.tweenStep3.play()}}),this.tweenTextStep2=this.scene.tweens.add({targets:[this.text],duration:100,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1.4,to:1}},paused:!0,onComplete:function(){e.tweenTextStep5.play()}}),this.tweenStep3=this.scene.tweens.addCounter({from:0,to:20,paused:!0,duration:533,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y-n),e.background.setPosition(e.x,e.y-n)},onComplete:function(){e.y=e.y-20,e.tweenStep4.play()}}),this.tweenStep4=this.scene.tweens.addCounter({from:0,to:5,paused:!0,duration:333,ease:Phaser.Math.Easing.Sine.InOut,onUpdate:function(t){var n=t.getValue();e.text.setPosition(e.x,e.y+n),e.background.setPosition(e.x,e.y+n)},onComplete:function(){e.y=e.y+5,e.tweenStep5.play(),e.tweenTextStep5.play()}}),this.tweenStep5=this.scene.tweens.add({targets:[this.background],delay:567,duration:67,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t-.3,to:t}},paused:!0,onComplete:function(){e.tweenStep6.play()}}),this.tweenTextStep5=this.scene.tweens.add({targets:[this.text],delay:467,duration:133,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:1,to:.8}},paused:!0,onComplete:function(){e.tweenTextStep6.play()}}),this.tweenStep6=this.scene.tweens.add({targets:[this.background],duration:200,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:t,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.background.setVisible(!1),e.text.setScale(0),e.background.setScale(0)}}),this.tweenTextStep6=this.scene.tweens.add({targets:[this.text],duration:167,ease:Phaser.Math.Easing.Sine.InOut,props:{scale:{from:.8,to:1.7},alpha:{from:1,to:0}},paused:!0,onComplete:function(){e.text.setVisible(!1),e.text.setScale(0)}})},t.playAnim=function(e,t){(this.tweenTextStep1.isPlaying()||this.tweenTextStep2.isPlaying()||this.tweenTextStep5.isPlaying()||this.tweenTextStep6.isPlaying())&&(this.tweenTextStep1.stop(),this.tweenTextStep2.stop(),this.tweenTextStep5.stop(),this.tweenTextStep6.stop(),this.text.setScale(0),this.text.setVisible(!1),this.background.setScale(0),this.background.setVisible(!1)),this.x=e,this.y=t,this.text.setScale(0).setAlpha(1),this.background.setScale(0);var n=e,i=this.scene.gameZone.width;n=e-this.widthText/2<0?this.widthText/2+5:e+this.widthText/2>i?i-this.widthText/2-5:e,this.text.setPosition(n,t),this.background.setPosition(n,t),this.text.setVisible(!0),this.tweenTextStep1.play()},t.setTextCombo=function(e){this.text.setText(e+"X "+this.scene.lang.Text.COMBO),this.text.setScale(1),this.widthText=this.text.width+50},t.setTextStreak=function(e){this.text.setText(e+"X  "+this.scene.lang.Text.STREAK),this.text.setScale(1),this.widthText=this.text.width+50},t.setBgFrame=function(e){this.background.setFrame(e)},e}(),vO=function(){function e(e){this.scene=void 0,this.streakBreak=void 0,this.scene=e}return e.prototype.init=function(){this.streakBreak=new mO(this.scene)},e}(),EO=Ha.Z.DEFAULT,SO=EO.KEY,AO=EO.FRAME,TO=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).popup=void 0,s.title=void 0,s.contents=void 0,s.backgroundContent=void 0,s.textTargetScore=void 0,s.popupShowUpAnimation=void 0,s.popupFadeOutAnimation=void 0,s.contentShowUpAnimation=void 0,s.popupFadeInMaskAnimation=void 0,s.popupFadeOutMaskAnimation=void 0,s.handleClose=function(){s.runCloseAnimation()},s.startOver=function(){(0,s.getData(["onConfirm"])[0])(),s.handleClose()},s.createPopup(),s.createTitle(),s.createContentBackground(),s.createTextTargetScore(),s.createButtons(),s.addItem(),s.setDepth(Za.Ks.POPUP),s.background.setAlpha(.5),s}(0,o.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.runOpenAnimation()},n.createContentBackground=function(){this.backgroundContent=this.scene.make.image({key:SO,frame:AO.POPUP_CONTENT_BACKGROUND}),this.backgroundContent.setWorldSize(263,135),this.popup.add(this.backgroundContent),Phaser.Display.Align.In.TopCenter(this.backgroundContent,this.popup,0,-24)},n.createTextTargetScore=function(){"ar"==this.scene.facebook.getLocale()?(this.textTargetScore=this.scene.make.text({text:this.scene.lang.Text.MESS_START_OVER,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),this.textTargetScore.setTint(7551258),this.textTargetScore.setAlign("center")):(this.textTargetScore=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.MESS_START_OVER,origin:{x:.5,y:.5}}),this.textTargetScore.setCenterAlign()),this.popup.add(this.textTargetScore),Phaser.Display.Align.In.Center(this.textTargetScore,this.backgroundContent,0,-30)},n.createButtons=function(){var e,t,n=new Wa.Z(this.scene,SO,AO.BUTTON_GREEN_BIG,89,41),i=new Wa.Z(this.scene,SO,AO.BUTTON_DARK_BLUE_BIG,89,41);"ar"==this.scene.facebook.getLocale()?(e=this.scene.make.text({text:this.scene.lang.Text.OK,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),t=this.scene.make.text({text:this.scene.lang.Text.CANCEL,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5}}),e.setTint(15651762),t.setTint(15651762)):(e=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.OK,origin:{x:.5,y:.5}}),t=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(40),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}})),n.add(e),i.add(t),this.popup.add([n,i]),n.onClick=this.startOver,i.onClick=this.handleClose,Phaser.Display.Align.In.Center(n,this.backgroundContent,-60,30),Phaser.Display.Align.In.Center(i,this.backgroundContent,60,30)},n.createPopup=function(){this.popup=new es.Z(this.scene,0,-19,290,218,{forceHeightTop:55}),this.add(this.popup),Phaser.Display.Align.In.Center(this.popup,this.zone)},n.createTitle=function(){if(this.title=this.scene.add.container(),"ar"==this.scene.facebook.getLocale()){var e=this.scene.make.text({text:this.scene.lang.Text.CONFIRM_START_OVER,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(38)+"px"},origin:{x:.5,y:.5}});e.setTint(15651762),this.title.add([e]),Phaser.Display.Align.In.Center(e,this.title,0,-5)}else{var t=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(38),text:this.scene.lang.Text.CONFIRM_START_OVER,origin:{x:.5,y:.5}});this.title.add([t]),Phaser.Display.Align.In.Center(t,this.title,0,-5)}this.popup.add(this.title),Phaser.Display.Align.In.TopCenter(this.title,this.popup)},n.addItem=function(){this.popup.add([this.title]),this.contents=this.scene.add.group(),this.contents.addMultiple([])},n.runOpenAnimation=function(){var e;null!=(e=this.popupShowUpAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(Ya.Z.POPUP_SHOW),this.runPopupEntrancesAnimation(0,300),this.runFadeInMaskAnimation(100,300),this.runPopupContentEntrancesAnimation(200,300))},n.runCloseAnimation=function(){var e;null!=(e=this.popupFadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.runPopupExitsAnimation(50,200),this.runFadeOutMaskAnimation(0,200))},n.runPopupEntrancesAnimation=function(e,t){if(!this.popupShowUpAnimation){var n=this.popup.scale;this.popupShowUpAnimation=new $a.Z({targets:[this.popup],delay:e,duration:t,props:{y:0,alpha:{start:1,from:1,to:1},scale:{start:0,from:0,to:n}}})}this.popupShowUpAnimation.play()},n.runPopupContentEntrancesAnimation=function(e,t){var n;null==(n=this.contentShowUpAnimation)||n.remove(),this.contentShowUpAnimation=new Qa.Z({targets:this.contents.getChildren(),duration:t,delay:e,props:{alpha:{start:0,from:0,to:1}}}),this.contentShowUpAnimation.play()},n.runPopupExitsAnimation=function(e,t){var n=this;this.popupFadeOutAnimation||(this.popupFadeOutAnimation=new qa.Z({targets:[this.popup],delay:e,duration:t,props:{scale:0},onComplete:function(){n.popup.setY(0),n.scene.screen.close(n.name)}})),this.popupFadeOutAnimation.play()},n.runFadeInMaskAnimation=function(e,t){if(!this.popupFadeInMaskAnimation){var n=this.background.alpha;this.popupFadeInMaskAnimation=new go.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:0,from:0,to:n}}})}this.popupFadeInMaskAnimation.play()},n.runFadeOutMaskAnimation=function(e,t){if(!this.popupFadeOutMaskAnimation){var n=this.background.alpha;this.popupFadeOutMaskAnimation=new qa.Z({targets:[this.background],delay:e,duration:t,props:{alpha:{start:n,from:n,to:0}}})}this.popupFadeOutMaskAnimation.play()},t}(GameCore.Screen),yO=TO,IO=n(436),CO=function(){function e(){}return e.create=function(e,t,n){var i;switch(n.type){case tm:case nm:case im:i=new wI(e,t,n);break;case am:case sm:case rm:case om:i=new kI(e,t,n);break;case cm:case lm:case hm:i=new LI(e,t,n);break;case dm:i=new DI(e,t,n);break;case pm:i=new YI(e,t,n);break;case Sm:i=new VI(e,t,n);break;case gm:i=new HI(e,t,n);break;case fm:case mm:case vm:case Em:i=new BI(e,t,n);break;case um:i=new FI(e,t,n);break;default:i=new LI(e,t,n)}return i},e}(),bO=CO,OO=Ha.Z.GAMEPLAY_32,PO=OO.KEY,RO=OO.FRAME,wO=IO.Z.Configs,xO=wO.Gameplay,kO=wO.Match,_O=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.tweenToEnableMaxFps=void 0,n.cellSize=void 0,n.canCaptureLines=void 0,n.allPieces=[],n.allPiecesGroup=[],n.piecesActive=[],n.positionPiece=void 0,n.listPieceMap=[],n.amountPieceContainGem=0,n.hasPieceContainGem=void 0,n.segmentAmountPiece1Min=0,n.segmentAmountPiece1Max=0,n.segmentAmountPiece1Cur=0,n.segmentAmountPiece5Min=0,n.segmentAmountPiece5Max=0,n.segmentAmountPiece5Cur=0,n.segmentAvgScore=0,n.segmentTotalPieceScore=0,n.segmentTotalPiece=0,n.segmentTotalScore=0,n.segmentPieceDistancePerGem=0,n.segmentPieceRandomGem=!1,n.scene=t,n.canCaptureLines={isCapture:!1,direction:"",minLine:5},n.setSizeAndPositionPiece(),t.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.setSizeAndPositionPiece=function(){this.scene.world.isLandscape()?this.setSize(101,300):this.setSize(375,140);var e=this.scene.gameZone,t=e.width,n=(e.height/2-176-27+100)/-2;console.log("pieceY",n),this.positionPiece=[{x:-t/3,y:n},{x:0,y:n},{x:t/3,y:n}]},n.init=function(){this.initCellSize(),this.createAllPieces(),this.createAllPiecesGroup(),this.createTweenToEnableMaxFps(),this.addDebuggerBtnRandomPieces()},n.registerEvents=function(){},n.handleResize=function(){this.initCellSize(),this.resetAllPieces2();for(var e=0;e<this.piecesActive.length;e++){var t=this.allPieces[this.piecesActive[e].position].piece,n=this.positionPiece[e],i=n.x,a=n.y;t.updatePosition(i,a),t.updateWrapPiecePosition()}},n.resetAllPieces2=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e].piece;t.resetPiece(),t.updateSize(),t.listenEvents()}},n.initCellSize=function(){var e=this.scene.layoutManager.objects.main;this.scene.world.isLandscape()?this.cellSize=35*e.board.cellSize/100:this.cellSize=41*e.board.cellSize/100},n.createTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps=this.scene.add.tween({targets:[],duration:300,loop:-1,paused:!0})},n.playTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.play()},n.stopTweenToEnableMaxFps=function(){this.tweenToEnableMaxFps.stop()},n.getDirectionsByType=function(e){if([cm,lm,hm].some((function(t){return t===e})))return[];var t=[];switch(e){case tm:case nm:case im:t=[Gf,Nf,Bf,Ff];break;case am:case sm:case rm:case om:t=[Mf,Df];break;case dm:t=[Gf,Nf,Bf,Ff];break;case um:t=[Uf,Hf,Zf,Yf];break;case pm:case Sm:t=[Gf,Nf,Bf,Ff];break;case gm:t=[];break;case fm:case mm:case vm:case Em:t=[Nf,Bf]}return t},n.createAllPieces=function(){for(var e=this.cellSize,t=[],n=0;n<Am.length;n++){var i=this.getDirectionsByType(Am[n]);if(i.length<=0)t.push({type:Am[n]});else{for(var a=0;a<i.length;a++)t.push({type:Am[n],direction:i[a]});if(tm===Am[n])for(var r=0;r<i.length;r++)t.push({type:Am[n],direction:i[r],isReverse:!0})}}for(var o=0;o<t.length;o++){var c=(0,s.Z)({},t[o],{texture:PO,frame:RO.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2),cellLength:Math.floor(e/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(e/2),height:Math.floor(e/2)}}),l=bO.create(this.scene,this,c);this.add(l),l.hide(),this.allPieces.push({piece:l,isUsed:!1})}},n.createAllPiecesGroup=function(){for(var e=0;e<this.allPieces.length;e++){var t=this.allPieces[e].piece;this.allPiecesGroup[t.type]||(this.allPiecesGroup[t.type]=[]),this.allPiecesGroup[t.type].push(e)}},n.randomPieces=function(){var e=this;this.scene.game.updateFps(wu.Z.max);for(var t=this.buildPieceRates(!1),n=[],i=function(){var i=Math.floor(Math.random()*t.length),a=t[i];if(!e.allPiecesGroup[a])return 1;var s=Math.floor(Math.random()*e.allPiecesGroup[a].length),r=e.allPiecesGroup[a][s],o=[rm,om].some((function(e){return e===a}));if(e.canCaptureLines.isCapture&&o){for(var c=0;c<e.allPiecesGroup[a].length;c++){var l=e.allPiecesGroup[a][c],h=e.allPieces[l].piece;if(h&&h.direction===e.canCaptureLines.direction){r=l;break}}t=e.buildPieceRates(!1)}n.some((function(e){return e.index===r}))||n.push({index:r,type:a})};n.length<3;)i();for(var a=[],s=0;s<n.length;s++){var r=n[s].index,o=this.allPieces[r].piece;a.push({position:r,texture:PO,frame:RO.GEM,type:o.type,direction:o.direction,isReverse:o.isReverse})}this.piecesActive=a},n.buildPieceRates=function(e){void 0===e&&(e=!0);for(var t=[],n=0;n<Tm.length;n++)t.push((0,s.Z)({},Tm[n]));var i=this.scene.layoutManager.objects.main;if(e){var a=i.board.dataBoard,r=5;if(this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var o=0;o<t.length;o++)t[o].type===om&&(t[o].rate=8);else if(r=4,this.canCaptureLines=i.board.canCaptureLines(a,r),this.canCaptureLines.isCapture)for(var c=0;c<t.length;c++)t[c].type===rm&&(t[c].rate=8)}for(var l=[],h=0;h<t.length;h++)for(var u=t[h],d=u.type,p=u.rate,g=0;g<p;g++)l.push(d);return l},n.drawPieces=function(){console.log("this.piecesActive === ",this.piecesActive);for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e],n=t.position,i=t.fenPiece,a=this.allPieces[n].piece,s=this.positionPiece[e],r=s.x,o=s.y;if(i){var c=this.convertFenPiecesToData(i);c&&a.updateDataPiece(c)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var l=this.getRandomPieceData(a.data);l&&a.updateDataPiece(l)}}a.updatePosition(r,o),a.updateWrapPiecePosition(),a.setIndex(e),a.drawPiece(),this.allPieces[n]={piece:a,isUsed:!0}}},n.isPieceContainGem=function(){if(1===Phaser.Math.Between(0,1)&&!this.hasPieceContainGem)return this.amountPieceContainGem++,this.hasPieceContainGem=!0,!0;if(this.amountPieceContainGem<xO.RatePieceContainGem)return this.amountPieceContainGem++,!1;if(this.amountPieceContainGem>=xO.RatePieceContainGem){var e=this.hasPieceContainGem;return this.amountPieceContainGem=0,this.hasPieceContainGem=!1,!e}return!1},n.convertFenPiecesToData=function(e){if(!e)return null;var t=e.split("/");if(0===t.length)return null;for(var n=[],i=0;i<t.length;i++){var a=t[i].split(",");n[i]=[];for(var s=0;s<a.length;s++){var r=Gv(a[s]);"null"!==a[s]&&"x"!==a[s]||(r=null),n[i].push({x:i,y:s,texture:r})}}return n},n.countDataGem=function(e){for(var t=0,n=0;n<e.length;n++)e[n].texture&&t++;return t},n.getRandomPieceData=function(e){var t=this.scene.layoutManager.objects.header.collectItems.getTargetKeys();if(!t||0===t.length)return null;for(var n=0,i=e.length,a=e[0].length,s=0;s<i;s++)for(var r=0;r<a;r++){var o=this.countDataGem(e[s]);if(e[s][r].texture&&(Phaser.Math.Between(0,1)||n||r+1===o)){var c=RO.GEM;if(n<xO.MaxGemInPiece)c=t[Phaser.Math.Between(0,t.length-1)];e[s][r]={x:s,y:r,texture:c},n++}}return e},n.removeActivePiece=function(e){this.piecesActive[e].used=!0},n.existPiecesActive=function(){var e,t=re()(e=this.piecesActive).call(e,(function(e){return!e.used}));return t&&t.length>0},n.showNewPieces=function(){this.resetAllPieces(),this.listPieceMap.length>0?this.showListPieceMap():(this.randomPieces(),this.setActivePieces(),this.drawPieces())},n.setActivePieces=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t].position,i=this.allPieces[n].piece,a=Lv(e,i);i.setCanMove(a)}},n.getPiecesByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=Da()(n).call(n,2),a=0;a<i.length;a++){var s,r;if("l"!==Zu()(s=i[a]).call(s)){var o=Uv(Zu()(r=i[a]).call(r));t.push(o)}}return t},n.getFenByPieces=function(){for(var e="l",t=0;t<this.piecesActive.length;t++){var n=this.piecesActive[t],i=n.type,a=n.direction,s=n.isReverse,r=n.used,o=n.position;if(!r){var c=Bv(i);a&&""!==a&&(c+="-"+Bv(a)),s&&(c+="-r");var l=this.allPieces[o].piece;e+=" "+c+"|"+this.getFenDataPiece(l)}}return e},n.getFenDataPiece=function(e){for(var t=e.data,n=t.length,i=t[0].length,a="",s=0;s<n;s++){for(var r="",o=0;o<i;o++)r+=","+Bv(t[s][o].texture);a+="/"+r.substring(1)}return a.substring(1)},n.clearPieces=function(){for(var e=0;e<this.piecesActive.length;e++){var t=this.piecesActive[e].position;this.allPieces[t].isUsed=!1,this.allPieces[t].piece.hide()}this.piecesActive=[],this.listPieceMap=[]},n.resetAllPieces=function(){for(var e=0;e<this.allPieces.length;e++)this.allPieces[e].isUsed=!1,this.allPieces[e].piece.reset()},n.showAvailablePieces=function(e){if(e&&!(e.length<=0)){this.resetAllPieces();for(var t=[],n=0;n<e.length;n++){for(var i=e[n],a=i.type,s=i.direction,r=i.isReverse,o=i.frame,c=!1,l=0;l<this.allPieces.length;l++){var h=this.allPieces[l],u=h.piece,d=h.isUsed;if(a===u.type&&s===u.direction&&r===u.isReverse){if(d){c=!0;continue}c=!1,t.push({position:l,texture:PO,frame:o,type:u.type,direction:u.direction,isReverse:u.isReverse,fenPiece:e[n].fenPiece}),this.allPieces[l].isUsed=!0;break}}if(c){var p=this.spawnPiece(a,s,r),g=p.piece,f=p.index;t.push({position:f,texture:PO,frame:o,type:g.type,direction:g.direction,isReverse:g.isReverse,fenPiece:e[n].fenPiece})}}this.piecesActive=t,this.setActivePieces(),this.drawPieces()}},n.spawnPiece=function(e,t,n){var i=this.cellSize,a={type:e,direction:t,isReverse:n,texture:PO,frame:RO.GEM,x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2),cellLength:Math.floor(i/2),parentHeight:this.height,wrap:{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.floor(i/2),height:Math.floor(i/2)}},s=bO.create(this.scene,this,a);return s.hide(),this.allPieces.push({piece:s,isUsed:!0}),this.add(s),{piece:s,index:this.allPieces.length-1}},n.showListPieceMap=function(){var e;this.piecesActive=Da()(e=this.listPieceMap).call(e,0,3),this.showAvailablePieces(this.piecesActive);var t=this.scene.layoutManager.objects.footer;if(t.textExist){var n=this.listPieceMap.length<=0?"Done":"Exits";t.textExist.setText(n)}},n.validItemsPieceMap=function(e){for(var t,n=!0,i=m()(t=[]).call(t,e),a=function(){var e=i.shift(),t=re()(i).call(i,(function(t){return t.type===(null==e?void 0:e.type)&&t.direction===e.direction&&t.isReverse===e.isReverse}));t&&t.length>0&&(n=!1)};i.length>1;)a();return n},n.getPieceDataByType=function(e){return Tv[e]},n.addItemPieceMap=function(e){if(e.properties){var t=this.getFenPieceForPropertiesPieceMap(e);t&&(e=(0,s.Z)({},e,{fenPiece:t}))}this.listPieceMap.push(e)},n.getFenPieceForPropertiesPieceMap=function(e){var t,n;if(!e.properties)return"";var i="",a=null==(t=re()(n=this.allPieces).call(n,(function(t){var n=t.piece;return n.direction===e.direction&&n.isReverse===e.isReverse&&n.type===e.type}))[0])?void 0:t.piece,s=e.properties[0].value.split(","),r=e.properties[1].value.split(","),o=0;if(!a)return i;for(var c=a.data,l=c.length,h=c[0].length,u=0;u<l;u++){for(var d="",p=0;p<h;p++){var g=c[u][p].texture,f=g,m=gt()(r).call(r,String(o));g&&(-1!==m&&(f=Av[s[m]]),o++);var v=null;f&&(v=Bv(f)),d+=","+v}i+="/"+d.substring(1)}return i.substring(1)},n.start=function(){0!==this.listPieceMap.length?this.showListPieceMap():this.showNewPieces()},n.getListPieceMap=function(){return this.listPieceMap},n.setListPieceMap=function(e){var t;this.listPieceMap=m()(t=[]).call(t,e)},n.buildPiecesByMap=function(){var e=this.scene.mapManager.getTileMap().layers[0].properties;if(e&&!(e.length<=0)){for(var t=0;t<e.length;t++){var n=e[t].value;if(n){var i=n.avgScore,a=n.score,s=n.pieceDistancePerGem;console.log("pieceDistancePerGem === ",s,i,a);var r=n.piece1,o=n.piece5;r=r.replace("min",'"min"').replace("max",'"max"'),o=o.replace("min",'"min"').replace("max",'"max"');var c=JSON.parse(r),l=JSON.parse(o);this.segmentAvgScore=i,this.segmentAmountPiece1Min=c.min,this.segmentAmountPiece1Max=c.max,this.segmentAmountPiece5Min=l.min,this.segmentAmountPiece5Max=l.max,this.segmentTotalScore=a,this.segmentPieceDistancePerGem=s,this.segmentTotalPieceScore=0,this.segmentTotalPiece=0,this.listPieceMap=[],this.buildObjectPieces()}}console.log("listttttttt ",this.listPieceMap)}},n.buildObjectPieces=function(){for(;this.checkAverageScore();)this.buildObjectPiece()},n.checkAverageScore=function(){return 0===this.segmentTotalPiece||0===this.segmentTotalPieceScore||!(this.segmentTotalPiece>kO.PieceRandoms.maxPiece)&&!(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore+kO.PieceRandoms.measureError&&this.segmentTotalPieceScore/this.segmentTotalPiece>=this.segmentAvgScore-kO.PieceRandoms.measureError&&this.segmentTotalPieceScore>=this.segmentTotalScore)},n.buildObjectPiece=function(){var e=this.getPieceByAvgScore();if(e)if(this.checkPieceMaxAmountConfig(e)){var t="";if(Math.floor((this.segmentTotalPiece-1)/3)%this.segmentPieceDistancePerGem===0){var n=Phaser.Math.Between(0,1);if((this.segmentTotalPiece-1)%3===0&&1===this.segmentPieceDistancePerGem&&(this.segmentPieceRandomGem=!1),n&&!this.segmentPieceRandomGem||!this.segmentPieceRandomGem&&this.segmentTotalPiece%3===2){var i=this.getRandomPieceData(e.data);i&&(e.updateDataPiece(i),t=this.getFenDataPiece(e)),this.segmentPieceRandomGem=!0}}else this.segmentPieceRandomGem=!1;this.listPieceMap.push({type:e.type,direction:e.direction,isReverse:e.isReverse,fenPiece:t})}else this.buildObjectPiece()},n.checkPieceMaxAmountConfig=function(e){var t=e.getScore();switch(t){case 1:if(this.segmentAmountPiece1Max<=this.segmentAmountPiece1Cur)return!1;this.segmentAmountPiece1Cur++;break;case 5:if(this.segmentAmountPiece5Max<=this.segmentAmountPiece5Cur)return!1;this.segmentAmountPiece5Cur++}return this.segmentTotalPiece++,this.segmentTotalPieceScore+=t,!0},n.getPieceByAvgScore=function(){var e=this;if(this.segmentTotalPieceScore<this.segmentTotalScore){var t=this.buildPieceRates(!1),n=t[Math.floor(Math.random()*t.length)];if(!this.allPiecesGroup[n])return null;var i=Math.floor(Math.random()*this.allPiecesGroup[n].length),a=this.allPiecesGroup[n][i];return this.allPieces[a].piece}if(this.segmentTotalPieceScore/this.segmentTotalPiece<=this.segmentAvgScore){var s,r=re()(s=this.allPieces).call(s,(function(t){return t.piece.getScore()<=e.segmentAvgScore}));return r&&0!==r.length?r[Phaser.Math.Between(0,r.length-1)].piece:null}if(this.segmentTotalPieceScore/this.segmentTotalPiece>this.segmentAvgScore){var o,c=re()(o=this.allPieces).call(o,(function(t){return t.piece.getScore()>e.segmentAvgScore}));return c&&0!==c.length?c[Phaser.Math.Between(0,c.length-1)].piece:null}return null},n.debuggerNextPieces=function(){for(var e=0;e<this.piecesActive.length;e++)this.removeActivePiece(e);for(var t=0;t<this.allPieces.length;t++)this.allPieces[t].piece.wrapPiece.setVisible(!1);this.showNewPieces()},n.addDebuggerBtnRandomPieces=function(){var e=this;if(IO.Z.Utils.Valid.isDebugger())for(var t=[80,187.5,295],n=this.scene.gameZone.height,i=function(i){var a=new Wa.Z(e.scene,PO,RO.GEM,50,30);e.add(a),a.onClick=function(){e.debuggerNewPieces(i)},a.setPosition(t[i],n)},a=0;a<3;a++)i(a)},n.debuggerNewPieces=function(e){this.removeActivePiece(e);var t=this.piecesActive[e],n=this.allPieces[t.position].piece;n.setVisible(!1);var i=Phaser.Math.Between(0,this.allPieces.length-1);this.piecesActive[e]={position:i,texture:PO,frame:RO.GEM,type:n.type,direction:n.direction,isReverse:n.isReverse};var a=this.piecesActive[e],s=a.position,r=a.fenPiece,o=this.allPieces[s].piece,c=this.positionPiece[e],l=c.x,h=c.y;if(r){var u=this.convertFenPiecesToData(r);u&&o.updateDataPiece(u)}else{if(0===this.listPieceMap.length)if(this.isPieceContainGem()){var d=this.getRandomPieceData(o.data);d&&o.updateDataPiece(d)}}o.updatePosition(l,h),o.setIndex(e),o.drawPiece()},t}(Phaser.GameObjects.Container),LO=Ha.Z.GAMEPLAY,MO=LO.KEY,DO=LO.FRAME,NO=function(e){function t(t){var n;return(n=e.call(this,t,MO,DO.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:MO,frame:DO.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(Wa.Z),BO=NO,GO=Ha.Z.GAMEPLAY,FO=GO.KEY,UO=GO.FRAME,HO=Ha.Z.DEFAULT,ZO=HO.KEY,YO=HO.FRAME,WO=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.pieces=void 0,n.debugButton=void 0,n.textExist=void 0,n.background=void 0,n.pX=void 0,n.pY=void 0,n.buttonSetting=void 0,n.panelNextBlock=void 0,n.textNextBlock=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,85),t.add.existing((0,La.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createDebugButton(),this.addBgPieces(),this.createTextNextBlock(),this.createSettingButton(),this.createPieces()},n.createBackground=function(){this.background=this.scene.make.image({key:ZO,frame:YO.FOOTER});var e=this.scene.gameZone.width;this.background.setWorldSize(e,this.height),this.add(this.background),Phaser.Display.Align.In.BottomCenter(this.background,this)},n.createPieces=function(){this.pieces=new _O(this.scene),this.add(this.pieces),this.pieces.setPosition(0,30)},n.createDebugButton=function(){GameCore.Utils.Valid.isDebugger()&&this.createDebugButtonNextPieces()},n.createDebugButtonNextPieces=function(){this.debugButton=new Wa.Z(this.scene,FO,UO.BUTTON_WOOD_SMALL,100,30),this.debugButton.setName("Debug");var e=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Next pieces",origin:{x:.5,y:.5}});this.debugButton.add([e]),this.debugButton.onClick=this.clickButtonNextPieces.bind(this),this.add(this.debugButton),Phaser.Display.Align.In.BottomLeft(this.debugButton,this),this.textExist=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),text:"Exist",origin:{x:.5,y:.5}}),this.debugButton.add([this.textExist]),Phaser.Display.Align.In.Center(this.textExist,this,80,0)},n.clickButtonNextPieces=function(){this.scene.layoutManager.objects.footer.pieces.debuggerNextPieces()},n.updateUIPortrait=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.pieces.setPosition(0,30),this.panelNextBlock.setVisible(!1),this.textNextBlock.setVisible(!1),this.buttonSetting.setVisible(!1),null==(e=this.debugButton)||e.setVisible(!0),null==(t=this.textExist)||t.setVisible(!0),this.pieces.handleResize()},n.updateUILandscape=function(){var e,t;this.pieces.setSizeAndPositionPiece(),this.initPosition(),this.panelNextBlock.setVisible(!0),this.textNextBlock.setVisible(!0),this.buttonSetting.setVisible(!0),null==(e=this.debugButton)||e.setVisible(!1),null==(t=this.textExist)||t.setVisible(!1);var n=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomLeft(this.buttonSetting,this.scene.gameZone,-5,-n/2-5),this.pieces.handleResize()},n.initPosition=function(){var e=this.panelNextBlock.displayHeight/3;this.pieces.positionPiece=[{x:0,y:-e},{x:0,y:0},{x:0,y:e}],this.pieces.setPosition(0,0)},n.updateBg=function(){this.background.setVisible(!1)},n.addBgPieces=function(){this.panelNextBlock=this.scene.make.image({key:ZO,frame:YO.PANEL_NEXT_BLOCK}),this.panelNextBlock.setVisible(!1),this.panelNextBlock.setWorldSize(100.5,300),this.add(this.panelNextBlock)},n.createTextNextBlock=function(){var e=this.scene.world.getPixelRatio();this.textNextBlock=this.scene.make.image({key:ZO,frame:YO.TEXT_NEXT_BLOCK});var t=this.textNextBlock,n=t.width,i=t.height;this.textNextBlock.setVisible(!1),this.textNextBlock.setWorldSize(n/e,i/e),this.add(this.textNextBlock),Phaser.Display.Align.In.TopCenter(this.textNextBlock,this.panelNextBlock,0,42)},n.createSettingButton=function(){this.buttonSetting=new BO(this.scene),this.buttonSetting.setWorldSize(52,45),this.buttonSetting.setVisible(!1),this.buttonSetting.onClick=this.handleClickSetting.bind(this),this.buttonSetting.setDepth(Ua.Z.BUTTON)},n.handleClickSetting=function(){this.scene.handlePauseGame()},t}(Phaser.GameObjects.Container),VO=WO,zO=Ha.Z.DEFAULT,KO=zO.KEY,jO=zO.FRAME,XO=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.bestScoreText=void 0,n.titleText=void 0,n.titleText2=void 0,n.dayText=void 0,n.titleDayText=void 0,n.setPosition(0,48.5),n.createBackground(),n.createScoreText(),n.createLevelTitleText(),n.createLevelTitleText2(),n.createTitleDayText(),n.createDayText(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:KO,frame:jO.BEST_SCORE_FRAME}),this.background.setWorldSize(55,77),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.bestScoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(32),origin:{x:.5,y:.5},text:"0"}),this.add(this.bestScoreText),Phaser.Display.Align.In.Center(this.bestScoreText,this.background,0,23)},n.createTitleDayText=function(){var e=this.scene.game.lang,t=this.scene.facebook.getLocale();"ar"==t?(this.titleDayText=this.scene.make.text({style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(40)+"px"},origin:{x:.5,y:.5},text:e.Text.mmddyy}),this.titleDayText.setTint(15389360)):this.titleDayText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5},text:e.Text.mmddyy}),"id"==t&&this.titleDayText.setFontSize(this.scene.fontSize(25)),this.add(this.titleDayText),Phaser.Display.Align.In.Center(this.titleDayText,this.background,0,4)},n.createDayText=function(){this.dayText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"0"}),this.add(this.dayText),Phaser.Display.Align.In.Center(this.dayText,this.background,0,23)},n.createLevelTitleText=function(){this.titleText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:this.scene.lang.Text.LEVEL}),this.add(this.titleText),Phaser.Display.Align.In.Center(this.titleText,this.background,0,4)},n.createLevelTitleText2=function(){this.titleText2=this.scene.make.text({text:this.scene.lang.Text.LEVEL,style:{fontFamily:Va.Z.FONT_FAMILY,fontSize:this.scene.fontSize(32)+"px"},origin:{x:.5,y:.5}}),this.titleText2.setTint(15651762),this.titleText2.setVisible(!1),this.add(this.titleText2),Phaser.Display.Align.In.Center(this.titleText2,this.background,0,4)},n.setScoreText=function(e){this.bestScoreText.setText(String(e))},n.setDayText=function(e){this.dayText.setText(e)},n.showTextScore=function(){this.titleText.setVisible(!0),this.bestScoreText.setVisible(!0),"ar"==this.scene.facebook.getLocale()&&(this.titleText2.setVisible(!0),this.titleText.setVisible(!1)),this.titleDayText.setVisible(!1),this.dayText.setVisible(!1)},n.showTextDay=function(){this.titleText.setVisible(!1),this.titleText2.setVisible(!1),this.bestScoreText.setVisible(!1),this.titleDayText.setVisible(!0),this.dayText.setVisible(!0)},t}(Phaser.GameObjects.Container),JO=XO,qO=Ha.Z.GAMEPLAY,QO=qO.KEY,$O=qO.FRAME,eP=Ha.Z.GAMEPLAY_32.KEY,tP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.imageGem=void 0,n.imageCheck=void 0,n.text=void 0,n.particle=void 0,n.emitter=void 0,n.currentPosition=void 0,n.imageGlow=void 0,n.tweenGlow=void 0,n.imageGlowCrop=void 0,n.tweenCropMaskTopDown=void 0,n.tweenCropMaskDownBottom=void 0,n.imageStar=void 0,n.tweenShowStar=void 0,n.tweenHideStar=void 0,n.tweenShowMe=void 0,n.scene=t,n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createImageGem(),this.createImageCheck(),this.createText(),this.createParticle(),this.createEmitter(),this.createGlow(),this.createTweenGlow(),this.createGlowCrop(),this.createStar(),this.createTweenStar(),this.createTweenShowMe()},n.createImageGem=function(){this.imageGem=this.scene.make.image({key:eP}),this.imageGem.setWorldSize(22,22),this.add(this.imageGem),Phaser.Display.Align.In.Center(this.imageGem,this,0,-7)},n.createImageCheck=function(){this.imageCheck=this.scene.make.image({key:QO,frame:$O.ICON_CHECK}),this.imageCheck.setWorldSize(22,17),this.imageCheck.setVisible(!1),this.add(this.imageCheck),Phaser.Display.Align.In.Center(this.imageCheck,this.imageGem)},n.createText=function(){this.text=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5}}),this.add(this.text),Phaser.Display.Align.In.Center(this.text,this.imageGem,0,19)},n.createParticle=function(){this.particle=this.scene.add.particles(QO).setDepth(Ua.Z.ON_TOP)},n.createEmitter=function(){var e=1.5/this.scene.world.getPixelRatio();this.emitter=this.particle.createEmitter({on:!1,angle:{start:0,end:360,steps:8},frame:[$O.DUST],lifespan:1e3,quantity:1,scale:{start:e,end:0,ease:"Quart.easeIn"},speed:50})},n.createGlow=function(){this.imageGlow=this.scene.make.image({key:QO,frame:$O.VIOLET_GLOW}),this.imageGlow.setVisible(!1).setScale(0).setAlpha(0),this.add(this.imageGlow),Phaser.Display.Align.In.Center(this.imageGlow,this.imageGem)},n.createTweenGlow=function(){var e=this;this.tweenGlow=this.scene.tweens.add({targets:[this.imageGlow],paused:!0,scale:{from:0,to:.6},alpha:{from:0,to:1},delay:100,duration:600,onComplete:function(){e.imageGlow.setVisible(!1).setScale(0).setAlpha(0),e.playAnimMaskCrop(),e.playAnimStar()}})},n.createGlowCrop=function(){this.imageGlowCrop=this.scene.make.image({key:QO,frame:$O.MASK}),this.imageGlowCrop.setVisible(!1),this.imageGlowCrop.setWorldSize(this.imageGem.displayWidth,this.imageGem.displayHeight),this.add(this.imageGlowCrop),Phaser.Display.Align.In.Center(this.imageGlowCrop,this.imageGem)},n.createStar=function(){this.imageStar=this.scene.make.image({key:QO,frame:$O.ICON_STAR_1}),this.imageStar.setVisible(!1).setScale(0).setAlpha(0),this.imageStar.setWorldSize(27,26),this.add(this.imageStar),Phaser.Display.Align.In.Center(this.imageStar,this.imageGem,-10,-10)},n.createTweenStar=function(){var e=this;this.tweenHideStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:1,to:0},alpha:{from:1,to:0},delay:100,duration:500,onComplete:function(){e.imageStar.setVisible(!1).setScale(0).setAlpha(0)}}),this.tweenShowStar=this.scene.add.tween({paused:!0,targets:[this.imageStar],scale:{from:0,to:1},alpha:{from:0,to:1},delay:100,duration:500,onComplete:function(){e.tweenHideStar.play()}})},n.createTweenShowMe=function(){this.tweenShowMe=this.scene.add.tween({paused:!0,targets:[this],alpha:{from:0,to:1},duration:200})},n.cropTopDownImageGlow=function(){var e=this;if(!this.tweenCropMaskTopDown){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskTopDown=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,0,n/i,r/a)},onComplete:function(){e.cropDownBottomImageGlow()}})}this.tweenCropMaskTopDown.play()},n.cropDownBottomImageGlow=function(){var e=this;if(!this.tweenCropMaskDownBottom){var t=this.imageGlowCrop.displayHeight,n=this.imageGlowCrop.displayWidth,i=this.imageGlowCrop.scaleX,a=this.imageGlowCrop.scaleY;this.tweenCropMaskDownBottom=this.scene.tweens.addCounter({from:0,to:1,delay:200,duration:300,paused:!0,onUpdate:function(s){var r=s.getValue(0)*t;e.imageGlowCrop.setCrop(0,r/a,n/i,t/a)}})}this.tweenCropMaskDownBottom.play()},n.playAnimStar=function(){this.imageStar.setVisible(!0),this.tweenShowStar.play()},n.playAnimMaskCrop=function(){this.imageGlowCrop.setVisible(!0).setCrop(0,0,0,0),this.cropTopDownImageGlow()},n.setFrame=function(e){this.imageGem.setFrame(e)},n.getFrame=function(){return this.imageGem.frame.name},n.setText=function(e,t){this.text.setText(e+" / "+t)},n.completeMission=function(){this.imageGem.setAlpha(.3),this.text.setAlpha(.3),this.imageCheck.setVisible(!0)},n.reset=function(){this.imageGem.setAlpha(1),this.text.setAlpha(1),this.imageCheck.setVisible(!1)},n.updateCurrentPosition=function(e){this.currentPosition=e},n.runAnimCollectionItem=function(){var e=this.scene.layoutManager.objects.header,t=this.scene.gameZone.width/2+this.currentPosition.x,n=this.currentPosition.y-25;this.scene.world.isLandscape()&&(t=e.collectItems.getWorldPosition().x,n=e.collectItems.getWorldPosition().y+this.currentPosition.y),this.tweenGlow.play(),this.emitter.explode(8,t,n)},n.playAnimShowMe=function(){this.setVisible(!0).setAlpha(0),this.tweenShowMe.play()},t}(Phaser.GameObjects.Container),nP=Ha.Z.GAMEPLAY,iP=nP.KEY,aP=nP.FRAME,sP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.target=void 0,n.targetKeys=[],n.jsonPosition={},n.jsonAmount={},n.jsonTarget={},n.jsonCollectItem={},n.background=void 0,n.listCollectItems=[],n.scene=t,n.createBackground(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:iP,frame:aP.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this,0,-1)},n.calcPosition=function(e){var t=[],n=200/(e+1);if(this.scene.world.isLandscape()){n=255/(e+1)}for(var i=n*(e-1)/2,a=0;a<e;a++)t.push(n*a-i);return t},n.parseTargetToJson=function(){if(!(0,_f.isObject)(this.target)){for(var e=JSON.parse(this.target),t=B()(e),n=this.calcPosition(t.length),i=0;i<t.length;i++){var a=t[i],s=Av[a];this.targetKeys.push(s),this.jsonAmount[s]=0,this.jsonTarget[s]=e[a],this.jsonPosition[s]={x:n[i],y:68},this.scene.world.isLandscape()&&(this.jsonPosition[s]={x:68,y:n[i]});var r=this.listCollectItems[i];r||(r=new tP(this.scene),this.add(r),this.listCollectItems.push(r)),r.updateCurrentPosition(this.jsonPosition[s]),r.setVisible(!0),this.scene.world.isLandscape()?r.setY(n[i]):r.setX(n[i]),r.setFrame(s),r.setText(0,e[a]),this.jsonCollectItem[s]=r}console.log("this.targetKeys === ",this.targetKeys)}},n.alignCollectItems=function(){if(this.target)for(var e=JSON.parse(this.target),t=B()(e),n=this.calcPosition(t.length),i=0;i<this.listCollectItems.length;i++){var a=t[i],s=Av[a];this.jsonPosition[s]={x:n[i],y:68},this.scene.world.isLandscape()&&(this.jsonPosition[s]={x:68,y:n[i]});var r=this.listCollectItems[i];this.scene.world.isLandscape()?r.setPosition(0,n[i]):r.setPosition(n[i],0)}},n.hideListCollectItems=function(){this.listCollectItems.forEach((function(e){e.setVisible(!1),e.reset()}))},n.showListCollectItems=function(){this.listCollectItems.forEach((function(e){e.reset(),e.playAnimShowMe()}))},n.showCollectItemByKey=function(e){var t,n=re()(t=this.listCollectItems).call(t,(function(t){return t.getFrame()===e}));n&&0!==n.length&&(this.jsonAmount[e]>=this.jsonTarget[e]?n[0].completeMission():n[0].reset(),n[0].playAnimShowMe())},n.start=function(){this.parseTargetToJson()},n.setTargets=function(e){var t,n;this.target=If()(t=If()(n=If()(e).call(e,"{",'{"')).call(n,", ",', "')).call(t,":",'":')},n.collectItem=function(e){if(e in this.jsonAmount){this.jsonAmount[e]++;var t=this.jsonAmount[e],n=this.jsonTarget[e];t===n&&this.jsonCollectItem[e].completeMission(),this.jsonCollectItem[e].setText(t,n)}},n.checkCompleteMission=function(){for(var e=B()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t];if(this.jsonTarget[n]>this.jsonAmount[n])return!1}return!0},n.reset=function(){this.hideListCollectItems(),this.targetKeys=[],this.jsonAmount={},this.jsonTarget={},this.jsonCollectItem={},this.jsonPosition={}},n.getPositionCollectionItem=function(e){return this.jsonPosition[e]},n.getTargetKeys=function(){return this.targetKeys},n.getJsonAmount=function(){return this.jsonAmount},n.getJsonTarget=function(){return this.jsonTarget},n.getCollectItemByKey=function(e){return this.jsonCollectItem[e]},n.updateJsonAmountByFen=function(e){this.jsonAmount=JSON.parse(dt()(e));for(var t=B()(this.jsonTarget),n=0;n<t.length;n++){var i=t[n],a=this.jsonCollectItem[i];this.jsonTarget[i]>this.jsonAmount[i]?a.reset():a.completeMission(),a.setText(this.jsonAmount[i],this.jsonTarget[i])}},n.resetTextAmount=function(){for(var e=B()(this.jsonTarget),t=0;t<e.length;t++){var n=e[t],i=this.listCollectItems[t];i&&i.setText(0,this.jsonTarget[n])}},t}(Phaser.GameObjects.Container),rP=Ha.Z.GAMEPLAY,oP=rP.KEY,cP=rP.FRAME,lP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scoreText=void 0,n.background=void 0,n.tweenShow=void 0,n.tweenHide=void 0,n.addScore=void 0,n.score=0,n.scene=t,n.scene.add.existing((0,La.Z)(n)),n.createBackground(),n.createScoreText(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=this.scene.make.image({key:oP,frame:cP.BG_MAIN_SCORE}),this.background.setWorldSize(187,48),this.add(this.background),Phaser.Display.Align.In.Center(this.background,this)},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY_LIGHT.KEY,size:this.scene.fontSize(52),text:"0",origin:{x:.5,y:.5}}),this.add(this.scoreText),Phaser.Display.Align.In.Center(this.scoreText,this.background)},n.setScore=function(e){this.score=e},n.setScoreText=function(e){this.scoreText.setText(String(e))},n.animAddScore=function(e){var t=this;if(this.addScore&&this.addScore.isPlaying()){this.addScore.stop();var n=this.score+e;this.setScore(n),this.setScoreText(n)}this.addScore=this.scene.tweens.addCounter({from:0,to:e,duration:100,onUpdate:function(e){var n=t.score+Math.floor(e.getValue());t.setScoreText(n),t.scene.updateProgressTargetScore(n)},onComplete:function(){var n=t.score+e;t.setScore(n),t.setScoreText(n),t.scene.handleCompleteScoreMission()}})},n.reset=function(){this.setScore(0),this.setScoreText(0)},t}(Phaser.GameObjects.Container),hP=lP,uP=Ha.Z.GAMEPLAY,dP=uP.KEY,pP=uP.FRAME,gP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.leftBg=void 0,a.midBg=void 0,a.rightBg=void 0,a.leftProgress=void 0,a.midProgress=void 0,a.rightProgress=void 0,a.iconCup=void 0,a.glareCup=void 0,a.tweenRotationGlareCup=void 0,a.targetScore=void 0,a.listPoolMilestoneFrame=[],a.listMilestoneFrame=[],a.particle=void 0,a.emitter=void 0,a.progressBarFull=void 0,a.setSize(n,i),a.scene=t,a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.initBg(),this.initProgressBar(),this.createParticle(),this.createEmitter(),this.createGlareCup(),this.createTweenGlare(),this.createIconCup()},n.initBg=function(){this.leftBg=this.scene.make.image({key:dP,frame:pP.PROGRESS_BG_LEFT}),this.midBg=this.scene.make.image({key:dP,frame:pP.PROGRESS_BG_MID}),this.rightBg=this.scene.make.image({key:dP,frame:pP.PROGRESS_BG_RIGHT});var e=this.leftBg,t=e.width,n=e.height,i=t*this.height/n;this.leftBg.setWorldSize(i,this.height);var a=this.rightBg,s=a.width,r=a.height,o=s*this.height/r;this.rightBg.setWorldSize(o,this.height);var c=this.width-(i+o);this.midBg.setWorldSize(c,this.height),this.add(this.leftBg),this.add(this.midBg),this.add(this.rightBg),Phaser.Display.Align.In.LeftCenter(this.leftBg,this,0,0),Phaser.Display.Align.In.Center(this.midBg,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightBg,this,0,0)},n.initProgressBar=function(){this.leftProgress=this.scene.make.image({key:dP,frame:pP.PROGRESS_BAR_LEFT}),this.midProgress=this.scene.make.image({key:dP,frame:pP.PROGRESS_BAR_MID}),this.rightProgress=this.scene.make.image({key:dP,frame:pP.PROGRESS_BAR_RIGHT});var e=this.leftProgress,t=e.width,n=e.height,i=t*this.height/n;this.leftProgress.setWorldSize(i,this.height);var a=this.rightProgress,s=a.width,r=a.height,o=s*this.height/r;this.rightProgress.setWorldSize(o,this.height);var c=this.width-(i+o)+2;this.midProgress.setWorldSize(c,this.height),this.add(this.leftProgress),this.add(this.midProgress),this.add(this.rightProgress),this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1),Phaser.Display.Align.In.LeftCenter(this.leftProgress,this,0,0),Phaser.Display.Align.In.Center(this.midProgress,this,0,0),Phaser.Display.Align.In.RightCenter(this.rightProgress,this,0,0)},n.createIconCup=function(){this.iconCup=this.scene.make.image({key:dP,frame:pP.ICON_CUP}),this.iconCup.setWorldSize(25,20),this.add(this.iconCup),Phaser.Display.Align.In.RightCenter(this.iconCup,this.glareCup,-9,1)},n.createGlareCup=function(){this.glareCup=this.scene.make.image({key:dP,frame:pP.CUP_GLARE}),this.glareCup.setWorldSize(44,44),this.glareCup.setVisible(!1),this.add(this.glareCup),Phaser.Display.Align.In.RightCenter(this.glareCup,this.rightBg,42,-3)},n.createTweenGlare=function(){this.tweenRotationGlareCup=new sp.Z({targets:[this.glareCup],repeat:-1,duration:6e3})},n.createParticle=function(){this.particle=this.scene.add.particles(dP),this.add(this.particle)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{min:.3,max:1},speed:{min:10,max:30},lifespan:{min:500,max:1e3},quantity:1,on:!1,frame:pP.DUST}),this.emitter.setPosition(this.x+this.width/2+20,-3)},n.createMilestoneFrame=function(){var e=this.scene.make.image({key:dP,frame:pP.FLAG});return e.setWorldSize(16,22),e},n.getMilestoneFrame=function(){var e,t=re()(e=this.listPoolMilestoneFrame).call(e,(function(e){return!e.visible}));if(!t||0===t.length){var n=this.createMilestoneFrame();return this.listPoolMilestoneFrame.push(n),this.add(n),n}return t[0]},n.handleSetAlphaListMilestone=function(e){this.listMilestoneFrame.forEach((function(t){t.score<=e?t.frame.setAlpha(1):t.frame.setAlpha(.5)}))},n.handleSetAlphaCup=function(e){e>=this.targetScore?this.iconCup.setAlpha(1):this.iconCup.setAlpha(.5)},n.runEmitter=function(){this.emitter.start()},n.stopEmitter=function(){this.emitter.stop()},n.runAnimGlare=function(){this.glareCup.setVisible(!0),this.tweenRotationGlareCup.play()},n.stopAnimGlare=function(){this.tweenRotationGlareCup.stop(),this.glareCup.setVisible(!1)},n.hideProgressBar=function(){this.leftProgress.setVisible(!1),this.rightProgress.setVisible(!1),this.midProgress.setVisible(!1)},n.hideMilestone=function(){this.listPoolMilestoneFrame.forEach((function(e){e.setVisible(!1)}))},n.resetListMilestone=function(){this.listMilestoneFrame=[]},n.reset=function(){this.hideMilestone(),this.hideProgressBar(),this.setPercent(0),this.resetListMilestone()},n.setTargetScore=function(e){this.targetScore=e},n.getTargetScore=function(){return this.targetScore},n.setPercent=function(e){var t=e*this.width,n=this.leftProgress.displayWidth,i=this.midProgress.displayWidth,a=this.rightProgress.displayWidth;if(e>=1){if(this.progressBarFull)return;return this.progressBarFull=!0,this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.rightProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setCrop(0,0,a/this.rightProgress.scaleX,2*this.height),this.runAnimGlare(),void this.runEmitter()}return this.stopAnimGlare(),this.stopEmitter(),this.progressBarFull=!1,t<n?(this.leftProgress.setVisible(!0),void this.leftProgress.setCrop(0,0,t/this.leftProgress.scaleX,2*this.height)):t>n+i?(this.leftProgress.setVisible(!0),this.midProgress.setVisible(!0),this.midProgress.setCrop(0,0,i/this.midProgress.scaleX,2*this.height),this.rightProgress.setVisible(!0),void this.rightProgress.setCrop(0,0,(t-(n+i-2))/this.rightProgress.scaleX,2*this.height)):(this.leftProgress.setVisible(!0),this.leftProgress.setCrop(0,0,n/this.leftProgress.scaleX,2*this.height),this.midProgress.setVisible(!0),void this.midProgress.setCrop(0,0,(t-n)/this.midProgress.scaleX,2*this.height))},t}(Phaser.GameObjects.Container),fP=Ha.Z.GAMEPLAY,mP=fP.KEY,vP=fP.FRAME,EP=function(e){function t(t){var n;return(n=e.call(this,t,mP,vP.BUTTON_WOOD_SMALL)||this).button.setWorldSize(55,48),n.setName("Setting"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:mP,frame:vP.ICON_SETTING});e.setWorldSize(30,30),this.add(e),Phaser.Display.Align.In.Center(e,this,1,-1.5)},t}(Wa.Z),SP=EP,AP=Ha.Z.GAMEPLAY,TP=AP.KEY,yP=AP.FRAME,IP=Ha.Z.DEFAULT,CP=IP.KEY,bP=IP.FRAME,OP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonSetting=void 0,n.bestScoreBlock=void 0,n.mainScoreBlock=void 0,n.progressBar=void 0,n.collectItems=void 0,n.textMission=void 0,n.scene=t,n.setSize(n.scene.gameZone.width,0),n.createSettingButton(),n.createBestScoreBlock(),n.createMainScoreBlock(),n.createProgressBar(),n.createCollectItems(),n.addTextScore(),t.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.createBestScoreBlock=function(){this.bestScoreBlock=new JO(this.scene),this.add(this.bestScoreBlock)},n.createMainScoreBlock=function(){this.mainScoreBlock=new hP(this.scene),this.add(this.mainScoreBlock)},n.createSettingButton=function(){this.buttonSetting=new SP(this.scene),this.add(this.buttonSetting),Phaser.Display.Align.In.Center(this.buttonSetting,this,132,51)},n.createProgressBar=function(){this.progressBar=new gP(this.scene,315,13),this.add(this.progressBar),this.progressBar.setVisible(!1)},n.createCollectItems=function(){this.collectItems=new sP(this.scene),this.add(this.collectItems),this.collectItems.setVisible(!1)},n.getScore=function(){return this.mainScoreBlock.score},n.showItemSingleMode=function(){this.mainScoreBlock.setVisible(!0)},n.showItemPlayWithFriendsMode=function(){this.mainScoreBlock.setVisible(!1)},n.start=function(){var e=this.scene.targetMissionManager.getTargetType();switch(this.scene.world.isLandscape()&&this.updateUILevel(),e){case Dy:this.targetScore();break;case Ny:this.targetCollect()}},n.targetScore=function(){var e=parseInt(this.scene.targetMissionManager.getTargetValue()),t=this.scene.storage.getState(),n=nl(t)||0;(0,_f.isArray)(e)||(this.progressBar.reset(),this.progressBar.setVisible(!0),this.progressBar.setTargetScore(e),this.mainScoreBlock.reset(),this.mainScoreBlock.setVisible(!0),tl(t)||(this.progressBar.setPercent(n/e),this.mainScoreBlock.setScore(n),this.mainScoreBlock.setScoreText(n)),this.collectItems.setVisible(!1))},n.targetCollect=function(){this.collectItems.reset(),this.mainScoreBlock.setVisible(!1),this.progressBar.setVisible(!1);var e=this.scene.targetMissionManager.getTargetValue();this.collectItems.setTargets(e),this.collectItems.setVisible(!0),this.collectItems.start()},n.updateUIPortrait=function(){this.buttonSetting.setVisible(!0),this.textMission.setVisible(!1),this.updateUIMainScorePortrait(),this.updateUIMissionGemPortrait(),this.mainScoreBlock.setPosition(0,52),this.bestScoreBlock.setPosition(-132,-12.5),this.progressBar.setPosition(-19,92),this.collectItems.setPosition(0,52),this.collectItems.alignCollectItems()},n.updateUIMainScorePortrait=function(){this.mainScoreBlock.background.setTexture(TP),this.mainScoreBlock.background.setFrame(yP.BG_MAIN_SCORE),this.mainScoreBlock.background.setWorldSize(187,48)},n.updateUIMissionGemPortrait=function(){this.collectItems.background.setTexture(TP),this.collectItems.background.setFrame(yP.BG_MAIN_SCORE),this.collectItems.background.setWorldSize(187,48)},n.updateUILandscape=function(){this.calcSize(),this.buttonSetting.setVisible(!1),this.textMission.setVisible(!0),this.updateUIMainScore(),this.updateUIProgress(),this.updateUIMissionGem(),this.updateUILevel(),this.textMission.setPosition(-this.width/2-5.5,10),this.collectItems.setPosition(-this.width/2-5.5,154),this.collectItems.alignCollectItems()},n.calcSize=function(){this.setSize(575,110)},n.addTextScore=function(){var e=this.scene.world.getPixelRatio();this.textMission=this.scene.make.image({key:CP,frame:bP.TEXT_MISSION_LANDSCAPE});var t=this.textMission,n=t.width,i=t.height;this.textMission.setVisible(!1),this.textMission.setWorldSize(n/e,i/e),this.add(this.textMission)},n.updateUIMainScore=function(){this.mainScoreBlock.background.setTexture(CP),this.mainScoreBlock.background.setFrame(bP.PANEL_SCORE),this.mainScoreBlock.background.setWorldSize(86.5,49.5),this.bestScoreBlock.setPosition(-this.width/2-5.5,115),this.mainScoreBlock.setPosition(-this.width/2-5.5,77)},n.updateUIMissionGem=function(){this.collectItems.background.setTexture(CP),this.collectItems.background.setFrame(bP.PANEL_MISSION),this.collectItems.background.setWorldSize(47.5,232)},n.updateUILevel=function(){var e=this.scene.targetMissionManager.getTargetType();switch(console.log("targetType",e),e){case Ny:this.bestScoreBlock.setY(245);break;case Dy:this.bestScoreBlock.setY(85);break;default:this.bestScoreBlock.setY(245)}},n.updateUIProgress=function(){this.progressBar.setPosition(0,-33)},t}(Phaser.GameObjects.Container),PP=OP,RP=function(){function e(e){this.scene=void 0,this.scene=e}var t=e.prototype;return t.handleShowEffect=function(e){var t=this;if(e&&0!==e.length){for(var n=this.scene.layoutManager.objects.header,i=n.collectItems.getTargetKeys(),a=n.collectItems.getJsonAmount(),s=n.collectItems.getJsonTarget(),r=0,o=function(){var n=i[c],o=re()(e).call(e,(function(e){return e.frame===n}));a[n]+o.length>=s[n]&&r++,t.showEffect(o)},c=0;c<i.length;c++)o();r===B()(s).length&&this.scene.setLevelCompleted(!0),this.scene.time.delayedCall(2e3,(function(){t.scene.handleCollectionItemsComplete()}))}},t.showEffect=function(e){for(var t=this,n=e.length,i=this.scene.layoutManager.objects,a=i.header,s=i.main.board.dataBoard,r=function(){var i=e[o],r=i.x,c=i.y,l=i.frame,h=s[c][r].cell,u=h.imageBreak,d=t.scene.gameZone.width/2,p=a.collectItems.getPositionCollectionItem(l),g=d+p.x,f=p.y-24;t.scene.world.isLandscape()&&(g=a.collectItems.getWorldPosition().x,f=a.collectItems.getWorldPosition().y+p.y-3,console.log(g,f));var m=t.getFreeAnim();t.scene.layoutManager.objects.main.board.bringToTop(h),h.resetImageBreak(),u.setVisible(!0),u.setFrame(l),m.setTarget(u),m.onComplete=function(){(n--,u.setVisible(!1),u.setPosition(0,0),a.collectItems.collectItem(l),n<=0)&&(a.collectItems.getCollectItemByKey(l).runAnimCollectionItem(),t.scene.updateMatchData())},m.runScaleUpAnimation(0,300),m.runScaleDownAnimation(450,400),m.runAnimMoveToPosition(700,Phaser.Math.Between(500,1e3),g,f)},o=0;o<e.length;o++)r()},t.getFreeAnim=function(){return this.scene.world.isLandscape()?new VC(this.scene):new WC(this.scene)},e}(),wP=RP,xP=function(){function e(e){this.angle=void 0,this.scene=void 0,this.scaleUpTween=void 0,this.breakingTween=void 0,this.breakingDelay=0,this.captureCells=void 0,this.timerEventRemoveCaptureCells=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.createTweenBreaking()},t.handleShowEffect=function(e){var t=this;e&&0!==e.length&&(this.removeCaptureCell(),this.captureCells=e,this.setValueCaptureCell(),this.breakingTween.resetTweenData(!1),this.breakingTween.restart(),this.timerEventRemoveCaptureCells&&this.timerEventRemoveCaptureCells.remove(),this.timerEventRemoveCaptureCells=this.scene.time.addEvent({delay:500,callback:function(){t.breakingTween.isPlaying()||t.removeCaptureCell()}}))},t.onCaptureCellComplete=function(){if(this.captureCells){var e=this.scene.layoutManager.objects.main;if(e&&e.board)for(var t=e.board.dataBoard,n=0;n<this.captureCells.length;n++){var i=this.captureCells[n],a=i.x;t[i.y][a].cell.resetImageBreak()}}},t.removeCaptureCell=function(){var e=this.scene.layoutManager.objects.main.board.dataBoard;if(this.captureCells)for(var t=0;t<this.captureCells.length;t++){var n=this.captureCells[t],i=n.x;e[n.y][i].cell.resetImageBreak()}},t.setValueCaptureCell=function(){for(var e=this.scene.layoutManager.objects.main.board.dataBoard,t=Math.round(68.25),n=0;n<this.captureCells.length;n++){var i=Phaser.Math.Between(50,t),a=Phaser.Math.Between(82,98)*Math.PI/180,s=Phaser.Math.Between(3,10)/1e3,r=this.captureCells[n],o=r.x,c=e[r.y][o].cell;c.maxScale0=Phaser.Math.FloatBetween(2.5,4)/10,c.imageBreak.setVisible(!0),c.imageBreak.setFrame(Ha.Z.GAMEPLAY_32.FRAME.GEM),c.v0=i,c.alpha0=a,c.scaleRate0=s}},t.createTweenBreaking=function(){var e=this,t=this.scene.layoutManager.objects.main;this.breakingTween=this.scene.tweens.addCounter({from:0,to:1900,onUpdate:function(n){if(e.captureCells)for(var i=t.board.dataBoard,a=0;a<e.captureCells.length;a++){e.angle=Phaser.Math.Between(-15,15);var s=e.captureCells[a],r=s.x,o=i[s.y][r].cell,c=o.imageBreak,l=o.maxScale0,h=o.alpha0<1.57?1:-1,u=.016*n.getValue(),d=Mu(o.v0,o.alpha0,u),p=Du(o.v0,o.alpha0,u);c.setVisible(!0),c.x=o.x0+d,c.y=o.y0+-p,c.rotation+=.04*h,c.scale>l?c.scale-=o.scaleRate0:c.scale=l}},onComplete:function(){e.onCaptureCellComplete()},delay:this.breakingDelay,duration:2500}).stop()},e}(),kP=xP,_P=Ha.Z.GAMEPLAY,LP=_P.KEY,MP=_P.FRAME,DP=Ha.Z.GAMEPLAY_32,NP=DP.KEY,BP=DP.FRAME,GP=GameCore.Configs.Board,FP=GP.cols,UP=GP.rows,HP=Ha.Z.DEFAULT.FRAME,ZP=GameCore.Configs.Gameplay.VibrateValue,YP=function(e){function t(t,n,i){var a;return(a=e.call(this,t)||this).scene=void 0,a.suggestCells=[],a.pX=void 0,a.pY=void 0,a.borderLeftSize=4,a.borderTopSize=4,a.cellSize=void 0,a.cellPadding=void 0,a.diceSize=void 0,a.dataBoard=[],a.cellsHighlight=[],a.cellSharking=[],a.boardFrame=void 0,a.woodenEffect=void 0,a.collectionEffect=void 0,a.offsetY=-27,a.canCaptureLines=function(e,t){void 0===t&&(t=5);for(var n=e.length,i=e[0].length,a=[],r=[],o=[],c=0;c<n;c++){for(var l=0,h={x:-1,y:-1},u=0;u<i;u++)0===c&&(o[u]={count:0,x:-1,y:-1}),1===e[c][u].value?(o[u].count++,l++):(h.x=u,h.y=c,o[u].x=u,o[u].y=c);if(l===i-1&&r.push((0,s.Z)({row:c},h)),c===n-1)for(var d=0;d<i;d++)o[d].count===n-1&&a.push((0,s.Z)({col:d},o[d]))}if(r.length>=t)for(var p=0,g={x:-1,y:-1},f=0;f<r.length;f++)if(0!==f){if(r[f].x===g.x&&r[f].y===g.y+1?(g.x=r[f].x,g.y=r[f].y,p++):p=1,p>=t)return{isCapture:!0,direction:"vertical",minLine:t}}else g.x=r[f].x,g.y=r[f].y,p++;if(a.length>=t)for(var m=0,v={x:-1,y:-1},E=0;E<a.length;E++)if(0!==E){if(a[E].x===v.x+1&&a[E].y===v.y?(v.x=a[E].x,v.y=a[E].y,m++):m=1,m>=t)return{isCapture:!0,direction:"horizontal",minLine:t}}else v.x=a[E].x,v.y=a[E].y,m++;return{isCapture:!1,direction:"",minLine:t}},a.scene=t,a.setSize(n,i),a.woodenEffect=new kP(a.scene),a.collectionEffect=new wP(a.scene),a.init(),a}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.calcCellLength(),this.initDataBoard()},n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){},n.createBoard=function(){this.boardFrame=this.scene.make.image({key:LP,frame:MP.BOARD}),this.boardFrame.setWorldSize(this.width,this.height),this.add(this.boardFrame)},n.calcCellLength=function(){this.cellPadding=1,this.cellSize=(this.width-2*this.borderLeftSize-this.cellPadding*(FP+1))/FP},n.initDataBoard=function(){for(var e=this.boardFrame.x-this.boardFrame.displayWidth/2+this.cellSize/2+this.borderLeftSize,t=this.boardFrame.y-this.boardFrame.displayHeight/2+this.cellSize/2+this.borderTopSize,n=0;n<UP;n++){this.dataBoard[n]=[];for(var i=0;i<FP;i++){var a=e+i*this.cellSize+this.cellPadding*i,s=t+n*this.cellSize+this.cellPadding*n,r={x:a,y:s,width:this.cellSize,height:this.cellSize,texture:NP,frame:BP.GEM_TRANSPARENT,depth:Ua.Z.PIECE-.1,padding:this.cellPadding,isWoodenEffect:!0},o=new AI(this.scene,r);o.setFrameImageCell(BP.GEM),this.add(o),this.dataBoard[n][i]={x:a,y:s,width:this.cellSize,height:this.cellSize,frame:BP.GEM_TRANSPARENT,value:0,cell:o}}}},n.handleHighlight=function(e,t){this.cellsHighlight=e;for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame;if(this.dataBoard[s]&&this.dataBoard[s][a]&&0===this.dataBoard[s][a].value){var o=this.dataBoard[s][a].cell;this.dataBoard[s][a].frame=r||BP.GEM,o.setFrameImageCell(r||BP.GEM),o.setAlphaImageCell(.3)}}this.canCaptureCells(e,t)},n.handleTweenStartMission=function(){for(var e=this,t=100,n=0;n<UP;n++)for(var i=function(){var i=e.dataBoard[n][a].cell,s=0;s=4==n&&4==a?t:n>=3&&n<=5&&a>=3&&a<=5?200:n>=2&&n<=6&&a>=2&&a<=6?300:n>=1&&n<=7&&a>=1&&a<=7?400:500,e.scene.time.delayedCall(s,(function(){i.playTweenStartMission()}))},a=0;a<FP;a++)i()},n.handleCapturePiece=function(e){var t=this;try{if(!e||e.length<=0)throw Mv=0,new Error("Invalid Capture");var n=re()(e).call(e,(function(e){return e.frame!==BP.GEM}));this.collectionEffect.handleShowEffect(n);for(var i=300,a=0,s=wv(this.dataBoard),r=xv(this.dataBoard),o=Cv(),c=function(){var n=e[l],c=n.x,h=n.y,u=t.dataBoard[h][c].cell,d=0,p=0,g=0;if(s.length>0&&r.length>0){var f=0,m=0;a=i/FP,-1!==gt()(s).call(s,h)&&-1===gt()(r).call(r,c)&&(f=a*c,m=0,p=gt()(s).call(s,h)),-1===gt()(s).call(s,h)&&-1!==gt()(r).call(r,c)&&(f=0,m=a*h,p=gt()(r).call(r,c)),-1!==gt()(s).call(s,h)&&-1!==gt()(r).call(r,c)&&(f=a*c,m=a*h,p=Math.max(gt()(r).call(r,c),gt()(s).call(s,h),0)),-1===gt()(s).call(s,h)&&-1===gt()(r).call(r,c)&&(f=a*c,m=a*h),d=Math.max(f,m,0)}else if(r.length>0)d=(a=i/FP)*h,p=gt()(r).call(r,c),g=h;else if(s.length>0)d=(a=i/UP)*c,p=gt()(s).call(s,h),g=c;else{a=100;var v=e[0].x;d=a*(c-v),p=0}u.hideImageHighlight(),t.scene.time.delayedCall(d,(function(){if(u.getFrameImageCell()===BP.GEM){u.resetImageBreak();var e="";o>2&&(r.length>=3||s.length>=3)?(e=zp[g]||zp[0],u.imageBreak.setFrame(e)):(e=Vp[p]||Vp[0],u.imageBreak.setFrame(e)),u.playTweenScaleDown()}0==t.dataBoard[h][c].value&&u.setFrameImageCell(BP.GEM_TRANSPARENT)})),t.dataBoard[h][c].frame=BP.GEM_TRANSPARENT,t.dataBoard[h][c].value=0},l=0;l<e.length;l++)c()}catch(h){}},n.checkPositionCellOnCaptureCell=function(e,t){var n=re()(t).call(t,(function(t){return t.x===e.x&&t.y===e.y}));return n&&n.length>0},n.handlePraise=function(e,t){for(var n=[],i=0;i<e.length;i++){var a=e[i];this.checkPositionCellOnCaptureCell(a,t)&&n.push(a)}if(0!==n.length)if(this.scene.targetMissionManager.getTargetType()!==Ny){var s=Dv(),r=Cv();r>1&&(s=18*Iv+10*(Nv()-1));for(var o=n[0].pX,c=0,l=n[0].pY,h=0,u=0;u<n.length;u++){var d=n[u];d.pX<o&&(o=d.pX),d.pX>c&&(c=d.pX),d.pY<l&&(l=d.pY),d.pY>h&&(h=d.pY)}var p=o+(c-o)/2,g=l+(h-l)/2;this.scene.layoutManager.objects.main.praise.handlePraise(p,g,s,r),this.handleStreakBreak(p,g),this.playEatSound(r)}else this.playEatSound(1)},n.handleStreakBreak=function(e,t){var n=Cv(),i=Nv()-1,a=this.scene.gameZone.width;if(e-75<0&&(e=75),e+75>a&&(e=a-75),!(i<2||n>=2)){var s=i>6?6:i,r=this.getVibrateByLevel(s);this.scene.player.getPlayerSettings().vibrate&&Jp(r),this.playEatSound(s),this.scene.effectManager.streakBreak.setTextStreak(i),this.scene.effectManager.streakBreak.setBgFrame(HP.BG_STREAK),this.scene.effectManager.streakBreak.playAnim(e,t-20)}},n.getVibrateByLevel=function(e){return ZP[e]||0},n.playEatSound=function(e){switch(this.scene.audio.playSound(Ya.Z.EAT_BLOCK),e){case 1:default:break;case 2:this.scene.audio.playSound(Ya.Z.GOOD);break;case 3:this.scene.audio.playSound(Ya.Z.COOL);break;case 4:case 5:case 6:this.scene.audio.playSound(Ya.Z.EXCELLENT)}},n.handleRemoveHighlight=function(){try{if(!this.cellsHighlight)return;for(var e=0;e<this.cellsHighlight.length;e++){var t=this.cellsHighlight[e],n=t.x,i=t.y;if(this.dataBoard[i]&&this.dataBoard[i][n]&&0===this.dataBoard[i][n].value){var a=this.dataBoard[i][n].cell;this.dataBoard[i][n].frame=BP.GEM_TRANSPARENT,a.setFrameImageCell(BP.GEM_TRANSPARENT),a.setAlphaImageCell(1)}}this.cellsHighlight=[]}catch(s){console.log(s)}},n.canCaptureCells=function(e,t){for(var n=this,i=this.dataBoard,a=[],r=0;r<i.length;r++){a[r]=[];for(var o=0;o<i[r].length;o++)a[r][o]=(0,s.Z)({},i[r][o])}for(var c=0;c<e.length;c++){var l=e[c],h=l.x;a[l.y][h].value=1}this.removeAnimCanCaptureCells(a,e);var u=bv(a,e);if(!u||u.length<=0)return!1;for(var d=function(){var t=u[p],i=t.x,a=t.y;e.some((function(e){return e.x===i&&e.y===a}))||n.cellSharking.push((0,s.Z)({},u[p]))},p=0;p<u.length;p++)d();for(var g=0;g<this.cellSharking.length;g++){var f=this.cellSharking[g],m=f.x,v=f.y,E=this.dataBoard[v][m].cell;E.isHighlight()||E.showImageHighlight()}t(wv(a),xv(a),Rv(a,e),e)},n.removeAnimCanCaptureCells=function(e,t){var n=this;if(0!==this.cellSharking.length){for(var i=wv(e),a=xv(e),s=Rv(e,t),r=function(){var e=n.cellSharking[o],t=e.x,r=e.y,c=n.dataBoard[r][t].cell;if(-1!==gt()(i).call(i,r)||-1!==gt()(a).call(a,t)||s.some((function(e){return e.x===t&&e.y===r})))return 1;c.hideImageHighlight()},o=0;o<this.cellSharking.length;o++)r();this.cellSharking=[]}},n.removeAllCanCaptureCells=function(){if(0!==this.cellSharking.length){for(var e=0;e<this.cellSharking.length;e++){var t=this.cellSharking[e],n=t.x,i=t.y;this.dataBoard[i][n].cell.hideImageHighlight()}this.cellSharking=[]}},n.handleSuggestMove=function(e){try{this.suggestCells=e;for(var t=0;t<e.length;t++){var n=e[t],i=n.x,a=n.y,s=this.dataBoard[a][i].cell;s.setFrameImageCell(BP.GEM_HIGHT_LIGHT),s.setAlphaImageCell(1)}}catch(r){console.log(r)}},n.handleRemoveSuggestMove=function(){try{for(var e=0;e<this.suggestCells.length;e++){var t=this.suggestCells[e],n=t.x,i=t.y,a=this.dataBoard[i][n].cell;this.isCellHighlight(a)||a.setFrameImageCell(BP.GEM_TRANSPARENT)}this.suggestCells=[]}catch(s){console.log(s)}},n.handleMove=function(e,t){try{for(var n=0;n<e.length;n++){var i=e[n],a=i.x,s=i.y,r=i.frame,o=void 0===r?BP.GEM:r;if(this.dataBoard[s]&&this.dataBoard[s][a]){this.dataBoard[s][a].frame=o,this.dataBoard[s][a].value=1;var c=this.dataBoard[s][a].cell;c.setFrameImageCell(o),c.setAlphaImageCell(1)}}var l=bv(this.dataBoard,e);this.handleCapturePiece(l),this.handlePraise(e,l),t&&t(),this.handleResetFrameBoard(),this.scene.updateMatchData(),this.handleGameOver()}catch(h){console.log(h)}},n.handleResetFrameBoard=function(){for(var e=0;e<UP;e++)for(var t=0;t<FP;t++)if(this.dataBoard[e]&&this.dataBoard[e][t]&&1===this.dataBoard[e][t].value){var n=this.dataBoard[e][t],a=n.frame,s=n.cell;s.visible||(0,i.tO)(new Error("Cell is invisible")),s.getFrameImageCell()!==a&&(0,i.tO)(new Error("Cell is frame not true")),s.setAlpha(1),console.log("handleResetFrameBoard",a,s.visible,s.alpha,s.scale),s.setFrameImageCell(a)}},n.handleGameOver=function(){if(!this.scene.isLevelComplete){for(var e=this.scene.layoutManager.objects.footer,t=[],n=e.pieces.piecesActive,i=e.pieces.allPieces,a=0;a<n.length;a++){var s=n[a],r=s.position;if(!s.used){var o=i[r].piece;t.push({data:o.data,type:o.type,direction:o.direction,isReverse:o.isReverse,frame:o.frame})}}kv(this.dataBoard,t)&&(this.scene.isGameOver=!0,this.scene.disableInput(),this.runAnimationGameOver())}},n.runAnimationGameOver=function(){var e=this;try{this.scene.audio.playSound(Ya.Z.BOARD_GAME_OVER);for(var t=[],n=function(n){for(var i=function(i){if(e.dataBoard[n]&&e.dataBoard[n][i]&&1===e.dataBoard[n][i].value){var a=Math.floor(100*(n+1));t.push({delay:a,x:i,y:n}),e.scene.time.delayedCall(a,(function(){e.dataBoard[n][i].cell.playAnimImageGameOver()}))}},a=0;a<FP;a++)i(a)},i=0;i<UP;i++)n(i);this.scene.time.addEvent({delay:t[t.length-1].delay+300,callback:function(){e.scene.handleRequestFinishGame()}})}catch(a){console.log(a)}},n.getBoardByFen=function(e){var t=[],n=e.split(" ");if(n.length<2)throw new Error("Invalid fen");for(var i=n[0].split("/"),a=i.length,s=0;s<a;s++){t[s]=[];for(var r=Fv(i[s]),o=0;o<r.length;o++)t[s][o]=r[o]}return t},n.getFenByBoard=function(){for(var e="",t=0;t<UP;t++){for(var n="",i=0;i<FP;i++){var a=this.dataBoard[t][i],s=a.value,r=a.frame,o=Bv(r)||"g";switch(s){case 0:n+=",x";break;case 1:n+=","+o}}e+="/"+(n=n.substring(1))}return e.substring(1)},n.startGame=function(e,t){if(e){for(var n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var s=e[n][a].frame,r=e[n][a].value,o=this.dataBoard[n][a];1===r&&(s&&s!==BP.GEM_TRANSPARENT||((0,i.R0)(new Error("MapByBoardError"),{level:this.scene.levelManager.getLevel(),row:n,col:a,frame:s,fen:t}),s=BP.GEM),o.value=1,o.frame=s,o.cell.setFrameImageCell(s),o.cell.setScale(0))}this.fadeIn()}},n.clearBoard=function(){for(var e=0;e<UP;e++)for(var t=0;t<FP;t++){var n=this.dataBoard[e][t];n.value=0,n.frame=BP.GEM_TRANSPARENT,n.cell.reset(),n.cell.setFrameImageCell(BP.GEM_TRANSPARENT),n.cell.resetImageGameOver()}},n.isCellHighlight=function(e){var t,n=re()(t=this.cellsHighlight).call(t,(function(t){return t.x===e.x&&t.y&&e.y}));return!!(n&&n.length>0)},n.setFrameBoardByIndex=function(e,t,n){var i=this.dataBoard[e][t],a=i.cell;a.setFrameImageCell(n),i.frame=n,i.value=1,a.setScale(0)},n.getFrameByMapItemIndex=function(e){return console.log("index === ",e),Av[e]},n.fadeOut=function(){for(var e=[],t=0;t<UP;t++)for(var n=0;n<FP;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}if(!e||0===e.length)return null;var a=this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:1,to:0},scale:{from:1,to:0},paused:!0});return a.play(),a},n.fadeIn=function(){for(var e=[],t=0;t<UP;t++)for(var n=0;n<FP;n++){var i=this.dataBoard[t][n];i.value&&e.push(i.cell)}e&&0!==e.length&&this.scene.add.tween({targets:e,duration:300,ease:Phaser.Math.Easing.Quadratic.InOut,alpha:{from:0,to:1},scale:{from:0,to:1},paused:!0}).play()},t}(Phaser.GameObjects.Container),WP=GameCore.Configs.Gameplay.VibrateValue,VP=Ha.Z.EFFECTS,zP=VP.KEY,KP=VP.FRAME,jP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.listScore=[],n.score=void 0,n.startX=void 0,n.startY=void 0,n.scoreText=void 0,n.tweenShowScoreText=void 0,n.tweenHideScoreText=void 0,n.tweenShowPraiseFrame=void 0,n.tweenHidePraiseFrame=void 0,n.praiseFrame=void 0,n.praiseScoreText=void 0,n.particle=void 0,n.emitter=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n.setVisible(!1).setAlpha(0),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createScoreText(),this.createTweenScoreText(),this.createPraiseFrame(),this.createPraiseScoreText(),this.createParticle(),this.createEmitter()},n.createParticle=function(){this.particle=this.scene.add.particles(zP),this.particle.setDepth(Ua.Z.ON_TOP+1)},n.createEmitter=function(){this.emitter=this.particle.createEmitter({x:0,y:0,scale:{start:.05,end:.2},speed:{min:20,max:70},lifespan:{min:500,max:1e3},quantity:20,on:!1,tint:[16441092,16422659],frame:KP.FX_STAR,delay:350})},n.createScoreText=function(){this.scoreText=this.scene.make.bitmapText({font:Va.Z.NUMBER_LIGHT.KEY,size:this.scene.fontSize(50),text:"+0",origin:{x:.5,y:.5}}),this.scoreText.setScale(0).setAlpha(0),this.scoreText.setDepth(Ua.Z.ON_TOP),this.scoreText.setVisible(!1)},n.createTweenScoreText=function(){var e,t=this,n=this.scene.storage.getState(),i=Sc(n),a=this.scene.gameZone.width/2;gt()(e=[Sa,Ea,Aa]).call(e,i)>=0&&(a=105),this.tweenShowScoreText=this.scene.tweens.add({paused:!0,targets:this.scoreText,scale:{from:0,to:1},alpha:{from:0,to:1},duration:300,onComplete:function(){t.tweenHideScoreText=t.scene.tweens.add({targets:t.scoreText,scale:{from:1,to:.5},alpha:{from:1,to:.5},x:a,y:65,delay:1e3,duration:300,onComplete:function(){t.scoreText.setVisible(!1),t.scoreText.setAlpha(0),t.scoreText.setScale(0),t.scene.handleAddScoreAnim(t.score||0)}})}})},n.playAnimShowScoreText=function(){if(this.tweenHideScoreText&&this.tweenHideScoreText.isPlaying()){this.tweenHideScoreText.stop(),this.scoreText.setPosition(this.startX,this.startY);var e=this.scene.storage.getState(),t=0;if(Sc(e)===va){var n=this.scene.layoutManager.objects.header;t=n.mainScoreBlock.score,n.mainScoreBlock.setScore(t+(this.score||0)),n.mainScoreBlock.setScoreText(t+(this.score||0))}}this.score=this.listScore.shift()||0,this.scene.handleUpdateScore(this.score),this.scoreText.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowScoreText.play()},n.createPraiseFrame=function(){this.praiseFrame=this.scene.make.image({x:0,y:0,key:zP}),this.praiseFrame.setScale(0),this.praiseFrame.setAlpha(0),this.praiseFrame.setDepth(Ua.Z.ON_TOP),this.praiseFrame.setVisible(!1)},n.createTweenPraiseFrame=function(){var e=this;if(!this.tweenShowPraiseFrame||!this.tweenHidePraiseFrame){var t=this.praiseFrame.scale;this.tweenShowPraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:0,to:t},alpha:{from:0,to:1},duration:300,delay:100,ease:Phaser.Math.Easing.Back.Out,onComplete:function(){e.tweenHidePraiseFrame.play()}}),this.tweenHidePraiseFrame=this.scene.tweens.add({paused:!0,targets:this.praiseFrame,scale:{from:t,to:0},alpha:{from:1,to:0},duration:300,delay:1e3,onComplete:function(){e.praiseFrame.setScale(0),e.praiseFrame.setAlpha(0),e.praiseFrame.setVisible(!1)}})}},n.playAnimShowPraiseFrame=function(){this.createTweenPraiseFrame(),(this.tweenShowPraiseFrame.isPlaying()||this.tweenHidePraiseFrame.isPlaying())&&(this.tweenShowPraiseFrame.resetTweenData(!1),this.tweenHidePraiseFrame.resetTweenData(!1)),this.praiseFrame.setScale(0).setAlpha(0).setVisible(!0),this.tweenShowPraiseFrame.play()},n.createPraiseScoreText=function(){this.praiseScoreText=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(30),origin:{x:.5,y:.5}}),this.praiseScoreText.setDepth(Ua.Z.ON_TOP),this.add(this.praiseScoreText),Phaser.Display.Align.In.Center(this.praiseScoreText,this,0,20)},n.handlePraise=function(e,t,n,i){this.startX=e,this.startY=t+15,this.listScore.push(n);var a=e-10,s=this.scene.targetMissionManager.getTargetType()===Dy;this.scoreText.setPosition(a,t+15),this.scoreText.setText("+"+n),this.scoreText.setVisible(s),a-this.scoreText.fontSize/2<0&&(a+=this.scoreText.fontSize/2,this.scoreText.setPosition(a,t+15)),s&&(this.playAnimShowScoreText(),this.handlePraiseFrameText(e,t,i));var r=this.getVibrateByLevel(i);this.scene.player.getPlayerSettings().vibrate&&Jp(r),i<=1||this.changeExplode(a,t,i)},n.getVibrateByLevel=function(e){return WP[e]||0},n.changeExplode=function(e,t,n){var i=this.getExplodeByLevel(n);i&&(this.emitter.setScale({start:.05*i.scale,end:.2*i.scale}),this.emitter.setSpeed({min:30*i.speed,max:80*i.speed}),this.emitter.setQuantity(20*i.quantity)),this.emitter.explode(20*i.quantity,e,t)},n.handlePraiseFrameText=function(e,t,n){var i=this.scene.world.getPixelRatio(),a=this.getMainFrameByLevel(n);if(a){var s=this.scene.targetMissionManager.getTargetType()===Dy?-40:0;switch(a){case KP.TEXT_COOL:case KP.TEXT_GOOD:case KP.TEXT_EXCELLENT:}this.praiseFrame.setFrame(a);var r=this.praiseFrame,o=r.width/i,c=r.height/i;this.praiseFrame.setWorldSize(o,c);var l=this.praiseFrame.displayWidth,h=e,u=this.scene.gameZone.width;h=e-l/2<0?l/2+5:e+l/2>u?u-l/2-5:e,this.praiseFrame.setPosition(h,t+s),this.playAnimShowPraiseFrame()}},n.getExplodeByLevel=function(e){return em[e-1]||em[0]||null},n.getMainFrameByLevel=function(e){var t=$f[e-1]||$f[0];return Phaser.Utils.Array.GetRandom(t.frames)},n.reset=function(){this.createTweenScoreText()},t}(Phaser.GameObjects.Container),XP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.board=void 0,n.praise=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBoard(),this.createPraise()},n.createBoard=function(){this.board=new YP(this.scene,354,352),this.add(this.board)},n.createPraise=function(){this.praise=new jP(this.scene)},t}(Phaser.GameObjects.Container),JP=XP,qP=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createHeader(),this.createMain(),this.createFooter()},n.createHeader=function(){this.header=new PP(this.scene),this.group.add(this.header)},n.createMain=function(){this.main=new JP(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new VO(this.scene),this.group.add(this.footer)},t}(Sg),QP=qP,$P=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;this.objects.header.setSize(e.width,0),Phaser.Display.Align.In.TopCenter(this.objects.header,e),Phaser.Display.Align.In.Center(this.objects.main,e,0,-27),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e),this.objects.header.updateUIPortrait(),this.objects.footer.updateUIPortrait()}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ig),eR=$P,tR=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.Center(this.objects.header,e,0,-195),Phaser.Display.Align.In.Center(this.objects.main,e,0,20),Phaser.Display.Align.In.Center(this.objects.footer,e,300,0),this.objects.header.updateUILandscape(),this.objects.footer.updateUILandscape()}},t}(eR),nR=tR,iR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new QP(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new nR(this.scene):this.layout=new eR(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){this.objects.main.board.woodenEffect.init(),this.objects.footer.pieces.init()},n.updateUIState=function(){},t}(kg),aR=iR,sR=GameCore.Configs,rR=sR.Board,oR=sR.Network,cR=Ha.Z.GAMEPLAY_32.FRAME,lR=function(e){function t(){for(var t,n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,m()(t=[this]).call(t,s))||this).lastTimeInputEnabled=0,n.layoutManager=void 0,n.tutorialManager=void 0,n.levelManager=void 0,n.mapManager=void 0,n.targetMissionManager=void 0,n.effectManager=void 0,n.isGameOver=void 0,n.isLevelComplete=void 0,n.restartCurrentLevel=0,n.startGameAt=void 0,n.run=function(){n.initManager();var e=n.storage.getState();!0!==Ic(e)&&n.storage.dispatch(_h(!0)),n.updateCurrentBestScore(),n.preloadNextLevel(),n.startGame(),n.analytics.levelStart(n.levelManager.getLevel(),void 0,n.getLevelName())},n.create=function(){e.prototype.create.call((0,La.Z)(n)),n.createBackground(fa.Z.BACKGROUND.KEY),n.createManager(),n.createScreens(),n.createInput(),n.input.setTopOnly(!0),n.preLoadAds()},n.onConfirm=function(){FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(yh(1)),n.levelManager.setLevel(1),n.screen.close(Za.o4.START_OVER_SCREEN),n.screen.close(Za.o4.MISSION_COLLECTION_COMPLETE_SCREEN),n.handleRestartLevel()},n.handleClickStartOver=function(){n.screen.open(Za.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.handlePauseGame=function(){n.isGameOver||n.isLevelComplete||(0,La.Z)(n).screen.open(Za.o4.SETTINGS_SCREEN)},n.handleShowInterstitialAd=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.audio.pauseMusic(),n.ads.canbeShowInterstitialAd()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.ads.showInterstitialAdAsync();case 6:n.analytics.showInterstitialAd(n.getSceneName()),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return");case 12:return e.prev=12,n.audio.playMusic(),n.ads.preloadInterstitialAdAsync().catch(i.tO),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])}))),n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.preLoadAds=function(){this.ads.preloadInterstitialAdAsync().catch((function(e){return console.log(e)})),this.ads.preloadRewardedVideoAsync().catch((function(e){return console.log(e)}))},n.createManager=function(){this.layoutManager=new aR(this),this.tutorialManager=new sb(this),this.levelManager=new zI(this),this.mapManager=new KI(this),this.effectManager=new vO(this),this.targetMissionManager=new jI},n.initManager=function(){this.layoutManager.init(),this.effectManager.init()},n.createInput=function(){this.isGameOver||(this.layoutManager.objects.header.buttonSetting.onClick=this.handlePauseGame)},n.createScreens=function(){this.createMissionScoreCompleteScreen(),this.createMissionCollectionCompleteScreen(),this.createCollectionCompletedScreen(),this.createNoSpaceLeftScreen(),this.createMissionFailScreen(),this.createSettingScreen(),this.createCollectionItemsScreen(),this.createLeaderboardScreen(),this.createDailyChallengeModeScreen(),this.createMiniJourneyScreen(),this.createTargetScoreScreen(),this.createClaimHeartScreen(),this.createStartOverScreen()},n.createLeaderboardScreen=function(){this.screen.add(Za.o4.LEADER_BOARD_SCREEN,Su)},n.createCollectionCompletedScreen=function(){this.screen.add(Za.o4.COLLISION_COMPLETED_SCREEN,JI)},n.createMissionScoreCompleteScreen=function(){this.screen.add(Za.o4.MISSION_SCORE_COMPLETE_SCREEN,eC)},n.createMissionCollectionCompleteScreen=function(){this.screen.add(Za.o4.MISSION_COLLECTION_COMPLETE_SCREEN,aC)},n.createDailyChallengeModeScreen=function(){this.screen.add(Za.o4.DAILY_CHALLENGE_SCREEN,kb)},n.createMissionFailScreen=function(){this.screen.add(Za.o4.MISSION_FAIL_SCREEN,fC)},n.createNoSpaceLeftScreen=function(){this.screen.add(Za.o4.NO_SPACE_LEFT_SCREEN,rC)},n.createSettingScreen=function(){this.screen.add(Za.o4.SETTINGS_SCREEN,UC)},n.createCollectionItemsScreen=function(){this.screen.add(Za.o4.COLLECTION_ITEMS_SCREEN,$C)},n.createMiniJourneyScreen=function(){this.screen.add(Za.o4.MINI_JOURNEY_SCREEN,oO)},n.createTargetScoreScreen=function(){this.screen.add(Za.o4.TARGET_SCORE_SCREEN,dO)},n.createClaimHeartScreen=function(){this.screen.add(Za.o4.CLAIM_HEART_SCREEN,MT)},n.createStartOverScreen=function(){this.screen.add(Za.o4.START_OVER_SCREEN,yO)},n.updateCurrentBestScore=function(){var e=this.layoutManager.objects.header,t=this.player.getBestScore(),n=this.storage.getState(),i=al(n).bestScore,a=void 0===i?0:i,s=t>a?t:a;e.bestScoreBlock.setScoreText(s)},n.openLevelScreen=function(){this.screen.open(Za.o4.LEVEL_SCREEN)},n.handleNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleLoadMapComplete():(this.preloadNextLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}else{this.levelManager.increaseLevel();var n=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:n})}},n.handleSwitchJourney=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key;this.cache.tilemap.exists(t)?this.handleSwitchMode():(this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadMapComplete.bind(this)))}},n.handleSwitchMode=function(){var e,t=this.levelManager.getLevel();this.storage.dispatch((e={data:"",level:t,listPieceMap:[]},function(t,n){var i=window.game.player.getPlayerId(),a=n(),r=Qc(a),o=(0,s.Z)({},r,e),c=o.data;o.data=sh(c),t(uh(o)),Bl(ah.JourneyMatchStore+"-"+i,o)})),FBInstant.player.setDataAsync({level:t}),this.mapManager.reloadMap(),this.clearFen()},n.handleLoadMapComplete=function(){this.levelManager.increaseLevel();var e=this.levelManager.getLevel();FBInstant.player.setDataAsync({level:e}),this.mapManager.reloadMap()},n.handleGuideIfLevel1=function(){var e=this.storage.getState();tl(e)||1===this.levelManager.getLevel()&&this.tutorialManager.start()},n.startGame=function(){try{var e,t,n=this.layoutManager.objects,a=n.header,s=n.main,r=n.footer;null==(e=a.mainScoreBlock.addScore)||e.stop().remove(),a.mainScoreBlock.setScore(0),a.mainScoreBlock.setScoreText(0),a.progressBar.hideProgressBar(),a.progressBar.setPercent(0),this.isGameOver=!1,this.isLevelComplete=!1,this.mapManager.reloadMap(),null==(t=this.tutorialManager)||t.reset(),s.board.clearBoard(),r.pieces.clearPieces(),this.loadTargetByMap(),a.start(),this.loadBoardAndPieces(),this.loadTargetAmountByFen(),this.loadTextHeader(),this.restartCurrentLevel=0,this.openMissionScreen()}catch(o){console.log("Error ",o),this.handleRestartLevel(),(0,i.R0)(o,{scene:"Journey scene"})}},n.startGameAfterCollectionItemsScreenClose=function(){var e,t=this.layoutManager.objects.footer;this.startGameAt=(new Date).getTime();var n=this.storage.getState(),i=tl(n),a=((null==(e=Qc(n))?void 0:e.data)||{}).fen;!a||i?(t.pieces.start(),this.handleGuideIfLevel1()):this.loadPiecesByFen(a)},n.openMissionScreen=function(){switch(this.targetMissionManager.getTargetType()){case Ny:this.openCollectionItemsScreen();break;case Dy:this.openTargetScoreScreen()}},n.openCollectionItemsScreen=function(){var e=this,t=this.layoutManager.objects.header,n=t.collectItems.getJsonTarget();t.collectItems.hideListCollectItems(),this.disableInput(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(Za.o4.COLLECTION_ITEMS_SCREEN,{jsonTarget:n,duration:1500})}))},n.openTargetScoreScreen=function(){var e=this;this.disableInput(),this.layoutManager.objects.header.collectItems.reset(),this.time.delayedCall(500,(function(){e.enableInput(),e.screen.open(Za.o4.TARGET_SCORE_SCREEN,{duration:1500})}))},n.showCollectItems=function(){this.layoutManager.objects.header.collectItems.showListCollectItems()},n.loadBoardAndPieces=function(){var e,t=this.layoutManager.objects,n=t.main,i=t.footer,a=this.storage.getState(),s=tl(a),r=((null==(e=Qc(a))?void 0:e.data)||{}).fen,o=null,c=null;if(r&&!s){var l=n.board.getBoardByFen(r);return o=this.handleDynamicFenSize(l),c=i.pieces.getPiecesByFen(r),this.isFenGameOver(o,c)?(this.clearFen(),this.loadBoardByMap(),void this.loadPiecesByMap()):void this.loadBoardByFen(r)}this.loadBoardByMap(),this.loadPiecesByMap()},n.loadBoardByFen=function(e){var t=this.layoutManager.objects.main,n=t.board.getBoardByFen(e);t.board.startGame(n,e)},n.loadBoardByMap=function(){for(var e=this.layoutManager.objects.main,t=this.mapManager.getTileMap().layers,n=t.length,a=0;a<n;a++)for(var s=t[a].data,r=0;r<s.length;r++)for(var o=s[r],c=0;c<o.length;c++){var l=o[c];if(!(l.index<0)){var h=e.board.getFrameByMapItemIndex(l.index-1);h&&h!==cR.GEM_TRANSPARENT||(h=e.board.getFrameByMapItemIndex(1),(0,i.R0)(new Error("MapByBoardError"),{index:l.index,level:this.levelManager.getLevel(),row:r,col:c})),e.board.setFrameBoardByIndex(r,c,h)}}e.board.fadeIn()},n.loadPiecesByFen=function(e){var t=this.layoutManager.objects.footer,n=t.pieces.getPiecesByFen(e);t.pieces.showAvailablePieces(n),this.loadListPieceMapByFen()},n.loadListPieceMapByFen=function(){var e=this.layoutManager.objects.footer,t=this.storage.getState(),n=Qc(t).listPieceMap;n&&0!==n.length&&e.pieces.setListPieceMap(n)},n.loadPiecesByMap=function(){var e=this.layoutManager.objects.footer;e.pieces.buildPiecesByMap();var t=this.mapManager.getTileMap().getObjectLayer("spawnOrder");if(console.log("objects === ",t),t)for(var n=t.objects,i=0;i<n.length;i++){var a=n[i],r=a.type,o=a.properties,c=e.pieces.getPieceDataByType(r);o&&(c=(0,s.Z)({},c,{properties:o})),c&&e.pieces.addItemPieceMap(c)}},n.loadTargetByMap=function(){var e=this.mapManager.getTileMap().properties;if(!e||!(0,_f.isArray)(e)||e.length<2)throw new HC;console.log("properties === ",e);var t=e[0].value,n=e[1].value;this.targetMissionManager.setTargetValue(t),this.targetMissionManager.setTargetType(n)},n.loadTargetAmountByFen=function(){var e,t=this.layoutManager.objects.header;t.collectItems.resetTextAmount();var n=this.storage.getState();if(!tl(n)){var i=((null==(e=Qc(n))?void 0:e.data)||{}).jsonAmount;i&&0!==B()(i).length&&t.collectItems.updateJsonAmountByFen(i)}},n.loadTextHeader=function(){var e=this.layoutManager.objects.header,t=this.storage.getState();if(tl(t))return e.bestScoreBlock.showTextDay(),void e.bestScoreBlock.setDayText(this.getTextDay());var n=this.levelManager.getLevel();e.bestScoreBlock.showTextScore(),e.bestScoreBlock.setScoreText(n)},n.getTextDay=function(){var e,t=new Date,n="0"+t.getDate(),i="0"+(t.getMonth()+1),a=Me()(e=String(t.getFullYear())).call(e,-2);return Me()(i).call(i,-2)+"/"+Me()(n).call(n,-2)+"/"+a},n.getFen=function(){var e=this.layoutManager.objects,t=e.main,n=e.footer;return t.board.getFenByBoard()+" "+n.pieces.getFenByPieces()},n.handleRestartLevel=function(){this.restartCurrentLevel>0||(this.game.globalScene.screen.open(Za.o4.NOTIFY_SCREEN,{message:this.lang.Text.RESTARTING_MAP,duration:oR.Timeout,loading:!0}),this.restartCurrentLevel++,this.preloadCurrentLevel(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this)),this.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR),this.load.once(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadCurrentMapError.bind(this)))},n.handleGameOver=function(){this.isGameOver=!0,this.screen.open(Za.o4.GAME_OVER_SCREEN)},n.handleRequestFinishGame=function(){var e=this;this.isGameOver=!0,this.clearFen();var t=this.storage.getState();if(tl(t)){var n,a=Ry(),s=Fa()(n=GameCore.Utils.Number).call(n,a,4,"0");this.analytics.event(Pt._.DAILY_CHALLENGE_FAIL,{level:a,levelName:"daily_challenge_"+s})}else this.storage.dispatch(function(){var e=(0,r.Z)(u().mark((function e(t,n){var i,a,s,r,o,c,l,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game.player,a=i.getPlayer(),s=a.playerId,r=n(),o=wf(r),c=xf(r),(l=o-IA.bonusLife)>IA.livesCapacity&&(l=IA.livesCapacity),l<0&&(l=0),t({type:Bi,payload:{data:h={lives:l,lastBonusLifeTime:c}}}),e.next=13,window.FBInstant.player.setDataAsync({lives:h});case 13:Bl(yA.LivesStore+"-"+s,h),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}()),this.analytics.levelFail(this.levelManager.getLevel(),void 0,this.getLevelName());this.screen.open(Za.o4.NO_SPACE_LEFT_SCREEN,{duration:3e3,onClose:function(){e.handleShowInterstitialAd().catch(i.tO),e.screen.open(Za.o4.MISSION_FAIL_SCREEN)}})},n.checkAnimPlaying=function(){var e=this.tweens.getAllTweens();return!(!e||0===e.length)},n.disableInput=function(){var e=this.layoutManager.objects.footer;this.input.enabled=!1,e.pieces.allPieces.forEach((function(e){return e.piece.cancelDrag()}))},n.enableInput=function(){this.input.enabled=!0},n.handleUpdateScore=function(e){console.log("handleUpdateScore");var t=this.layoutManager.objects.header.mainScoreBlock.score+e;this.storage.dispatch(function(e){return{type:_n,payload:{score:e}}}(t))},n.handleAddScoreAnim=function(e){this.layoutManager.objects.header.mainScoreBlock.animAddScore(e)},n.updateProgressTargetScore=function(e){var t=this.layoutManager.objects.header,n=t.progressBar.getTargetScore();t.progressBar.setPercent(e/n)},n.handleCompleteScoreMission=function(){var e=this;if(!this.isGameOver&&this.targetMissionManager.getTargetType()===Dy){var t=this.layoutManager.objects.header.mainScoreBlock.score,n=parseInt(this.targetMissionManager.getTargetValue());if(!(t<n)){var a=this.storage.getState();if(tl(a)){var s,o=Ry(),c=Fa()(s=GameCore.Utils.Number).call(s,o,4,"0");this.handleSwitchJourney(),this.analytics.event(Pt._.DAILY_CHALLENGE_END,{level:o,levelName:"daily_challenge_"+c})}else this.handleNextLevel(),this.analytics.levelComplete(n,void 0,this.getLevelName());this.isGameOver=!0,this.screen.open(Za.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}}},n.canUpdateFenMatch=function(){var e=this.storage.getState(),t=tl(e);return!(this.isGameOver||this.isLevelComplete||t)},n.updateMatchData=function(){var e;if(this.canUpdateFenMatch()){var t=this.layoutManager.objects,n=t.header,i=t.footer,a=this.getFen(),r=this.storage.getState(),o=Qc(r).data||{},c=$c(r),l=nl(r)||0,h=this.levelManager.getLevel(),u=n.collectItems.getJsonAmount(),d=i.pieces.getListPieceMap();this.storage.dispatch(ch(c,{score:l,data:(0,s.Z)({},o,{fen:a,jsonAmount:(0,s.Z)({},u)}),level:h,updateAt:Date.now(),listPieceMap:m()(e=[]).call(e,d)}))}},n.clearFen=function(){var e=this.storage.getState(),t=$c(e),n=this.levelManager.getLevel();this.storage.dispatch(ch(t,{score:0,data:{fen:"",jsonAmount:{}},level:n,listPieceMap:[],updateAt:Date.now()}))},n.update=function(e){this.input.enabled||this.checkAnimPlaying()?this.lastTimeInputEnabled=e:e-this.lastTimeInputEnabled>=3e3&&(this.enableInput(),this.lastTimeInputEnabled=e)},n.isFenGameOver=function(e,t){for(var n=[],i=0;i<t.length;i++){var a=t[i],s=a.type,r=a.direction,o=a.isReverse;switch(s){case tm:case nm:case im:n.push({data:wI.getData(s,r,o)});break;case am:case sm:case rm:case om:n.push({data:kI.getData(s,r)});break;case cm:case lm:case hm:n.push({data:LI.getData(s)});break;case dm:n.push({data:DI.getData(r)});break;case pm:n.push({data:YI.getData(r)});break;case Sm:n.push({data:VI.getData(r)});break;case fm:case mm:case vm:case Em:n.push({data:BI.getData(s,r)});break;case um:n.push({data:FI.getData(r)});break;case gm:n.push({data:HI.getData()})}}return kv(e,n)},n.handleDynamicFenSize=function(e){var t,n,i=0;if((n=e.length)&&(i=e[0].length),0===n||0===i)return e;var a=m()(t=[]).call(t,e);if(n>rR.rows)Da()(a).call(a,rR.rows,n-rR.rows);else if(i<rR.rows)for(var s=0;s<rR.rows-n;s++){var r;a.push(Ba()(r=new Array(n)).call(r,{value:0,frame:cR.GEM_TRANSPARENT}))}return i>rR.cols?a.forEach((function(e){Da()(e).call(e,rR.cols,i-rR.cols)})):i<rR.cols&&a.forEach((function(e){for(var t=0;t<rR.cols-i;t++)e.push({value:0,frame:cR.GEM_TRANSPARENT})})),a},n.handleCollectionItemsComplete=function(){var e=this;if(this.targetMissionManager.getTargetType()!==Dy&&this.layoutManager.objects.header.collectItems.checkCompleteMission()){this.clearFen(),this.audio.playSound(Ya.Z.TARGET_REACHED);var t=this.levelManager.getLevel(),n=this.storage.getState();if(Qc(n).challengeMode){var a,s=Ry(),o=Fa()(a=GameCore.Utils.Number).call(a,s,4,"0");this.handleSwitchJourney(),this.analytics.event(Pt._.DAILY_CHALLENGE_END,{level:s,levelName:"daily_challenge_"+o})}else this.handleNextLevel(),this.analytics.levelComplete(t,void 0,this.getLevelName());t>Pf.length-1&&this.time.delayedCall(2e3,(function(){e.game.globalScene.screen.open(Za.o4.NOTIFY_SCREEN,{message:e.lang.Text.UPDATING_NEW_LEVELS,duration:1e3}),e.time.delayedCall(1e3,(function(){e.scene.switch(wa.Co.LEVEL_SCENE)}))})),this.screen.open(Za.o4.COLLISION_COMPLETED_SCREEN,{duration:3e3,onClose:function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLevelComplete=!1,t.next=3,e.handleShowInterstitialAd().catch(i.tO);case 3:e.showPopupCompleteScreenAfterCollectionCompleted();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}},n.showPopupCompleteScreenAfterCollectionCompleted=function(){var e=(0,r.Z)(u().mark((function e(){var t,n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!tl(t)){e.next=8;break}return n=(new Date).getTime()-this.startGameAt,((i=cb(t))>n||0==i)&&(this.storage.dispatch(Ub({time:n,limit:100,offset:0})),this.storage.dispatch(Th())),this.screen.open(Za.o4.DAILY_CHALLENGE_SCREEN),e.abrupt("return");case 8:if(this.targetMissionManager.getTargetType()!==Dy){e.next=11;break}return this.screen.open(Za.o4.MISSION_SCORE_COMPLETE_SCREEN),e.abrupt("return");case 11:this.screen.open(Za.o4.MISSION_COLLECTION_COMPLETE_SCREEN);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setLevelCompleted=function(e){this.targetMissionManager.getTargetType()!==Dy&&(this.isLevelComplete=e)},n.handleRetryLevel=function(){var e=this.storage.getState();if(Qc(e).challengeMode){var t,n=Ry(),i=Fa()(t=GameCore.Utils.Number).call(t,n,4,"0");this.analytics.event(Pt._.DAILY_CHALLENGE_BEGIN,{level:n,levelName:"daily_challenge_"+i})}else this.analytics.levelStart(this.levelManager.getLevel(),void 0,this.getLevelName());this.layoutManager.objects.header.progressBar.reset(),this.clearFen(),this.startGame()},n.preloadNextLevel=function(){var e=this.levelManager.getNextLevelConfig();if(e){var t=e.key,n=e.mapJson;"level-from-json"!==t&&(this.cache.tilemap.exists(t)||(this.load.tilemapTiledJSON(t,n),this.load.start()))}},n.preloadCurrentLevel=function(){var e=this.levelManager.getLevelConfig();if(e){var t=e.key,n=e.mapJson;this.cache.tilemap.exists(t)?this.handleLoadCurrentMapComplete():(this.load.tilemapTiledJSON(t,n),this.load.start())}},n.handleLoadCurrentMapComplete=function(){var e=this.game.globalScene;this.mapManager.reloadMap(),this.clearFen(),this.startGame(),e.screen.close(Za.o4.NOTIFY_SCREEN)},n.handleLoadCurrentMapError=function(e){var t=this.game.globalScene,n=new YS("Load resources at LoadScene failed.");(0,i.R0)(n,{file:null==e?void 0:e.url}),t.screen.close(Za.o4.NOTIFY_SCREEN)},n.getLevelName=function(){var e,t=this.levelManager.getLevel();return"journey_"+Fa()(e=GameCore.Utils.Number).call(e,t,4,"0")},t}(Au.Z),hR=lR;null==(Fb=void 0)||Fb.accept(GameCore.LiveUpdate.Scene(wa.Co.JOURNEY_SCENE));var uR,dR=hR,pR=function(e){if("string"!==typeof e||!e)throw new Gc(null,{imageShare:e})},gR=Ha.Z.GAMEPLAY,fR=gR.KEY,mR=gR.FRAME,vR=function(e){function t(t){var n;return(n=e.call(this,t,fR,mR.BUTTON_WOOD_SMALL)||this).button.setWorldSize(64,55),n.setName("Home"),n.createIcon(),n}return(0,o.Z)(t,e),t.prototype.createIcon=function(){var e=this.scene.make.image({key:fR,frame:mR.ICON_HOME});e.setWorldSize(34,31),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-2)},t}(Wa.Z),ER=vR,SR=Ha.Z.DEFAULT,AR=SR.KEY,TR=SR.FRAME,yR=function(e){function t(t){var n;return(n=e.call(this,t,AR,TR.BUTTON_GREEN)||this).nextLevel=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.nextLevel=this.scene.make.image({key:AR,frame:TR.TEXT_NEXT_LEVEL}),this.nextLevel.setWorldSize(this.nextLevel.width/e,this.nextLevel.height/e),this.add(this.nextLevel),Phaser.Display.Align.In.Center(this.nextLevel,this,0,-1)},t}(Wa.Z),IR=yR,CR=Ha.Z.DEFAULT,bR=CR.KEY,OR=CR.FRAME,PR=function(e){function t(t){var n;return(n=e.call(this,t,bR,OR.BUTTON_GREEN)||this).textStartOver=void 0,n.button.setWorldSize(182,55),n.setName("Play Level"),n.createText(),n}return(0,o.Z)(t,e),t.prototype.createText=function(){var e=this.scene.world.getPixelRatio();this.textStartOver=this.scene.make.image({key:bR,frame:OR.TEXT_START_OVER});var t=this.textStartOver,n=t.width,i=t.height;this.textStartOver.setWorldSize(n/e,i/e),this.add(this.textStartOver),Phaser.Display.Align.In.Center(this.textStartOver,this,0,-1)},t}(Wa.Z),RR=PR,wR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.buttonPlay=void 0,n.buttonStartOver=void 0,n.buttonHome=void 0,n.scene=t,n.init(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createButton()},n.createButton=function(){this.createButtonPlay(),this.createButtonStartOver(),this.createButtonHome()},n.createButtonPlay=function(){this.buttonPlay=new IR(this.scene),this.add(this.buttonPlay),Phaser.Display.Align.In.Center(this.buttonPlay,this,40,1)},n.createButtonStartOver=function(){this.buttonStartOver=new RR(this.scene),this.add(this.buttonStartOver),Phaser.Display.Align.In.Center(this.buttonStartOver,this,40,1)},n.createButtonHome=function(){this.buttonHome=new ER(this.scene),this.add(this.buttonHome),Phaser.Display.Align.In.Center(this.buttonHome,this,-90,1)},n.updateTextButtonPlay=function(){var e=this.scene.storage.getState(),t=el(e),n=this.scene.world.getPixelRatio();1===t?this.buttonPlay.nextLevel.setFrame(Ha.Z.DEFAULT.FRAME.TEXT_PLAY):this.buttonPlay.nextLevel.setFrame(Ha.Z.DEFAULT.FRAME.TEXT_NEXT_LEVEL),this.buttonPlay.nextLevel.setWorldSize(this.buttonPlay.nextLevel.width/n,this.buttonPlay.nextLevel.height/n)},t}(Phaser.GameObjects.Container),xR=wR,kR=Ha.Z.DEFAULT,_R=kR.KEY,LR=kR.FRAME,MR=function(e){function t(t){var n,i=(n=e.call(this,t,0,0,_R,LR.LEAF)||this).scene.gameZone.width,a=i*n.height/n.width;return n.setWorldSize(i,a),n.scene.add.existing((0,La.Z)(n)),n}return(0,o.Z)(t,e),t}(Phaser.GameObjects.Image),DR=MR,NR=Ha.Z.DEFAULT,BR=NR.KEY,GR=NR.FRAME,FR=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.livesTimer=void 0,n.scene=t,t.add.existing((0,La.Z)(n)),n.init(),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createText(),this.createLivesTimer()},n.createText=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.make.image({key:BR,frame:GR.TEXT_JOURNEY});t.setWorldSize(t.width/e,t.height/e),this.add(t),Phaser.Display.Align.In.Center(t,this,0,14)},n.createLeaf=function(){var e=new DR(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,e.displayHeight/2-30)},n.createLivesTimer=function(){this.livesTimer=new AT(this.scene),this.livesTimer.startIntervalTimer(),this.add(this.livesTimer),Phaser.Display.Align.In.Center(this.livesTimer,this,0,50)},n.updateTextLives=function(){var e=this.scene.storage.getState(),t=wf(e);this.livesTimer.setLives(t)},t}(Phaser.GameObjects.Container),UR=FR,HR=function(e){return e.PASSED="passed",e.READY="ready",e.WAITING="waiting",e}({}),ZR=Ha.Z.DEFAULT,YR=ZR.KEY,WR=ZR.FRAME,VR=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.levelBackground=void 0,i.tick=void 0,i.levelNumber=void 0,i.level=void 0,i.tweenClick=void 0,i.payload=void 0,i.scene=t,i.init(),n&&i.updateInfo(n),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){var e=this;this.createLevelBackground(),this.createImageCheck(),this.createText(),this.updateSize(),this.alignLevelItem(),this.setInteractive(),this.on(Phaser.Input.Events.POINTER_DOWN,(function(){e.scene.audio.playSound(Ya.Z.BUTTON_CLICK),e.tweenClick?e.tweenClick.play():e.scene.handlePlay()}))},n.createLevelBackground=function(){this.levelBackground=this.scene.make.image({key:YR,frame:WR.LEVEL_PLAYING}),this.levelBackground.setWorldSize(75,60),this.levelBackground.setVisible(!1),this.add(this.levelBackground)},n.updateSize=function(){var e=this.levelBackground,t=e.width,n=e.height;this.setSize(t,n)},n.createImageCheck=function(){this.tick=this.scene.make.image({key:YR,frame:WR.ICON_CHECK}),this.tick.setWorldSize(30,23),this.tick.setVisible(!1),this.add(this.tick)},n.createText=function(){this.levelNumber=this.scene.make.bitmapText({font:Va.Z.PRIMARY.KEY,size:this.scene.fontSize(40),text:""+this.level,origin:{x:.2,y:.5}}),this.levelNumber.setAlpha(.7),this.levelNumber.setTint(7813671),this.add(this.levelNumber)},n.getLevel=function(){return this.level},n.updateInfoLevel=function(){switch(this.disableInteractive(),this.payload.status){case HR.PASSED:this.levelNumber.setAlpha(.7),this.levelBackground.setFrame(WR.LEVEL_PLAYED),this.tick.setVisible(!0);break;case HR.READY:this.levelNumber.setAlpha(.7),this.setInteractive(),this.createTweenClick(),this.levelBackground.setFrame(WR.LEVEL_PLAYING),this.tick.setVisible(!1);break;case HR.WAITING:this.levelNumber.setAlpha(.5),this.levelBackground.setFrame(WR.LEVEL_LOCKED),this.tick.setVisible(!1)}},n.updateInfo=function(e){this.payload=(0,s.Z)({},e),this.updateInfoLevel(),this.updateText(),this.updateBackground(),this.alignLevelItem()},n.createTweenClick=function(){var e=this,t=this.scale;this.tweenClick=this.scene.tweens.add({targets:[this],duration:100,paused:!0,yoyo:!0,scale:{from:t,to:t-.1},onComplete:function(){e.scene.handlePlay()}})},n.updateBackground=function(){this.levelBackground.setVisible(!0)},n.updateText=function(){this.levelNumber.setText(""+this.payload.level),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.alignLevelItem=function(){Phaser.Display.Align.In.Center(this.tick,this.levelBackground,25,10),Phaser.Display.Align.In.Center(this.levelNumber,this.levelBackground,0,0)},n.setStatus=function(e){this.payload.status=e},n.setTextLevel=function(e){this.payload.level=e},t}(Phaser.GameObjects.Container),zR=Ha.Z.DEFAULT,KR=zR.KEY,jR=zR.FRAME,XR=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).scene=void 0,i.background=void 0,i.levelItem1=void 0,i.levelItem2=void 0,i.levelItem3=void 0,i.levelItem4=void 0,i.payload=void 0,i.scene=t,i.init(),n&&(i.updateInfo(n),console.log(i.payload)),i.scene.add.existing((0,La.Z)(i)),i}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackground(),this.updateSize(),this.createLevelItem()},n.createBackground=function(){this.background=this.scene.make.image({key:KR,frame:jR.BG_DARK}),this.background.setWorldSize(325,64),this.background.setVisible(!1),this.add(this.background)},n.updateSize=function(){var e=this.background,t=e.width,n=e.height;this.setSize(t,n)},n.updateInfo=function(e){this.payload=(0,s.Z)({levelItem2:{level:0,status:""},levelItem3:{level:0,status:""},levelItem4:{level:0,status:""}},e),this.updateLevelItem()},n.createLevelItem=function(){this.levelItem1=new VR(this.scene,{level:1,status:HR.WAITING}),this.add(this.levelItem1),Phaser.Display.Align.In.Center(this.levelItem1,this,-120,0),this.levelItem2=new VR(this.scene,{level:2,status:HR.WAITING}),this.add(this.levelItem2),this.levelItem2.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem2,this,-40,0),this.levelItem3=new VR(this.scene,{level:3,status:HR.WAITING}),this.add(this.levelItem3),this.levelItem3.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem3,this,40,0),this.levelItem4=new VR(this.scene,{level:4,status:HR.WAITING}),this.add(this.levelItem4),this.levelItem4.setVisible(!1),Phaser.Display.Align.In.Center(this.levelItem4,this,120,0)},n.updateLevelItem=function(){if(this.levelItem1.setStatus(this.payload.levelItem1.status),this.levelItem1.updateInfoLevel(),this.levelItem1.setTextLevel(this.payload.levelItem1.level),this.levelItem1.updateText(),this.levelItem2){if(""==this.payload.levelItem2.status)return this.levelItem2.setVisible(!1),this.levelItem3&&this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem2.setStatus(this.payload.levelItem2.status),this.levelItem2.updateInfoLevel(),this.levelItem2.setVisible(!0),this.levelItem2.setTextLevel(this.payload.levelItem2.level),this.levelItem2.updateText()}if(this.levelItem3){if(""==this.payload.levelItem3.status)return this.levelItem3.setVisible(!1),void(this.levelItem4&&this.levelItem4.setVisible(!1));this.levelItem3.setStatus(this.payload.levelItem3.status),this.levelItem3.updateInfoLevel(),this.levelItem3.setVisible(!0),this.levelItem3.setTextLevel(this.payload.levelItem3.level),this.levelItem3.updateText()}if(this.levelItem4){if(""==this.payload.levelItem4.status)return void this.levelItem4.setVisible(!1);this.levelItem4.setStatus(this.payload.levelItem4.status),this.levelItem4.updateInfoLevel(),this.levelItem4.setVisible(!0),this.levelItem4.setTextLevel(this.payload.levelItem4.level),this.levelItem4.updateText()}},t}(Phaser.GameObjects.Container),JR=Ha.Z.DEFAULT,qR=JR.KEY,QR=JR.FRAME,$R=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.backgroundContent=void 0,n.backgroundContainer=void 0,n.scroller=void 0,n.createBackground=function(){n.backgroundContainer=n.scene.make.container({});var e=n.scene.gameZone.height,t=n.scene.make.image({key:qR,frame:QR.BG_TOP});t.setWorldSize(375,e);var i=n.scene.make.image({key:qR,frame:QR.BG_BOTTOM});i.setWorldSize(375,e);var a=n.scene.make.image({key:qR,frame:QR.BG_MIDDLE});a.setWorldSize(375,415),n.backgroundContainer.add([t,a,i]),Phaser.Display.Align.In.Center(a,n.backgroundContainer,0,0),Phaser.Display.Align.In.Center(t,a,0,-a.displayHeight/2-t.displayHeight/2),Phaser.Display.Align.In.Center(i,a,0,a.displayHeight/2+i.displayHeight/2),n.backgroundContainer.setDepth(Ua.Z.BACKGROUND),n.setSizeBackground(t.displayHeight+a.displayHeight+i.displayHeight),n.backgroundContainer.setSize(375,415),n.add(n.backgroundContainer),Phaser.Display.Align.In.Center(n.backgroundContainer,(0,La.Z)(n),0,0)},n.scene=t,n.init(),n.createReuseScroller(),n.scene.add.existing((0,La.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.init=function(){this.createBackgroundContent(),this.createBackground()},n.createReuseScroller=function(){this.scroller=new iu(this.scene,{classType:XR,listConfigs:[],width:325,height:385,padding:0,marginTop:0,marginBottom:0,maxScrollOver:.3,scrollingBackRate:5,useMask:!0}),this.scroller.setVisible(!1),this.scene.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&this.scroller.createBound(Ha.Z.DEFAULT.KEY,Ha.Z.DEFAULT.FRAME.BLANK,40,1528359),this.scroller.createMask(),this.scroller.setPosition(0,0),this.add(this.scroller)},n.setSizeBackground=function(e){var t=e*this.backgroundContent.displayWidth/this.backgroundContent.displayHeight;this.backgroundContent.setWorldSize(t,e)},n.updateData=function(){var e=this.scene.storage.getState(),t=el(e);0===t&&(t=1);for(var n=[],i={levelItem1:{status:"",level:0}},a={levelItem1:{status:"",level:0}},r=1;r<Pf.length;r++){var o="";o=r>t?HR.WAITING:r<t?HR.PASSED:HR.READY;var c="";switch(r%4){case 1:c="levelItem1";break;case 2:c="levelItem2";break;case 3:c="levelItem3";break;case 0:c="levelItem4"}i[c]={level:r,status:o},a[c]={level:r,status:o},r%4===0&&(n.push((0,s.Z)({},i)),a={levelItem1:{status:"",level:0}})}(Pf.length-1)%4>0&&n.push((0,s.Z)({},a)),this.scroller.updateConfig(n);var l=this.scroller.getChildren()[0].height;if(this.scroller.value=-l*this.showDefaultLevel(t),t>Pf.length)this.scene.game.globalScene;else this.showLeaders()},n.showDefaultLevel=function(e){var t=Math.floor((e-1)/4),n=Math.floor((Pf.length-1)/4);return n-t<3?n-5:t<3?0:t-2},n.removeLevelItems=function(){this.scroller.updateConfig([])},n.resetScroller=function(){this.scroller.destroy(),this.createReuseScroller()},n.getLevelItems=function(){return this.scroller.getChildren()},n.showLeaders=function(){var e=this.getLevelItems();if(!(e.length<1)){for(var t=e.length>8?8:e.length,n=0;n<t;n++){var i=e[n];if(!i)return;i.setVisible(!0)}this.scroller.setEnable(!0)}},n.createBackgroundContent=function(){this.backgroundContent=this.scene.make.image({key:qR,frame:QR.BG_DARK}),this.backgroundContent.setWorldSize(340,399),this.add(this.backgroundContent)},t}(Phaser.GameObjects.Container),ew=$R,tw=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.header=void 0,n.main=void 0,n.footer=void 0,n.scene=t,n.createObjects(),n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.createMain(),this.createHeader(),this.createFooter()},n.createHeader=function(){this.header=new UR(this.scene),this.header.setDepth(Ua.Z.BACKGROUND),this.group.add(this.header)},n.createMain=function(){this.main=new ew(this.scene),this.group.add(this.main)},n.createFooter=function(){this.footer=new xR(this.scene),this.footer.setDepth(Ua.Z.BACKGROUND),this.group.add(this.footer)},t}(Sg),nw=tw,iw=function(e){function t(t){var n;return(n=e.call(this,t)||this).objects=void 0,n.guideUI=void 0,n.objects=null,n}(0,o.Z)(t,e);var n=t.prototype;return n.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,-15),Phaser.Display.Align.In.Center(this.objects.main,e,0,-24),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-90),this.objects.main.backgroundContainer.setVisible(!0),this.objects.main.backgroundContent.setVisible(!0),this.scene.background.setVisible(!1),this.objects.main.resetScroller(),this.objects.main.scroller.setSize(325,385),this.objects.main.scroller.createMask(),this.objects.main.updateData(),this.objects.main.scroller.setVisible(!0),this.objects.footer.setScale(1)}},n.createGroups=function(){e.prototype.createGroups.call(this),this.guideUI=this.scene.add.group(),this.groups.guideUI=this.guideUI},n.setUIObjects=function(t){e.prototype.setUIObjects.call(this,t),this.addUIObjectsToGroups()},n.addUIObjectsToGroups=function(){null!==this.objects&&this.addObjectForGuideUI()},n.addObjectForGuideUI=function(){this.objects},t}(Ig),aw=iw,sw=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.alignUI=function(){if(null!==this.objects){var e=this.scene.gameZone;Phaser.Display.Align.In.TopCenter(this.objects.header,e,0,-10),Phaser.Display.Align.In.Center(this.objects.main,e,0,-5),Phaser.Display.Align.In.BottomCenter(this.objects.footer,e,0,-60),this.objects.main.backgroundContainer.setVisible(!1),this.objects.main.backgroundContent.setVisible(!1),this.scene.background.setVisible(!0),this.objects.main.resetScroller(),this.objects.main.scroller.setSize(325,315),this.objects.main.scroller.createMask(),this.objects.main.updateData(),this.objects.main.scroller.setVisible(!0),this.objects.footer.setScale(.9)}},t}(aw),rw=sw,ow=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.scene=t,n}(0,o.Z)(t,e);var n=t.prototype;return n.createObjects=function(){this.objects=new nw(this.scene)},n.createLayouts=function(){this.scene.world.isLandscape()?this.layout=new rw(this.scene):this.layout=new aw(this.scene),this.layout.setUIObjects(this.objects)},n.initUILogic=function(){},n.updateUIState=function(){},t}(kg),cw=ow,lw=GameCore.Configs.Network,hw=Ha.Z.DEFAULT,uw=(hw.KEY,hw.FRAME,function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).layoutManager=void 0,n.run=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.initManager(),e.next=3,n.checkReceiveLevelFromFb();case 3:n.layoutManager.objects.header.updateTextLives(),n.loadLevelConfig();case 6:case"end":return e.stop()}}),e)}))),n.create=function(){e.prototype.create.call((0,La.Z)(n)),n.createBackground(fa.Z.BACKGROUND.KEY),n.createManager(),n.createLeaderBoardScreen(),n.createClaimHeartScreen(),n.createStartOverScreen(),n.listenEvents()},n.clickButtonHome=function(){n.scene.switch(wa.Co.DASHBOARD_SCENE)},n.onConfirm=function(){var e=n.layoutManager.objects.main;FBInstant.player.setDataAsync({level:1}),n.storage.dispatch(yh(1)),n.loadLevelConfig(),e.updateData()},n.handleClickStartOver=function(){n.screen.open(Za.o4.START_OVER_SCREEN,{onConfirm:n.onConfirm})},n.checkFinishAllLevel=function(){var e=n.layoutManager.objects.footer,t=n.storage.getState(),i=el(t);if(console.log(i,Pf.length),i>=Pf.length)return e.buttonPlay.setVisible(!1),void e.buttonStartOver.setVisible(!0);e.buttonPlay.setVisible(!0),e.buttonStartOver.setVisible(!1)},n.clickLeaderBoard=function(){n.screen.open(Za.o4.LEADER_BOARD_SCREEN)},n}(0,o.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.startGame=function(){var e=this.layoutManager.objects,t=e.footer,n=e.main;n.updateData(),this.checkFinishAllLevel(),t.updateTextButtonPlay(),n.scroller.setVisible(!0)},n.createManager=function(){this.layoutManager=new cw(this)},n.initManager=function(){this.layoutManager.init()},n.createClaimHeartScreen=function(){this.screen.add(Za.o4.CLAIM_HEART_SCREEN,MT)},n.createStartOverScreen=function(){this.screen.add(Za.o4.START_OVER_SCREEN,yO)},n.listenEvents=function(){var e=this.layoutManager.objects.footer;e.buttonHome.onClick=this.clickButtonHome.bind(this),e.buttonPlay.onClick=this.handlePlay.bind(this),e.buttonStartOver.onClick=this.handleClickStartOver},n.handlePlay=function(){var e=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.storage.getState(),!(wf(t)<1)){e.next=5;break}return this.screen.open(Za.o4.CLAIM_HEART_SCREEN),e.abrupt("return");case 5:n=el(t),this.storage.dispatch(Th()),this.analytics.levelStart(n,void 0,this.getLevelName(n)),this.storage.dispatch(Dh());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.checkReceiveLevelFromFb=function(){var e=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.storage.getState(),!el(t)){e.next=5;break}return e.abrupt("return");case 5:return this.showLoadingScreen(),e.next=8,this.storage.dispatch(Ah());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,i.tO)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),n.showLoadingScreen=function(){var e=this.game,t=e.globalScene,n=e.lang;t.screen.open(Za.o4.NOTIFY_SCREEN,{message:n.Text.LOADING_LEVEL+"...",duration:lw.Timeout,loading:!0})},n.hideLoadingScreen=function(){this.game.globalScene.screen.close(Za.o4.NOTIFY_SCREEN)},n.loadLevelConfig=function(){try{var e=this.storage.getState(),t=el(e);0===t&&(t=1);var n=Pf[t];n||(n=Pf[Pf.length-1]);var a=n,s=a.key,r=a.mapJson;if(this.cache.tilemap.exists(s))return void this.handleLoadCurrentMapComplete();this.load.tilemapTiledJSON(s,r),this.load.start(),this.load.off(Phaser.Loader.Events.COMPLETE),this.load.once(Phaser.Loader.Events.COMPLETE,this.handleLoadCurrentMapComplete.bind(this))}catch(o){(0,i.tO)(o)}},n.handleLoadCurrentMapComplete=function(){this.hideLoadingScreen(),this.startGame()},n.handleInviteFriends=function(){this.storage.dispatch((0,r.Z)(u().mark((function e(){var t,n,a,s,r,o,c,l,h,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,a=t.analytics,s=t.facebook,r=t.globalScene,o=t.lang,e.prev=1,r.screen.open(Za.o4.NOTIFY_SCREEN,{message:o.Text.LOADING,loading:!0}),e.next=5,pl();case 5:return c=e.sent,pR(c),l=n.getPlayer(),h=l.playerId,d=l.name,p=l.photo,e.next=10,s.inviteAsync({template:da,cta:{default:"Play",localizations:{en_US:"Play",vi_VN:"Ch\u01a1i ngay"}},text:{default:"Great! I have a best score!",localizations:{en_US:"Great! I have a best score!",vi_VN:"Th\u1eadt tuy\u1ec7t! M\xecnh v\u1eeba ph\xe1 k\u1ef7 l\u1ee5c n\xe0y!"}},image:c||"",data:{playerId:h,playerName:d,playerPhoto:p,type:da}});case 10:a.event(Pt._.INVITE,{invite_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a.event(Pt._.INVITE,{invite_content_type:"BestScore",success:!1}),(0,i.tO)(e.t0);case 17:return e.prev=17,r.screen.close(Za.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},n.createLeaderBoardScreen=function(){this.screen.add(Za.o4.LEADER_BOARD_SCREEN,Su)},n.getLevelName=function(e){var t;return"journey_"+Fa()(t=GameCore.Utils.Number).call(t,e,4,"0")},t}(Au.Z)),dw=uw;null==(uR=void 0)||uR.accept(GameCore.LiveUpdate.Scene(wa.Co.LEVEL_SCENE));var pw=dw,gw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,s=void 0===a?this.currentLocale:a,r=this.getCorrectLocale(s),o=this.data[r].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return gt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,s.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,a=e.upperCaseText,r=void 0!==a&&a;this.data=t,this.supportedLanguages=B()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,r)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n,i=t.maxWidth,a=void 0===i?Phaser.Math.MAX_SAFE_INTEGER:i,s=t.maxHeight,r=void 0===s?Phaser.Math.MAX_SAFE_INTEGER:s,o=t.align,c=void 0===o?"center":o,l=t.drawMaxBoxDebug,h=void 0!==l&&l,u=e.make.bitmapText(t);for("center"===c?u.setCenterAlign():"left"===c?u.setLeftAlign():"right"===c&&u.setRightAlign(),gt()(n=t.text||"").call(n," ")>=0&&u.setMaxWidth(a);u.width>a||u.height>=r;)u.setFontSize(.95*u.fontSize),console.log({t:t.text,w:u.width,h:u.height});if(h&&GameCore.Utils.Valid.isDebugger()){var d=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});d.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(d.clear(),u&&u.visible&&u.active){var e=u.getWorldPosition(),t=e.x,n=e.y;d.strokeRect(t-.5*a+(.5-u.originX)*u.width,n-.5*r+(.5-u.originY)*u.height,a,r)}}))}return u},n.setFontSize=function(e,t,n){var i,a=t||Phaser.Math.MAX_SAFE_INTEGER,s=n||Phaser.Math.MAX_SAFE_INTEGER;for(gt()(i=e.text||"").call(i," ")>=0&&e.setMaxWidth(a);e.width>a||e.height>=s;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),fw={en:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LEVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NO ADS TO DISPLAY!","NO_REWARDS":"SORRY, NO REWARDS!","CANCELLED_AD":"YOU HAVE CANCELLED THE AD!","LOADING":"LOADING...","LOADING_AD":"LOADING AD ...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Leaderboard is empty!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Great! I have a best score!","TARGET_SCORE":"Target score","NO_SPACE_LEFT":"NO SPACE LEFT!","FULL":"Full","LOADING_LEVEL":"Loading level","SCORE_REACHED":"SCORE REACHED!","WELL_DONE":"WELL  DONE!","Level":"Level","Completed":"Completed","COMPLETED":"COMPLETED","Next_life":"Next life","MESS_TUTORIAL_1":"Place the block in the horizontal line\\nand see what happens!","MESS_TUTORIAL_2":"Now see what happens\\nwhen you make a vertical line.","MESS_TUTORIAL_3":"You can also make a 3x3 square.\\nGive it a try!","MESS_TUTORIAL_4":"Arrange lines and squares\\nto get combo points!","COMBO":"COMBO","STREAK":"STREAK","MESS_SKIP_TUTORIAL":"Are you sure you want\\nto skip the tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"UPDATING NEW LEVELS...","RESTARTING_MAP":"RESTARTING MAP...","CANCEL":"Cancel","OK":"OK","CONFIRM_START_OVER":"CONFIRM START OVER","MESS_START_OVER":"Are you sure to start over?","mmddyy":"Date","Anonymous":"Anonymous"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ru:JSON.parse('{"Text":{"POP JEWELS":"\u0412\u0417\u0420\u042b\u0412\u041d\u042b\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","DAILY_REWARDS":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041d\u0410\u0413\u0420\u0410\u0414\u042b","CLAIM":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c","CLAIM_X2":"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c X2","DAY_{X}":"\u0414\u0415\u041d\u042c {X}","PLAY_NOW":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421\u0415\u0419\u0427\u0410\u0421","PLAY_WITH_FRIENDS":"\u0418\u0413\u0420\u0410\u0422\u042c \u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","RANK":"\u041c\u0415\u0421\u0422\u041e","DAILY":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u041e","GIFT":"\u041f\u041e\u0414\u0410\u0420\u041e\u041a","SETTINGS":"\u041d\u0410\u0421\u0422\u0420\u041e\u0419\u041a\u0418","LEADERBOARDS":"\u0422\u0410\u0411\u041b\u0418\u0426\u0410 \u041b\u0418\u0414\u0415\u0420\u041e\u0412","PLAY":"\u0418\u0413\u0420\u0410\u0422\u042c","WITH_FRIENDS":"\u0421 \u0414\u0420\u0423\u0417\u042c\u042f\u041c\u0418","FRIENDS":"\u0414\u0420\u0423\u0417\u042c\u042f","WORLD":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","DAILY_MISSION":"\u0415\u0416\u0415\u0414\u041d\u0415\u0412\u041d\u042b\u0415 \u041c\u0418\u0421\u0421\u0418\u0418","PASS_10_LEVELS":"\u041f\u0420\u041e\u0419\u0414\u0418 10 \u0423\u0420\u041e\u0412\u041d\u0415\u0419","COLLECT_300_DIAMONDS":"\u0421\u041e\u0411\u0415\u0420\u0418 300 \u0410\u041b\u041c\u0410\u0417\u041e\u0412","INVITE_2_FRIENDS":"\u041f\u0420\u0418\u0413\u041b\u0410\u0421\u0418 2 \u0414\u0420\u0423\u0417\u0415\u0419","REACH_TOTAL_SCORES":"\u041d\u0410\u0411\u0415\u0420\u0418 \u041e\u0411\u0429\u0415\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"\u041f\u041e\u0421\u041c\u041e\u0422\u0420\u0418 \u0412\u0418\u0414\u0415\u041e, \u0427\u0422\u041e\u0411\u042b \u041f\u041e\u041b\u0423\u0427\u0418\u0422\u042c\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412!","GET_NOW":"\u041f\u041e\u041b\u0423\u0427\u0418 \u041f\u0420\u042f\u041c\u041e \u0421\u0415\u0419\u0427\u0410\u0421!","TARGET":"\u0426\u0415\u041b\u042c","MISSION":"\u041c\u0418\u0421\u0421\u0418\u042f","YOUR_SCORE":"\u0422\u0412\u041e\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","LEVEL":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c","REQUESTING":"\u0417\u0410\u041f\u0420\u041e\u0421...","LOADING_INTERSTITIAL_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u041f\u0420\u041e\u041c\u0415\u0416\u0423\u0422\u041e\u0427\u041d\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","HAMMER":"\u041c\u041e\u041b\u041e\u0422\u041e\u041a","HAMMER_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u041c\u041e\u041b\u041e\u0422\u041e\u041a, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422","MAGIC_BOTTLE":"\u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410","MAGIC_BOTTLE_DESCRIPTION":"\u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0423\u042e \u0411\u0423\u0422\u042b\u041b\u041a\u0423, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041d\u0415 \u041f\u0420\u041e\u0419\u0414\u0415\u041d","FAILED_TEXT":"\u0422\u042b \u041d\u0415 \u041d\u0410\u0411\u0420\u0410\u041b \u041d\u0423\u0416\u041d\u041e\u0415 \u0427\u0418\u0421\u041b\u041e \u041e\u0427\u041a\u041e\u0412","CONTINUE":"\u041f\u0420\u041e\u0414\u041e\u041b\u0416\u0418\u0422\u042c","BEST_SCORE":"\u041b\u0423\u0427\u0428\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GLOBAL":"\u0412\u0415\u0421\u042c \u041c\u0418\u0420","JOIN":"\u041f\u0420\u0418\u0421\u041e\u0415\u0414\u0418\u041d\u0418\u0422\u042c\u0421\u042f","REPLAY":"\u0418\u0413\u0420\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","HOME":"\u0414\u041e\u041c\u041e\u0419","TODAY_RECORD":"\u0421\u0415\u0413\u041e\u0414\u041d\u042f\u0428\u041d\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","WAITING":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415","WAITING_FOR_OPPONENT":"\u041e\u0416\u0418\u0414\u0410\u041d\u0418\u0415 \u041e\u041f\u041f\u041e\u041d\u0415\u041d\u0422\u0410","RESTART":"\u041d\u0410\u0427\u0410\u0422\u042c \u0417\u0410\u041d\u041e\u0412\u041e","DRAW":"\u0416\u0415\u0420\u0415\u0411\u042c\u0415\u0412\u041a\u0410","YOU_LOSE":"\u0422\u042b \u041f\u0420\u041e\u0418\u0413\u0420\u0410\u0415\u0428\u042c","YOU_WIN":"\u0422\u042b \u0412\u042b\u0418\u0413\u0420\u0410\u0415\u0428\u042c","VS":"\u041f\u0420\u041e\u0422\u0418\u0412","GUIDE_TEXT_GEM":"\u041d\u0410\u0416\u041c\u0418 \u041d\u0410 \u0414\u0412\u0410 \u0418\u041b\u0418 \u0411\u041e\u041b\u042c\u0428\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410 \u041e\u0414\u041d\u041e\u0413\u041e \u0426\u0412\u0415\u0422\u0410, \u0427\u0422\u041e\u0411\u042b \u0423\u041d\u0418\u0427\u0422\u041e\u0416\u0418\u0422\u042c \u0418\u0425","GUIDE_TEXT_CURRENT_SCORE":"\u042d\u0422\u041e \u0422\u0412\u041e\u0419 \u0422\u0415\u041a\u0423\u0429\u0418\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422","GUIDE_TEXT_TARGET_SCORE":"\u042d\u0422\u041e \u041d\u0415\u041e\u0411\u0425\u041e\u0414\u0418\u041c\u042b\u0419 \u0420\u0415\u0417\u0423\u041b\u042c\u0422\u0410\u0422 \u0414\u041b\u042f \u041a\u0410\u0416\u0414\u041e\u0413\u041e \u0423\u0420\u041e\u0412\u041d\u042f, \u041a\u041e\u0422\u041e\u0420\u042b\u0419 \u0422\u0415\u0411\u0415 \u041d\u0423\u0416\u041d\u041e \u041f\u0420\u041e\u0419\u0422\u0418","GUIDE_TEXT_RAINBOW_GEM":"\u0420\u0410\u0414\u0423\u0416\u041d\u042b\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422 \u041c\u041e\u0416\u0415\u0422 \u0423\u0411\u0420\u0410\u0422\u042c \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b, \u041a\u041e\u0422\u041e\u0420\u042b\u0415 \u0415\u0413\u041e \u041e\u041a\u0420\u0423\u0416\u0410\u042e\u0422","GUIDE_TEXT_HAMMER":"\u042d\u0422\u041e \u041c\u041e\u041b\u041e\u0422\u041e\u041a. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0413\u041e, \u0427\u0422\u041e\u0411\u042b \u0420\u0410\u0417\u0411\u0418\u0422\u042c \u041b\u042e\u0411\u041e\u0419 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422!","GUIDE_TEXT_SHUFFLE":"\u042d\u0422\u041e \u041f\u041b\u0418\u0422\u041a\u0410 \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0418\u0412\u0410\u041d\u0418\u042f. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u041f\u0415\u0420\u0415\u041c\u0415\u0428\u0410\u0422\u042c \u0412\u0421\u0415 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u042b","GUIDE_TEXT_MAGIC_BOTTLE":"\u042d\u0422\u041e \u0412\u041e\u041b\u0428\u0415\u0411\u041d\u0410\u042f \u0411\u0423\u0422\u042b\u041b\u041a\u0410. \u0418\u0421\u041f\u041e\u041b\u042c\u0417\u0423\u0419 \u0415\u0415, \u0427\u0422\u041e\u0411\u042b \u0418\u0417\u041c\u0415\u041d\u0418\u0422\u042c \u0426\u0412\u0415\u0422 \u0421\u0410\u041c\u041e\u0426\u0412\u0415\u0422\u0410","NO_ADS_TO_DISPLAY":"\u041d\u0415\u0422 \u0420\u0415\u041a\u041b\u0410\u041c\u042b \u0414\u041b\u042f \u041e\u0422\u041e\u0411\u0420\u0410\u0416\u0415\u041d\u0418\u042f!","NO_REWARDS":"\u0418\u0417\u0412\u0418\u041d\u0418, \u041d\u0410\u0413\u0420\u0410\u0414 \u041d\u0415\u0422!","CANCELLED_AD":"\u0422\u042b \u041e\u0422\u041a\u0410\u0417\u0410\u041b\u0421\u042f \u041e\u0422 \u041f\u0420\u041e\u0421\u041c\u041e\u0422\u0420\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b!","LOADING":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","LOADING_AD":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410 \u0420\u0415\u041a\u041b\u0410\u041c\u042b...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"\u0422\u042b \u0422\u041e\u041b\u042c\u041a\u041e \u0427\u0422\u041e \u041f\u041e\u041b\u0423\u0427\u0418\u041b\\n{X} \u0410\u041b\u041c\u0410\u0417\u041e\u0412","CLOSE":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","LEADERBOARD_EMPTY":"\u043f\u0443\u0441\u0442\u043e\u0439","MESSAGE_INVITE":"{Playername} \u0431\u0440\u043e\u0441\u0430\u0435\u0442 \u0432\u044b\u0437\u043e\u0432 \u0432\u0430\u043c","MESSAGE_FINISH_MATCH":"{Playername} \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0445 \u0441\u0435\u0439\u0447\u0430\u0441.","MESSAGE_BEST_SCORE":"{playername} \u043f\u043e\u0431\u0435\u0434\u0438\u043b \u0432\u0430\u0448 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u0431\u0430\u043b\u043b. \u0418\u0445 \u043e\u0446\u0435\u043d\u043a\u0430: {\u0438\u0433\u0440\u043e\u043a\u0438}","MESSAGE_FINISH_TURN":"{Playername} \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043e\u0446\u0435\u043d\u043a\u0438. \u0422\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e! \u0422\u044b \u043c\u043e\u0436\u0435\u0448\u044c?","SHARE_LEADERBOARDS":"\u0425\u0430, \u044f \u043b\u0443\u0447\u0448\u0438\u0439!","SHARE_GAME_RESULTS":"Pheww, \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u043c\u0430\u0442\u0447!","SHARE_BEST_SCORE":"\u0411\u043e\u043b\u044c\u0448\u043e\u0439! \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u043b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442!","TARGET_SCORE":"\u0426\u0435\u043b\u0435\u0432\u043e\u0439 \u0441\u0447\u0435\u0442","NO_SPACE_LEFT":"\u041c\u0415\u0421\u0422\u0410 \u041d\u0415 \u041e\u0421\u0422\u0410\u041b\u041e\u0421\u042c!","FULL":"\u041f\u043e\u043b\u043d\u044b\u0439","LOADING_LEVEL":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410","SCORE_REACHED":"\u0421\u0427\u0415\u0422 \u0414\u041e\u0421\u0422\u0418\u0413\u041d\u0423\u0422!","WELL_DONE":"\u041e\u0422\u041b\u0418\u0427\u041d\u041e!","Level":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","Completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d","COMPLETED":"\u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041d","Next_life":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0436\u0438\u0437\u043d\u044c","MESS_TUTORIAL_1":"\u041f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0431\u043b\u043e\u043a \u0432 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e \\n\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f!","MESS_TUTORIAL_2":"\u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \\n\u043a\u043e\u0433\u0434\u0430 \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0443\u044e \u043b\u0438\u043d\u0438\u044e.","MESS_TUTORIAL_3":"\u0412\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0432\u0430\u0434\u0440\u0430\u0442 3x3.\\n\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435!","MESS_TUTORIAL_4":"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043b\u0438\u043d\u0438\u0438 \u0438 \u043a\u0432\u0430\u0434\u0440\u0430\u0442\u044b \\n\u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u043c\u0431\u043e-\u043e\u0447\u043a\u0438!","COMBO":"\u041a\u041e\u041c\u0411\u041e","STREAK":"\u0421\u0422\u0420\u0418\u041a","MESS_SKIP_TUTORIAL":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435\\n\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0443\u0440\u043e\u043a?","MESS_TAKE_A_BREAK_ADS":"\u0421\u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0440\u044b\u0432\\n\u041f\u043e\u043a\u0430\u0437 \u0440\u0435\u043a\u043b\u0430\u043c\u044b \u0432 %s...","UPDATING_NEW_LEVELS":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","RESTARTING_MAP":"\u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410...","CANCEL":"\u041e\u0442\u043c\u0435\u043d\u0430","OK":"\u0414\u0430","CONFIRM_START_OVER":"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0414\u0418\u0422\u042c \u041d\u0410\u0427\u0410\u0422\u042c \u0421\u041d\u0410\u0427\u0410\u041b\u0410","MESS_START_OVER":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u043d\u0430\u0447\u043d\u0435\u0442\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430?","mmddyy":"\u0414\u0430\u0442\u0430","Anonymous":"\u0410\u043d\u043e\u043d\u0438\u043c"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),pt:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"JOGAR","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"N\xedvel","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"SEM AN\xdaNCIOS A EXIBIR!","NO_REWARDS":"DESCULPA, N\xc3O H\xc1 RECOMPENSAS!","CANCELLED_AD":"CANCELASTE O AN\xdaNCIO!","LOADING":"A CARREGAR...","LOADING_AD":"A CARREGAR AN\xdaNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"A tabela de classifica\xe7\xe3o est\xe1 vazia!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xd3ptimo! Tenho uma das melhores pontua\xe7\xf5es!","TARGET_SCORE":"Pontua\xe7\xe3o alvo","NO_SPACE_LEFT":"N\xc3O TEM MAIS ESPA\xc7O!","FULL":"Completo","LOADING_LEVEL":"A carregar n\xedvel","SCORE_REACHED":"PONTUA\xc7\xc3O ATINGIDA!","WELL_DONE":"BEM FEITO!","Level":"N\xedvel","Completed":"Conclu\xeddo","COMPLETED":"CONCLU\xcdDO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"Coloca o bloco na linha horizontal\\ne olha o que acontece!","MESS_TUTORIAL_2":"Agora olha para o que\\nacontece quando fazes uma linha vertical.","MESS_TUTORIAL_3":"Tamb\xe9m se pode fazer um quadrado 3x3.\\nExperimenta!","MESS_TUTORIAL_4":"Organiza linhas e quadrados para\\nobter pontos de combina\xe7\xe3o!","COMBO":"Combina\xe7\xe3o","STREAK":"MAR\xc9 DE SORTE","MESS_SKIP_TUTORIAL":"Tens a certeza de que\\nqueres saltar o tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZA\xc7\xc3O DE NOVOS N\xcdVEIS...","RESTARTING_MAP":"A REINICIAR O MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"TENS A CERTEZA DE RECOME\xc7AR?","MESS_START_OVER":"Tens a certeza de recome\xe7ar?","mmddyy":"Data","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),fr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEAU","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"AUCUNE PUBLICIT\xc9 \xc0 AFFICHER!","NO_REWARDS":"D\xc9SOL\xc9, AUCUNE R\xc9COMPENSE!","CANCELLED_AD":"VOUS AVEZ ANNUL\xc9 LA PUBLICIT\xc9!","LOADING":"CHARGEMENT EN COURS...","LOADING_AD":"CHARGEMENT DES PUBLICIT\xc9S...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Le classement est vide!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"G\xe9nial\xa0! J\u2019ai un meilleur score!","TARGET_SCORE":"Score cible","NO_SPACE_LEFT":"IL NE RESTE PLUS D\'ESPACE!","FULL":"Plein","LOADING_LEVEL":"Chargement du niveau...","SCORE_REACHED":"SCORE ATTEINT!","WELL_DONE":"BIEN JOU\xc9!","Level":"Niveau","Completed":"Termin\xe9","COMPLETED":"TERMIN\xc9","Next_life":"Vie suivante","MESS_TUTORIAL_1":"Placez le bloc dans la ligne horizontale et\\nconstatez le r\xe9sultat!","MESS_TUTORIAL_2":"\xc0 pr\xe9sent, d\xe9couvrez ce qui se passe\\nquand vous faites une ligne verticale.","MESS_TUTORIAL_3":"Vous pouvez aussi faire un carr\xe9 de 3x3.\\nEssayez pour voir!","MESS_TUTORIAL_4":"Assemblez des lignes et des carr\xe9s\\npour obtenir des points de combinaison!","COMBO":"COMBO","STREAK":"S\xc9RIE","MESS_SKIP_TUTORIAL":"Voulez-vous vraiment\\nignorer le tutoriel?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MISE \xc0 JOUR DE NOUVEAUX NIVEAUX...","RESTARTING_MAP":"RED\xc9MARRAGE DE LA CARTE...","CANCEL":"Annuler","OK":"OK","CONFIRM_START_OVER":"CONFIRMER POUR RECOMMENCER","MESS_START_OVER":"Voulez-vous vraiment\\nrecommencer?","mmddyy":"Date","Anonymous":"Anonyme"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),hi:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0932\u0947\u0935\u0932","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0926\u093f\u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u094b\u0908 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","NO_REWARDS":"\u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u0915\u094b\u0908 \u0930\u093f\u0935\u0949\u0930\u094d\u0921 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902!","CANCELLED_AD":"\u0906\u092a\u0928\u0947 \u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0915\u0948\u0902\u0938\u0932 \u0915\u0930 \u0926\u093f\u092f\u093e \u0939\u0948!","LOADING":"\u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948\u0902...","LOADING_AD":"\u0935\u093f\u091c\u094d\u091e\u093e\u092a\u0928 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u0932\u0940\u0921\u0930\u092c\u094b\u0930\u094d\u0921 \u0916\u093e\u0932\u0940 \u0939\u0948!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u092c\u095d\u093f\u092f\u093e! \u092e\u0948\u0902\u0928\u0947 \u0936\u093e\u0928\u0926\u093e\u0930 \u0938\u094d\u0915\u094b\u0930 \u092c\u0928\u093e\u092f\u093e \u0939\u0948!","TARGET_SCORE":"\u091f\u093e\u0930\u0917\u0947\u091f \u0938\u094d\u0915\u094b\u0930","NO_SPACE_LEFT":"\u091c\u0917\u0939 \u0928\u0939\u0940\u0902 \u092c\u091a\u0940!","FULL":"\u092a\u0942\u0930\u093e","LOADING_LEVEL":"\u0932\u0947\u0935\u0932 \u0932\u094b\u0921 \u0939\u094b \u0930\u0939\u093e \u0939\u0948...","SCORE_REACHED":"\u0938\u094d\u0915\u094b\u0930 \u092a\u0939\u0941\u0902\u091a \u0917\u092f\u093e!","WELL_DONE":"\u092c\u0939\u0941\u0924 \u092c\u095d\u093f\u092f\u093e!","Level":"\u0932\u0947\u0935\u0932","Completed":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","COMPLETED":"\u092a\u0942\u0930\u093e \u0939\u0941\u0906","Next_life":"\u0905\u0917\u0932\u093e \u091c\u0940\u0935\u0928","MESS_TUTORIAL_1":"\u092c\u094d\u0932\u0949\u0915 \u0915\u094b \u0939\u0949\u0930\u093f\u091c\u0949\u0928\u094d\u091f\u0932 \u0932\u093e\u0907\u0928 \u092e\u0947\u0902 \u0930\u0916\u0947\u0902\\n\u0914\u0930 \u0926\u0947\u0916\u0947\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e \u0939\u0948!","MESS_TUTORIAL_2":"\u0905\u092c \u0926\u0947\u0916\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e\\n\u0939\u0948 \u091c\u092c \u0906\u092a \u0935\u0930\u094d\u091f\u093f\u0915\u0932 \u0932\u093e\u0907\u0928 \u092c\u0928\u093e\u0924\u0947 \u0939\u0948\u0902.","MESS_TUTORIAL_3":"\u0938\u093e\u0925 \u0939\u0940 \u0906\u092a 3x3 \u0915\u0947 \u0935\u0930\u094d\u0917 \u092d\u0940 \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902.\\n\u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902!","MESS_TUTORIAL_4":"\u0915\u0949\u092e\u094d\u092c\u094b \u092a\u0949\u0907\u0902\u091f\u094d\u0938 \u092a\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0932\u093e\u0907\u0928\\n\u0914\u0930 \u0935\u0930\u094d\u0917 \u0915\u094b \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0930\u0916\u0947\u0902!","COMBO":"\u0915\u0949\u092e\u094d\u092c\u094b","STREAK":"\u0938\u094d\u091f\u094d\u0930\u0940\u0915","MESS_SKIP_TUTORIAL":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u0907\u0938 \u091f\u094d\u092f\u0942\u091f\u094b\u0930\u093f\u092f\u0932\\n\u0915\u094b \u091b\u094b\u095c\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u0928\u090f \u0932\u0947\u0935\u0932 \u0905\u092a\u0921\u0947\u091f \u0939\u094b \u0930\u0939\u0947 \u0939\u0948\u0902...","RESTARTING_MAP":"\u092e\u0948\u092a \u0915\u094b \u0930\u0940\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u093f\u092f\u093e \u091c\u093e \u0930\u0939\u093e \u0939\u0948...","CANCEL":"\u0915\u0948\u0902\u0938\u0932 \u0915\u0930\u0947\u0902","OK":"\u0920\u0940\u0915 \u0939\u0948","CONFIRM_START_OVER":"\u092b\u093f\u0930 \u0938\u0947 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0940 \u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902","MESS_START_OVER":"\u0915\u094d\u092f\u093e \u0906\u092a \u0935\u093e\u0915\u0908 \u092b\u093f\u0930 \u0938\u0947\\n\u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902?","mmddyy":"\u0924\u093e\u0930\u0940\u0916","Anonymous":"\u0905\u0928\u093e\u092e"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),it:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"LIVELLO","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"NESSUN ANNUNCIO DA VISUALIZZARE!","NO_REWARDS":"SPIACENTE, NESSUNA RICOMPENSA!","CANCELLED_AD":"HAI CANCELLATO L\'ANNUNCIO!","LOADING":"CARICAMENTO...","LOADING_AD":"CARICAMENTO ANNUNCI...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"La classifica \xe8 vuota!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Ottimo! Ho un punteggio migliore!","TARGET_SCORE":"Punteggio Obiettivo","NO_SPACE_LEFT":"NESSUNO SPAZIO RIMASTO!","FULL":"Pieno","LOADING_LEVEL":"Caricamento livello...","SCORE_REACHED":"PUNTEGGIO RAGGIUNTO!","WELL_DONE":"BEN FATTO!","Level":"Livello","Completed":"Completato","COMPLETED":"COMPLETATO","Next_life":"Prossima vita","MESS_TUTORIAL_1":"Posiziona il blocco nella linea orizzontale\\ne guarda cosa succede!","MESS_TUTORIAL_2":"Ora guarda cosa succede quando\\ncrei una linea verticale.","MESS_TUTORIAL_3":"Puoi anche creare un quadrato 3x3.\\nProva!","MESS_TUTORIAL_4":"Disponi le linee e i quadrati\\nper ottenere punti combo!","COMBO":"COMBO","STREAK":"SERIE","MESS_SKIP_TUTORIAL":"Saltare il tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"AGGIORNAMENTO NUOVI LIVELLI...","RESTARTING_MAP":"Riavvio della mappa...","CANCEL":"Annulla","OK":"OK","CONFIRM_START_OVER":"CONFERMA DI VOLER RICOMINCIARE","MESS_START_OVER":"Sei sicuro di ricominciare?","mmddyy":"Data","Anonymous":"Anonimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),id:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"TINGKAT","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"TINGKAT FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"TIDAK ADA IKLAN UNTUK DITAMPILKAN!","NO_REWARDS":"MAAF, TIDAK ADA HADIAH!","CANCELLED_AD":"KAMU TELAH MEMBATALKAN IKLANNYA!","LOADING":"MEMUAT...","LOADING_AD":"MEMUAT IKLAN...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Papan peringkat kosong!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Hebat! Aku dapat skor terbaik!","TARGET_SCORE":"Skor Target","NO_SPACE_LEFT":"TIDAK ADA RUANG TERSISA!","FULL":"Penuh","LOADING_LEVEL":"Memuat Tingkat...","SCORE_REACHED":"SKOR TERCAPAI!","WELL_DONE":"KERJA BAGUS!","Level":"Tingkat","Completed":"Selesai","COMPLETED":"SELESAI","Next_life":"Kehidupan selanjutnya","MESS_TUTORIAL_1":"Tempatkan blok dalam baris horizontal\\ndan lihat apa yang terjadi!","MESS_TUTORIAL_2":"Sekarang lihat apa yang\\nterjadi saat kamu membuat baris vertikal.","MESS_TUTORIAL_3":"Kamu juga bisa membuat kotak 3x3.\\nCobalah!","MESS_TUTORIAL_4":"Atur baris dan kotak untuk\\nmendapatkan poin kombo!","COMBO":"KOMBO","STREAK":"RENTETAN","MESS_SKIP_TUTORIAL":"Yakin ingin melewati tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"MEMPERBARUI TINGKAT BARU...","RESTARTING_MAP":"MEMULAI ULANG PETA...","CANCEL":"Batalkan","OK":"OK","CONFIRM_START_OVER":"KONFIRMASI MULAI ULANG","MESS_START_OVER":"Yakin ingin mulai ulang?","mmddyy":"Tanggal","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),de:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"EBENE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"EBENE FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"KEINE ANZEIGEN VORHANDEN!","NO_REWARDS":"LEIDER ERH\xc4LTST DU KEINE BELOHNUNGEN!","CANCELLED_AD":"DU HAST DIE ANZEIGE ABGEBROCHEN!","LOADING":"WIRD GELADEN\u2026","LOADING_AD":"ANZEIGEN WERDEN GELADEN\u2026","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Bestenliste ist leer!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Toll! Ich habe eine Bestpunktzahl erreicht!","TARGET_SCORE":"Zielpunktzahl","NO_SPACE_LEFT":"KEIN PLATZ MEHR \xdcBRIG!","FULL":"Voll","LOADING_LEVEL":"Ebene wird geladen\u2026","SCORE_REACHED":"PUNKTZAHL ERREICHT!","WELL_DONE":"GUT GEMACHT!","Level":"Ebene","Completed":"Abgeschlossen","COMPLETED":"ABGESCHLOSSEN","Next_life":"N\xe4chstes Leben","MESS_TUTORIAL_1":"F\xfcge den Block in die horizontale\\nLinie ein und gib gut acht!","MESS_TUTORIAL_2":"Jetzt bilden wir eine vertikale Linie.\\nPass noch einmal genau auf.","MESS_TUTORIAL_3":"Du kannst auch ein 3x3-Quadrat bilden.\\nVersuch es mal!","MESS_TUTORIAL_4":"Bilde Linien und Quadrate,\\num Kombo-Punkte zu erhalten!","COMBO":"COMBO","STREAK":"STR\xc4HNE","MESS_SKIP_TUTORIAL":"M\xf6chtest du das Tutorial\\nwirklich \xfcberspringen?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"NEUE EBENE WERDEN AKTUALISIERT\u2026","RESTARTING_MAP":"KARTE WIRD NEU GESTARTET\u2026","CANCEL":"Abbrechen","OK":"OK","CONFIRM_START_OVER":"NEUSTART BEST\xc4TIGEN","MESS_START_OVER":"M\xf6chtest du wirklich von vorn beginnen?","mmddyy":"Datum","Anonymous":"Anonym"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ja:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u30ec\u30d9\u30eb","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u8868\u793a\u3067\u304d\u308b\u5e83\u544a\u306f\u3042\u308a\u307e\u305b\u3093!","NO_REWARDS":"\u5e83\u544a\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u306e\u3067!","CANCELLED_AD":"\u6b8b\u5ff5\u3067\u3059\u304c\u30ea\u30ef\u30fc\u30c9\u306a\u3057\u3067\u3059\uff01","LOADING":"\u8aad\u307f\u8fbc\u307f\u4e2d...","LOADING_AD":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u30ea\u30fc\u30c0\u30fc\u30dc\u30fc\u30c9\u304c\u7a7a\u3063\u307d\uff01","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u3059\u3054\u3044\uff01\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2\u3092\u7372\u5f97\u3057\u305f\uff01","TARGET_SCORE":"\u76ee\u6a19\u30b9\u30b3\u30a2","NO_SPACE_LEFT":"\u30b9\u30da\u30fc\u30b9\u304c\u306a\u3044!","FULL":"\u30d5\u30eb","LOADING_LEVEL":"\u30ec\u30d9\u30eb\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","SCORE_REACHED":"\u5230\u9054\u3057\u305f\u30b9\u30b3\u30a2!","WELL_DONE":"\u304a\u898b\u4e8b!","Level":"\u30ec\u30d9\u30eb","Completed":"\u5b8c\u4e86","COMPLETED":"\u5b8c\u4e86","Next_life":"\u6b21\u306e\u4eba\u751f","MESS_TUTORIAL_1":"\u6a2a\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u30d6\u30ed\\n\u30c3\u30af\u3092\u914d\u7f6e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_2":"\u6b21\u306f\u7e26\u306e\u30e9\u30a4\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u914d\u7f6e\\n\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002","MESS_TUTORIAL_3":"\u307e\u305f\u30013x3 \u306e\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\\n\u3084\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01","MESS_TUTORIAL_4":"\u30e9\u30a4\u30f3\u3084\u30b9\u30af\u30a8\u30a2\u3092\u4f5c\u3063\u3066\u30b3\u30f3\u30dc\\n\u30dd\u30a4\u30f3\u30c8\u3092\u7372\u5f97\u3057\u307e\u3057\u3087\u3046\uff01","COMBO":"\u30b3\u30f3\u30dc","STREAK":"\u9023\u7d9a","MESS_SKIP_TUTORIAL":"\u672c\u5f53\u306b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u30b9\u30ad\u30c3\\n\u30d7\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u65b0\u3057\u3044\u30ec\u30d9\u30eb\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4e2d...","RESTARTING_MAP":"\u30de\u30c3\u30d7\u3092\u3084\u308a\u306a\u304a\u3057\u3066\u3044\u307e\u3059...","CANCEL":"\u30ad\u30e3\u30f3\u30bb\u30eb","OK":"OK","CONFIRM_START_OVER":"\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3092\u78ba\u5b9a","MESS_START_OVER":"\u672c\u5f53\u306b\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f","mmddyy":"\u65e5\u4ed8","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),es:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"NIVEL","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\xa1NO HAY ANUNCIOS PARA MOSTRAR!","NO_REWARDS":"LO SENTIMOS, NO HAY RECOMPENSAS!","CANCELLED_AD":"HAS CANCELADO EL ANUNCIO!","LOADING":"CARGANDO...","LOADING_AD":"CARGANDO ANUNCIOS...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\xa1La tabla de clasificaci\xf3n est\xe1 vac\xeda!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\xa1Muy bien! Tengo la mejor puntuaci\xf3n!","TARGET_SCORE":"Puntuaci\xf3n Objetivo","NO_SPACE_LEFT":"\xa1NO QUEDA ESPACIO!","FULL":"Completo","LOADING_LEVEL":"Cargando nivel...","SCORE_REACHED":"\xa1PUNTUACI\xd3N ALCANZADA!","WELL_DONE":"BIEN HECHO!","Level":"Nivel","Completed":"Completado","COMPLETED":"COMPLETADO","Next_life":"Pr\xf3xima vida","MESS_TUTORIAL_1":"\xa1Coloca el bloque en la l\xednea\\nhorizontal y mira lo que pasa!","MESS_TUTORIAL_2":"Ahora mira lo que sucede cuando haces\\nuna l\xednea vertical.","MESS_TUTORIAL_3":"\xa1Tambi\xe9n puedes hacer un cuadrado de 3x3.\\nPru\xe9balo!","MESS_TUTORIAL_4":"\xa1Organiza l\xedneas y cuadrados para\\nobtener puntos de combo!","COMBO":"COMBO","STREAK":"RACHA","MESS_SKIP_TUTORIAL":"\xbfEst\xe1s seguro de que quieres\\nsaltarte el tutorial?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"ACTUALIZANDO NUEVOS NIVELES...","RESTARTING_MAP":"REINICIANDO EL MAPA...","CANCEL":"Cancelar","OK":"OK","CONFIRM_START_OVER":"CONFIRMAR EMPEZAR DE NUEVO","MESS_START_OVER":"\xbfSeguro que quieres\\nempezar de nuevo?","mmddyy":"Fecha","Anonymous":"An\xf3nimo"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),zh:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u5173\u5361","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u5e7f\u544a!","NO_REWARDS":"\u62b1\u6b49\uff0c\u6ca1\u6709\u5956\u52b1!","CANCELLED_AD":"\u60a8\u5df2\u53d6\u6d88\u4e86\u5e7f\u544a!","LOADING":"\u6b63\u5728\u52a0\u8f7d...","LOADING_AD":"\u6b63\u5728\u52a0\u8f7d\u5e7f\u544a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"\u6392\u884c\u699c\u8fd8\u6ca1\u6709\u4eba!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u592a\u68d2\u4e86\uff01\u6211\u83b7\u5f97\u4e86\u6700\u4f73\u5f97\u5206!","TARGET_SCORE":"\u76ee\u6807\u5206\u6570","NO_SPACE_LEFT":"\u6ca1\u6709\u5269\u4f59\u7684\u7a7a\u95f4!","FULL":"\u5df2\u6ee1","LOADING_LEVEL":"\u6b63\u5728\u52a0\u8f7d\u5173\u5361...","SCORE_REACHED":"\u8fbe\u5230\u7684\u5206\u6570!","WELL_DONE":"\u592a\u68d2\u4e86!","Level":"\u5173\u5361","Completed":"\u5df2\u5b8c\u6210","COMPLETED":"\u5df2\u5b8c\u6210","Next_life":"\u4e0b\u4e00\u4e2a\u751f\u547d","MESS_TUTORIAL_1":"\u5c06\u6728\u5757\u653e\u5728\u6c34\u5e73\u7ebf\u4e0a\\n\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48!","MESS_TUTORIAL_2":"\u73b0\u5728\u60a8\u77e5\u9053\u5f53\u60a8\u8fde\u6210\u4e00\u6761\\n\u5782\u76f4\u7ebf\u65f6\u4f1a\u53d1\u751f\u7684\u60c5\u51b5.","MESS_TUTORIAL_3":"\u60a8\u8fd8\u53ef\u4ee5\u5792\u6210\u4e00\u4e2a 3x3 \u7684\u65b9\u5f62.\\n\u8bd5\u8bd5\u5427!","MESS_TUTORIAL_4":"\u540c\u65f6\u8fde\u6210\u76f4\u7ebf\u548c\u65b9\u5f62,\\n\u83b7\u5f97\u8fde\u51fb\u5206\u6570!","COMBO":"COMBO","STREAK":"\u8fde\u80dc","MESS_SKIP_TUTORIAL":"\u786e\u5b9a\u8981\u8df3\u8fc7\u6559\u7a0b\u5417\uff1f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"\u6b63\u5728\u66f4\u65b0\u65b0\u5173\u5361...","RESTARTING_MAP":"\u6b63\u5728\u91cd\u542f\u5730\u56fe...","CANCEL":"\u53d6\u6d88","OK":"\u786e\u5b9a","CONFIRM_START_OVER":"\u786e\u5b9a\u91cd\u65b0\u5f00\u59cb","MESS_START_OVER":"\u786e\u5b9a\u8981\u91cd\u65b0\u5f00\u59cb\u5417\uff1f","mmddyy":"\u65e5\u671f","Anonymous":"\u533f\u540d"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),ar:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"\u0645\u0633\u062a\u0648\u0649","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0625\u0639\u0644\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627!","NO_REWARDS":"\u0646\u0623\u0633\u0641\u060c \u0644\u0627 \u064a\u064f\u0648\u062c\u062f \u0645\u0643\u0627\u0641\u0622\u062a!","CANCELLED_AD":"\u0644\u0642\u062f \u0642\u0645\u062a \u0628\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0625\u0639\u0644\u0627\u0646!","LOADING":"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...","LOADING_AD":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646\u0627\u062a...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"!\u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u062a\u0633\u0627\u0628\u0642\u064a\u0646 \u0641\u0627\u0631\u063a\u0629","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"\u0631\u0627\u0626\u0639! \u0644\u0642\u062f \u062d\u0642\u0642\u062a \u0623\u0641\u0636\u0644 \u0631\u0642\u0645 \u0642\u064a\u0627\u0633\u064a","TARGET_SCORE":"\u0647\u062f\u0641 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u064a\u0627\u0633\u064a","NO_SPACE_LEFT":"!\u0644\u0645 \u064a\u062a\u0628\u0642 \u0645\u0633\u0627\u062d\u0629","FULL":"\u0645\u0643\u062a\u0645\u0644","LOADING_LEVEL":"\u062c\u0627\u0631 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u0648\u0649...","SCORE_REACHED":"!\u0648\u0635\u0644\u062a \u0627\u0644\u0646\u062a\u064a\u062c\u0629","WELL_DONE":"!\u0623\u062d\u0633\u0646\u062a","Level":"\u0645\u0633\u062a\u0648\u0649","Completed":"\u0627\u0643\u062a\u0645\u0644","COMPLETED":"\u0627\u0643\u062a\u0645\u0644","Next_life":"\u0627\u0644\u062d\u064a\u0627\u0629 \u0627\u0644\u0642\u0627\u062f\u0645\u0629","MESS_TUTORIAL_1":"\u0636\u0639 \u0627\u0644\u0642\u0641\u0644 \u0641\u064a \u062e\u0637 \u0623\u0641\u0642\u064a \u0648\u0631\u0627\u0642\u0628 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b!","MESS_TUTORIAL_2":"\u0631\u0627\u0642\u0628 \u0627\u0644\u0622\u0646 \u0645\u0627 \u0633\u064a\u062d\u062f\u062b \u0639\u0646\u062f\u0645\u0627 \u062a\u0635\u0646\u0639 \u062e\u0637\u064b\u0627 \u0631\u0623\u0633\u064a\u064b\u0627.","MESS_TUTORIAL_3":"\u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u064b\u0627 \u0625\u0646\u0634\u0627\u0621 \u0645\u0631\u0628\u0639 3x3. \u062d\u0627\u0648\u0644 \u0641\u0639\u0644 \u0630\u0644\u0643!","MESS_TUTORIAL_4":"!\u0631\u062a\u0628 \u0627\u0644\u062e\u0637\u0648\u0637 \u0648\u0627\u0644\u0645\u0631\u0628\u0639\u0627\u062a \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0645\u062c\u0645\u0648\u0639\u0629 \u0646\u0642\u0627\u0637","COMBO":"\u0643\u0648\u0645\u0628\u0648","STREAK":"\u0627\u0636\u0631\u0628","MESS_SKIP_TUTORIAL":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u062a\u062e\u0637\u064a \u0634\u0631\u062d \u0627\u0644\u0644\u0639\u0628\u0629\u061f","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"...\u062a\u062d\u062f\u064a\u062b \u0645\u0633\u062a\u0648\u064a\u0627\u062a \u062c\u062f\u064a\u062f\u0629","RESTARTING_MAP":"...\u062c\u0627\u0631 \u0625\u0639\u0627\u062f\u0629 \u0628\u062f\u0621 \u0627\u0644\u062e\u0631\u064a\u0637\u0629","CANCEL":"\u0625\u0644\u063a\u0627\u0621","OK":"\u0645\u0648\u0627\u0641\u0642","CONFIRM_START_OVER":"\u0642\u0645 \u0628\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621","MESS_START_OVER":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0628\u0627\u0644\u062a\u0623\u0643\u064a\u062f \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621\u061f","mmddyy":"\u062a\u0627\u0631\u064a\u062e","Anonymous":"\u0645\u062c\u0647\u0648\u0644"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}'),tr:JSON.parse('{"Text":{"POP JEWELS":"POP JEWELS","DAILY_REWARDS":"DAILY REWARDS","CLAIM":"CLAIM","CLAIM_X2":"CLAIM X2","DAY_{X}":"DAY {X}","PLAY_NOW":"PLAY NOW","PLAY_WITH_FRIENDS":"PLAY WITH FRIENDS","RANK":"RANK","DAILY":"DAILY","GIFT":"GIFT","SETTINGS":"SETTINGS","LEADERBOARDS":"LEADERBOARDS","PLAY":"PLAY","WITH_FRIENDS":"WITH FRIENDS","FRIENDS":"FRIENDS","WORLD":"WORLD","DAILY_MISSION":"DAILY MISSIONS","PASS_10_LEVELS":"PASS 10 LEVELS","COLLECT_300_DIAMONDS":"COLLECT 300 DIAMONDS","INVITE_2_FRIENDS":"INVITE 2 FRIENDS","REACH_TOTAL_SCORES":"REACH TOTAL SCORES","WATCH_A_VIDEO_TO_GET_{X}_DIAMONDS!":"WATCH A VIDEO TO GET\\\\n{X} DIAMONDS!","GET_NOW":"GET NOW!","TARGET":"TARGET","MISSION":"MISSION","YOUR_SCORE":"YOUR SCORE","LEVEL":"SEVIYE","REQUESTING":"REQUESTING...","LOADING_INTERSTITIAL_AD":"LOADING INTERSTITIAL AD...","HAMMER":"HAMMER","HAMMER_DESCRIPTION":"USE HAMMER TO SMASH ANY GEM","MAGIC_BOTTLE":"MAGIC BOTTLE","MAGIC_BOTTLE_DESCRIPTION":"USE MAGIC BOTTLE TO CHANGE A GEM COLOR","LEVEL_FAILED":"LEVEL FAILED","FAILED_TEXT":"YOU DID NOT REACH THE TARGET SCORE","CONTINUE":"CONTINUE","BEST_SCORE":"BEST SCORE","GLOBAL":"GLOBAL","JOIN":"JOIN","REPLAY":"REPLAY","HOME":"HOME","TODAY_RECORD":"TODAY RECORD","SHARE":"SHARE","WAITING":"WAITING","WAITING_FOR_OPPONENT":"WAITING FOR OPPONENT","RESTART":"RESTART","DRAW":"DRAW","YOU_LOSE":"YOU LOSE","YOU_WIN":"YOU WIN","VS":"VS","GUIDE_TEXT_GEM":"TAP ON TWO OR MORE GEMS OF THE SAME COLOR TO DESTROY THEM","GUIDE_TEXT_CURRENT_SCORE":"THIS IS YOUR CURRENT SCORE","GUIDE_TEXT_TARGET_SCORE":"THIS IS THE TARGET SCORE FOR EACH LEVEL YOU NEED TO PASS","GUIDE_TEXT_RAINBOW_GEM":"RAINBOW GEM CAN CLEAR THE GEMS SURROUNDING IT","GUIDE_TEXT_HAMMER":"THIS IS A HAMMER, USE IT TO SMASH ANY GEM!","GUIDE_TEXT_SHUFFLE":"THIS IS A SHUFFLE TILE, USE IT TO SHUFFLE ALL GEMS","GUIDE_TEXT_MAGIC_BOTTLE":"THIS IS A MAGIC BOTTLE, USE IT TO CHANGE A GEM COLOUR","NO_ADS_TO_DISPLAY":"G\xd6R\xdcNT\xdcLENECEK REKLAM YOK!","NO_REWARDS":"\xdcZG\xdcN\xdcM, \xd6D\xdcL YOK!","CANCELLED_AD":"REKLAMI IPTAL ETTINIZ!","LOADING":"Y\xdcKLEN\u0130YOR...","LOADING_AD":"REKLAM Y\xdcKLEN\u0130YOR...","YOU_HAVE_JUST_RECEIVED_{X}_DIAMONDS":"YOU HAVE JUST RECEIVED\\\\n{X} DIAMONDS","CLOSE":"CLOSE","LEADERBOARD_EMPTY":"Skorbord bo\u015f!","MESSAGE_INVITE":"{playerName} challenges you","MESSAGE_FINISH_MATCH":"{playerName} just finished. Check them now.","MESSAGE_BEST_SCORE":"{playerName} beat your high score. Their score: {playerScore}","MESSAGE_FINISH_TURN":"{playerName} got {score} scores. So easy! Can you?","SHARE_LEADERBOARDS":"A ha, I\'m the best!","SHARE_GAME_RESULTS":"Pheww, a great match!","SHARE_BEST_SCORE":"Harika! En iyi puan\u0131 ald\u0131m!","TARGET_SCORE":"Hedef Skoru","NO_SPACE_LEFT":"BO\u015e YER KALMADI!","FULL":"Tam","LOADING_LEVEL":"Seviye y\xfckleniyor...","SCORE_REACHED":"PUAN ULA\u015eILDI!","WELL_DONE":"AFER\u0130N!","Level":"Seviye","Completed":"Tamamland\u0131","COMPLETED":"TAMAMLANDI","Next_life":"Sonraki hayat","MESS_TUTORIAL_1":"Blo\u011fu yatay \xe7izgiye yerle\u015ftir\\nve ne oldu\u011funu g\xf6r!","MESS_TUTORIAL_2":"\u015eimdi dikey bir \xe7izgi olu\u015fturdu\u011fundan\\ne olaca\u011f\u0131n\u0131 g\xf6r.","MESS_TUTORIAL_3":"Ayr\u0131ca 3x3 kare de yapabilirsin.\\nBir dene!","MESS_TUTORIAL_4":"Kombo puanlar almak i\xe7in \xe7izgileri\\nve kareleri d\xfczenle!","COMBO":"KOMBO","STREAK":"SER\u0130","MESS_SKIP_TUTORIAL":"E\u011fitimi atlamak istedi\u011fine\\nemin misin?","MESS_TAKE_A_BREAK_ADS":"Take a break\\nAd display in %s...","UPDATING_NEW_LEVELS":"YEN\u0130 SEV\u0130YELER G\xdcNCELLEN\u0130YOR...","RESTARTING_MAP":"HARITA YENIDEN BA\u015eLATILIYOR...","CANCEL":"\u0130PTAL ET","OK":"TAMAM","CONFIRM_START_OVER":"BA\u015eTAN BA\u015eLAMAYI ONAYLA","MESS_START_OVER":"Ba\u015ftan ba\u015flamak istedi\u011fine\\nemin misin?","mmddyy":"Tarih","Anonymous":"Anonim"},"Texture":{"NO_THANKS":"texts/no-thank","COOL":"texts/cool","CONGRATULATIONS":"texts/congratulation","EXCELLENT":"texts/excellent","GOOD":"texts/good","GREAT":"texts/great","LOGO":"logo","CONTINUE":"texts/continue"}}')},mw=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,s.Z)({data:fw,locale:"en",upperCaseText:!1},t))},t}(gw),vw=mw,Ew=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,console.log("visible"),this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,console.log("hidden"),this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Sw=Ew,Aw=n(630),Tw=0,yw=0,Iw=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;yw=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(yw)),yw+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!yw||yw<30)&&(yw=60),Tw=yw;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(yw)),yw+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-yw,n=Math.round(e*t+yw);n>Tw&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),Cw=Iw,bw=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,s=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===s&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,o.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),Ow=bw,Pw=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],Rw=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,m()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(E()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,o.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,i=e.maxQuality,s=e.qualityAdjustStep,r=e.trackingSceneKeys,o=(0,a.Z)(e,Pw);this.pixelRatio=t,this.minQuality=n,this.maxQuality=i,this.qualityAdjustStep=s,this.trackingSceneKeys=r,this.fpsTracker=new Ow(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),ww=Rw,xw=["Enable"],kw=function(e){function t(t){return e.call(this,t)||this}(0,o.Z)(t,e);var i=t.prototype;return i.boot=function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start=function(){e.prototype.start.call(this)},i.updateFps=function(e){void 0===e&&(e=60),this.getFps()!==e&&this.setFps(e)},i.getFps=function(){return this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf?this.scene.game.loop.raf.fps:5},i.setFps=function(e){this.scene.game&&this.scene.game.loop&&this.scene.game.loop.raf&&"function"===typeof this.scene.game.loop.raf.updateFps&&this.scene.game.loop.raf.updateFps(e)},i.addExtraGameObjectMethods=function(){var e=new g(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},i.addExtraFBInstantFunctions=function(){var e=new d.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,e.injectTournament(),this.facebook.progressLoading=new Cw(this)},i.addPlugins=function(){this.plugins.install("Storage",Xi,!0,"storage"),this.plugins.install("Rollbar",Ct,!0,"rollbar"),this.plugins.install("AdsManager",x,!0,"ads"),this.plugins.install("AuthManager",ee,!0,"auth"),this.plugins.install("AudioManager",Y,!0,"audio"),this.plugins.install("WorldManager",ra,!0,"world"),this.plugins.install("PlayerManager",tt,!0,"player"),this.plugins.install("LanguageManager",vw,!0,"lang"),this.plugins.install("ProfileManager",ht,!0,"profile"),this.plugins.install("AnalyticsManager",L,!0,"analytics"),this.plugins.install("AdaptivePerformance",ww,!0,"performance"),this.plugins.install("VisibilityChangeHandler",Sw,!0,"visibility"),this.plugins.installScenePlugin("textStyler",ta,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Lt,"screen"),this.plugins.installScenePlugin("FrameCapture",ie,"frameCapture"),this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler")},i.addDevPlugins=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,s,r,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,631));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,632));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,633));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,634));case 13:return s=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,635));case 16:return r=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,636));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",s,!0,"profiler"),this.plugins.install("ParticleEditor",r,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.addScenes=function(){this.scene.add(wa.Co.BOOT_SCENE,_a,!0),this.scene.add(wa.Co.LOAD_SCENE,uT,!1),this.scene.add(wa.Co.GAME_SCENE,FS,!1),this.scene.add(wa.Co.LEVEL_SCENE,pw,!1),this.scene.add(wa.Co.JOURNEY_SCENE,dR,!1),this.scene.add(wa.Co.DASHBOARD_SCENE,fI,!1),this.scene.add(wa.Co.GLOBAL_SCENE,US.Z,!1)},i.addDevScenes=function(){var e=(0,r.Z)(u().mark((function e(){var t,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,637));case 4:return t=e.sent.default,e.next=7,n.e(539).then(n.bind(n,638));case 7:i=e.sent.default,this.scene.add(wa.Co.TEST_SCENE,t,!1),this.scene.add(wa.Co.ANIMATIONS_SCENE,i,!1);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initAdsAsync=function(){var e=(0,r.Z)(u().mark((function e(){var t,i,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,Aw.Z.setGame(this),i=Aw.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,639));case 6:a=e.sent.default,i=a;case 8:r=(0,s.Z)({},t.InterstitialAdOptions),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:r,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,s=e.LandscapeRatio,r=e.LandscapeWidth,o=e.LandscapeHeight,c=t,l=e.DisableLandscape,h=e.FullSizeOnLandscape,u=n,d=i,p=a,g=s,f=r,m=o;console.info("\ud83d\ude80 > portraitRatio",u),console.info("\ud83d\ude80 > landscapeRatio",g),this.world.configure({autoResize:c,portraitRatio:u,portraitWidth:d,portraitHeight:p,landscapeRatio:g,landscapeWidth:f,landscapeHeight:m,disableLandscape:l,fullSizeOnLandscape:h}),this.world.resize(e.ForcePixelRatio)},i.initStorage=function(){var e=new Ra(this);this.storage.setInitiator(e)},i.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!1})},i.initVisibilityChangeHandler=function(){this.visibility.configure()},i.initUtils=function(){this.handlePauseAudio()},i.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},i.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},i.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},i.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},i.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},i.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,a.Z)(e,xw);if(t){var i=this.world.getPixelRatio();this.performance.configure((0,s.Z)({pixelRatio:i},n)),this.performance.active()}},i.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:s});var c=document.querySelector("canvas");if(!c)return console.error("Canvas not found");this.canvasRecorder.setCanvas(c);var h=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(l())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/h.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.next=8,d.call(e.canvasRecorder);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))}}},i.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},i.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},i.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),_w=kw,Lw=GameCore.Configs.Debugger.ShowInspector,Mw={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Lw,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,fps:{},render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"low-power",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}};(0,i.j6)();var Dw=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(Dw),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new _w(Mw);window.game=e}catch(t){(0,i.tO)(t)}}())}),50)},625:function(e,t,n){"use strict";n.d(t,{H$:function(){return E},Z5:function(){return v},aV:function(){return S},xB:function(){return A}});var i=n(62),a=n(63),s=n(102),r=n.n(s),o=n(85),c=n.n(o),l=n(46),h=n.n(l),u=n(449),d=n(125),p=GameCore.Configs,g=p.AppId,f=p.OtherHost,m=p.LeadersBoard,v=function(){var e=(0,a.Z)(h().mark((function e(t){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:g,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!m.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:m.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,u.v)("leaderboards",(0,i.Z)({},n,t),{},f);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,a,s,o,l,p,g,v,E,S,A,T;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!m.UseMock){e.next=7;break}return e.next=5,(0,d.qZ)(1e3);case 5:return l=(o=n).limit,p=void 0===l?10:l,g=o.offset,v=void 0===g?0:g,e.abrupt("return",r()(a=c()(s=new Array(p)).call(s,null)).call(a,(function(e,t){var n=(t+1)*(v+1),i=m.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random())};if(i){var s=window.game.player.getPlayer(),r=s.playerId,o=s.name,c=s.photo;a.playerId=r,a.name=o,a.photo=c}return a})));case 7:return E=GameCore.Utils.String.params(n),S="leaderboards/"+t+"/leaders",e.next=11,(0,u.U)(S+"?"+E,{},f);case 11:if((A=e.sent)&&(null==A||!A.error)){e.next=14;break}throw new Error((null==A?void 0:A.error)||"Leaderboard not found");case 14:if(!((T=(null==A?void 0:A.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=T,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(h().mark((function e(t,n,i){var a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.v)("leaderboards/"+t+"/players/"+n,{score:i},{},f);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(h().mark((function e(t,n){var i,a,s,r,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=m.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return s=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,u.U)(a+"?"+s,{},f);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},126:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_RESCUE:"match_rescue",MATCH_END:"match_end",LEVEL_START:"level_start",LEVEL_RESCUE:"level_rescue",LEVEL_END:"level_end",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",DAILY_CHALLENGE_BEGIN:"daily_challenge_begin",DAILY_CHALLENGE_FAIL:"daily_challenge_fail",DAILY_CHALLENGE_END:"daily_challenge_end",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score"}},444:function(e,t,n){"use strict";var i=n(201),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},448:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},450:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(445),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},125:function(e,t,n){"use strict";n.d(t,{Gm:function(){return r},ne:function(){return o},qZ:function(){return s}});var i=n(84),a=n.n(i),s=(n(37),function(e){return new(a())((function(t){return setTimeout(t,e)}))}),r=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},o=function(e){var t=e/1e3,n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60);return{hours:n,minutes:i,seconds:Math.floor(t-3600*n-60*i)}}},200:function(e,t,n){"use strict";n.d(t,{R0:function(){return c},Tv:function(){return r},j6:function(){return a},sw:function(){return s},tO:function(){return l}});n(443),n(131),n(66),n(65);var i=!1,a=function(){var e=setInterval((function(){window.Sentry&&(clearInterval(e),console.warn({isSentryEnabled:i}))}),100)},s=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},r=function(e){window.Sentry&&window.Sentry.setUser(e)},o=function(e){console.error(e)},c=function(e,t){e&&window.Sentry.withScope((function(n){n.setExtras(t),o(e)}))},l=function(e){e&&o(e)}},620:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},s=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,s){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],a=e[h][1],s=e[h][2];for(var o=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,s<r&&(r=s));if(o){e.splice(h--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[i,a,s]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,s,r){if(e[i])e[i].push(a);else{var o,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var s=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=s);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",o.name="ChunkLoadError",o.type=s,o.request=r,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,s,r=i[0],o=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var h=c(n)}for(t&&t(i);l<r.length;l++)s=r[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(h)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(641)})),n.O(void 0,[216,630,542],(function(){return n(642)})),n.O(void 0,[216,630,542],(function(){return n(472)})),n.O(void 0,[216,630,542],(function(){return n(436)})),n.O(void 0,[216,630,542],(function(){return n(643)})),n.O(void 0,[216,630,542],(function(){return n(564)})),n.O(void 0,[216,630,542],(function(){return n(644)}));var i=n.O(void 0,[216,630,542],(function(){return n(580)}));i=n.O(i)})();